---
sidebar_position: 2
---

# 🖼️ 产生背景

## 一、CoCo 编辑器的问题

### 1. 缺陷得不到解决

CoCo 编辑器有许多的 BUG 和一些基础功能的缺失。如：作品中莫名其妙出现“undefined 积木”；自定义控件不能移除。但是，从 2023年3月29日 到现在，CoCo 一直没有解决这些问题。

### 2. 为了“安全”妥协

在 2024年2月19日，CoCo 限制了导入“自定义控件”的作品进行分享及协作。除此之外，CoCo 近些年还添加了诸多其他限制，如：HTTP 代理不能用来加载网页了。

自定义控件和 HTTP 代理加载网页是 CoCo 的核心优势。

在编程猫的编辑器中，只有 CoCo 有自定义控件功能。通过自定义控件，CoCo 编辑器编写代码便携程度以及与外部交互的能力得到了极大的提升，很多 CoCo 缺失的内容，都可以通过自定义控件来补充。很多 CoCo 用户会在 CoCo 作品使用好几十个自定义控件。

HTTP 代理加载网页可以让其他域名的界面轻松使用编程猫的服务。著名的 [CoCo Pro](https://gitee.com/oldsquaw/coco) 以及青柠绕审核以前就使用 HTTP 代理来加载。

这些限制大大降低了 CoCo 的使用体验，给社区用户带来的极大影响。维护社区的健康与安全本身无可厚非，但是这样以损失核心优势为代价未免有些得不偿失。

况且，虽然一次又一次地加强限制，但是盗号事件的发生频率却不见下降，很多安全限制根本就没有效果。

### 3. 功能得不到完善

目前来看 CoCo 的功能依然很不完善，存在以下功能缺失：

- 基础积木缺失，如：没有临时列表积木。
- 系统功能调用能力缺失，如：不能访问剪切板。

### 4. 缺乏后期维护

受不为社区用户所知的神秘力量的影响，编程猫自 2023 年突然就不咋维护 CoCo 了。~~也许是被资本做局了吧~~ CoCo 已经很长一段时间没有实质性地更新过了，而且控件商城审核经常性暂停，只有偶尔会突然诈尸恢复一下，但过不了两周就又停了。

## 二、社区用户的努力

针对 CoCo 的这些问题，社区用户也做出了不少努力。我们在此简单介绍一些具有代表性的努力成果并分析这些方案普遍存在的问题。

### 1. CoCo 修复工具

#### (1) 作品Undefined修复

链接：https://codemao-guide.yuque.com/bfiekm/sbo5kh/pbpwuf2y6nlvlnvh

作品Undefined修复是用来清楚作品中孤立的影子积木的一个 Node.js 脚本，这些积木通常会显示 undefined。

#### (2) Widget Remover

链接：https://codemao-guide.yuque.com/bfiekm/sbo5kh/vym98wznz81dr1gv

用于移除自定义控件、更新控件商城控件 CDN 链接的自定义控件。

### 2. 绕审核技术

目前最广泛使用的是青柠的绕审核系统：https://www.yuque.com/xunho/horkj/wwtslxcc9qg6krgi

### 3. 第三控件商城

由于官方幽灵般的审核，一些创作者为了便于整合自定义控件，搭建第三方控件商城，以下是主要的几个：

- PICKDUCK-点鸭社区-控件商城：https://shequ.pgaot.com/?mod=cocojs
- 耶椰椰：https://open.lihouse.xyz/ye#/archieve
- CCWidget 控件商城：https://ccwidget.top/%E6%8E%A7%E4%BB%B6%E5%95%86%E5%9F%8E/

### 仍有问题

这些解决方案确实在一定程度上缓解了 CoCo 的许多问题，但是由于不能与 CoCo 深度整合，使用体验很差，存在以下问题：

- 这些内容显示在手册中，需要查看手册才能知道；
- 对萌新来说还是太吃操作了：导入自定义控件还能接受，配置 Node.js、F12 抓包属实是有些超标了；
- 需要按照文档手动操作，很麻烦；

虽然有诸如 [CoCo Pro](https://gitee.com/oldsquaw/coco) 和 BetterCo 这样集成多个优化的项目，但集成度只能说是一言难尽。

除此之外，CoCo 还有些问题是这些方案不太好解决的。

## 三、CoCo Next 的产生

### 1. 从 CoCo 源代码计划开始

面对这样割裂的 CoCo 环境，SLIGHTNING 认识到，只有深度修改 CoCo 本身才能根治这些恼人的问题。但是，没有 CoCo 编辑器代码怎么办？

SLIGHTNING 说：“我把代码逆向出来不就好了吗？”说起来简单做起来却相当复杂：CoCo 的代码量惊人，再加上 webpack 的绝妙优化，这是一个巨大的工程。所以，我们不能把 CoCo 的代码完全逆向出来再做修改，必须边逆向边修改。

这就是 CoCo 源代码计划用来解决的问题。CoCo 源代码计划允许已还原和未还原的代码共存，允许我们边逆向边修改。

### 2. CoCo Next 诞生

待 CoCo 源代码计划 稳定后，SLIGHTNING 创建了 CoCo Next，标志着 CoCo 一个新时代的到来。
