"use strict";(self.webpackChunkcoco_next=self.webpackChunkcoco_next||[]).push([[1345],{2536:(e,t,n)=>{n.r(t),n.d(t,{A:()=>ds,Ab:()=>Vc,Ac:()=>At,Ad:()=>ve,Ae:()=>L,Af:()=>Ni,Ag:()=>a.H,Ah:()=>B,Ai:()=>mi,Aj:()=>hi,B:()=>Dr,Bb:()=>a.i,Bc:()=>er,Bd:()=>Et,Be:()=>ft,Bf:()=>Lr,Bg:()=>a.I,Bh:()=>Nt,Bi:()=>Qr,Bj:()=>Ur,C:()=>a.c,Cb:()=>a.j,Cc:()=>Wc,Cd:()=>Ea,Ce:()=>ns,Cf:()=>a.B,Cg:()=>Di,Ch:()=>de,Ci:()=>Ze,Cj:()=>ea,D:()=>bn,Db:()=>a.k,Dc:()=>_a,Dd:()=>Ia,De:()=>re,Df:()=>xn,Dg:()=>a.J,Dh:()=>fi,Di:()=>qi,Dj:()=>na,E:()=>ni,Eb:()=>a.l,Ec:()=>k,Ed:()=>Bn,Ee:()=>St,Ef:()=>ri,Eg:()=>a.K,Eh:()=>Ci,Ei:()=>G,Ej:()=>w,F:()=>Qn,Fb:()=>Ec,Fc:()=>A,Fd:()=>On,Fe:()=>Br,Ff:()=>Xn,Fg:()=>hc,Fh:()=>ji,Fi:()=>U,Fj:()=>ss,G:()=>Kn,Gb:()=>ka,Gc:()=>V,Gd:()=>Cn,Ge:()=>Ei,Gf:()=>qn,Gg:()=>Ta,Gh:()=>tn,Gi:()=>on,Gj:()=>Tt,H:()=>dn,Hb:()=>Pa,Hc:()=>Pt,Hd:()=>wn,He:()=>Wr,Hf:()=>ln,Hg:()=>Na,Hh:()=>Xs,Hi:()=>Mn,Hj:()=>wt,I:()=>ua,Ib:()=>gi,Ic:()=>ue,Id:()=>Dn,Ie:()=>$r,If:()=>da,Ig:()=>Pn,Ih:()=>a.L,Ii:()=>An,Ij:()=>a.N,J:()=>ps,Jb:()=>jn,Jc:()=>pi,Jd:()=>Tn,Je:()=>ta,Jf:()=>fs,Jg:()=>Sr,Jh:()=>a.M,Ji:()=>Wn,Jj:()=>a.O,K:()=>va,Kb:()=>wr,Kc:()=>Li,Kd:()=>Ra,Ke:()=>_,Kf:()=>ga,Kg:()=>ir,Kh:()=>dt,Ki:()=>Rn,Kj:()=>a.P,L:()=>sa,Lb:()=>ar,Lc:()=>Ri,Ld:()=>La,Le:()=>cs,Lf:()=>oa,Lg:()=>lr,Lh:()=>Gr,Li:()=>Sn,Lj:()=>a.Q,M:()=>yn,Mb:()=>dr,Mc:()=>en,Md:()=>Ii,Me:()=>kt,Mf:()=>vn,Mg:()=>ur,Mh:()=>Hr,Mi:()=>Ln,Mj:()=>a.R,N:()=>Jn,Nb:()=>or,Nc:()=>Qs,Nd:()=>qr,Ne:()=>_t,Nf:()=>un,Ng:()=>sr,Nh:()=>Rs,Ni:()=>Vn,Nj:()=>a.S,O:()=>a.d,OPEN_CONFIRM_DIALOG:()=>k,Ob:()=>cr,Oc:()=>ut,Od:()=>Xe,Oe:()=>ac,Of:()=>zn,Og:()=>$a,Oh:()=>to,Oi:()=>_n,Oj:()=>a.T,P:()=>a.e,Pb:()=>Za,Pc:()=>Mr,Pd:()=>Ki,Pe:()=>Gc,Pf:()=>a.C,Pg:()=>ro,Ph:()=>Vs,Pi:()=>J,Pj:()=>Fc,Q:()=>a.f,Qb:()=>no,Qc:()=>Fr,Qd:()=>M,Qe:()=>s,Qf:()=>a.D,Qg:()=>Ar,Qh:()=>rn,Qi:()=>H,Qj:()=>o,R:()=>a.g,Rb:()=>Or,Rc:()=>Cs,Rd:()=>W,Re:()=>l,Rf:()=>a.E,Rg:()=>Ms,Rh:()=>io,Ri:()=>Qt,Rj:()=>p,S:()=>Ft,Sb:()=>Us,Sc:()=>eo,Sd:()=>sn,Se:()=>u,Sf:()=>a.F,Sg:()=>ee,Sh:()=>ct,Si:()=>K,Sj:()=>a.U,T:()=>Gn,Tb:()=>$,Tc:()=>Ns,Td:()=>Nn,Te:()=>yr,Tf:()=>Ht,Tg:()=>qc,Th:()=>fr,Ti:()=>Yi,Tj:()=>a.V,U:()=>Zn,UPDATE_EXTENSION_WIDGET_LIST:()=>l,Ub:()=>Kc,Uc:()=>nn,Ud:()=>Y,Ue:()=>Tr,Uf:()=>$n,Ug:()=>ii,Uh:()=>xr,Ui:()=>Xi,Uj:()=>d,V:()=>Ji,Vb:()=>ai,Vc:()=>ao,Vd:()=>F,Ve:()=>Cr,Vf:()=>Fn,Vg:()=>O,Vh:()=>Ss,Vi:()=>we,Vj:()=>vr,W:()=>Wt,Wb:()=>S,Wc:()=>it,Wd:()=>qt,We:()=>hr,Wf:()=>zi,Wg:()=>ti,Wh:()=>zc,Wi:()=>be,Wj:()=>_r,X:()=>bs,Xb:()=>ei,Xc:()=>pr,Xd:()=>z,Xe:()=>os,Xf:()=>Ut,Xg:()=>N,Xh:()=>Jr,Xi:()=>Je,Xj:()=>Rr,Y:()=>ys,Yb:()=>D,Yc:()=>br,Yd:()=>Hi,Ye:()=>Ua,Yf:()=>xs,Yg:()=>Bt,Yh:()=>oe,Yi:()=>ye,Yj:()=>kr,Z:()=>hs,Zb:()=>P,Zc:()=>ws,Zd:()=>Qi,Ze:()=>Ka,Zf:()=>vs,Zg:()=>pe,Zh:()=>Ha,Zi:()=>me,Zj:()=>us,a:()=>Wa,ab:()=>Si,ac:()=>Vt,ad:()=>Jc,ae:()=>_e,af:()=>Oc,ag:()=>ks,ah:()=>Ga,ai:()=>Ja,aj:()=>Xc,ak:()=>r.f,b:()=>za,bb:()=>Gi,bc:()=>le,bd:()=>Yr,be:()=>fe,bf:()=>Mc,bg:()=>Oi,bh:()=>Yc,bi:()=>pt,bj:()=>Gt,c:()=>Uc,cb:()=>a.h,cc:()=>di,cd:()=>se,ce:()=>Ye,cf:()=>$t,cg:()=>Fi,ch:()=>ya,ci:()=>he,cj:()=>r.d,d:()=>Zt,db:()=>rt,dc:()=>Mi,dd:()=>c,de:()=>xe,default:()=>co,df:()=>Fs,dg:()=>a.G,dh:()=>Da,di:()=>Ke,dj:()=>r.e,e:()=>Gs,eb:()=>oi,ec:()=>Ma,ed:()=>Ya,ee:()=>Ie,ef:()=>ot,eg:()=>at,eh:()=>Ir,ei:()=>ne,ej:()=>g,f:()=>ms,fb:()=>ci,fc:()=>qa,fd:()=>Fa,fe:()=>Qc,ff:()=>ba,fg:()=>ui,fh:()=>Xt,fi:()=>Kt,fj:()=>Te,g:()=>st,gb:()=>gn,gc:()=>Hc,gd:()=>Ee,ge:()=>Mt,gf:()=>Oa,gg:()=>si,gh:()=>ec,gi:()=>Jt,gj:()=>nt,h:()=>fa,hb:()=>yi,hc:()=>Es,hd:()=>lt,he:()=>v,hf:()=>Pr,hg:()=>In,hh:()=>Cc,hi:()=>m,hj:()=>Dc,i:()=>Sa,ib:()=>Sc,ic:()=>xa,id:()=>ze,ie:()=>ke,if:()=>Er,ig:()=>vi,ih:()=>rc,ii:()=>cn,ij:()=>yt,j:()=>jr,jb:()=>hn,jc:()=>Aa,jd:()=>Un,je:()=>tt,jf:()=>Vr,jg:()=>kn,jh:()=>pc,ji:()=>jc,jj:()=>gt,k:()=>mr,kb:()=>nr,kc:()=>gr,kd:()=>te,ke:()=>Zi,kf:()=>As,kg:()=>rr,kh:()=>y,ki:()=>wi,kj:()=>mt,l:()=>Nr,lb:()=>mn,lc:()=>$i,ld:()=>zt,le:()=>tc,lf:()=>a.z,lg:()=>En,lh:()=>oc,li:()=>Ue,lj:()=>dc,m:()=>Os,mb:()=>Ks,mc:()=>nc,md:()=>Yt,me:()=>Ac,mf:()=>a.A,mg:()=>qs,mh:()=>jt,mi:()=>He,mj:()=>b,n:()=>X,nb:()=>pn,nc:()=>Lc,nd:()=>I,ne:()=>xt,nf:()=>Z,ng:()=>fn,nh:()=>ts,ni:()=>Ce,nj:()=>cc,o:()=>ia,ob:()=>js,oc:()=>lc,od:()=>an,oe:()=>vt,of:()=>ca,og:()=>Ps,oh:()=>yc,oi:()=>Ne,oj:()=>Ct,p:()=>Qa,pb:()=>Zs,pc:()=>x,pd:()=>Rc,pe:()=>It,pf:()=>Xa,pg:()=>$s,ph:()=>mc,pi:()=>Ge,pj:()=>$c,q:()=>Hs,qb:()=>Bs,qc:()=>sc,qd:()=>_i,qe:()=>uc,qf:()=>Ys,qg:()=>Ws,qh:()=>De,qi:()=>Be,qj:()=>bc,r:()=>Js,rb:()=>Vi,rc:()=>Rt,rd:()=>We,re:()=>f,rf:()=>zs,rg:()=>Bi,rh:()=>j,ri:()=>je,rj:()=>gc,s:()=>gs,sb:()=>Wi,sc:()=>es,sd:()=>Fe,se:()=>ic,sf:()=>Is,sg:()=>Ui,sh:()=>is,si:()=>Qe,sj:()=>Oe,t:()=>la,tb:()=>bi,tc:()=>_c,td:()=>Le,te:()=>Lt,tf:()=>pa,tg:()=>xi,th:()=>ce,ti:()=>Nc,tj:()=>et,u:()=>ra,ub:()=>zr,uc:()=>xc,ud:()=>Pe,ue:()=>Zc,uf:()=>aa,ug:()=>Kr,uh:()=>wc,ui:()=>ge,uj:()=>C,v:()=>Ds,vb:()=>Xr,vc:()=>Ic,vd:()=>Me,ve:()=>kc,vf:()=>Ls,vg:()=>Zr,vh:()=>li,vi:()=>ht,vj:()=>bt,w:()=>Ts,wb:()=>E,wc:()=>Ae,wd:()=>Ve,we:()=>fc,wf:()=>_s,wg:()=>h,wh:()=>Dt,wi:()=>ha,wj:()=>rs,wrapOpenConfirmDialog:()=>T,wrapShowCommonToastInfo:()=>b,wrapUpdateExtensionWidgetList:()=>p,x:()=>Hn,xb:()=>ki,xc:()=>R,xd:()=>Re,xe:()=>vc,xf:()=>Yn,xg:()=>Ti,xh:()=>tr,xi:()=>ma,xj:()=>ae,y:()=>q,yb:()=>Va,yc:()=>as,yd:()=>qe,ye:()=>Se,yf:()=>Q,yg:()=>Ba,yh:()=>wa,yi:()=>ja,yj:()=>Tc,z:()=>Pi,zb:()=>Ai,zc:()=>ie,zd:()=>Pc,ze:()=>$e,zf:()=>ls,zg:()=>Bc,zh:()=>T,zi:()=>Ca,zj:()=>Ot});var r=n(81124),a=n(98446);const i=n(78698);var c="SET_APP_LANGUAGE",s="UPDATE_EDIT_AREA",o=function(){return{payload:void 0,type:s}},u="UPDATE_PREVIEW_AREA",d=function(){return{payload:void 0,type:u}};const l="UPDATE_EXTENSION_WIDGET_LIST";function p(){return{payload:void 0,type:l}}const f="SHOW_COMMON_TOAST_INFO";function b(e){return{payload:e,type:f}}var x="HIDE_COMMON_TOAST_INFO",y=function(){return{payload:void 0,type:x}},v="SET_USER_INFO",g=function(e){return{payload:e,type:v}},I="SET_FETCH_USER_INFO_DONE",m=function(){return{payload:!0,type:I}},E="ASYNC_SET_USER_INFO",h=function(e){return{payload:e,type:E}};const k="OPEN_CONFIRM_DIALOG";function T(e){return{type:k,payload:e}}var _="TOGGLE_PERMISSION_DIALOG",w=function(e){return{type:_,payload:e}},S="CLOSE_CONFIRM_DIALOG",O=function(){return{type:S,payload:void 0}},A="OPEN_ICON_LIB_DIALOG",D="CLOSE_ICON_LIB_DIALOG",L="SHOW_IMPORT_FAIL_TOAST",C=function(e,t){return{type:L,payload:{importFailResults:e,fileType:t}}},R="HIDE_IMPORT_FAIL_TOAST",j=function(){return{type:R,payload:void 0}},P="CLOSE_PROJECT_DIALOG",N=function(){return{type:P,payload:void 0}},V="OPEN_PROJECT_DIALOG",B=function(e){return{type:V,payload:{selected:e}}},W="SET_PROJECT_MODIFIED",U=function(e){return{payload:e,type:W}},M="SET_PROJECT_LAST_SAVED_TIME",G=function(e){return{type:M,payload:e}},F="SET_PROJECT_SAVE_PROGRESS_DIALOG",H=function(e){return{payload:e,type:F}},Y="SET_PROJECT_SAVE_PROGRESS",J=function(e){return{payload:e,type:Y}},z="SET_PROJECT_SAVING",K=function(e){return{payload:e,type:z}},q="ASYNC_CANCEL_SAVE_PROJECT",Q=function(){return{payload:void 0,type:q}},X="APPEND_MESSAGE_TO_CONSOLE",Z=function(e){return{type:X,payload:e}},$="CLEAR_CONSOLE_MESSAGE",ee=function(){return{type:$,payload:void 0}},te="SET_CONSOLE_HEIGHT",ne=function(e){return{type:te,payload:e}},re="SHOW_STAGE_TOAST",ae=function(e,t){return{type:re,payload:{toast:e,showIcon:t}}},ie="HIDE_STAGE_TOAST",ce=function(){return{type:ie,payload:void 0}},se="SET_ACTOR_DRAGGING",oe=function(e){return{type:se,payload:e}},ue="OPEN_SIGN_IN_DIALOG",de=function(e){return{type:ue,payload:{onSuccess:e}}},le="CLOSE_SIGN_IN_DIALOG",pe=function(){return{type:le,payload:void 0}},fe="SET_STAGE_RULER_VISIBLE",be=function(e){return{type:fe,payload:e}},xe="SET_STAGE_VISIBLE",ye=function(e){return{type:xe,payload:e}},ve="SET_IS_HOVER_BLOCK_AREA",ge=function(e){return{type:ve,payload:e}},Ie="SET_STAGE_WIDTH",me=function(e){return{type:Ie,payload:e}},Ee="SET_BLOCKY_TOOLBOX_PINED",he=function(e){return{type:Ee,payload:e}},ke="SET_WIDGET_ATTRIBUTE_VISIBLE",Te=function(e){return{type:ke,payload:e}},_e="SET_RIGHT_SIDE_ACTIVE_MENU",we=function(e){return{type:_e,payload:e}},Se="SHOW_GRID_DIALOG",Oe=function(e){return{type:Se,payload:e}},Ae="HIDE_GRID_DIALOG",De=function(){return{type:Ae,payload:void 0}},Le="SET_GRID_COPIED_CONTENT",Ce=function(e,t){return{type:Le,payload:{rowId:e,columnId:t}}},Re="SET_GRID_SELECTED_CONTENT",je=function(e,t){return{type:Re,payload:{rowId:e,columnId:t}}},Pe="SET_GRID_EDITING_HEADER",Ne=function(e){return{type:Pe,payload:{columnId:e}}},Ve="SET_GRID_ERROR_HEADERS",Be=function(e){return{type:Ve,payload:{columnIds:e}}},We="SET_GRID_ANIMATION_HEADERS",Ue=function(e){return{type:We,payload:{columnIds:e}}},Me="SET_GRID_ERROR_CELL",Ge=function(e){return{type:Me,payload:{errorCells:e}}},Fe="SET_GRID_COLUMN_CUSTOM_WIDTH",He=function(e){return{type:Fe,payload:e}},Ye="SET_STAGE_SCALE",Je=function(e){return{type:Ye,payload:e}},ze="SET_COLL_AUTO_SAVE",Ke=function(e){return{type:ze,payload:e}},qe="SET_HISTORY_ARCHIVE_ID",Qe=function(e){return{type:qe,payload:e}},Xe="SET_PROJECT_EDIT_PERMISSION",Ze=function(e){return{type:Xe,payload:e}},$e="SHOW_HISTORY_DIALOG",et=function(e){return{type:$e,payload:e}},tt="SET_WIDGET_MALL_VISIBLE",nt=function(e){return{type:tt,payload:e}},rt="ASYNC_INITIAL_MY_EXTENSION_WIDGETS",at=function(){return{type:rt,payload:void 0}},it="REPLACE_MY_EXTENSION_WIDGETS",ct=function(e){return{type:it,payload:{widgets:e}}},st="ADD_MY_EXTENSION_WIDGETS",ot=function(e){return{type:st,payload:{widgets:e}}},ut="REMOVE_MY_EXTENSION_WIDGETS",dt=function(e){return{type:ut,payload:{widgetTypes:e}}},lt="SET_BLOCK_IMAGE_DIALOG_INFO",pt=function(e,t){return{type:lt,payload:{visible:e,imgSrc:t}}},ft="SHOW_RELEASE_INFO_DIALOG",bt=function(e){return{type:ft,payload:e}},xt="",yt=function(e,t,n,r,a){return{type:xt,payload:{widgetName:e,visible:t,cloudDBId:n,isProd:r,callback:a}}},vt="SHOW_CLOUD_DB_MANAGER_DIALOG",gt=function(e){return{type:vt,payload:e}},It="SHOW_CLOUD_DB_PUBLISH_DIALOG",mt=function(e,t,n){return{type:It,payload:{visible:e,type:t,callback:n}}},Et="SET_IS_OFF_LINE",ht=function(e){return{type:Et,payload:e}},kt="TOGGLE_SLIDER_IMAGE_DIALOG",Tt=function(e){return{type:kt,payload:e}},_t="TOGGLE_SWITCH_IMAGE_DIALOG",wt=function(e){return{type:_t,payload:e}},St="SHOW_TABLE_DATA_DIALOG",Ot=function(e){return{type:St,payload:e}},At="HIDE_TABLE_DATA_DIALOG",Dt=function(){return{type:At,payload:void 0}},Lt="SHOW_CREATE_TABLE_DATA_DIALOG",Ct=function(e){return{type:Lt,payload:e}},Rt="HIDE_CREATE_TABLE_DATA_DIALOG",jt=function(){return{type:Rt,payload:void 0}},Pt="OPEN_RICH_TEXT_EDITOR_DIALOG",Nt=function(e){return{type:Pt,payload:e}},Vt="CLOSE_RICH_TEXT_EDITOR_DIALOG",Bt=function(){return{type:Vt,payload:void 0}},Wt="ASYNC_GET_TEMPLATE_LIST",Ut=function(){return{payload:void 0,type:Wt}},Mt="SET_TEMPLATE_LIST",Gt=function(e){return{payload:e,type:Mt}},Ft="ASYNC_GET_COURSE_LIST",Ht=function(){return{payload:void 0,type:Ft}},Yt="SET_COURSE_LIST",Jt=function(e){return{payload:e,type:Yt}},zt="SET_COURSE_DIALOG_VISIBLE",Kt=function(e){return{payload:e,type:zt}},qt="SET_PROJECT_SAVE_PROMPT",Qt=function(e){return{payload:e,type:qt}},Xt={withClose:!1,visible:!0},Zt="ADD_FLOAT_ICON",$t=function(e){return{payload:i.a(i.a({},Xt),e),type:Zt}},en="REMOVE_FLOAT_ICON",tn=function(e){return{payload:e,type:en}},nn="REPLACE_FLOAT_ICON",rn=function(e,t){return{payload:{name:e,icon:i.a(i.a({},Xt),t)},type:nn}},an="SET_FLOAT_ICON_VISIBLE_STATUS",cn=function(e,t){return{payload:{name:e,visible:t},type:an}},sn="SET_PROJECT_OPEN_FINISHED",on=function(e){return{payload:e,type:sn}};function un(e,t){return new Promise(function(n,r){var a=i.a(i.a({},t),{},{reject:r,resolve:n});e(a)})}var dn="ASYNC_CREATE_PROJECT_SCREEN",ln=function(e){return{payload:{index:e},type:dn}},pn="ASYNC_REMOVE_PROJECT_SCREEN",fn=function(e,t){return{type:pn,payload:{screenId:e,isEmitOT:t}}},bn="ASYNC_COPY_PROJECT_SCREEN",xn=function(e){return{type:bn,payload:{screenId:e}}},yn="ASYNC_DELETE_PROJECT_WIDGET",vn=function(e,t,n){return{payload:{screenId:t,widgetId:e,isEmitOT:n},type:yn}},gn="ASYNC_INSERT_PROJECT_WIDGET",In=function(e,t,n,r,a){return{payload:{screenId:e,widgetType:t,position:n,attributes:r,setBlockValue:a},type:gn}},mn="ASYNC_REGISTER_EXTENSION_WIDGET",En=function(e){return{type:mn,payload:{widgetType:e}}},hn="ASYNC_PACKAGE_PROJECT",kn=function(){return{payload:void 0,type:hn}},Tn="SET_PACKAGING_PROJECT",_n=function(e,t){return{payload:{isPackaging:e,packageUrl:t},type:Tn}},wn="SET_PACKAGE_PROJECT_PROGRESS_VISIBLE",Sn=function(e){return{payload:{packageProgressVisible:e},type:wn}},On="SET_PACKAGE_PROGRESS_DIALOG_VISIBLE",An=function(e){return{payload:{packageDialogVisible:e},type:On}},Dn="SET_PACKAGE_QRCODE_DIALOG_VISIBLE",Ln=function(e){return{payload:{packageQrCodeVisible:e},type:Dn}},Cn="SET_PACKAGE_PROJECT_PROGRESS",Rn=function(e){return{payload:{packageProgress:e},type:Cn}},jn="ASYNC_UPDATE_PROJECT_PACKAGE_PROGRESS",Pn=function(){return{type:jn,payload:null}},Nn="SET_PROJECT_PACKAGE_TASK_LABEL",Vn=function(e){return{type:Nn,payload:{label:e}}},Bn="SET_PACKAGE_INFO",Wn=function(e){return{payload:e,type:Bn}},Un="SET_COMPLETE_PACKAGE_DIALOG",Mn=function(e){return{payload:{packageCompleteVisible:e},type:Un}},Gn="ASYNC_GET_PACKAGE_INFO",Fn=function(){return{payload:null,type:Gn}},Hn="ASYNC_CANCEL_PACKAGE",Yn=function(){return{payload:null,type:Hn}},Jn="ASYNC_EXPORT_PROJECT_AS_JSON",zn=function(e){return{payload:{shouldCloneCloud:e},type:Jn}},Kn="ASYNC_CREATE_PROJECT",qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{payload:{json:e.json,jsonFrom:e.jsonFrom,lastSavedTime:e.lastSavedTime,isAuthor:e.isAuthor,isCollWork:e.isCollWork,projectId:e.projectId,editPermission:e.editPermission,sourceTag:e.sourceTag,sourceId:e.sourceId},type:Kn}},Qn="ASYNC_CREATE_PLAYER_PROJECT",Xn=function(e){return{payload:{json:e},type:Qn}},Zn="ASYNC_GET_PROJECT_ERROR",$n=function(e){return{payload:{code:e.code},type:Zn}},er="IMPORT_PROJECT_FROM_TO_DOC",tr=function(e){return{type:er,payload:{json:e}}},nr="ASYNC_PLAY_PROJECT",rr=function(e){return{payload:{isPlayCurrentScreen:e},type:nr}},ar="ASYNC_UPDATE_PROJECT_WIDGET_ATTRIBUTE",ir=function(e,t,n){return{payload:{widgetId:e,key:t,value:n},type:ar}},cr="ASYNC_UPDATE_PROJECT_WIDGET_TITLE",sr=function(e,t,n,r,a){return{payload:{widgetId:e,title:t,shouldUpdatePreviewArea:n,shouldUpdateEditArea:r,isEmitOT:a},type:cr}},or="ASYNC_UPDATE_PROJECT_WIDGET_IDS",ur=function(e,t,n,r,a,i){return{payload:{screenId:e,widgetId:t,widgetIds:n,shouldUpdatePreviewArea:r,shouldUpdateEditArea:a,isEmitOT:i},type:or}},dr="ASYNC_UPDATE_PROJECT_WIDGET_COMMON_ATTRIBUTE",lr=function(e,t,n,r,a,i,c){return{payload:{widgetId:e,key:t,value:n,shouldUpdatePreviewArea:r,shouldUpdateEditArea:a,isEmitOT:i,isBasePropertyPriority:c},type:dr}},pr="REPLACE_PROJECT",fr=function(e){return{type:pr,payload:{project:e}}},br="REPLACE_PROJECT_ID",xr=function(e){return{type:br,payload:{projectId:e}}},yr="UPDATE_PROJECT_BCM_URL",vr=function(e){return{type:yr,payload:{bcmUrl:e}}},gr="DELETE_PROJECT_SCREEN",Ir=function(e){return{payload:{screenId:e},type:gr}},mr="ADD_PROJECT_SCREEN",Er=function(e,t){return{payload:{screen:e,index:t},type:mr}},hr="UPDATE_PROJECT_SCREEN_TITLE",kr=function(e,t){return{type:hr,payload:{screenId:e,title:t}}},Tr="UPDATE_PROJECT_SCREEN_COMMON_ATTRIBUTE",_r=function(e,t,n){return{type:Tr,payload:{screenId:e,key:t,value:n}}},wr="ASYNC_UPDATE_PROJECT_SCREEN_COMMON_ATTRIBUTE",Sr=function(e,t,n,r){return{type:wr,payload:{screenId:e,key:t,value:n,isEmitOT:r}}},Or="CHANGE_PROJECT_TITLE",Ar=function(e){return{type:Or,payload:{title:e}}},Dr="ASYNC_CHANGE_PROJECT_TITLE",Lr=function(e,t){return{type:Dr,payload:{title:e,isEmitOT:t}}},Cr="UPDATE_PROJECT_SCREEN_SNAPSHOT",Rr=function(e,t){return{type:Cr,payload:{screenId:e,snapshot:t}}},jr="ADD_PROJECT_GLOBAL_WIDGET",Pr=function(e){return{payload:{widgetId:e},type:jr}},Nr="ADD_PROJECT_WIDGET",Vr=function(e,t,n){return{payload:{screenId:e,widgetId:t,isInvisibleWidget:n},type:Nr}},Br="SORT_PROJECT_GLOBAL_WIDGET_IDS",Wr="SORT_PROJECT_SCREEN_WIDGET_IDS",Ur=function(e,t,n){return{type:Wr,payload:{widgetIds:t,screenId:e,isInvisibleWidget:n}}},Mr="REMOVE_PROJECT_GLOBAL_WIDGET",Gr=function(e){return{payload:{widgetId:e},type:Mr}},Fr="REMOVE_PROJECT_WIDGET",Hr=function(e,t,n){return{payload:{screenId:e,widgetId:t,isInvisibleWidget:n},type:Fr}},Yr="SELECT_PROJECT_WIDGET",Jr=function(e){return{payload:{widgetId:e},type:Yr}},zr="ASYNC_SELECT_PROJECT_WIDGET",Kr=function(e,t){return{payload:{widgetId:e,isEmitOT:t},type:zr}},qr="SET_PROJECT_CURRENT_SCREEN_INDEX",Qr=function(e){return{payload:e,type:qr}},Xr="ASYNC_SET_PROJECT_CURRENT_SCREEN_INDEX",Zr=function(e,t){return{payload:{index:e,shouldSaveCurrentData:t},type:Xr}},$r="START_PLAYING_PROJECT",ea=function(){return{payload:void 0,type:$r}},ta="STOP_PLAYING_PROJECT",na=function(){return{payload:void 0,type:ta}},ra="ASYNC_ADD_PRIMITIVE_VARIABLE",aa=function(e,t,n,r,a,i,c,s){return{payload:{variableType:e,id:t,name:n,defaultValue:r,screenId:a,index:i,setBlockValue:c,isEmitOT:s},type:ra}},ia="ASYNC_ADD_ARRAY_VARIABLE",ca=function(e,t,n,r,a,i,c,s){return{payload:{arrayType:e,id:t,name:n,defaultValue:r,screenId:a,setBlockValue:c,isEmitOT:s,index:i},type:ia}},sa="ASYNC_DELETE_PRIMITIVE_VARIABLE",oa=function(e,t,n,r){return{payload:{variableType:e,id:t,screenId:n,isEmitOT:r},type:sa}},ua="ASYNC_DELETE_ARRAY_VARIABLE",da=function(e,t,n,r){return{payload:{arrayType:e,id:t,screenId:n,isEmitOT:r},type:ua}},la="ASYNC_ADD_OBJECT_VARIABLE",pa=function(e){return{payload:e,type:la}},fa="ADD_OBJECT_VARIABLE",ba=function(e){return{payload:e,type:fa}},xa="DELETE_OBJECT_VARIABLE",ya=function(e,t,n){return{payload:{scopeType:e,id:t,screenId:n},type:xa}},va="ASYNC_DELETE_OBJECT_VARIABLE",ga=function(e,t,n,r){return{payload:{scopeType:e,id:t,screenId:n,isEmitOT:r},type:va}},Ia="SET_OBJECT_VARIABLE_NAME",ma=function(e,t,n,r){return{payload:{scopeType:e,id:t,name:n,screenId:r},type:Ia}},Ea="SET_OBJECT_VARIABLE_DEFAULT_VALUE",ha=function(e,t,n,r){return{payload:{scopeType:e,id:t,defaultValue:n,screenId:r},type:Ea}},ka="ASYNC_UPDATE_OBJECT_VARIABLE_PROPERTY",Ta=function(e){return{type:ka,payload:e}},_a="MOVE_PROJECT_SCREEN",wa=function(e,t){return{type:_a,payload:{from:e,to:t}}},Sa="ADD_PRIMITIVE_VARIABLE",Oa=function(e,t,n,r,a,i){return{payload:{variableType:e,id:t,name:n,defaultValue:r,screenId:a,index:i},type:Sa}},Aa="DELETE_PRIMITIVE_VARIABLE",Da=function(e,t,n){return{payload:{variableType:e,id:t,screenId:n},type:Aa}},La="SET_PRIMITIVE_VARIABLE_NAME",Ca=function(e,t,n,r){return{payload:{variableType:e,id:t,name:n,screenId:r},type:La}},Ra="SET_PRIMITIVE_VARIABLE_DEFAULT_VALUE",ja=function(e,t,n,r){return{payload:{variableType:e,id:t,defaultValue:n,screenId:r},type:Ra}},Pa="ASYNC_UPDATE_PRIMITIVE_VARIABLE_PROPERTY",Na=function(e,t,n,r,a,i){return{type:Pa,payload:{variableType:e,id:t,key:n,value:r,screenId:a,isEmitOT:i}}},Va="ASYNC_UPDATE_ARRAY_VARIABLE_PROPERTY",Ba=function(e,t,n,r,a,i){return{type:Va,payload:{arrayType:e,id:t,key:n,value:r,screenId:a,isEmitOT:i}}},Wa="ADD_ARRAY_VARIABLE",Ua=function(e,t,n,r,a,i){return{payload:{arrayType:e,id:t,name:n,defaultValue:r,screenId:a,index:i},type:Wa}},Ma="DELETE_ARRAY_VARIABLE",Ga=function(e,t,n){return{payload:{arrayType:e,id:t,screenId:n},type:Ma}},Fa="SET_ARRAY_VARIABLE_NAME",Ha=function(e,t,n,r){return{payload:{arrayType:e,id:t,name:n,screenId:r},type:Fa}},Ya="SET_ARRAY_VARIABLE_DEFAULT_VALUE",Ja=function(e,t,n,r){return{payload:{arrayType:e,id:t,defaultValue:n,screenId:r},type:Ya}},za="ADD_BROADCAST",Ka=function(e,t,n){return{payload:{name:e,screenId:t,index:n},type:za}},qa="DELETE_BROADCAST",Qa="ASYNC_ADD_BROADCAST",Xa=function(e,t,n,r,a){return{payload:{name:e,screenId:t,setBlockValue:r,index:n,isEmitOT:a},type:Qa}},Za="CHANGE_CONTEXT_MENU_INFO",$a=function(e){return{payload:e,type:Za}},ei="CLOSE_CONTEXT_MENU",ti=function(){return{type:ei,payload:void 0}},ni="ASYNC_COPY_WIDGET_TO_SCREEN",ri=function(e,t){return{type:ni,payload:{widgetCloneList:e,screenId:t}}},ai="CLEAR_PROJECT",ii=function(){return{type:ai,payload:void 0}},ci="ASYNC_INSERT_BRUSH_WIDGET",si=function(e,t){return{type:ci,payload:{widgetId:e,position:t}}},oi="ASYNC_INSERT_ACTOR_WIDGET",ui=function(e,t){return{type:oi,payload:{widgetId:e,position:t}}},di="CLOSE_STYLE_DIALOG",li=function(){return{type:di}},pi="OPEN_STYLE_DIALOG",fi=function(e,t){return{type:pi,payload:{actorId:e,onSelect:t}}},bi="ASYNC_SAVE_PROJECT",xi=function(e){return{payload:{isUpdate:e.isUpdate,isAutoSave:e.isAutoSave,isNeedReport:e.isNeedReport,isSaveAs:e.isSaveAs},type:bi}},yi="ASYNC_LOCATE_BLOCK_POSITION",vi=function(e,t){return{type:yi,payload:{blockId:e,screenId:t}}},gi="ASYNC_UPDATE_PROJECT_API_TOKEN",Ii="SET_PROJECT_API_TOKEN",mi=function(e){return{type:Ii,payload:{token:e}}},Ei="SORT_PROJECT_SCREEN",hi=function(e){return{type:Ei,payload:{screens:e}}},ki="SORT_SCREEN_BY_SCREEN_IDS",Ti=function(e){return{type:ki,payload:{screenIds:e}}},_i="SET_FOCUSED_WORKSPACE_AREA",wi=function(e){return{type:_i,payload:{area:e}}},Si="ASYNC_INITIAL_CLOUD_DB_DATA",Oi=function(){return{type:Si,payload:void 0}},Ai="ASYNC_UPDATE_CLOUD_DATABASE_FIELDS",Di=function(e,t,n){return{type:Ai,payload:{widgetId:e,fields:t,setBlockValue:n}}},Li="PUBLISH_WORK_TO_COMMUNITY",Ci=function(e,t,n,r){return{type:Li,payload:{name:e,description:t,operation:n,coverUrl:r}}},Ri="PUBLISH_WORK_TO_H5",ji=function(e){return{type:Ri,payload:{info:e}}},Pi="ASYNC_CHANGE_DATA_VIEWER_TEMPLATE",Ni=function(e,t,n){return{type:Pi,payload:{widgetId:e,templateType:t,onSuccess:n}}},Vi="ASYNC_RESET_DATA_VIEWER_BINDINGS",Bi=function(e,t){return{type:Vi,payload:{gridId:e,deleteColumnIdList:t}}},Wi="ASYNC_REVERT_HISTORY_VERSION",Ui=function(e){return{type:Wi,payload:{archiveId:e}}},Mi="COLL_SET_DOC",Gi="ASYNC_INITIAL_CLOUD_DB_WIDGET",Fi=function(){return{type:Gi,payload:void 0}},Hi="SET_PROJECT_SHARE_INFO",Yi=function(e){return{payload:e,type:Hi}},Ji="ASYNC_GET_PROJECT_SHARE_INFO",zi=function(e){return{payload:{callback:e},type:Ji}},Ki="SET_PROJECT_JSON_FROM",qi=function(e){return{type:Ki,payload:e}},Qi="SET_PROJECT_SOURCE",Xi=function(e){return{type:Qi,payload:e}},Zi="SHOW_BLOCKS_DROPDOWN",$i="HIDE_BLOCKS_DROPDOWN",ec=function(){return{payload:void 0,type:$i}},tc="SHOW_BLOCKS_SLIDER",nc="HIDE_BLOCKS_SLIDER",rc=function(){return{payload:void 0,type:nc}},ac="UPDATE_BLOCKS_SLIDER_VALUE",ic="SHOW_CREATE_DYNAMIC_DATA_DIALOG",cc=function(e){return{payload:e,type:ic}},sc="HIDE_CREATE_DYNAMIC_DATA_DIALOG",oc=function(){return{payload:void 0,type:sc}},uc="SHOW_COMMON_INPUT_DIALOG",dc=function(e){return{payload:e,type:uc}},lc="HIDE_COMMON_INPUT_DIALOG",pc=function(){return{payload:void 0,type:lc}},fc="SHOW_EDIT_ARRAY_DIALOG",bc=function(e){return{payload:e,type:fc}},xc="HIDE_EDIT_ARRAY_DIALOG",yc=function(){return{payload:void 0,type:xc}},vc="SHOW_EDIT_OBJECT_DIALOG",gc=function(e){return{payload:e,type:vc}},Ic="HIDE_EDIT_OBJECT_DIALOG",mc=function(){return{payload:void 0,type:Ic}},Ec="ASYNC_UPDATE_DOCUMENT_DATA",hc=function(e,t,n){return{type:Ec,payload:{id:e,fields:t,isEmitOT:n}}},kc="SHOW_DOCUMENT_DIALOG",Tc=function(e){return{type:kc,payload:e}},_c="HIDE_DOCUMENT_DIALOG",wc=function(){return{type:_c,payload:void 0}},Sc="ASYNC_OPEN_TOAST_ON_NOT_SELECT_DOCUMENT",Oc=function(e,t){return{type:"CLOUD_DATABASE",payload:{name:t,id:e}}},Ac="SHOW_BLOCK_PALETTE",Dc=function(e){return{type:Ac,payload:e}},Lc="HIDE_BLOCK_PALETTE",Cc=function(){return{type:Lc,payload:void 0}},Rc="SET_FLYOUT_VISIBLE",jc=function(e){return{payload:e,type:Rc}},Pc="SET_IS_BLOCK_DRAG_DELETE_AREA",Nc=function(e){return{payload:e,type:Pc}},Vc="ASYNC_UPDATE_CLOUD_DB_DATA",Bc=function(e,t,n){return{type:Vc,payload:{id:e,columns:t,isEmitOT:n}}},Wc="INIT_PROJECT_DATA_WATCH",Uc="ADD_DATA_WATCH_VARIABLE",Mc=function(e){return{payload:e,type:Uc}},Gc="UPDATE_DATA_WATCH_VARIABLE_PROPERTY",Fc=function(e,t,n){return{payload:{id:e,property:t,value:n},type:Gc}},Hc="DELETE_DATA_WATCH_VARIABLE",Yc=function(e){return{payload:e,type:Hc}},Jc="RESET_DATA_WATCH_VALUE",zc=function(){return{type:Jc,payload:void 0}},Kc="CLEAR_DATA_WATCH_VALUE",qc=function(){return{type:Kc,payload:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},Qc="SET_TABLE_DATA_WATCH_DIALOG",Xc=function(e,t){return{type:Qc,payload:{visible:e,id:t}}},Zc="SHOW_DATAWATCH_TOAST",$c=function(e,t){return{type:Zc,payload:{toast:e,showIcon:t}}},es="HIDE_DATAWATCH_TOAST",ts=function(){return{type:es,payload:void 0}},ns="SHOW_RESOURCE_LIBRARY_DIALOG",rs=function(e,t,n,r,a){return{type:ns,payload:{mode:e,onSelect:t,multiple:n,sidebarType:r,setTab:a}}},as="HIDE_RESOURCE_LIBRARY_DIALOG",is=function(){return{type:as,payload:void 0}},cs="TOGGLE_RESOURCE_LIBRARY_DIALOG_VISIBLE",ss=function(e){return{type:cs,payload:{visible:e}}},os="UPDATE_RESOURCE_LIBRARY_AREA",us=function(){return{payload:void 0,type:os}},ds="ASYNC_CHANGE_IMAGE_FILE_ID",ls=function(e,t,n){return{type:ds,payload:{newId:e,oldId:t,isEmitOT:n}}},ps="ASYNC_DELETE_IMAGE_FILE",fs=function(e,t){return{type:ps,payload:{imageFileId:e,isEmitOT:t}}},bs="ASYNC_IMPORT_IMAGE_TO_IMAGE_WIDGET",xs=function(e,t){return{type:bs,payload:{imageFile:e,widgetId:t}}},ys="ASYNC_IMPORT_IMAGE_TO_RESOURCE_LIBRARY",vs=function(e,t,n){return{type:ys,payload:{fileList:e,onSuccess:t,isMultipleFiles:n}}},gs="ASYNC_ADD_IMAGE_FROM_RESOURCE",Is=function(e,t){return{type:gs,payload:{imageFiles:e,isEmitOT:t}}},ms="ADD_IMAGE_RESOURCE_LIBRARY",Es="DELETE_IMAGE_RESOURCE_LIBRARY",hs="ASYNC_IMPORT_SOUND_TO_AUDIO_WIDGET",ks=function(e,t){return{type:hs,payload:{soundFile:e,widgetId:t}}},Ts="ASYNC_ADD_SOUND_UPLOAD",_s=function(e,t,n){return{type:Ts,payload:{fileList:e,onSuccess:t,isMultipleFiles:n}}},ws="REPLACE_SOUND_RESOURCE",Ss=function(e){return{payload:{soundFileList:e},type:ws}},Os="ADD_SOUND_STATE",As=function(e,t){return{payload:{soundFiles:e,index:t},type:Os}},Ds="ASYNC_ADD_SOUND_FROM_RESOURCE",Ls=function(e,t){return{payload:{soundFiles:e,isEmitOT:t},type:Ds}},Cs="REMOVE_SOUND_STATE",Rs=function(e){return{payload:{id:e},type:Cs}},js="ASYNC_REMOVE_SOUND",Ps=function(e,t){return{payload:{id:e,isEmitOT:t},type:js}},Ns="RENAME_SOUND_STATE",Vs=function(e,t){return{payload:{id:e,name:t},type:Ns}},Bs="ASYNC_RENAME_SOUND",Ws=function(e,t,n,r){return{payload:{id:e,oldName:t,newName:n,isEmitOT:r},type:Bs}},Us="CHANGE_SOUND_URL",Ms=function(e,t){return{type:Us,payload:{id:e,cdnUrl:t}}},Gs="ADD_ICON_STATE",Fs=function(e,t){return{payload:{iconFiles:e,index:t},type:Gs}},Hs="ASYNC_ADD_ICON_FROM_RESOURCE",Ys=function(e,t){return{payload:{iconFiles:e,isEmitOT:t},type:Hs}},Js="ASYNC_ADD_ICON_FROM_UPLOAD",zs=function(e,t){return{payload:{fileList:e,onSuccess:t},type:Js}},Ks="ASYNC_REMOVE_ICON",qs=function(e,t){return{payload:{id:e,isEmitOT:t},type:Ks}},Qs="REMOVE_ICON_STATE",Xs=function(e){return{payload:{id:e},type:Qs}},Zs="ASYNC_RENAME_ICON",$s=function(e,t,n,r){return{payload:{id:e,oldName:t,newName:n,isEmitOT:r},type:Zs}},eo="RENAME_ICON_STATE",to=function(e,t){return{payload:{id:e,name:t},type:eo}},no="CHANGE_ICON_URL",ro=function(e,t){return{type:no,payload:{id:e,cdnUrl:t}}},ao="REPLACE_ICON_RESOURCE",io=function(e){return{payload:{iconFileList:e},type:ao}};const co=Wa},16257:(e,t,n)=>{n.r(t),n.d(t,{boughtList:()=>l,buy:()=>p,e:()=>d,getLabels:()=>u,getList:()=>d,getUsedTimes:()=>x,remove:()=>f,reportUse:()=>b});var r=n(54181),a=n(3741);const i=n(79955),c=n(65708),s=n(83315),o=`${s.a.serverHost}/coconut`;async function u(){const{data:e}=await a.axiosWithCredentials.get(o+"/web/widget/labels");if(200!==e.code)throw Error(e.msg);return e.data}async function d(e,t,n){const{data:r}=await a.axiosWithCredentials.get(o+"/web/widget/list",{params:{label_id:n,current_page:e,page_size:t}});if(200!==r.code)throw Error(r.msg);return r.data}async function l(e,t,n){const{data:r}=await a.axiosWithCredentials.get(o+"/web/user/widget/list",{params:{widget_type:n,current_page:e,page_size:t}}),i=[];if(200!==r.code)throw Error(r.msg);const{items:c}=r.data;return Array.isArray(c)&&c.forEach(function(e){const t={id:e.id,type:e.widget_code,widgetName:e.widget_name,icon:e.icon,cdnUrl:e.resource_url,isInvisibleWidget:2===e.widget_type};i.push(t)}),{list:i,total:r.data.total}}async function p(e){const{data:t}=await a.axiosWithCredentials.post(o+"/web/widget/buy",{widget_ids:e});if(200!==t.code)throw Error(t.msg);return t.success}async function f(e){const t=e.join(","),{data:n}=await a.axiosWithCredentials.delete(o+"/web/widget/remove",{params:{widget_ids:t}});if(200!==n.code)throw Error(n.msg);return n.success}function b(e,t){var n=i.Db(e);if(n){let i;t||(i=localStorage.getItem("guestId"))||(i=c.a("GUEST"),localStorage.setItem("guestId",i));let o=1;r.isSafeExtensions(e)?(o=2,e=e.replace(r.SAFE_EXTENSION_PREFIX,"")):r.isExtensions(e)&&(o=3),a.axiosWithCredentials.post(s.a.serverHost+"/data-center/widget",{widget_code:e,widget_type:n.isInvisibleWidget?2:1,source_type:o,user_id:t?t+"":i})}}async function x(e){const{data:t}=await a.axiosWithCredentials.get(s.a.serverHost+"/data-center/widget/total",{params:{widget_code_list:e.join(",")}});if(200!==t.code)throw Error(t.msg);return t.data.totalList}},30691:(e,t,n)=>{n.r(t),n.d(t,{a:()=>Qs,b:()=>Xs,c:()=>qs,d:()=>Ks,dispatch:()=>Qs,getLanguage:()=>Xs,getStore:()=>qs});var r=n(54181),a=n(16257);const i=n(28895),c=n(37815),s=n(54176),o=n(78698),u=n(94584),d=n(2536),l=n(8599),p=n(73321);var f=window.localStorage.getItem("LANGUAGE")||navigator.language,b={type:l.e.camera,visible:!1,onClose:void 0,onConfirm:void 0},x={visible:!1,onClose:void 0,onConfirm:void 0,title:"",content:"",cancelBtnVisible:!1,confirmBtnVisible:!1},y={visible:!1,onConfirm:void 0,content:""},v={visible:!1,onClose:void 0,onSelect:void 0,autoClose:!0,value:""},g={visible:!1,importFailResults:[],fileType:"image"},I={visible:!1},m={visible:!1,selected:l.f.CREATE_PROJECT},E={visible:!1,grid:{id:"",name:"",header:{},data:[]}},h={visible:!1,widgetId:""};function k(e){var t=e.blockyToolboxPinned,n=e.stageRulerVisible;return localStorage.setItem("userConfig",JSON.stringify({blockyToolboxPinned:t,stageRulerVisible:n})),e}var T=u.a.Record(o.a(o.a({language:f,editAreaUpdatedAt:0,previewAreaUpdatedAt:0,extensionListUpdateAt:0,commonToastInfo:{visible:!1},confirmDialogInfo:{visible:!1,onClose:void 0,onConfirm:void 0,title:"",content:""},permissionDialogInfo:b,richTextEditorDialogInfo:y,iconLibraryDialog:v,userInfo:null,userInfoFetchDone:!1,importFailToastInfo:g,stageToast:I,stageState:{isActorDragging:!1},projectDialog:m,gridDialog:E,gridStatus:{copiedContent:{rowId:"",columnId:""},selectedContent:{rowId:"",columnId:""},editingHeader:"",errorHeaders:[],animationHeaders:[],errorCells:{},isCustomWidth:!1},tableDataDialog:E,createTableDataDialog:h,widgetMallVisible:!1,isProjectModified:!1,isProjectFinishedOpen:!1,lastSavedTime:void 0,projectSaveProgressDialog:{visible:!1,progress:10},consoleMessages:u.a.List(),consoleHeight:0,saving:!1,widgetAttributeVisible:!1,rightSideActiveMenu:void 0,signInDialogInfo:{visible:!1},stageScale:1,stageWidth:412,stageVisible:!0,isHoverBlockArea:!1,collAutoSave:!1,historyArchiveId:"",editPermission:l.c.Edit,historyDialogVisible:!1,myExtensionWidgets:[],blockImageDialogInfo:{visible:!1,imgSrc:""},releaseInfoDialogVisible:!1,cloudDBGridDialogInfo:{widgetName:"",visible:!1,cloudDBId:"",isProd:!1,callback:function(){}},cloudDBManagerDialogVisible:!1,cloudDBPublishDialogInfo:{visible:!1,type:"",callback:function(){}},sliderImageDialogInfo:{visible:!1,widgetId:"",direction:p.b.HORIZONTAL,handleImageFileId:"",handleImageRatio:1.5,handleImageDirection:p.b.HORIZONTAL,backgroundImageFileId:"",backgroundImageDirection:p.b.HORIZONTAL,trackImageFileId:"",trackImageDirection:p.b.HORIZONTAL},switchImageDialogInfo:{visible:!1,widgetId:"",imageOpenFileId:"",imageCloseFileId:""},isOffLine:!1,templateList:[],courseList:[],courseDialogVisible:!1,projectSavePrompt:{visible:!1,openFrom:""}},function(){var e=localStorage.getItem("userConfig"),t={blockyToolboxPinned:!1,stageRulerVisible:!0};if(e)try{var n=JSON.parse(e);Object.assign(t,n)}catch(e){}return t}()),{},{floatMiniIcons:{fixedIcons:[],temporaryIcons:[]}}))();function _(e,t){var n=t.payload.name;return e.floatMiniIcons.temporaryIcons.find(function(e){return e.name===n})?(console.error("float icon name existed!"),e):e.setIn(["floatMiniIcons","temporaryIcons"],[].concat(s.a(e.floatMiniIcons.temporaryIcons),[t.payload]))}const w=n(2543),S=n(84064),O=n(87654);var A=u.a.Record({position:{x:0,y:0},visible:!1,widgetId:""})(),D={visible:!1,actorId:"",onSelect:void 0},L=u.a.Record({currentScreenIndex:-1,id:S.v,bcmUrl:"",jsonFrom:l.d.OTHER,title:"新的作品",version:O.e,playing:!1,playedAt:0,screens:u.a.List([]),selectedWidgetId:void 0,contextMenuInfo:A,styleDialog:D,apiToken:null,focusedWorkspaceArea:null,globalVariableList:[],globalArrayList:[],globalObjectList:[],isPackaging:!1,packageProgress:0,packageTaskLabel:null,packageUrl:null,packageProgressVisible:!1,packageDialogVisible:!1,packageQrCodeVisible:!1,packageCompleteVisible:!0,packageInfo:{apkName:"",apkIcon:"",apkSplash:"",packLabel:"",isCancel:!1},projectShareInfo:{title:"",desc:"",img:""},projectSource:{tag:l.g.FREEDOM,id:""},globalWidgetIds:[]})(),C={visible:!1,data:[],title:"",widget:null,dbName:""},R=u.a.Record({dropdown:{type:l.a.DYNAMIC_DROPDOWN,visible:!1,options:[["",""]],value:"",setValue:function(e){},position:{left:-1e3,top:0},blockInfo:{fieldWidth:0,scale:1,blockHeight:0,sourceBlockId:"",fieldName:""},onHide:function(){}},slider:{visible:!1,value:"100",left:-1e3,top:0,min:0,max:100,minText:"",maxText:"",setValue:function(e){}},createVariableDialog:{visible:!1,title:""},commonInputDialog:{visible:!1},editArrayDialog:{visible:!1},editObjectDialog:{visible:!1},storageDialogInfo:o.a({},C),palette:{visible:!1,value:"#000000ff",top:0,left:0,selectValue:function(e){},setValue:function(e){}},flyoutVisible:!1,isBlockDragDeleteArea:!1})();const j=n(5587);var P=u.a.Record({configs:{},variableList:u.a.List([]),tableDataDialog:{visible:!1},dataWatchToast:{visible:!1}})();const N=n(40605);var V=u.a.Record({editorInviteUrl:"",readOnlyInviteUrl:"",cooperationUserList:u.a.List([]),onlineCooperationUserList:u.a.List([]),userFocusOTInfoList:u.a.List([]),onlineCooperationUserColorRecord:u.a.Record({})(),isAuthor:!0,collWorkId:null})(),B={visible:!1,multiple:!1,mode:n(23336).c.ResourceLibrary,sidebarType:void 0,setTab:void 0},W=u.a.Record({resourceLibraryDialogInfo:B,resourceLibraryDialogVisible:!1,resourceLibraryUpdateAt:0,imageFileList:u.a.List([]),iconFileList:u.a.List([]),soundFileList:u.a.List([]),fontFileList:u.a.List(O.a)})();const U=n(81124);var M=u.a.Record({header:{logo:l.j.Show,file:{newProject:l.j.Show,openMyProject:l.j.Show,saveAs:l.j.Show,showHistory:l.j.Show,openLocalFile:l.j.Show,exportLocalFile:l.j.Show},tutorial:{tutorial:l.j.Show,feedback:l.j.Show,releaseInfo:l.j.Show,about:l.j.Show},help:{ruler:l.j.Show,stage:l.j.Show},projectName:l.j.Show,coll:l.j.Show,save:l.j.Show,cloudDBManager:l.j.Show,cloudSpaceManager:l.j.Show,cutLine:l.j.Show,package:l.j.Show,userInfo:l.j.Show,preventLeave:l.j.Show},widgetPanel:l.j.Show,stage:l.j.Show,widgetEditor:l.j.Show,workspace:l.j.Show,screenPanel:l.j.Show,resourceLibrary:l.j.Show})();const G=n(98446);var F=u.a.Record({cloudDictList:[],cloudTableList:[],initialRefDictIds:u.a.Set(),initialRefTableIds:u.a.Set(),checkedTimeStamp:(new Date).getTime(),cloudDictKeysList:u.a.List([]),cloudTableColumnList:u.a.List([]),cloudTableDataList:u.a.List([])})(),H=i.combineReducers({common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.dd:return e.set("language",t.payload.language);case d.Se:return e.set("previewAreaUpdatedAt",Date.now());case d.Qe:return e.set("editAreaUpdatedAt",Date.now());case d.Re:return e.set("extensionListUpdateAt",Date.now());case d.re:return e.set("commonToastInfo",o.a({visible:!0},t.payload));case d.pc:return e.set("commonToastInfo",{visible:!1});case d.Ec:return e.set("confirmDialogInfo",o.a({visible:!0},t.payload));case d.Wb:return e.set("confirmDialogInfo",x);case d.Ke:return e.set("permissionDialogInfo",t.payload);case d.Fc:return e.set("iconLibraryDialog",o.a({visible:!0},t.payload));case d.Yb:return e.set("iconLibraryDialog",v);case d.nd:return e.set("userInfoFetchDone",!0);case d.he:return e.set("userInfo",t.payload).set("userInfoFetchDone",!0);case d.Ae:return e.set("importFailToastInfo",o.a({visible:!0},t.payload));case d.xc:return e.set("importFailToastInfo",o.a({},g));case d.De:return e.set("stageToast",{visible:!0,toast:t.payload.toast,showIcon:t.payload.showIcon||!1});case d.zc:return e.set("stageToast",I);case d.cd:return e.setIn(["stageState","isActorDragging"],t.payload);case d.Gc:return e.set("projectDialog",{visible:!0,selected:t.payload.selected});case d.Zb:return e.set("projectDialog",o.a({},m));case d.Rd:return e.set("isProjectModified",t.payload);case d.Qd:return e.set("lastSavedTime",t.payload);case d.Vd:return e.setIn(["projectSaveProgressDialog","visible"],t.payload);case d.Ud:return e.setIn(["projectSaveProgressDialog","progress"],t.payload);case d.Xd:return e.set("saving",t.payload);case d.n:return e.set("consoleMessages",function(e,t){return e.consoleMessages.push(u.a.Record(t.payload)())}(e,t));case d.Tb:return e.set("consoleMessages",u.a.List());case d.kd:return e.set("consoleHeight",t.payload);case d.bc:return e.set("signInDialogInfo",{visible:!1});case d.Ic:return e.set("signInDialogInfo",{visible:!0,onSuccess:t.payload.onSuccess});case d.be:return k(e.set("stageRulerVisible",t.payload));case d.ee:return e.set("stageWidth",t.payload);case d.de:return e.set("stageVisible",t.payload);case d.Ad:return e.set("isHoverBlockArea",t.payload);case d.gd:return k(e.set("blockyToolboxPinned",t.payload));case d.ie:return e.set("widgetAttributeVisible",t.payload);case d.ae:return e.set("rightSideActiveMenu",t.payload);case d.td:return function(e,t){var n=t.payload;return e.setIn(["gridStatus","copiedContent"],o.a({},n))}(e,t);case d.xd:return function(e,t){var n=t.payload;return e.setIn(["gridStatus","selectedContent"],o.a({},n))}(e,t);case d.ud:return function(e,t){var n=t.payload.columnId;return e.setIn(["gridStatus","editingHeader"],n)}(e,t);case d.wd:return function(e,t){var n=t.payload.columnIds;return e.setIn(["gridStatus","errorHeaders"],n)}(e,t);case d.vd:return function(e,t){var n=t.payload.errorCells;return e.setIn(["gridStatus","errorCells"],n)}(e,t);case d.rd:return function(e,t){var n=t.payload.columnIds;return e.setIn(["gridStatus","animationHeaders"],n)}(e,t);case d.sd:return e.setIn(["gridStatus","isCustomWidth"],t.payload);case d.ce:return e.set("stageScale",t.payload);case d.id:return e.set("collAutoSave",t.payload);case d.yd:return e.set("historyArchiveId",t.payload);case d.Od:return e.set("editPermission",t.payload);case d.ze:return e.set("historyDialogVisible",t.payload);case d.ye:return e.set("gridDialog",o.a({visible:!0},t.payload));case d.wc:return e.set("gridDialog",o.a({},E));case d.Ee:return e.set("tableDataDialog",o.a({visible:!0},t.payload));case d.Ac:return e.set("tableDataDialog",o.a({},E));case d.te:return e.set("createTableDataDialog",o.a({visible:!0},t.payload));case d.rc:return e.set("createTableDataDialog",o.a({},h));case d.je:return e.set("widgetMallVisible",t.payload);case d.Wc:return e.set("myExtensionWidgets",t.payload.widgets);case d.g:return function(e,t){var n=t.payload.widgets;return e.update("myExtensionWidgets",function(e){return n.concat(e)})}(e,t);case d.Oc:return function(e,t){var n=t.payload.widgetTypes;return e.update("myExtensionWidgets",function(e){return e.filter(function(e){return!n.includes(r.standardize(e.type,!0))})})}(e,t);case d.hd:return e.set("blockImageDialogInfo",{visible:t.payload.visible,imgSrc:t.payload.imgSrc});case d.Be:return e.set("releaseInfoDialogVisible",t.payload);case d.ne:return e.set("cloudDBGridDialogInfo",{widgetName:t.payload.widgetName,visible:t.payload.visible,cloudDBId:t.payload.cloudDBId,isProd:t.payload.isProd,callback:t.payload.callback});case d.oe:return e.set("cloudDBManagerDialogVisible",t.payload);case d.pe:return e.set("cloudDBPublishDialogInfo",{visible:t.payload.visible,type:t.payload.type,callback:t.payload.callback});case d.Bd:return e.set("isOffLine",t.payload);case d.Me:return e.set("sliderImageDialogInfo",o.a({},t.payload));case d.ac:return e.set("richTextEditorDialogInfo",y);case d.Hc:return e.set("richTextEditorDialogInfo",o.a({visible:!0},t.payload));case d.Ne:return e.set("switchImageDialogInfo",o.a({},t.payload));case d.ge:return e.set("templateList",t.payload);case d.md:return e.set("courseList",t.payload);case d.ld:return e.set("courseDialogVisible",t.payload);case d.Wd:return e.set("projectSavePrompt",t.payload);case d.d:return _(e,t);case d.Mc:return function(e,t){var n=e.floatMiniIcons.temporaryIcons.filter(function(e){return e.name!==t.payload});return e.setIn(["floatMiniIcons","temporaryIcons"],n)}(e,t);case d.Uc:return function(e,t){var n=t.payload,r=n.name,a=n.icon,i=e.floatMiniIcons.temporaryIcons.findIndex(function(e){return e.name===r});return i>=0?(e.floatMiniIcons.temporaryIcons.splice(i,1,o.a(o.a({},d.fh),a)),e.setIn(["floatMiniIcons","temporaryIcons"],s.a(e.floatMiniIcons.temporaryIcons))):_(e,{type:d.d,payload:o.a(o.a({},d.fh),a)})}(e,t);case d.od:return function(e,t){var n=t.payload,r=n.name,a=n.visible,i=e.floatMiniIcons.temporaryIcons.find(function(e){return e.name===r});return i&&(i.visible=a),e.setIn(["floatMiniIcons","temporaryIcons"],s.a(e.floatMiniIcons.temporaryIcons))}(e,t);case d.Sd:return function(e,t){return e.setIn(["isProjectFinishedOpen"],t.payload)}(e,t);default:return e}},project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.Te:return e.set("bcmUrl",t.payload.bcmUrl);case d.Rb:return e.set("title",t.payload.title);case d.Xc:return function(e,t){var n=t.payload.project,r=n.screens,a=n.title,i=n.globalVariableList,c=n.globalArrayList,s=n.globalWidgetIds,o=n.globalObjectList,d=r.map(function(e){return u.a.Record(e)()});return e.set("screens",u.a.List(d)).set("title",a).set("selectedWidgetId",void 0).set("currentScreenIndex",-1).set("playing",!1).set("globalVariableList",w.cloneDeep(i)).set("globalArrayList",w.cloneDeep(c)).set("globalWidgetIds",w.cloneDeep(s)).set("globalObjectList",w.cloneDeep(o))}(e,t);case d.Yc:return function(e,t){return e.set("id",t.payload.projectId)}(e,t);case d.Ve:return function(e,t){var n=t.payload,r=n.screenId,a=n.snapshot,i=e.screens.findIndex(function(e){return e.id===r});return e.updateIn(["screens",i],function(e){return e.set("snapshot",a)})}(e,t);case d.Dc:return function(e,t){var n=t.payload,r=n.from,a=n.to,i=e.get("screens"),c=i.get(r),s=i.get(e.get("currentScreenIndex"));if(c&&s){var o=i.splice(r,1).splice(a,0,c),u=o.indexOf(s);return e.set("screens",o).set("currentScreenIndex",u)}return e}(e,t);case d.Ue:return function(e,t){var n=t.payload,r=n.screenId,a=n.key,i=n.value,c=e.screens.findIndex(function(e){return e.id===r});return e.updateIn(["screens",c],function(e){return e.set(a,i)})}(e,t);case d.We:return function(e,t){var n=t.payload,r=n.screenId,a=n.title,i=e.screens.findIndex(function(e){return e.id===r});return e.updateIn(["screens",i],function(e){return e.set("title",a)})}(e,t);case d.k:return function(e,t){var n=t.payload,r=n.screen,a=n.index,i=u.a.Record(r)(),c=a||e.screens.size;return e.update("screens",function(e){return e.splice(c,0,i)})}(e,t);case d.kc:return function(e,t){var n=t.payload.screenId,r=e.screens.findIndex(function(e){return e.id===n});return r>-1?e.update("screens",function(e){return e.delete(r)}):e}(e,t);case d.j:return e.set("globalWidgetIds",e.globalWidgetIds.concat(t.payload.widgetId));case d.l:return function(e,t){var n=t.payload,r=n.screenId,a=n.widgetId,i=n.isInvisibleWidget,c=e.screens.findIndex(function(e){return e.id===r});return c>-1?i?e.updateIn(["screens",c,"invisibleWidgetIds"],function(e){return(e||[]).concat(a)}):e.updateIn(["screens",c,"widgetIds"],function(e){return e.concat(a)}):e}(e,t);case d.Fe:return e.set("globalWidgetIds",t.payload.widgetIds);case d.He:return function(e,t){var n=t.payload,r=n.screenId,a=n.widgetIds,i=n.isInvisibleWidget,c=e.screens.findIndex(function(e){return e.id===r});return i?e.updateIn(["screens",c,"invisibleWidgetIds"],function(){return s.a(a)}):e.updateIn(["screens",c,"widgetIds"],function(){return s.a(a)})}(e,t);case d.Pc:return function(e,t){var n=t.payload.widgetId;return n===e.selectedWidgetId&&(e=e.set("selectedWidgetId",void 0)),e.update("globalWidgetIds",function(e){return e.filter(function(e){return e!==n})})}(e,t);case d.Qc:return function(e,t){var n=t.payload,r=n.screenId,a=n.widgetId,i=n.isInvisibleWidget,c=e.screens.findIndex(function(e){return e.id===r});return c>-1?(a===e.selectedWidgetId&&(e=e.set("selectedWidgetId",void 0)),i?e.updateIn(["screens",c,"invisibleWidgetIds"],function(e){return e.filter(function(e){return e!==a})}):e.updateIn(["screens",c,"widgetIds"],function(e){return e.filter(function(e){return e!==a})})):e}(e,t);case d.bd:return function(e,t){return e.set("selectedWidgetId",t.payload.widgetId)}(e,t);case d.Nd:return e.set("currentScreenIndex",t.payload);case d.Ie:return e.set("playing",!0).set("playedAt",Date.now());case d.Je:return e.set("playing",!1);case d.i:return function(e,t){var n=t.payload,r=n.variableType,a=n.id,i=n.name,c=n.defaultValue,o=n.screenId,u=n.index;if(r===l.i.GLOBAL)return e.updateIn(["globalVariableList"],function(e){return e.splice(u,0,{id:a,name:i,defaultValue:c,value:c}),s.a(e)});var d=e.screens.findIndex(function(e){return e.id===o});return d>-1?e.updateIn(["screens",d,"primitiveVariables"],function(e){return e.splice(u,0,{id:a,name:i,defaultValue:c,value:c}),s.a(e)}):e}(e,t);case d.jc:return function(e,t){var n=t.payload,r=n.variableType,a=n.id,i=n.screenId;if(r===l.i.GLOBAL)return e.updateIn(["globalVariableList"],function(e){return e.filter(function(e){return e.id!==a})});var c=e.screens.findIndex(function(e){return e.id===i});return c>-1?e.updateIn(["screens",c,"primitiveVariables"],function(e){return e.filter(function(e){return e.id!==a})}):e}(e,t);case d.Ld:return function(e,t){var n=t.payload,r=n.variableType,a=n.id,i=n.name,c=n.screenId;if(r===l.i.GLOBAL){var s=e.getIn(["globalVariableList"]).findIndex(function(e){return e.id===a});if(s>-1)return e.setIn(["globalVariableList",s,"name"],i)}var o=e.screens.findIndex(function(e){return e.id===c}),u=e.getIn(["screens",o,"primitiveVariables"]).findIndex(function(e){return e.id===a});return o>-1?e.setIn(["screens",o,"primitiveVariables",u,"name"],i):e}(e,t);case d.Kd:return function(e,t){var n=t.payload,r=n.variableType,a=n.id,i=n.defaultValue,c=n.screenId;if(r===l.i.GLOBAL){var s=e.getIn(["globalVariableList"]).findIndex(function(e){return e.id===a});if(s>-1)return e.setIn(["globalVariableList",s,"defaultValue"],i).setIn(["globalVariableList",s,"value"],i)}var o=e.screens.findIndex(function(e){return e.id===c}),u=e.getIn(["screens",o,"primitiveVariables"]).findIndex(function(e){return e.id===a});return o>-1?e.setIn(["screens",o,"primitiveVariables",u,"defaultValue"],i).setIn(["screens",o,"primitiveVariables",u,"value"],i):e}(e,t);case d.a:return function(e,t){var n=t.payload,r=n.arrayType,a=n.id,i=n.name,c=n.defaultValue,o=n.screenId,u=n.index;if(r===l.i.GLOBAL)return e.updateIn(["globalArrayList"],function(e){return e.splice(u,0,{id:a,name:i,defaultValue:c,value:c}),s.a(e)});var d=e.screens.findIndex(function(e){return e.id===o});return d>-1?e.updateIn(["screens",d,"arrayVariables"],function(e){return e.splice(u,0,{id:a,name:i,defaultValue:c,value:c}),s.a(e)}):e}(e,t);case d.h:return function(e,t){var n=t.payload,r=n.scopeType,a=n.screenId,i=n.index,c=n.id,o=n.name,u=n.defaultValue;if(r===l.i.GLOBAL)return e.updateIn(["globalObjectList"],function(e){return e.splice(i,0,{id:c,name:o,defaultValue:u,value:u}),s.a(e)});var d=e.screens.findIndex(function(e){return e.id===a});return d>-1?e.updateIn(["screens",d,"objectVariables"],function(e){return e.splice(i,0,{id:c,name:o,defaultValue:u,value:u}),s.a(e)}):e}(e,t);case d.ic:return function(e,t){var n=t.payload,r=n.scopeType,a=n.id,i=n.screenId;if(r===l.i.GLOBAL)return e.updateIn(["globalObjectList"],function(e){return e.filter(function(e){return e.id!==a})});var c=e.screens.findIndex(function(e){return e.id===i});return c>-1?e.updateIn(["screens",c,"objectVariables"],function(e){return e.filter(function(e){return e.id!==a})}):e}(e,t);case d.Dd:return function(e,t){var n=t.payload,r=n.scopeType,a=n.id,i=n.name,c=n.screenId;if(r===l.i.GLOBAL){var s=e.getIn(["globalObjectList"]).findIndex(function(e){return e.id===a});if(s>-1)return e.setIn(["globalObjectList",s,"name"],i)}var o=e.screens.findIndex(function(e){return e.id===c}),u=e.getIn(["screens",o,"objectVariables"]).findIndex(function(e){return e.id===a});return o>-1?e.setIn(["screens",o,"objectVariables",u,"name"],i):e}(e,t);case d.Cd:return function(e,t){var n=t.payload,r=n.scopeType,a=n.id,i=n.defaultValue,c=n.screenId;if(r===l.i.GLOBAL){var s=e.getIn(["globalObjectList"]).findIndex(function(e){return e.id===a});if(s>-1)return e.setIn(["globalObjectList",s,"defaultValue"],i).setIn(["globalObjectList",s,"value"],i)}var o=e.screens.findIndex(function(e){return e.id===c}),u=e.getIn(["screens",o,"objectVariables"]).findIndex(function(e){return e.id===a});return o>-1?e.setIn(["screens",o,"objectVariables",u,"defaultValue"],i).setIn(["screens",o,"objectVariables",u,"value"],i):e}(e,t);case d.ec:return function(e,t){var n=t.payload,r=n.arrayType,a=n.id,i=n.screenId;if(r===l.i.GLOBAL)return e.updateIn(["globalArrayList"],function(e){return e.filter(function(e){return e.id!==a})});var c=e.screens.findIndex(function(e){return e.id===i});return c>-1?e.updateIn(["screens",c,"arrayVariables"],function(e){return e.filter(function(e){return e.id!==a})}):e}(e,t);case d.fd:return function(e,t){var n=t.payload,r=n.arrayType,a=n.id,i=n.name,c=n.screenId;if(r===l.i.GLOBAL){var s=e.getIn(["globalArrayList"]).findIndex(function(e){return e.id===a});if(s>-1)return e.setIn(["globalArrayList",s,"name"],i)}var o=e.screens.findIndex(function(e){return e.id===c}),u=e.getIn(["screens",o,"arrayVariables"]).findIndex(function(e){return e.id===a});return o>-1?e.setIn(["screens",o,"arrayVariables",u,"name"],i):e}(e,t);case d.ed:return function(e,t){var n=t.payload,r=n.arrayType,a=n.id,i=n.defaultValue,c=n.screenId;if(r===l.i.GLOBAL){var s=e.getIn(["globalArrayList"]).findIndex(function(e){return e.id===a});if(s>-1)return e.setIn(["globalArrayList",s,"defaultValue"],i).setIn(["globalArrayList",s,"value"],i)}var o=e.screens.findIndex(function(e){return e.id===c}),u=e.getIn(["screens",o,"arrayVariables"]).findIndex(function(e){return e.id===a});return o>-1?e.setIn(["screens",o,"arrayVariables",u,"defaultValue"],i).setIn(["screens",o,"arrayVariables",u,"value"],i):e}(e,t);case d.b:return function(e,t){var n=t.payload,r=n.name,a=n.screenId,i=n.index,c=e.screens.findIndex(function(e){return e.id===a});return c>-1?e.updateIn(["screens",c,"broadcasts"],function(e){return e.splice(i,0,r),s.a(e)}):e}(e,t);case d.fc:return function(e,t){var n=t.payload,r=n.name,a=n.screenId,i=e.screens.findIndex(function(e){return e.id===a});return i>-1?e.updateIn(["screens",i,"broadcasts"],function(e){return e.filter(function(e){return e!==r})}):e}(e,t);case d.Pb:return function(e,t){var n=t.payload;return e.set("contextMenuInfo",u.a.Record(n)())}(e,t);case d.Xb:return function(e){return e.set("contextMenuInfo",A)}(e);case d.Vb:return L;case d.Ge:return e.set("screens",t.payload.screens);case d.Jc:return function(e,t){return e.set("styleDialog",o.a({visible:!0},t.payload))}(e,t);case d.cc:return function(e){return e.set("styleDialog",o.a({},D))}(e);case d.Md:return e.set("apiToken",t.payload.token);case d.Td:return e.set("packageTaskLabel",t.payload.label);case d.Gd:return e.set("packageProgress",t.payload.packageProgress);case d.Jd:return e.set("isPackaging",t.payload.isPackaging).set("packageUrl",t.payload.packageUrl||null);case d.Hd:return e.set("packageProgressVisible",t.payload.packageProgressVisible);case d.Fd:return e.set("packageDialogVisible",t.payload.packageDialogVisible);case d.Id:return e.set("packageQrCodeVisible",t.payload.packageQrCodeVisible);case d.jd:return e.set("packageCompleteVisible",t.payload.packageCompleteVisible);case d.Ed:return e.update("packageInfo",function(e){return o.a(o.a({},e),t.payload)});case d.Yd:return e.update("projectShareInfo",function(e){return o.a(o.a({},e),t.payload)});case d.qd:return e.set("focusedWorkspaceArea",t.payload.area);case d.Pd:return e.set("jsonFrom",t.payload);case d.Zd:return e.set("projectSource",t.payload);default:return e}},block:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.ke:return e.set("dropdown",o.a({visible:!0},t.payload));case d.lc:return function(e){return e.get("dropdown").onHide(),e.set("dropdown",o.a({},R.dropdown))}(e);case d.se:return e.set("createVariableDialog",o.a({visible:!0},t.payload));case d.qc:return e.set("createVariableDialog",o.a({},R.createVariableDialog));case d.qe:return e.set("commonInputDialog",o.a({visible:!0},t.payload));case d.oc:return e.set("commonInputDialog",o.a({},R.createVariableDialog));case d.we:return e.set("editArrayDialog",o.a({visible:!0},t.payload));case d.uc:return e.set("editArrayDialog",o.a({},R.editArrayDialog));case d.xe:return e.set("editObjectDialog",o.a({visible:!0},t.payload));case d.vc:return e.set("editObjectDialog",o.a({},R.editObjectDialog));case d.ve:return e.set("storageDialogInfo",o.a({visible:!0},t.payload));case d.tc:return e.set("storageDialogInfo",o.a({},C));case d.le:return e.set("slider",o.a({visible:!0},t.payload));case d.mc:return e.set("slider",o.a({},R.slider));case d.Oe:return e.setIn(["slider","value"],t.payload.value);case d.me:return e.set("palette",o.a({visible:!0},t.payload));case d.nc:return e.set("palette",{colorList:void 0,visible:!1,value:"#000000ff",top:0,left:0,selectValue:function(e){},setValue:function(e){}});case d.pd:return e.set("flyoutVisible",t.payload);case d.zd:return e.set("isBlockDragDeleteArea",t.payload);default:return e}},dataWatch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.Cc:return function(e,t){var n=t.payload,r=n.configs,a=n.variableList;return e.set("variableList",u.a.List(a)).set("configs",r)}(e,t);case d.ad:return function(e){var t=["PRIMITIVE","DICT","LIST"],n=e.get("variableList");return n.forEach(function(e){t.includes(e.type)&&(e.value=e.defaultValue)}),e.set("variableList",n)}(e);case d.c:return function(e,t){var n=t.payload.id,r=e.get("variableList"),a=r.findIndex(function(e){return e.id===n});return a>=0?e.update("variableList",function(e){return e.setIn([a],t.payload)}):e.setIn(["variableList"],r.push(t.payload))}(e,t);case d.gc:return function(e,t){var n=t.payload,r=e.get("variableList").findIndex(function(e){return e.id===n});return r>-1?e.deleteIn(["variableList",r]):e}(e,t);case d.Pe:return function(e,t){var n=t.payload,r=n.id,a=n.property,i=n.value,c=e.get("variableList").findIndex(function(e){return e.id===r});return c>=0?e.update("variableList",function(e){return e.setIn([c,a],i)}):e}(e,t);case d.Ub:return function(e,t){if(t.payload)return e.setIn(["variableList"],u.a.List());var n,r=e.get("variableList"),a=j.a(r);try{for(a.s();!(n=a.n()).done;)n.value.isWatching=!1}catch(e){a.e(e)}finally{a.f()}return e.setIn(["variableList"],r)}(e,t);case d.fe:return e.set("tableDataDialog",o.a({},t.payload));case d.ue:return e.set("dataWatchToast",{visible:!0,toast:t.payload.toast,showIcon:t.payload.showIcon||!1});case d.sc:return e.set("dataWatchToast",{visible:!1});default:return e}},oTState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.h:return function(e,t){return t.payload.list.sort(function(e){return 0-Number(e.is_author)}),e.set("cooperationUserList",u.a.List(t.payload.list))}(e,t);case N.j:return e.set("onlineCooperationUserList",u.a.List(t.payload.list));case N.e:return e.set("editorInviteUrl",t.payload.url);case N.g:return e.set("readOnlyInviteUrl",t.payload.url);case N.f:return e.set("isAuthor",t.payload.isAuthor);case N.d:return e.set("collWorkId",t.payload.id);case N.k:return e.set("userFocusOTInfoList",t.payload.list);case N.i:return e.set("onlineCooperationUserColorRecord",u.a.Record(t.payload.colors)());case N.c:return V;default:return e}},resource:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.Ce:return e.set("resourceLibraryDialogInfo",o.a({visible:!0},t.payload));case d.yc:return e.set("resourceLibraryDialogInfo",o.a({},B));case d.Le:return e.set("resourceLibraryDialogVisible",t.payload.visible);case d.Xe:return e.set("resourceLibraryUpdateAt",Date.now());case d.f:return function(e,t){return e.update("imageFileList",function(e){return e.splice(0,0,t.payload.imageFile)})}(e,t);case d.hc:return function(e,t){var n=t.payload.id,r=e.imageFileList.findIndex(function(e){return e.id===n});return r>-1?e.update("imageFileList",function(e){return e.delete(r)}):e}(e,t);case d.Zc:return e.set("soundFileList",u.a.List(t.payload.soundFileList));case d.m:return function(e,t){var n=t.payload,r=n.soundFiles,a=n.index;if(void 0!==a)return e.update("soundFileList",function(e){return e.splice(a,0,r[0])});var i=e;return r.forEach(function(e){i=i.update("soundFileList",function(t){return t.push(e)})}),i}(e,t);case d.Sb:return function(e,t){var n=t.payload,r=n.id,a=n.cdnUrl,i=e.soundFileList.findIndex(function(e){return e.id===r});return i>-1?e.setIn(["soundFileList",i,"cdnUrl"],a):e}(e,t);case d.Rc:return function(e,t){var n=t.payload.id,r=e.soundFileList.findIndex(function(e){return e.id===n});return r>-1?e.update("soundFileList",function(e){return e.delete(r)}):e}(e,t);case d.Tc:return function(e,t){var n=t.payload,r=n.id,a=n.name,i=e.soundFileList.findIndex(function(e){return e.id===r});return i>-1?e.setIn(["soundFileList",i,"name"],a):e}(e,t);case d.e:return function(e,t){var n=t.payload,r=n.iconFiles,a=n.index,i=e;return void 0!==a?e.update("iconFileList",function(e){return e.splice(a,0,r[0])}):(r.forEach(function(e){i=i.update("iconFileList",function(t){return t.push(e)})}),i)}(e,t);case d.Qb:return function(e,t){var n=t.payload,r=n.id,a=n.cdnUrl,i=e.iconFileList.findIndex(function(e){return e.id===r});return i>-1?e.setIn(["iconFileList",i,"cdnUrl"],a):e}(e,t);case d.Nc:return function(e,t){var n=t.payload.id,r=e.iconFileList.findIndex(function(e){return e.id===n});return r>-1?e.update("iconFileList",function(e){return e.delete(r)}):e}(e,t);case d.Vc:return e.set("iconFileList",u.a.List(t.payload.iconFileList));case d.Sc:return function(e,t){var n=t.payload,r=n.id,a=n.name,i=e.iconFileList.findIndex(function(e){return e.id===r});return i>-1?e.setIn(["iconFileList",i,"name"],a):e}(e,t);default:return e}},uiConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U.a:return e.merge(t.payload);case U.c:return e.mergeDeep(t.payload);case U.b:return e.setIn(["header","preventLeave"],t.payload);default:return e}},cloudSpace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.s:return function(e,t){return e.setIn(["cloudDictList"],t.payload)}(e,t);case G.t:return function(e,t){return e.setIn(["cloudTableList"],t.payload)}(e,t);case G.m:return function(e){return e.setIn(["initialRefDictIds"],[]).setIn(["initialRefTableIds"],[]),e}(e);case G.x:return function(e,t){var n=u.a.Set(t.payload);return e.setIn(["initialRefDictIds"],n)}(e,t);case G.y:return function(e,t){var n=u.a.Set(t.payload);return e.setIn(["initialRefTableIds"],n)}(e,t);case G.a:return function(e,t){var n=e.initialRefDictIds.concat(new Set(t.payload));return e.setIn(["initialRefDictIds"],n)}(e,t);case G.b:return function(e,t){var n=e.initialRefTableIds.concat(new Set(t.payload));return e.setIn(["initialRefTableIds"],n)}(e,t);case G.o:return function(e,t){var n=e.initialRefDictIds.filter(function(e){return!t.payload.includes(e)});return e.setIn(["initialRefDictIds"],n)}(e,t);case G.p:return function(e,t){var n=e.initialRefTableIds.filter(function(e){return!t.payload.includes(e)});return e.setIn(["initialRefTableIds"],n)}(e,t);case G.q:return function(e,t){return e.setIn(["checkedTimeStamp"],t.payload)}(e,t);case G.r:return function(e,t){var n=t.payload,r=n.id,a=n.data,i=e.cloudDictKeysList.findIndex(function(e){return e.id===r});return i>-1?e.setIn(["cloudDictKeysList",i,"data"],a):e.update("cloudDictKeysList",function(e){return e.push({id:r,data:a})})}(e,t);case G.w:return function(e,t){var n=t.payload,r=n.id,a=n.columns,i=e.cloudTableList.findIndex(function(e){return e.id===r});return i>-1?e.setIn(["cloudTableList",i,"columns"],a):e}(e,t);case G.u:return function(e,t){var n=t.payload,r=n.id,a=n.columns,i=e.cloudTableColumnList.findIndex(function(e){return e.id===r});return i>-1?e.setIn(["cloudTableColumnList",i,"columns"],a):e.update("cloudTableColumnList",function(e){return e.push({id:r,columns:a})})}(e,t);case G.n:return function(e,t){var n=t.payload,r=e.cloudTableColumnList.findIndex(function(e){return e.id===n});return r>-1?e.deleteIn(["cloudTableColumnList",r]):e}(e,t);case G.v:return function(e,t){var n=t.payload,r=n.id,a=n.data,i=e.cloudTableDataList.findIndex(function(e){return e.id===r});return i>-1?e.setIn(["cloudTableDataList",i,"data"],a):e.update("cloudTableDataList",function(e){return e.push({id:r,data:a})})}(e,t);default:return e}}});const Y=n(7452);var J,z,K=(z=(J=Y)&&J.__esModule?function(){return J.default}:function(){return J},Object.defineProperty(z,"a",{enumerable:!0,get:z}),z);const q=n(4999),Q=n(21009),X=n(21272),Z=n(48096),$=n(6574),ee=n(40394),te=n(56241),ne=n(53067),re=n(3741),ae=n(83315);var ie="".concat(ae.a.serverHost,"/coconut");function ce(e){return se.apply(this,arguments)}function se(){return(se=Q.a(K.a.mark(function e(t){var n,r,a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.a.get(ie+"/webdb/admin/dict",{params:{work_id:t}});case 2:if(n=e.sent,200!==(r=n.data).code){e.next=8;break}return(a=r.data).forEach(function(e){return e.id=e.id.toString()}),e.abrupt("return",a);case 8:ne.a.condition(!1,{type:"error",message:r.msg});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e){return ue.apply(this,arguments)}function ue(){return(ue=Q.a(K.a.mark(function e(t){var n,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.a.post(ie+"/webdb/admin/dict",{name:t});case 3:if(n=e.sent,200!==(r=n.data).code){e.next=7;break}return e.abrupt("return",r.data.id+"");case 7:throw ne.a.condition(!1,{type:"error",message:r.msg}),new TypeError(r.msg);case 11:if(e.prev=11,e.t0=e.catch(0),!(e.t0 instanceof TypeError)){e.next=15;break}throw e.t0;case 15:throw new Error("网络错误");case 16:case"end":return e.stop()}},e,null,[[0,11]])}))).apply(this,arguments)}function de(e,t,n){return le.apply(this,arguments)}function le(){return(le=Q.a(K.a.mark(function e(t,n,r){var a,i,c;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r?"work_id=".concat(r):"",e.prev=1,e.next=4,re.a.put(ie+"/webdb/admin/dict/".concat(t,"?").concat(a),{name:n});case 4:if(i=e.sent,200!==(c=i.data).code){e.next=8;break}return e.abrupt("return",c.success);case 8:throw new TypeError(c.msg);case 11:if(e.prev=11,e.t0=e.catch(1),!(e.t0 instanceof TypeError)){e.next=15;break}throw e.t0;case 15:throw new Error("与服务器通讯出现错误时，通讯网络问题");case 16:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function pe(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Q.a(K.a.mark(function e(t,n){var r,a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.a.delete(ie+"/webdb/admin/dict/".concat(t));case 3:if(r=e.sent,200!==(a=r.data).code){e.next=7;break}return e.abrupt("return",a.success);case 7:throw new TypeError(a.msg);case 10:if(e.prev=10,e.t0=e.catch(0),!(e.t0 instanceof TypeError)){e.next=14;break}throw e.t0;case 14:throw new Error("与服务器通讯出现错误时，通讯网络问题");case 15:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function be(e,t,n,r){return xe.apply(this,arguments)}function xe(){return(xe=Q.a(K.a.mark(function e(t,n,r,a){var i,c;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.a.get(ie+"/webdb/admin/dict/".concat(t),{params:{offset:n,limit:r,work_id:a},headers:{env:2}});case 3:if(i=e.sent,200!==(c=i.data).code){e.next=8;break}return c.data.items.forEach(function(e){e.id+=""}),e.abrupt("return",c.data);case 8:throw ne.a.condition(!1,{type:"error",message:c.msg}),new TypeError(c.msg);case 12:if(e.prev=12,e.t0=e.catch(0),!(e.t0 instanceof TypeError)){e.next=16;break}throw e.t0;case 16:throw new Error("与服务器通讯出现错误时，通讯网络问题");case 17:case"end":return e.stop()}},e,null,[[0,12]])}))).apply(this,arguments)}function ye(e,t,n){return ve.apply(this,arguments)}function ve(){return(ve=Q.a(K.a.mark(function e(t,n,r){var a,i,c;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r?"work_id=".concat(r):"",e.prev=1,e.next=4,re.a.post(ie+"/webdb/admin/dict/".concat(t,"/storevalues?").concat(a),o.a({},n),{headers:{env:2}});case 4:if(i=e.sent,200!==(c=i.data).code){e.next=8;break}return e.abrupt("return",c.data);case 8:throw ne.a.condition(!1,{type:"error",message:c.msg}),new TypeError(c.msg);case 12:if(e.prev=12,e.t0=e.catch(1),!(e.t0 instanceof TypeError)){e.next=16;break}throw e.t0;case 16:throw new Error("与服务器通讯出现错误时，通讯网络问题");case 17:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function ge(e,t,n,r){return Ie.apply(this,arguments)}function Ie(){return(Ie=Q.a(K.a.mark(function e(t,n,r,a){var i,c;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=a?"work_id=".concat(a):"",c=t.map(function(e){return new Promise(function(t,a){re.a.put(ie+"/webdb/admin/dict/migrate?".concat(i),{db_id:e,from_env:n,to_env:r}).then(function(){t(!0)}).catch(function(e){return a(e)})})}),e.abrupt("return",Promise.all(c));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}const me=n(14841),Ee=n(91799),he=n(93833),ke=n(42025),Te=n(13220),_e=n(50047),we=n(11289),Se=n(58238),Oe=n(79955),Ae=n(70147),De=n(51837),Le=n(3631),Ce=n(65708),Re=n(16693),je=n(86119),Pe=n(76762),Ne=n(81324),Ve=n(26448),Be=n(1003);function We(e){window.localStorage.removeItem("@__INITIALIZED__".concat(e));var t="@".concat(e,"_DOCUMENT");Object.keys(window.localStorage).forEach(function(e){0===e.indexOf(t)&&window.localStorage.removeItem(e)})}const Ue=n(35394),Me=n(73393),Ge=n(21052),Fe=n(62238),He=n(78203),Ye=n(15309);var Je=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Object.defineProperty(t,"a",{enumerable:!0,get:t}),t}(n(55902));const ze=n(61669),Ke=n(2894),qe=n(68435),Qe=n(52138),Xe=n(33212),Ze=n(48588),$e=n(24392),et=n(40779),tt=n(68680);function nt(){var e,t=Ks.getState(),n=t.project.id,r=null===(e=t.common.userInfo)||void 0===e?void 0:e.id;return"".concat("DATA_WATCH_VARIABLE_LIST","_").concat(r,"_").concat(n)}function rt(){var e=Ks.getState().dataWatch.variableList,t=[];try{var n,r=j.a(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.push({id:a.id,name:a.name,screenId:a.screenId,isWatching:a.isWatching,type:a.type})}}catch(e){r.e(e)}finally{r.f()}var i=JSON.stringify(t);et.a.setItem(nt(),i)}catch(e){console.error("cache data watch failed",e)}}function at(){var e=nt(),t=et.a.getItem(e),n=[];try{t&&(n=JSON.parse(t))}catch(e){console.error(e)}return n}function it(e){var t,n=Ks.getState(),r=n.project.screens,a=n.project.id,i=[],c=j.a(e);try{var s=function(){var e=t.value;if(!e.isWatching)return"continue";if("GLOBAL"!==e.screenId){var c=r.find(function(t){return t.id===e.screenId});if(!c)return"break";var s=c.primitiveVariables,o=c.arrayVariables,u=c.objectVariables;if("LIST"===e.type){var d=o.find(function(t){return t.id===e.id});d&&i.push(tt.a("PRIMITIVE",d,{screenId:c.id}))}if("DICT"===e.type){var l=u.find(function(t){return t.id===e.id});l&&i.push(tt.a("DICT",l,{screenId:c.id}))}if("PRIMITIVE"===e.type){var p=s.find(function(t){return t.id===e.id});p&&i.push(tt.a("PRIMITIVE",p,{screenId:c.id}))}}else{var f=n.project,b=f.globalWidgetIds,x=f.globalObjectList,y=f.globalVariableList,v=f.globalArrayList;if("LIST"===e.type){var g=v.find(function(t){return t.id===e.id});g&&i.push(tt.a("LIST",g))}if("DICT"===e.type){var I=x.find(function(t){return t.id===e.id});I&&i.push(tt.a("DICT",I))}if("PRIMITIVE"===e.type){var m=y.find(function(t){return t.id===e.id});m&&i.push(tt.a("PRIMITIVE",m))}if(b.includes(e.id)){var E=Oe.Bb(e.id);if(e.type===Le.B||e.type===Le.y){var h=Ze.getLocalDocumentObject(a,e.id)||E.attributes.fields;i.push(tt.a(e.type,{id:e.id,name:e.name,value:h,defaultValue:"no-use"}))}else e.type===Le.G&&i.push(tt.a(Le.G,{id:e.id,name:e.name,value:{header:[],data:[]},defaultValue:"no-use"}))}}};for(c.s();!(t=c.n()).done;){var o=s();if("continue"!==o&&"break"===o)break}}catch(e){c.e(e)}finally{c.f()}for(var u=0,l=i;u<l.length;u++){var p=l[u];Ks.dispatch(d.Pj(p.id,"isWatching",!0)),Ks.dispatch(d.Pj(p.id,"selected",!0))}}function ct(){var e=nt();return et.a.removeItem(e)}const st=n(4903),ot=n(89849),ut=n(29457);var dt,lt,pt=K.a.mark(bt),ft=K.a.mark(xt);function bt(e,t){var n;return K.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,q.b(e,t);case 3:return n=r.sent,r.abrupt("return",n);case 7:r.prev=7,r.t0=r.catch(0),console.error(r.t0);case 10:case"end":return r.stop()}},pt,null,[[0,7]])}function xt(e,t){var n;return K.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,q.b(e,t);case 3:return n=r.sent,t.resolve(n),r.abrupt("return",n);case 8:return r.prev=8,r.t0=r.catch(0),r.abrupt("return",t.reject(r.t0));case 11:case"end":return r.stop()}},ft,null,[[0,8]])}function yt(e){return K.a.mark(function t(n){var r,a;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e[n.type])){t.next=11;break}if(!("reject"in n)||!("resolve"in n)){t.next=9;break}return t.next=5,q.b(xt,r,n);case 5:return a=t.sent,t.abrupt("return",a);case 9:return t.next=11,q.b(bt,r,n);case 11:case"end":return t.stop()}},t)})}const vt=n(74754);var gt=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Object.defineProperty(t,"a",{enumerable:!0,get:t}),t}(n(92409));const It=n(55493);var mt,Et=[],ht=!1,kt=!1;function Tt(){return _t.apply(this,arguments)}function _t(){return(_t=Q.a(K.a.mark(function e(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ht){e.next=6;break}return e.next=4,Promise.reject(new Error("module (key: 3274) not found!"));case 4:lt=e.sent,ht=!0;case 6:e.next=12;break;case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0.message.indexOf("Loading chunk")>-1)){e.next=12;break}throw Error("No NetWork");case 12:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function wt(e,t){return St.apply(this,arguments)}function St(){return(St=Q.a(K.a.mark(function e(t,n){var r,a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=It.a(),a={id:r,file:t,callback:n},e.prev=2,e.next=5,Tt();case 5:Et.push(a),dt||Ot(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Pt(a);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))).apply(this,arguments)}function Ot(){0!==Et.length&&((dt=new gt.a)&&(dt.addEventListener("error",function(){kt=!0,Et.shift()}),dt.addEventListener("message",function(e){switch(e.data.type){case"compress_jpeg_done":case"compress_png_done":(function(e,t){return jt.apply(this,arguments)})(e.data.data,e.data.id).catch(function(e){console.error(e)});break;case"compress_transparent_png_done":(function(e,t){return Rt.apply(this,arguments)})(e.data.data,e.data.id).catch(function(e){console.error(e)})}})),At().catch(function(e){console.error(e)}))}function At(){return Dt.apply(this,arguments)}function Dt(){return(Dt=Q.a(K.a.mark(function e(){var t,n,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(lt){e.next=3;break}return e.next=3,Tt();case 3:if(0!==Et.length){e.next=7;break}return dt&&dt.terminate(),dt=void 0,e.abrupt("return");case 7:return t=Et[0],e.prev=8,e.next=11,lt.get_file_img_info(t.file);case 11:if(!(n=e.sent)){e.next=23;break}if(r=n.image_data,"image/jpeg"!==n.type&&"image/png"!==n.type){e.next=22;break}if(!n.transparent){e.next=20;break}return Lt(r,t,"transparent_png").catch(function(e){console.error(e)}),e.abrupt("return");case 20:return Lt(r,t,"mozjpeg").catch(function(e){console.error(e)}),e.abrupt("return");case 22:throw Error("not_png_jpg");case 23:e.next=31;break;case 25:e.prev=25,e.t0=e.catch(8),console.error(e.t0),Et.shift(),Pt(t),At().catch(function(e){console.error(e)});case 31:case"end":return e.stop()}},e,null,[[8,25]])}))).apply(this,arguments)}function Lt(e,t,n){return Ct.apply(this,arguments)}function Ct(){return(Ct=Q.a(K.a.mark(function e(t,n,r){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!kt){e.next=3;break}return Pt(n),e.abrupt("return");case 3:dt?dt.postMessage({type:r,id:n.id,data:t}):Ot();case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rt(){return(Rt=Q.a(K.a.mark(function e(t,n){var r,a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(lt){e.next=3;break}return e.next=3,Tt();case 3:return e.next=5,lt.imagedata_to_blob(t,"image/png");case 5:return r=e.sent,e.next=8,lt.blob_to_arrayBuffer(r);case 8:if(a=e.sent,!dt||kt){e.next=12;break}return dt.postMessage({type:"optipng",id:n,buffer:a}),e.abrupt("return");case 12:Ot();case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jt(){return(jt=Q.a(K.a.mark(function e(t,n){var r,a,i,c,s;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(lt){e.next=3;break}return e.next=3,Tt();case 3:if(0===Et.length){e.next=23;break}if(!(r=Et.shift())){e.next=23;break}if(r.id!==n){e.next=22;break}if(!(t instanceof ImageData)){e.next=16;break}return e.next=10,lt.imagedata_to_blob(t,r.file.type);case 10:return i=e.sent,e.next=13,lt.blob_to_arrayBuffer(i);case 13:a=e.sent,e.next=17;break;case 16:a=t;case 17:c=r.file.name,s=lt.get_file_from_array_buffer(a,r.file.type,c),r.callback(s),e.next=23;break;case 22:Pt(r);case 23:At().catch(function(e){console.error(e)});case 24:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pt(e){e.callback(e.file)}const Nt=n(36880);var Vt=K.a.mark(an),Bt=K.a.mark(cn),Wt=K.a.mark(un),Ut=K.a.mark(dn),Mt=K.a.mark(ln),Gt=K.a.mark(pn),Ft=K.a.mark(fn),Ht=K.a.mark(bn),Yt=K.a.mark(vn),Jt=K.a.mark(gn),zt=K.a.mark(In),Kt=K.a.mark(mn),qt=K.a.mark(En),Qt=K.a.mark(hn),Xt=K.a.mark(kn),Zt=K.a.mark(wn),$t=K.a.mark(Sn),en=K.a.mark(On),tn=K.a.mark(An),nn=K.a.mark(Dn),rn=K.a.mark(Rn);function an(e){var t,n,r,a,i,c;return K.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.payload,n=t.imageFile,r=t.widgetId,a=Oe.Bb(r),n&&a){s.next=4;break}return s.abrupt("return");case 4:if(a.type!==Le.v){s.next=14;break}return s.next=7,q.b(Ne.L,n.source||n.cdnUrl);case 7:if(i=s.sent,!Oe.Kb(a)){s.next=12;break}return c=Oe.nb(i),s.next=12,q.e(d.Lg(r,"size",c,!1,!1));case 12:return s.next=14,q.e(d.Lg(r,"fileId",n.id,!0,!0));case 14:if(a.type!==Le.f&&a.type!==Le.z&&a.type!==Le.w){s.next=17;break}return s.next=17,q.e(d.Lg(r,"backgroundImage",n.id,!0,!0));case 17:case"end":return s.stop()}},Vt)}function cn(e){var t,n,r,a,i,c,s,o,u,l,p,f,b,x,y,v,g,I;return K.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,n=t.fileList,r=t.onSuccess,a=t.isMultipleFiles,m.next=3,q.f(Nt.s);case 3:return i=m.sent,c=[],s=[],o=[],u=Array.from(n),m.next=10,q.b(sn,u);case 10:l=m.sent,p=0;case 12:if(!(p<l.length)){m.next=21;break}return f=l[p],m.next=16,q.b(Ne.qb,f,i);case 16:"success"===(b=m.sent).status?s.push(b):c.push(b);case 18:p++,m.next=12;break;case 21:if(!s.length){m.next=24;break}return m.next=24,q.e(d.Fi(!0));case 24:if(!(c.length>0)){m.next=34;break}if(a){m.next=30;break}return m.next=28,q.e(d.mj({message:c[0].message,showCloseIcon:!1,showPrefixIcon:!1,type:"error"}));case 28:m.next=32;break;case 30:return m.next=32,q.e(d.uj(c,"image"));case 32:m.next=36;break;case 34:return m.next=36,q.e(d.mj({message:Re.c(i,"importImageSuccess").toString(),duration:1e3,type:"success"}));case 36:if(!(s.length>0)){m.next=61;break}x=j.a(s),m.prev=38,x.s();case 40:if((y=x.n()).done){m.next=48;break}return v=y.value,m.next=44,q.b(Oe.y,v.file);case 44:(g=m.sent)&&(o.push(g),null!==(I=Pe.oTHelper.imageFileList)&&void 0!==I&&I.clientOp.add(g));case 46:m.next=40;break;case 48:m.next=53;break;case 50:m.prev=50,m.t0=m.catch(38),x.e(m.t0);case 53:return m.prev=53,x.f(),m.finish(53);case 56:return r&&r(o),m.next=59,q.e(d.Zj());case 59:return m.next=61,q.b(Qi);case 61:case"end":return m.stop()}},Bt,null,[[38,50,53,56]])}function sn(e){return on.apply(this,arguments)}function on(){return(on=Q.a(K.a.mark(function e(t){var n,r,a,i;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=j.a(t),e.prev=2,i=K.a.mark(function e(){var t,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.value,e.next=3,new Promise(function(e){wt(t,function(t){e(t)}).catch(function(e){console.error(e)})});case 3:r=e.sent,n.push(r);case 5:case"end":return e.stop()}},e)}),r.s();case 5:if((a=r.n()).done){e.next=9;break}return e.delegateYield(i(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),r.e(e.t1);case 14:return e.prev=14,r.f(),e.finish(14);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}},e,null,[[2,11,14,17]])}))).apply(this,arguments)}function un(e){var t,n,r,a,i,c,s,o;return K.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=e.payload,n=t.imageFiles,r=t.isEmitOT,a=void 0===r||r,i=j.a(n);try{for(i.s();!(c=i.n()).done;)s=c.value,Oe.Tb(s),a&&null!==(o=Pe.oTHelper.imageFileList)&&void 0!==o&&o.clientOp.add(s)}catch(e){i.e(e)}finally{i.f()}return u.next=5,q.e(d.Zj());case 5:case"end":return u.stop()}},Wt)}function dn(e){var t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.imageFileId,r=t.isEmitOT,a=void 0===r||r,Oe.E(n),c.next=4,q.e(d.Qj());case 4:return c.next=6,q.e(d.Uj());case 6:return c.next=8,q.e(d.Zj());case 8:return c.next=10,q.e(d.Fi(!0));case 10:a&&(null!==(i=Pe.oTHelper.imageFileList)&&void 0!==i&&i.clientOp.remove(n),he.q(he.c.IMAGE_LIBRARY,n));case 11:case"end":return c.stop()}},Ut)}function ln(e){var t,n,r,a,i,c,s,o,u,l,p;return K.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,n=t.newId,r=t.oldId,a=t.isEmitOT,i=void 0===a||a,f.next=3,q.f(Nt.C);case 3:c=f.sent,Oe.p(r,n),Oe.Rb(r,n),s=j.a(c),f.prev=7,s.s();case 9:if((o=s.n()).done){f.next=20;break}if(u=o.value,(l=u.backgroundImage)!==r){f.next=15;break}return f.next=15,q.e(d.Jg(u.id,"backgroundImage",n));case 15:if(!vt.o(r,l)){f.next=18;break}return f.next=18,q.e(d.Jg(u.id,"backgroundImage",vt.eb(r,n,l)));case 18:f.next=9;break;case 20:f.next=25;break;case 22:f.prev=22,f.t0=f.catch(7),s.e(f.t0);case 25:return f.prev=25,s.f(),f.finish(25);case 28:return vt.m(r,n),f.next=31,q.e(d.Qj());case 31:return f.next=33,q.e(d.Zj());case 33:i&&(null!==(p=Pe.oTHelper.imageFileList)&&void 0!==p&&p.clientOp.replaceImageFileId(r,n),he.z.replaceFieldValue("image_file_list_dropdown","IMAGE_FILE_ID",r,n));case 34:case"end":return f.stop()}},Mt,null,[[7,22,25,28]])}function pn(e){var t,n,r,a;return K.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.payload,n=t.soundFile,r=t.widgetId,a=Oe.Bb(r),!n||!a||a.type!==Le.b){i.next=5;break}return i.next=5,q.e(d.Lg(r,"fileId",n.id,!0,!0));case 5:case"end":return i.stop()}},Gt)}function fn(e){var t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.soundFiles,r=t.isEmitOT,a=void 0===r||r,c.next=3,q.e(d.kf(n));case 3:a&&null!==(i=Pe.oTHelper.soundFileList)&&void 0!==i&&i.clientOp.add(n);case 4:case"end":return c.stop()}},Ft)}function bn(e){var t,n,r,a,i,c,s,o,u,l,p,f,b,x,y;return K.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,n=t.fileList,r=t.onSuccess,a=t.isMultipleFiles,v.next=3,q.f(Nt.s);case 3:i=v.sent,c=[],s=[],o=[],u=Array.from(n),l=0;case 9:if(!(l<u.length)){v.next=18;break}return p=u[l],v.next=13,q.b(Ne.rb,p,i);case 13:"success"===(f=v.sent).status?s.push(f):c.push(f);case 15:l++,v.next=9;break;case 18:if(!s.length){v.next=21;break}return v.next=21,q.e(d.Fi(!0));case 21:if(!(c.length>0)){v.next=31;break}if(a){v.next=27;break}return v.next=25,q.e(d.mj({message:c[0].message,showCloseIcon:!1,showPrefixIcon:!1,type:"error"}));case 25:v.next=29;break;case 27:return v.next=29,q.e(d.uj(c,"sound"));case 29:v.next=33;break;case 31:return v.next=33,q.e(d.mj({message:Re.c(i,"importSoundSuccess").toString(),type:"success"}));case 33:if(!(s.length>0)){v.next=55;break}b=j.a(s),v.prev=35,y=K.a.mark(function e(){var t,n,r,a,i,c,s;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.value,n=t.file.name.slice(0,t.file.name.lastIndexOf(".")),r=Ne.I(t.file.name),a=[],e.next=6,q.f(Nt.I);case 6:return e.sent.forEach(function(e){Ne.I(e.name)===r&&a.push(e.name.slice(0,e.name.lastIndexOf(".")))}),i=vt.bc(n,a)+r,e.next=11,q.b(xn,t.file,i);case 11:if(!(null===(c=e.sent)||void 0===c?void 0:c.id)){e.next=17;break}return o.push(c),e.next=16,q.e(d.kf([c]));case 16:null!==(s=Pe.oTHelper.soundFileList)&&void 0!==s&&s.clientOp.add([c]);case 17:case"end":return e.stop()}},e)}),b.s();case 38:if((x=b.n()).done){v.next=42;break}return v.delegateYield(y(),"t0",40);case 40:v.next=38;break;case 42:v.next=47;break;case 44:v.prev=44,v.t1=v.catch(35),b.e(v.t1);case 47:return v.prev=47,b.f(),v.finish(47);case 50:return r&&r(o),v.next=53,q.e(d.Zj());case 53:return v.next=55,q.b(vn);case 55:case"end":return v.stop()}},Ht,null,[[35,44,47,50]])}function xn(e,t){return yn.apply(this,arguments)}function yn(){return(yn=Q.a(K.a.mark(function e(t,n){var r,a,i;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.ob(t);case 2:if(!(r=e.sent)){e.next=9;break}return e.next=6,Ne.y(r);case 6:return a=e.sent,i={cdnUrl:"",id:n,name:n,source:r,duration:a<1?1:a},e.abrupt("return",i);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vn(){var e,t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.f(Nt.J);case 2:return e=n.sent,n.next=5,q.f(Nt.I);case 5:if(t=n.sent,!e){n.next=9;break}return n.next=9,q.b(Te.d,t,function(e){var t;gn(e),null!==(t=Pe.oTHelper.soundFileList)&&void 0!==t&&t.clientOp.replaceSoundFileCdnUrl(e.id,e.cdnUrl)});case 9:case"end":return n.stop()}},Yt)}function gn(e){return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.e(d.Rg(e.id,e.cdnUrl));case 2:case"end":return t.stop()}},Jt)}function In(e){return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return null!=e&&e.forEach(function(e){e.source&&Ne.R(e.source)&&(e.source=Ne.n(e.source))}),t.next=3,q.e(d.Vh(e||[]));case 3:return t.next=5,q.b(vn);case 5:case"end":return t.stop()}},zt)}function mn(e){var t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.id,r=t.isEmitOT,a=void 0===r||r,vt.Tb(n),c.next=4,q.e(d.Nh(n));case 4:return c.next=6,q.e(d.Qj());case 6:return c.next=8,q.e(d.Uj());case 8:return c.next=10,q.e(d.Zj());case 10:return c.next=12,q.e(d.Fi(!0));case 12:a&&(null!==(i=Pe.oTHelper.soundFileList)&&void 0!==i&&i.clientOp.remove(n),he.q(he.c.SOUND_LIBRARY,n));case 13:case"end":return c.stop()}},Kt)}function En(e){var t,n,r,a,i,c,s;return K.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.id,r=t.newName,a=t.oldName,i=t.isEmitOT,c=void 0===i||i,o.next=3,q.e(d.Ph(n,r));case 3:return o.next=5,q.e(d.Qj());case 5:return o.next=7,q.e(d.Zj());case 7:c&&(null!==(s=Pe.oTHelper.soundFileList)&&void 0!==s&&s.clientOp.replaceSoundName(n,r),he.z.replaceTextValue("audio_sound_file_list_dropdown","SOUND_FILE_ID",a,r));case 8:case"end":return o.stop()}},qt)}function hn(e){var t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.iconFiles,r=t.isEmitOT,a=void 0===r||r,c.next=3,q.e(d.df(n));case 3:a&&null!==(i=Pe.oTHelper.iconFileList)&&void 0!==i&&i.clientOp.add(n);case 4:case"end":return c.stop()}},Qt)}function kn(e){var t,n,r,a,i,c,s,o,u,l,p,f,b,x;return K.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return t=e.payload,n=t.fileList,r=t.onSuccess,y.next=3,q.f(Nt.s);case 3:a=y.sent,i=[],c=[],s=[],o=Array.from(n),u=0;case 9:if(!(u<o.length)){y.next=18;break}return l=o[u],y.next=13,q.b(Ne.qb,l,a,[".svg"]);case 13:"success"===(p=y.sent).status?c.push(p):i.push(p);case 15:u++,y.next=9;break;case 18:if(!c.length){y.next=21;break}return y.next=21,q.e(d.Fi(!0));case 21:if(!(i.length>0)){y.next=26;break}return y.next=24,q.e(d.uj(i,"image"));case 24:y.next=28;break;case 26:return y.next=28,q.e(d.mj({message:Re.c(a,"importImageSuccess").toString(),duration:1e3,type:"success"}));case 28:if(!(c.length>0)){y.next=50;break}f=j.a(c),y.prev=30,x=K.a.mark(function e(){var t,n,r,a,i,c;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.value,n=t.file.name.slice(0,t.file.name.lastIndexOf(".")),r=[],e.next=5,q.f(Nt.o);case 5:return e.sent.forEach(function(e){r.push(e.name)}),a=vt.bc(n,r),e.next=10,q.b(Tn,t.file,a);case 10:if(!(i=e.sent)){e.next=16;break}return s.push(i),e.next=15,q.e(d.df([i]));case 15:null!==(c=Pe.oTHelper.iconFileList)&&void 0!==c&&c.clientOp.add([i]);case 16:case"end":return e.stop()}},e)}),f.s();case 33:if((b=f.n()).done){y.next=37;break}return y.delegateYield(x(),"t0",35);case 35:y.next=33;break;case 37:y.next=42;break;case 39:y.prev=39,y.t1=y.catch(30),f.e(y.t1);case 42:return y.prev=42,f.f(),y.finish(42);case 45:return r&&r(s),y.next=48,q.e(d.Zj());case 48:return y.next=50,q.b(wn);case 50:case"end":return y.stop()}},Xt,null,[[30,39,42,45]])}function Tn(e,t){return _n.apply(this,arguments)}function _n(){return(_n=Q.a(K.a.mark(function e(t,n){var r,a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.ob(t);case 2:if(!(r=e.sent)){e.next=6;break}return a={cdnUrl:"",id:Ce.a("ICON"),name:n,md5:"",source:r},e.abrupt("return",a);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wn(){var e,t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.f(Nt.J);case 2:return e=n.sent,n.next=5,q.f(Nt.o);case 5:if(t=n.sent,n.prev=6,!e){n.next=10;break}return n.next=10,q.b(Te.b,t,function(e){var t;Sn(e),null!==(t=Pe.oTHelper.iconFileList)&&void 0!==t&&t.clientOp.replaceIconFileCdnUrl(e.id,e.cdnUrl)});case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(6),console.error(n.t0);case 15:case"end":return n.stop()}},Zt,null,[[6,12]])}function Sn(e){return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.e(d.Pg(e.id,e.cdnUrl));case 2:case"end":return t.stop()}},$t)}function On(e){var t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.id,r=t.isEmitOT,a=void 0===r||r,c.next=3,q.e(d.Hh(n));case 3:return c.next=5,q.e(d.Qj());case 5:return c.next=7,q.e(d.Uj());case 7:return c.next=9,q.e(d.Zj());case 9:return c.next=11,q.e(d.Fi(!0));case 11:a&&(null!==(i=Pe.oTHelper.iconFileList)&&void 0!==i&&i.clientOp.remove(n),he.q(he.c.ICON_LIBRARY,n));case 12:case"end":return c.stop()}},en)}function An(e){var t,n,r,a,i,c,s;return K.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.id,r=t.newName,a=t.oldName,i=t.isEmitOT,c=void 0===i||i,o.next=3,q.e(d.Oh(n,r));case 3:return o.next=5,q.e(d.Qj());case 5:return o.next=7,q.e(d.Zj());case 7:c&&(null!==(s=Pe.oTHelper.iconFileList)&&void 0!==s&&s.clientOp.replaceIconName(n,r),he.z.replaceTextValue("icon_file_list_dropdown","ICON_FILE_ID",a+".svg",r+".svg"));case 8:case"end":return o.stop()}},tn)}function Dn(e){return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return null!=e&&e.forEach(function(e){e.source&&Ne.R(e.source)&&(e.source=Ne.n(e.source))}),t.next=3,q.e(d.Rh(e||[]));case 3:return t.next=5,q.b(wn);case 5:case"end":return t.stop()}},nn)}mt={},Z.a(mt,d.X,an),Z.a(mt,d.Y,cn),Z.a(mt,d.s,un),Z.a(mt,d.A,ln),Z.a(mt,d.J,dn),Z.a(mt,d.Z,pn),Z.a(mt,d.w,bn),Z.a(mt,d.v,fn),Z.a(mt,d.ob,mn),Z.a(mt,d.qb,En),Z.a(mt,d.q,hn),Z.a(mt,d.r,kn),Z.a(mt,d.mb,On),Z.a(mt,d.pb,An);var Ln=mt,Cn=yt(Ln);function Rn(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.g(Object.keys(Ln),Cn);case 2:case"end":return e.stop()}},rn)}var jn,Pn=K.a.mark(Nn);function Nn(){var e,t,n,r,a,i,c,o,u,l,p,f,b,x,y,v,g,I,m,E;return K.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,q.f(function(e){return e.project.globalVariableList});case 2:return e=h.sent,h.next=5,q.f(function(e){return e.project.globalArrayList});case 5:return t=h.sent,h.next=8,q.f(function(e){return e.project.globalObjectList});case 8:return n=h.sent,h.next=11,q.f(function(e){return e.project.globalWidgetIds});case 11:return r=h.sent,h.next=14,q.f(function(e){return e.project.id});case 14:return a=h.sent,h.next=17,q.f(function(e){return e.project.screens});case 17:i=h.sent,c=[],o=[],u=[],l=[],p=[],r.forEach(function(e){var t=Oe.dc.get(e);t&&(t.type!==Le.B&&t.type!==Le.y||l.push(t),t.type===Le.G&&p.push(t))}),Array.prototype.push.apply(c,e),Array.prototype.push.apply(o,t),Array.prototype.push.apply(u,n),f=c.map(function(e){return tt.a("PRIMITIVE",e,{isWatching:!1})}),b=o.map(function(e){return tt.a("LIST",e,{isWatching:!1})}),x=u.map(function(e){return tt.a("DICT",e,{isWatching:!1})}),y=l.map(function(e){var t=Ze.getLocalDocumentObject(a,e.id)||e.attributes.fields;return tt.a(e.type,{id:e.id,defaultValue:"no-use",value:t,name:e.title,isWatching:!1})}),v=p.map(function(e){return tt.a(e.type,{id:e.id,defaultValue:"no-use",value:e.attributes.db,name:e.title,isWatching:!1})}),i.forEach(function(e){var t=e.primitiveVariables,n=e.arrayVariables,r=e.objectVariables;t.forEach(function(t){f.push(tt.a("PRIMITIVE",t,{isWatching:!1,screenId:e.id}))}),n.forEach(function(t){b.push(tt.a("LIST",t,{isWatching:!1,screenId:e.id}))}),r.forEach(function(t){x.push(tt.a("DICT",t,{isWatching:!1,screenId:e.id}))})}),g=[].concat(s.a(f),s.a(b),s.a(x),s.a(y),s.a(v)),I=j.a(g),h.prev=35,I.s();case 37:if((m=I.n()).done){h.next=43;break}return E=m.value,h.next=41,q.e(d.bf(E));case 41:h.next=37;break;case 43:h.next=48;break;case 45:h.prev=45,h.t0=h.catch(35),I.e(h.t0);case 48:return h.prev=48,I.f(),h.finish(48);case 51:case"end":return h.stop()}},Pn,null,[[35,45,48,51]])}var Vn=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Object.defineProperty(t,"a",{enumerable:!0,get:t}),t}(n(96540));const Bn=n(66905),Wn=n(99666);var Un=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Object.defineProperty(t,"a",{enumerable:!0,get:t}),t}(n(57309)),Mn=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Object.defineProperty(t,"a",{enumerable:!0,get:t}),t}(n(11412));const Gn=n(98497);var Fn=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Object.defineProperty(t,"a",{enumerable:!0,get:t}),t}(n(95653));const Hn=n(88299);var Yn,Jn=function(e){var t=e.title,n=e.onConfirm,r=e.content,a=e.onDeny,i=e.className,c=e.onCancel,s=e.isDangerous,o=e.cancelText,u=e.allowText,d=e.denyText,l=e.cancelBtnVisible,p=void 0===l||l,f=e.confirmBtnVisible,b=void 0===f||f,x=e.mask,y=void 0===x||x,v=function(){n&&n()};return Vn.a.createElement(Gn.f,{visible:!0,showCloseButton:!1,withPortal:!0,maskClosable:!1,mask:y,className:Mn()(Fn.a.dialog,i,d&&Fn.a.dialogSecondary)},Vn.a.createElement(Hn.a,null,Vn.a.createElement(Hn.b,{keys:"enter",callback:v})),Vn.a.createElement("h3",null,t),Vn.a.createElement("span",null,r),Vn.a.createElement("div",{className:Mn()(Fn.a.dialogButtons)},p&&Vn.a.createElement(Gn.d,{type:"light",onClick:function(){c&&c()}},o),d&&Vn.a.createElement(Gn.d,{onClick:function(){a&&a()},className:Fn.a.denyButton},d),b&&Vn.a.createElement(Gn.d,{type:"primary",danger:s,onClick:v},u)))},zn=new(function(){function e(){Bn.a(this,e),this.boxQueue=[],this.currentBox=null}return Wn.a(e,[{key:"appendDialog",value:function(e){var t=this,n=document.createElement("div"),r=Ce.a("dialog");n.id=r;var a=e.onConfirm,i=e.onCancel,c=e.onClose,s=function(){var e=Q.a(K.a.mark(function e(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=3;break}return e.next=3,a();case 3:t.openDialog();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Q.a(K.a.mark(function e(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=3;break}return e.next=3,i();case 3:t.openDialog();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Q.a(K.a.mark(function e(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=3;break}return e.next=3,c();case 3:t.openDialog();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),l=o.a(o.a({},e),{},{onConfirm:s,onClose:d,onCancel:u});return this.boxQueue.push({id:r,element:n,config:l}),this.currentBox||this.openDialog(),r}},{key:"openDialog",value:function(){this.destroyCurrentBox();var e=this.boxQueue.shift();return e&&(Un.a.render(Vn.a.createElement(Jn,e.config),e.element),document.body.appendChild(e.element),this.currentBox=e),e}},{key:"removeDialog",value:function(e){var t;if(!e)return e;if(e===(null===(t=this.currentBox)||void 0===t?void 0:t.id))return this.destroyCurrentBox(),e;var n=this.boxQueue.findIndex(function(t){return t.id===e});return n>=0&&this.boxQueue.splice(n,1),e}},{key:"destroyCurrentBox",value:function(){this.currentBox&&(this.destroyBox(this.currentBox.element),this.currentBox=null)}},{key:"destroyBox",value:function(e){Un.a.unmountComponentAtNode(e),document.body.removeChild(e)}}]),e}()),Kn=K.a.mark(vr),qn=K.a.mark(gr),Qn=K.a.mark(Ir),Xn=K.a.mark(mr),Zn=K.a.mark(Er),$n=K.a.mark(hr),er=K.a.mark(kr),tr=K.a.mark(Tr),nr=K.a.mark(_r),rr=K.a.mark(wr),ar=K.a.mark(Sr),ir=K.a.mark(Or),cr=K.a.mark(Ar),sr=K.a.mark(Dr),or=K.a.mark(Lr),ur=K.a.mark(Cr),dr=K.a.mark(Rr),lr=K.a.mark(jr),pr=K.a.mark(Pr),fr=K.a.mark(Nr),br=K.a.mark(Vr),xr=K.a.mark(Br),yr=K.a.mark(Mr);function vr(){var e;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.f(Nt.s);case 2:return e=t.sent,t.next=5,q.e(d.zh({onConfirm:function(){Ks.dispatch(d.Ch())},allowText:Re.c(e,"cloudSpace.login").toString(),cancelText:Re.c(e,"cloudSpace.cancelLogin").toString(),title:Re.c(e,"cloudSpace.NotLoginTitle").toString(),content:Re.c(e,"cloudSpace.notLoginDescription").toString()}));case 5:case"end":return t.stop()}},Kn)}function gr(e){var t,n,r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.f(Nt.s);case 2:return t=a.sent,n=e.map(function(e){return Vn.a.createElement("div",{className:"removedCloudDB",key:e.id,children:Vn.a.createElement("li",{children:e.title,className:"removedDBName",key:e.id})})}),r=Vn.a.createElement("div",{className:"removedCloudDBWrapper",children:[n]}),a.next=7,q.e(d.zh({allowText:Re.c(t,"know").toString(),title:Re.c(t,"cloudSpace.dataSourceNotExistDesc").toString(),content:r,cancelBtnVisible:!1,onConfirm:function(){Ks.dispatch(d.Ij((new Date).getTime()))}}));case 7:case"end":return a.stop()}},qn)}function Ir(e,t){var n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,q.f(Nt.s);case 2:n=c.sent,r=Re.c(n,t)?Re.c(n,t):t,a=e.map(function(e){return Vn.a.createElement("div",{className:"removedCloudDB",key:e.id,children:Vn.a.createElement("li",{children:e.title,className:"removedDBName",key:e.id})})}),i=Vn.a.createElement("div",{className:"removedCloudDBWrapper",children:[a]}),zn.appendDialog({allowText:Re.c(n,"know").toString(),title:"以下控件绑定的云数据源发生异常(".concat(r,")，请重新绑定"),content:i,cancelBtnVisible:!1});case 7:case"end":return c.stop()}},Qn)}function mr(e,t){var n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,q.f(Nt.s);case 2:n=c.sent,r=Re.c(n,t),a=e.map(function(e){return Vn.a.createElement("div",{className:"removedCloudDB",key:e.id,children:Vn.a.createElement("li",{children:e.title,className:"removedDBName",key:e.id})})}),i=Vn.a.createElement("div",{className:"removedCloudDBWrapper",children:[a]}),zn.appendDialog({allowText:Re.c(n,"know").toString(),title:Re.c(n,"cloudSpace.dataSourceExceedLimitError",{type:r}).toString(),content:i,cancelBtnVisible:!1});case 7:case"end":return c.stop()}},Xn)}function Er(){var e,t,n;return K.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,q.f(Nt.r);case 2:if(!r.sent){r.next=21;break}return r.prev=4,r.next=7,q.a({dicts:q.b(ot.g),tables:q.b(ot.j)});case 7:return e=r.sent,t=e.dicts,n=e.tables,r.next=12,q.e(d.Bg(t,!0));case 12:return r.next=14,q.e(d.Eg(n,!0));case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(4),console.error(r.t0);case 19:r.next=23;break;case 21:return r.next=23,q.b(hr);case 23:case"end":return r.stop()}},Zn,null,[[4,16]])}function hr(){var e,t,n,r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.f(Nt.y);case 2:return e=a.sent,a.prev=3,a.next=6,q.a({dicts:q.b(ot.g,e),tables:q.b(ot.j,e)});case 6:return t=a.sent,n=t.dicts,r=t.tables,a.next=11,q.e(d.Bg(n,!0));case 11:return a.next=13,q.e(d.Eg(r,!0));case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(3),console.error(a.t0);case 18:case"end":return a.stop()}},$n,null,[[3,15]])}function kr(){var e,t,n,r,a,i,c,s,o,u,d,p,f,b,x,y;return K.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,q.f(Nt.z);case 2:return e=v.sent,v.next=5,q.f(Nt.b);case 5:return t=v.sent,v.next=8,q.f(Nt.d);case 8:for(n=v.sent,r=[],a=[],i=[],e===l.d.LOCAL_FILE&&st.b.forEach(function(e){e.type===Le.j&&e.attributes.cloudDictId!==Oe.i&&r.push(e),e.type===Le.k&&e.attributes.cloudTableId!==Oe.i&&a.push(e),e.type===Le.A&&"number"==typeof e.attributes.dataSource&&i.push(e)}),st.g.forEach(function(e){e.type===Le.j&&e.attributes.cloudDictId!==Oe.i&&r.push(e),e.type===Le.k&&e.attributes.cloudTableId!==Oe.i&&a.push(e),e.type===Le.A&&"number"==typeof e.attributes.dataSource&&i.push(e)}),c=[],s=function(){var e=u[o];t.findIndex(function(t){return t.id===e.attributes.cloudDictId})<0&&c.push(e)},o=0,u=r;o<u.length;o++)s();for(d=function(){var e=f[p];n.findIndex(function(t){return t.id===e.attributes.cloudTableId})<0&&c.push(e)},p=0,f=a;p<f.length;p++)d();for(b=function(){var e=y[x];n.findIndex(function(t){return t.id===e.attributes.dataSource})<0&&c.push(e)},x=0,y=i;x<y.length;x++)b();return v.abrupt("return",c);case 22:case"end":return v.stop()}},er)}function Tr(e){var t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.f(Nt.h);case 2:return t=n.sent,n.next=5,q.b(Er);case 5:return n.next=7,q.b(Or);case 7:return n.next=9,q.b(Ar);case 9:return n.next=11,q.b(Cr);case 11:return n.next=13,q.b(_r,e.payload);case 13:t||he.z.rerenderCurrentScreenWorkspaceData();case 14:case"end":return n.stop()}},tr)}function _r(e){var t,n,r,a;return K.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,q.b(kr);case 2:if(!((t=i.sent).length>0&&e)){i.next=6;break}return i.next=6,q.b(gr,t);case 6:if(0!==t.length){i.next=8;break}return i.abrupt("return",[]);case 8:n=j.a(t),i.prev=9,n.s();case 11:if((r=n.n()).done){i.next=30;break}if((a=r.value).type!==Le.j){i.next=18;break}return i.next=16,q.e(d.Lg(a.id,"cloudDictId",Oe.i,!1,!0,!0));case 16:return i.next=18,q.e(d.Ih([a.attributes.cloudDictId]));case 18:if(a.type!==Le.k){i.next=23;break}return i.next=21,q.e(d.Lg(a.id,"cloudTableId",Oe.i,!1,!0,!0));case 21:return i.next=23,q.e(d.Jh([a.attributes.cloudTableId]));case 23:if(a.type!==Le.A){i.next=28;break}return i.next=26,q.e(d.Lg(a.id,"dataSource","",!1,!0,!0));case 26:return i.next=28,q.e(d.Jh([a.attributes.dataSource]));case 28:i.next=11;break;case 30:i.next=35;break;case 32:i.prev=32,i.t0=i.catch(9),n.e(i.t0);case 35:return i.prev=35,n.f(),i.finish(35);case 38:return i.abrupt("return",t);case 39:case"end":return i.stop()}},nr,null,[[9,32,35,38]])}function wr(){var e,t,n,r,a,i,c,o,u,l,p,f,b,x,y,v,g,I,m,E,h,k,T,_,w,S,O,A;return K.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(0!==st.b.size){D.next=2;break}return D.abrupt("return");case 2:return D.next=4,q.f(Nt.J);case 4:if(D.sent){D.next=9;break}return D.next=8,q.b(vr);case 8:return D.abrupt("return");case 9:return D.next=11,q.b(_r,!1);case 11:if(e=D.sent,t=new Set,n=new Set,e.forEach(function(e){e.type===Le.j&&t.add(e.attributes.cloudDictId),e.type===Le.k&&n.add(e.attributes.cloudTableId),e.type===Le.A&&"number"==typeof e.attributes.dataSource&&n.add(e.attributes.dataSource)}),r=[],a=[],i=[],c=[],o=[],D.prev=20,!(t.size>0)){D.next=26;break}return D.next=24,q.b(ot.b,s.a(t));case 24:u=D.sent,e.forEach(function(e){if(e.type===Le.j){var t=st.b.get(e.id);if(t){var n=u[e.attributes.cloudDictId];n===Oe.e?(r.push(e),t.attributes.cloudDictId=Oe.i):n&&(t.attributes.cloudDictId=parseInt(u[e.attributes.cloudDictId]))}}});case 26:D.next=39;break;case 28:D.prev=28,D.t0=D.catch(20),console.error(D.t0),l=JSON.parse(D.t0.message),p=l.code,f=l.msg,D.t1=p,D.next=40400903===D.t1?35:37;break;case 35:return c.push.apply(c,s.a(e.filter(function(e){return e.type===Le.j}))),D.abrupt("break",39);case 37:return D.next=39,q.b(Ir,e.filter(function(e){return e.type===Le.j}),f);case 39:if(D.prev=39,!(n.size>0)){D.next=45;break}return D.next=43,q.b(ot.c,s.a(n));case 43:b=D.sent,e.forEach(function(e){if(e.type===Le.k){var t=b[e.attributes.cloudTableId],n=st.b.get(e.id);n&&(t===Oe.e?(a.push(e),n.attributes.cloudTableId=Oe.i):t&&(n.attributes.cloudTableId=parseInt(b[e.attributes.cloudTableId])))}if(e.type===Le.A){var r=b[e.attributes.dataSource],c=st.b.get(e.id);c&&(r===Oe.e?(i.push(e),c.attributes.dataSource=""):r&&(c.attributes.dataSource=parseInt(b[e.attributes.dataSource])))}});case 45:D.next=58;break;case 47:D.prev=47,D.t2=D.catch(39),console.error(D.t2),x=JSON.parse(D.t2.message),y=x.code,v=x.msg,D.t3=y,D.next=40400927===D.t3?54:56;break;case 54:return o.push.apply(o,s.a(e.filter(function(e){return e.type===Le.k||e.type===Le.A}))),D.abrupt("break",58);case 56:return D.next=58,q.b(Ir,e.filter(function(e){return e.type===Le.k}),v);case 58:if(!(r.length>0||a.length>0||i.length>0)){D.next=61;break}return D.next=61,q.b(Ir,[].concat(r,a,i),"cloudSpace.dataSourceNotExist");case 61:if(!(c.length>0)){D.next=64;break}return D.next=64,q.b(mr,[].concat(c),"cloudSpace.cloudDict");case 64:if(!(o.length>0)){D.next=67;break}return D.next=67,q.b(mr,[].concat(o),"cloudSpace.cloudTable");case 67:g=[],st.b.forEach(function(e){e.type===Le.j&&g.push(e)}),I=K.a.mark(function e(){var t,n,a,i;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=E[m],!(n=st.b.get(t.id))){e.next=8;break}return a=c.find(function(e){return e.id===n.id}),i=r.find(function(e){return e.id===n.id}),e.next=7,q.e(d.Lg(t.id,"cloudDictId",a||i?Oe.i:n.attributes.cloudDictId,!0,!0,!0));case 7:st.b.delete(t.id);case 8:case"end":return e.stop()}},e)}),m=0,E=g;case 71:if(!(m<E.length)){D.next=76;break}return D.delegateYield(I(),"t4",73);case 73:m++,D.next=71;break;case 76:h=[],st.b.forEach(function(e){e.type===Le.k&&h.push(e)}),k=K.a.mark(function e(){var t,n,a,i;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_[T],!(n=st.b.get(t.id))){e.next=8;break}return a=o.find(function(e){return e.id===n.id}),i=r.find(function(e){return e.id===n.id}),e.next=7,q.e(d.Lg(t.id,"cloudTableId",a||i?Oe.i:n.attributes.cloudTableId,!0,!0,!0));case 7:st.b.delete(t.id);case 8:case"end":return e.stop()}},e)}),T=0,_=h;case 80:if(!(T<_.length)){D.next=85;break}return D.delegateYield(k(),"t5",82);case 82:T++,D.next=80;break;case 85:w=[],st.b.forEach(function(e){e.type===Le.A&&w.push(e)}),S=K.a.mark(function e(){var t,n,a,i;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=A[O],!(n=st.b.get(t.id))){e.next=8;break}return a=o.find(function(e){return e.id===n.id}),i=r.find(function(e){return e.id===n.id}),e.next=7,q.e(d.Lg(t.id,"dataSource",a||i?"":n.attributes.dataSource,!0,!0,!0));case 7:st.b.delete(t.id);case 8:case"end":return e.stop()}},e)}),O=0,A=w;case 89:if(!(O<A.length)){D.next=94;break}return D.delegateYield(S(),"t6",91);case 91:O++,D.next=89;break;case 94:return D.next=96,q.b(Or);case 96:return D.next=98,q.b(Cr);case 98:return D.next=100,q.e(d.Qf());case 100:return D.next=102,q.b(Ar);case 102:return D.next=104,q.e(d.Qj());case 104:case"end":return D.stop()}},rr,null,[[20,28],[39,47]])}function Sr(){var e;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.e(d.ak({header:{cloudDBManager:l.j.Hide}}));case 2:return t.next=4,q.b(Ye.h);case 4:if(!((e=t.sent)&&e.length>0)){t.next=8;break}return t.next=8,q.e(d.ak({header:{cloudDBManager:l.j.Show}}));case 8:case"end":return t.stop()}},ar)}function Or(){var e,t,n;return K.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e={},st.g.forEach(function(t){t.type===Le.j&&t.attributes.cloudDictId&&(e[t.attributes.cloudDictId]=!1)}),r.t0=K.a.keys(e);case 3:if((r.t1=r.t0()).done){r.next=10;break}return t=r.t1.value,n=Number(t),r.next=8,q.e(d.Pf(n));case 8:r.next=3;break;case 10:case"end":return r.stop()}},ir)}function Ar(){var e,t,n;return K.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e={},st.g.forEach(function(t){t.type===Le.A&&"number"==typeof t.attributes.dataSource&&(e[t.attributes.dataSource]=!1)}),r.t0=K.a.keys(e);case 3:if((r.t1=r.t0()).done){r.next=10;break}return t=r.t1.value,n=Number(t),r.next=8,q.e(d.Sf(n));case 8:r.next=3;break;case 10:case"end":return r.stop()}},cr)}function Dr(e){var t,n,r,a,i,c;return K.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.id,r=t.showToast,s.prev=1,s.next=4,q.f(Nt.u);case 4:return a=s.sent,s.next=7,q.f(Nt.r);case 7:if(i=s.sent,c=[],!a||i){s.next=15;break}return s.next=12,q.b(ot.k,n,a);case 12:c=s.sent,s.next=18;break;case 15:return s.next=17,q.b(ot.f,n);case 17:c=s.sent;case 18:return s.next=20,q.e(d.Ag(n,c,!0));case 20:s.next=27;break;case 22:if(s.prev=22,s.t0=s.catch(1),!r){s.next=27;break}return s.next=27,q.e(d.mj({type:"error",message:s.t0.message}));case 27:case"end":return s.stop()}},sr,null,[[1,22]])}function Lr(e){var t,n,r,a,i,c,s,u,l,p;return K.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return n=e.payload,r=n.id,a=n.data,i=n.isEmitOT,f.next=3,q.f(Nt.a);case 3:return c=f.sent,s=c.find(function(e){return e.id===r}),f.next=7,q.e(d.Jj(r,a));case 7:i&&null!==(u=Pe.oTHelper.cloudSpace)&&void 0!==u&&u.clientOp.updateCloudDictKeys(r,a),(null==s||null===(t=s.data)||void 0===t?void 0:t.length)&&(l=[],p=[],s.data.forEach(function(e){var t=!0;a.forEach(function(n){e.id===n.id&&(t=!1,e.key!==n.key&&p.push(o.a(o.a({},n),{},{oldKey:e.key})))}),t&&l.push(e)}),l.forEach(function(e){he.q(he.c.CLOUD_DICT_KEYS,e.key)}),p.forEach(function(e){he.v(r,e.oldKey,e.key)}));case 9:case"end":return f.stop()}},or)}function Cr(){var e,t,n;return K.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e={},st.g.forEach(function(t){t.type===Le.k&&t.attributes.cloudTableId!==Oe.i&&(e[t.attributes.cloudTableId]=!1),t.type===Le.A&&"number"==typeof t.attributes.dataSource&&(e[t.attributes.dataSource]=!1)}),r.t0=K.a.keys(e);case 3:if((r.t1=r.t0()).done){r.next=10;break}return t=r.t1.value,n=Number(t),r.next=8,q.e(d.Rf(n,!1));case 8:r.next=3;break;case 10:case"end":return r.stop()}},ur)}function Rr(e){var t,n,r,a,i,c;return K.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.id,r=t.showToast,s.prev=1,s.next=4,q.f(Nt.y);case 4:return a=s.sent,s.next=7,q.f(Nt.r);case 7:if(i=s.sent,!a||i){s.next=14;break}return s.next=11,q.b(ot.m,n,a);case 11:c=s.sent,s.next=17;break;case 14:return s.next=16,q.b(ot.i,n);case 16:c=s.sent;case 17:return s.next=19,q.e(d.Dg(n,c.columns,!0));case 19:s.next=26;break;case 21:if(s.prev=21,s.t0=s.catch(1),!r){s.next=26;break}return s.next=26,q.e(d.mj({type:"error",message:s.t0.message}));case 26:case"end":return s.stop()}},dr,null,[[1,21]])}function jr(e,t){var n,r,a,i,c,s,o,u;return K.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:n=[],st.g.forEach(function(t){t.type===Le.A&&t.attributes.dataSource===e&&n.push(t)}),r=0,a=n;case 3:if(!(r<a.length)){l.next=14;break}for(o in i=a[r],c=i.attributes.templateSlotMap,s=!1,c)(u=c[o].dataBindings)&&t.includes(u)&&(c[o].dataBindings="",s=!0);if(!s){l.next=11;break}return l.next=11,q.e(d.Lg(i.id,"templateSlotMap",c,!1,!0,!0));case 11:r++,l.next=3;break;case 14:case"end":return l.stop()}},lr)}function Pr(e){var t,n,r,a,i,c,s,u,l,p;return K.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return n=e.payload,r=n.id,a=n.columns,i=n.isEmitOT,f.next=3,q.f(Nt.c);case 3:return c=f.sent,s=c.find(function(e){return e.id===r}),f.next=7,q.e(d.Mj(r,a));case 7:return f.next=9,q.e(d.Oj(r,a));case 9:if(i&&(null===(u=Pe.oTHelper.cloudSpace)||void 0===u||u.clientOp.updateCloudTableColumns(r,a)),!(null==s||null===(t=s.columns)||void 0===t?void 0:t.length)){f.next=19;break}if(l=[],p=[],s.columns.forEach(function(e){var t=!0;a.forEach(function(n){e.id===n.id&&(t=!1,e.name!==n.name&&p.push(o.a(o.a({},n),{},{oldName:e.name})))}),t&&l.push(e)}),l.forEach(function(e){he.q(he.c.CLOUD_TABLE_COLUMNS,e.name)}),p.forEach(function(e){he.w(r,e.oldName,e.name)}),!(l.length>0)){f.next=19;break}return f.next=19,q.b(jr,r,l.map(function(e){return e.id}));case 19:case"end":return f.stop()}},pr)}function Nr(e){var t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.id,c.prev=1,c.next=4,q.f(Nt.u);case 4:return r=c.sent,c.next=7,q.f(Nt.r);case 7:if(a=c.sent,i=[],!r||a){c.next=15;break}return c.next=12,q.b(ot.l,t,r);case 12:i=c.sent,c.next=18;break;case 15:return c.next=17,q.b(ot.h,t);case 17:i=c.sent;case 18:return c.next=20,q.e(d.Nj(t,i));case 20:null!==(n=Pe.oTHelper.cloudSpace)&&void 0!==n&&n.clientOp.updateCloudTableData(t,i),c.next=25;break;case 23:c.prev=23,c.t0=c.catch(1);case 25:case"end":return c.stop()}},fr,null,[[1,23]])}function Vr(e){var t,n,r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.list,t.isEmitOT&&null!==(r=Pe.oTHelper.cloudSpace)&&void 0!==r&&r.clientOp.updateCloudDictList(n),a.next=4,q.e(d.Kj(n));case 4:case"end":return a.stop()}},br)}function Br(e){var t,n,r,a;return K.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.list,r=t.isEmitOT,i.next=3,q.e(d.Lj(n));case 3:r&&null!==(a=Pe.oTHelper.cloudSpace)&&void 0!==a&&a.clientOp.updateCloudTableList(n);case 4:case"end":return i.stop()}},xr)}jn={},Z.a(jn,d.cb,wr),Z.a(jn,d.C,Tr),Z.a(jn,d.O,Dr),Z.a(jn,d.Bb,Lr),Z.a(jn,d.Q,Rr),Z.a(jn,d.Db,Pr),Z.a(jn,d.R,Nr),Z.a(jn,d.Cb,Vr),Z.a(jn,d.Eb,Br);var Wr=jn,Ur=yt(Wr);function Mr(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.g(Object.keys(Wr),Ur);case 2:return e.next=4,q.h([d.P],Er);case 4:case"end":return e.stop()}},yr)}var Gr=K.a.mark(di),Fr=K.a.mark(li),Hr=K.a.mark(fi),Yr=K.a.mark(bi),Jr=K.a.mark(xi),zr=K.a.mark(yi),Kr=K.a.mark(vi),qr=K.a.mark(gi),Qr=K.a.mark(Ii),Xr=K.a.mark(mi),Zr=K.a.mark(Ei),$r=K.a.mark(hi),ea=K.a.mark(ki),ta=K.a.mark(Ti),na=K.a.mark(_i),ra=K.a.mark(wi),aa=K.a.mark(Si),ia=K.a.mark(Oi),ca=K.a.mark(Ai),sa=K.a.mark(Di),oa=K.a.mark(Li),ua=K.a.mark(Ci),da=K.a.mark(Ri),la=K.a.mark(ji),pa=K.a.mark(Pi),fa=K.a.mark(Ni),ba=K.a.mark(Wi),xa=K.a.mark(Ui),ya=K.a.mark(Mi),va=K.a.mark(Gi),ga=K.a.mark(Fi),Ia=K.a.mark(Hi),ma=K.a.mark(Yi),Ea=K.a.mark(Ji),ha=K.a.mark(zi),ka=K.a.mark(Ki),Ta=K.a.mark(qi),_a=K.a.mark(Qi),wa=K.a.mark($i),Sa=K.a.mark(ec),Oa=K.a.mark(tc),Aa=K.a.mark(nc),Da=K.a.mark(rc),La=K.a.mark(ac),Ca=K.a.mark(ic),Ra=K.a.mark(cc),ja=K.a.mark(sc),Pa=K.a.mark(oc),Na=K.a.mark(uc),Va=K.a.mark(dc),Ba=K.a.mark(lc),Wa=K.a.mark(pc),Ua=K.a.mark(fc),Ma=K.a.mark(bc),Ga=K.a.mark(xc),Fa=K.a.mark(yc),Ha=K.a.mark(vc),Ya=K.a.mark(gc),Ja=K.a.mark(Ic),za=K.a.mark(mc),Ka=K.a.mark(Ec),qa=K.a.mark(hc),Qa=K.a.mark(kc),Xa=K.a.mark(Tc),Za=K.a.mark(_c),$a=K.a.mark(wc),ei=K.a.mark(Sc),ti=K.a.mark(Oc),ni=K.a.mark(Ac),ri=K.a.mark(Dc),ai=K.a.mark(Lc),ii=K.a.mark(Cc),ci=K.a.mark(Rc),si=K.a.mark(jc),oi=K.a.mark(Pc),ui=K.a.mark(Wc);function di(e){var t,n,r,a,i,c,s,o,u,l;return K.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return n=e.payload,r=n.index,a=n.shouldSaveCurrentData,i=void 0===a||a,p.next=3,q.f(Nt.x);case 3:return c=p.sent,p.next=6,q.f(Nt.C);case 6:if(s=p.sent,o=s.get(r),u=-1===c?"__EMPTY_ID__":(null===(t=s.get(c))||void 0===t?void 0:t.id)||"__EMPTY_ID__",!(null==o?void 0:o.id)||o.id===u){p.next=17;break}return he.g.setSelectedItem(),p.next=13,q.e(d.Bi(r));case 13:return p.next=15,q.e(d.ug(void 0));case 15:he.z.selectWorkspaceByScreenId(o.id,i),null!==(l=Pe.oTHelper.customEvent)&&void 0!==l&&l.emit.focusItem("widget");case 17:case"end":return p.stop()}},Gr)}function li(e){var t,n,r,a,i,c,s,o,u,l;return K.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return r=e.payload.index,p.next=3,q.f(Nt.s);case 3:return a=p.sent,p.next=6,q.f(Nt.C);case 6:return i=p.sent,c=Oe.B(Re.c(a,"defaultScreenTitle").toString(),i),s=Oe.A(c),o=i.size,u=he.z.addWorkspaceData({screenId:s.id}),l=void 0!==r?r:o,p.next=14,q.e(d.if(s,l));case 14:return p.next=16,q.e(d.vg(l));case 16:return p.next=18,q.e(d.Fi(!0));case 18:null!==(t=Pe.oTHelper.screen)&&void 0!==t&&t.clientOp.addScreen(s,l),null!==(n=Pe.oTHelper.blink)&&void 0!==n&&n.clientOp.addWorkspace(s.id,{screenId:s.id,workspaceJson:null==u?void 0:u.getWorkspaceJson(),workspaceOffset:null==u?void 0:u.getWorkspaceOffset()});case 20:case"end":return p.stop()}},Fr)}function pi(e){var t=Oe.A(Re.c(e,"defaultScreenTitle").toString());return{title:Re.c(e,"newProjectTitle").toString(),version:O.e,blockly:Z.a({},t.id,{screenId:t.id,workspaceJson:{blocks:{},connections:{},comments:{}},workspaceOffset:{x:0,y:0}}),screens:Z.a({},t.id,o.a(o.a({},t),{},{widgets:{}})),screenIds:[t.id],imageFileList:[],globalVariableList:[],globalArrayList:[],globalObjectList:[]}}function fi(e){var t,n;return K.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.code,r.next=3,q.f(Nt.s);case 3:return n=r.sent,r.next=6,q.e(d.Gf());case 6:if(40500103!==t){r.next=11;break}return r.next=9,q.e(d.zh({title:"error",content:Re.c(n,"MyProject.projectHasDeleted").toString(),cancelBtnVisible:!1}));case 9:case 14:r.next=19;break;case 11:if(40500101!==t){r.next=16;break}return r.next=14,q.e(d.zh({title:"error",content:Re.c(n,"MyProject.projectHasNoRermission").toString(),cancelBtnVisible:!1}));case 16:if(40400906!==t){r.next=19;break}return r.next=19,q.e(d.zh({title:Re.c(n,"OT.editPermissionLostTitle").toString(),content:Re.c(n,"OT.editPermissionLostDescription").toString(),cancelBtnVisible:!1}));case 19:case"end":return r.stop()}},Hr)}function bi(e){var t,n,r,a,i,c,s,o,u,p,f,b,x,y,v,g,I;return K.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,n=t.json,r=t.jsonFrom,a=void 0===r?l.d.OTHER:r,i=t.lastSavedTime,c=t.projectId,s=t.isCollWork,o=t.isAuthor,u=void 0===o||o,p=t.editPermission,f=t.sourceTag,b=t.sourceId,m.next=3,q.e(d.Gi(!1));case 3:return m.next=5,q.f(Nt.s);case 5:return x=m.sent,m.next=8,q.e(d.Ug());case 8:return y=n,v=f||l.g.FREEDOM,g=b||"",m.next=13,q.e(d.Di(a));case 13:return y||(y=pi(x)),m.next=16,q.b(gi,y);case 16:return m.next=18,q.e(d.Uh(c||Ce.a("PROJECT")));case 18:return m.next=20,q.e(d.Ei(i));case 20:return m.next=22,q.e(d.Fi(!1));case 22:return m.next=24,q.e(N.n());case 24:if(a!==l.d.MY_WORK){m.next=29;break}return m.next=27,q.e(d.Tg(!0));case 27:return m.next=29,q.e(d.Cf(!0));case 29:if(!c){m.next=38;break}if(!s){m.next=33;break}return m.next=33,q.e(N.o(c));case 33:Ne.jb(c),v=y.sourceTag||l.g.FREEDOM,g=y.sourceId||"",m.next=44;break;case 38:return ct(),m.next=41,q.e(d.Tg(!0));case 41:return Ne.k(["workId","inviteCode","jsonUrl"]),m.next=44,q.b(yi,v,g);case 44:return m.next=46,q.e(N.q(!!u));case 46:return m.next=48,q.e(d.Sg());case 48:return m.next=50,q.e(d.bg());case 50:return m.next=52,q.e(d.cg());case 52:if(a!==l.d.LOCAL_FILE){m.next=57;break}return m.next=55,q.e(d.dg());case 55:m.next=63;break;case 57:return m.next=59,q.b(Or);case 59:return m.next=61,q.b(Cr);case 61:return m.next=63,q.b(Ar);case 63:return m.next=65,q.e(d.Ci(p||l.c.Edit));case 65:return m.t0=he.z,m.next=68,q.f(Nt.y);case 68:return m.t1=m.sent,m.t0.setCurrentProjectId.call(m.t0,m.t1),m.next=72,q.e(d.Ui({tag:v,id:g}));case 72:return a!==l.d.HOME_COURSE&&Ne.k(["courseId"]),a!==l.d.HOME_TEMPLATE&&Ne.k(["templateId"]),m.next=76,q.b(Nn);case 76:if(c&&(I=at())&&it(I),a===l.d.HOME_COURSE||a===l.d.COURSE){m.next=81;break}return te.a.isLoaded()&&(te.a.show(),te.a.close({closeAnimationPos:{x:150,y:30}})),m.next=81,q.e(d.Gh(Xe.a));case 81:return m.next=83,q.e(d.Gi(!0));case 83:case"end":return m.stop()}},Yr)}function xi(e){var t,n,r,a;return K.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.json,i.next=3,q.e(d.Gi(!1));case 3:return i.next=5,q.e(d.Ug());case 5:return n=Ke.a(t),i.next=8,q.b(gi,n);case 8:return i.next=10,q.e(d.Uh(t.id));case 10:return i.next=12,q.e(d.Fi(!1));case 12:return i.next=14,q.e(d.bg());case 14:return i.next=16,q.e(d.cg());case 16:return i.next=18,q.b(Or);case 18:return i.next=20,q.b(Cr);case 20:return i.next=22,q.b(Ar);case 22:return i.next=24,q.e(d.Ci(l.c.Edit));case 24:return i.t0=he.z,i.next=27,q.f(Nt.y);case 27:return i.t1=i.sent,i.t0.setCurrentProjectId.call(i.t0,i.t1),i.next=31,q.e(d.Gi(!0));case 31:r=he.z.generateAllWorkspaceCodes(t.screenList),void 0!==(a=ee.minify(r,{keep_fnames:!0})).code&&(r=a.code),window.parent.postMessage({type:"PLAYER_BLOCK_CODE",payload:r},"*");case 35:case"end":return i.stop()}},Jr)}function yi(e,t){var n,r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.f(Nt.y);case 2:return n=a.sent,a.next=5,q.f(Nt.G);case 5:r=a.sent,_e.a("WorkCreate",{sourceTag:e,sourceId:t,workId:n,workType:"APP工匠",workName:r,isSuccess:!0,failReason:""});case 7:case"end":return a.stop()}},zr)}function vi(e){var t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.json,n.next=3,q.e(d.cg());case 3:return n.next=5,q.e(d.bg());case 5:return n.next=7,q.b(gi,t);case 7:return n.next=9,q.e(d.Cf(!0));case 9:case"end":return n.stop()}},Kr)}function gi(e){var t,n,r,a,i,c,s,u,p,f,b,x,y,v,g,I,m,E,h,k,T,_,w,S,O,A,D,L,C,R,P,N,V,B,W,U,M,G,F,H,Y,J,z,Q,X,Z,$,ee,te;return K.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return Ke.b(e),st.b.clear(),t=e.blockly,n=e.title,r=e.imageFileList,a=e.soundFileList,i=e.iconFileList,c=e.screenIds,s=e.globalVariableList,u=e.globalArrayList,p=e.globalWidgetIds,f=void 0===p?[]:p,b=e.globalWidgets,x=void 0===b?{}:b,y=e.extensionWidgetList,v=void 0===y?[]:y,g=e.unsafeExtensionWidgetList,I=void 0===g?[]:g,m=e.globalObjectList,E=e.version,h=void 0===E?1:E,k=e.cloudDictKeysList,T=e.cloudTableColumnList,_=e.cloudTableDataList,w=e.cloudDictList,S=e.cloudTableList,ne.next=5,q.b(Me.loadWidgetFromStorage,v,I);case 5:return O=Ve.f(e.screens),ne.next=8,q.b(Me.w,v,O,x);case 8:return ne.next=10,q.f(Nt.z);case 10:return A=ne.sent,Ke.c(O,h),D=Ve.e(e.screens,c),ne.next=15,q.e(d.Th({screens:D,title:n,globalVariableList:s,globalArrayList:u,globalWidgetIds:f,globalObjectList:m}));case 15:return ne.next=17,q.f(Nt.y);case 17:if(L=ne.sent,Ze.clearLocalDocuments(L,f),$e.a.clear(),A===l.d.LOCAL_FILE){C=Oe.Zb(x),R=j.a(C);try{for(R.s();!(P=R.n()).done;)N=P.value,st.b.set(N.id,N)}catch(e){R.e(e)}finally{R.f()}V=Oe.Zb(O),B=j.a(V);try{for(B.s();!(W=B.n()).done;)U=W.value,st.b.set(U.id,U)}catch(e){B.e(e)}finally{B.f()}}return Oe.Sb(o.a(o.a({},O),x)),ne.next=24,q.b(Nn);case 24:return Oe.Qb(r),he.z.replaceWorkspaces(t),Fe.b(),ne.next=29,q.b(Qi);case 29:return ne.next=31,q.b(In,a||[]);case 31:return ne.next=33,q.b(Dn,i||[]);case 33:return ne.next=35,q.e(d.vg(0,!1));case 35:return ne.next=37,q.e(d.Zj());case 37:return ne.next=39,q.f(Nt.j);case 39:for(F in M=ne.sent,G={},M.forEach(function(e){e.cdnUrl&&(G[e.id]=e.cdnUrl)}),O)(H=O[F]).type===Le.H&&(Y=H.attributes.fontFamily)&&G[Y]&&!Ne.db[Y]&&(Ne.bb(Y,G[Y]),Ne.db[Y]=!0),H&&H.attributes&&"EXTENSION_QUILL_RICH_TEXT_WIDGET"===H.type&&(J=H.attributes,z=J.content,Q=void 0===z?"":z,qe.a(Q).forEach(function(e){e&&G[e]&&!Ne.db[e]&&(Ne.bb(e,G[e]),Ne.db[e]=!0)}));if(A===l.d.LOCAL_FILE){ne.next=50;break}return X=Oe.ab(),ne.next=47,q.e(d.Sj(X.map(function(e){return e.attributes.cloudDictId})));case 47:return Z=Oe.rb(),ne.next=50,q.e(d.Tj(Z));case 50:if(!k){ne.next=58;break}ne.t0=K.a.keys(k);case 52:if((ne.t1=ne.t0()).done){ne.next=58;break}return $=ne.t1.value,ne.next=56,q.e(d.Jj(Number($),k[$]));case 56:ne.next=52;break;case 58:if(!T){ne.next=66;break}ne.t2=K.a.keys(T);case 60:if((ne.t3=ne.t2()).done){ne.next=66;break}return ee=ne.t3.value,ne.next=64,q.e(d.Mj(Number(ee),T[ee]));case 64:ne.next=60;break;case 66:if(!_){ne.next=74;break}ne.t4=K.a.keys(_);case 68:if((ne.t5=ne.t4()).done){ne.next=74;break}return te=ne.t5.value,ne.next=72,q.e(d.Nj(Number(te),_[te]));case 72:ne.next=68;break;case 74:if(!w){ne.next=77;break}return ne.next=77,q.e(d.Kj(w));case 77:if(!S){ne.next=80;break}return ne.next=80,q.e(d.Lj(S));case 80:case"end":return ne.stop()}},qr)}function Ii(e){var t,n,r,a,i,c,s,o,u,l,p,f,b;return K.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return t=e.payload,n=t.screenId,r=t.isEmitOT,a=void 0===r||r,x.next=3,q.f(Nt.C);case 3:return i=x.sent,c=i.findIndex(function(e){return e.id===n}),s=i.get(c),x.next=8,q.f(Nt.x);case 8:return o=x.sent,x.next=11,q.f(Nt.f);case 11:if(u=x.sent,!(c>-1&&s&&u)){x.next=29;break}return he.q(he.c.SCREEN,n),he.z.removeWorkspaceByScreenId(n),s.get("widgetIds").forEach(function(e){return Oe.F(e)}),l=c<o?Math.max(o-1,0):Math.min(o,i.size-2),x.next=19,q.e(d.eh(n));case 19:return x.next=21,q.e(d.Bi(l));case 21:return x.next=23,q.e(d.Fi(!0));case 23:return x.next=25,q.f(Nt.C);case 25:p=x.sent,(f=p.get(l))&&f.id!==u.id&&he.z.selectWorkspaceByScreenId(f.id,!1),a&&null!==(b=Pe.oTHelper.screen)&&void 0!==b&&b.clientOp.removeScreen(c,n);case 29:case"end":return x.stop()}},Qr)}function mi(e){var t,n,r,a,i,c,o,u,l,p,f,b,x,y,v,g,I,m,E,h,k,T;return K.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return t=e.payload.screenId,_.next=3,q.f(Nt.C);case 3:return n=_.sent,r=n.findIndex(function(e){return e.id===t}),a=n.get(r),_.next=8,q.f(Nt.f);case 8:if(i=_.sent,c=r+1,!a||!i){_.next=48;break}return l=Oe.B(a.get("title"),n),p=Oe.A(l),f=a.get("widgetIds"),b=s.a(f),f.forEach(function(e){Oe.v(e,b)}),p.widgetIds=b,x=a.get("invisibleWidgetIds"),y=s.a(x),x.forEach(function(e){Oe.v(e,y)}),p.invisibleWidgetIds=y,v=new Map,b.forEach(function(e,t){v.set(f[t],e)}),g=w.cloneDeep(a.get("primitiveVariables")),I=new Map,g.forEach(function(e){var t=Ce.a("VARIABLE");I.set(e.id,t),e.id=t}),p.primitiveVariables=g,m=w.cloneDeep(a.get("arrayVariables")),E=new Map,m.forEach(function(e){var t=Ce.a("VARIABLE");E.set(e.id,t),e.id=t}),p.arrayVariables=m,h=w.cloneDeep(a.get("objectVariables")),k=new Map,h.forEach(function(e){var t=Ce.a("OBJECT");k.set(e.id,t),e.id=t}),p.objectVariables=h,p.snapshot=a.get("snapshot"),p.backgroundColor=a.get("backgroundColor"),T=he.z.copyWorkspaceData(a.toJS().id,p.id,v,I,E,k),p.backgroundImage=a.get("backgroundImage"),p.backgroundImageResizeMode=a.get("backgroundImageResizeMode"),_.next=42,q.e(d.if(p,c));case 42:return _.next=44,q.e(d.vg(c));case 44:return _.next=46,q.e(d.Fi(!0));case 46:null!==(o=Pe.oTHelper.screen)&&void 0!==o&&o.clientOp.addScreen(p,c),null!==(u=Pe.oTHelper.blink)&&void 0!==u&&u.clientOp.addWorkspace(p.id,T);case 48:case"end":return _.stop()}},Xr)}function Ei(e,t){var n;return K.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e.type!==Le.y){r.next=5;break}return r.next=3,q.b(hi,e.id);case 3:r.next=9;break;case 5:if(e.type!==Le.l){r.next=9;break}if(!t){r.next=9;break}return r.next=9,q.b(pe,e.attributes.cloudDbId);case 9:return Oe.F(e.id),he.q(e.type,e.id),r.next=13,q.e(d.Lh(e.id));case 13:return r.next=15,q.e(d.bh(e.id));case 15:t&&null!==(n=Pe.oTHelper.globalWidget)&&void 0!==n&&n.clientOp.del(e.id);case 16:case"end":return r.stop()}},Zr)}function hi(e){var t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.f(Nt.y);case 2:t=n.sent,Oe.yb(e).forEach(function(e){he.q(he.c.DOC_KEYS,e.id)}),We(t);case 6:case"end":return n.stop()}},$r)}function ki(e,t,n){var r,a,i,c,o,u,l,p,f,b,x,y,v,g,I,m,E,h,k,T,_;return K.a.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(r=e.type,a=e.id,i=Oe.Db(r),r!==Le.f){w.next=25;break}c=e,o=s.a(c.widgetIds),u=j.a(o),w.prev=7,u.s();case 9:if((l=u.n()).done){w.next=15;break}return p=l.value,w.next=13,q.e(d.Mf(p,t,!1));case 13:w.next=9;break;case 15:w.next=20;break;case 17:w.prev=17,w.t0=w.catch(7),u.e(w.t0);case 20:return w.prev=20,u.f(),w.finish(20);case 23:w.next=48;break;case 25:if(r!==Le.x&&r!==Le.A){w.next=47;break}f=e,b=s.a(f.widgetIds),x=j.a(b),w.prev=29,x.s();case 31:if((y=x.n()).done){w.next=37;break}return v=y.value,w.next=35,q.e(d.Mf(v,t,!1));case 35:w.next=31;break;case 37:w.next=42;break;case 39:w.prev=39,w.t1=w.catch(29),x.e(w.t1);case 42:return w.prev=42,x.f(),w.finish(42);case 45:w.next=48;break;case 47:r!==Le.c&&r!==Le.a||((g=null==e?void 0:e.parentId)&&Oe.Bb(g)&&(I=Oe.Bb(g),m=I.widgetIds,(E=m.indexOf(a))>-1&&(m.splice(E,1),null!==(h=Pe.oTHelper.widget)&&void 0!==h&&h.clientOp.replaceWidgetAttributeOp(t,g,"widgetIds",m))),(k=Ae.b(a))&&Be.b(k,a));case 48:return Oe.F(e.id),w.next=51,q.e(d.Mh(t,a,null==i?void 0:i.isInvisibleWidget));case 51:return w.next=53,q.e(d.bh(a));case 53:n&&((null==i?void 0:i.isInvisibleWidget)?null!==(T=Pe.oTHelper.widget)&&void 0!==T&&T.clientOp.deleteInvisibleWidgetOp(t,a):null!==(_=Pe.oTHelper.widget)&&void 0!==_&&_.clientOp.deleteWidgetOp(t,a)),he.q(r,a),"CANVAS_WIDGET"!==r&&"ACTOR_WIDGET"!==r||he.l();case 56:case"end":return w.stop()}},ea,null,[[7,17,20,23],[29,39,42,45]])}function Ti(e){var t,n,r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.f(Nt.s);case 2:return t=a.sent,a.next=5,q.f(Nt.r);case 5:if(n=a.sent,r=!0,e.type!==Le.l||n){a.next=11;break}return a.next=10,q.e(d.mj({type:"error",message:Re.c(t,"notHavePermissionToDeleteCloudDb").toString()}));case 10:r=!1;case 11:return a.abrupt("return",r);case 12:case"end":return a.stop()}},ta)}function _i(e){var t,n,r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.f(Nt.s);case 2:return t=a.sent,a.next=5,q.f(Nt.r);case 5:if(n=a.sent,r=!0,e.type!==Le.l){a.next=18;break}if(!(Oe.cb().length>=De.f)){a.next=14;break}return a.next=11,q.e(d.mj({type:"error",message:Re.c(t,"cloudDbCountOverflowTitle").toString()}));case 11:r=!1,a.next=18;break;case 14:if(n){a.next=18;break}return a.next=17,q.e(d.mj({type:"error",message:Re.c(t,"notHavePermissionToAddCloudDb").toString()}));case 17:r=!1;case 18:return a.abrupt("return",r);case 19:case"end":return a.stop()}},na)}function wi(e){var t,n,r,a,i,c,s,o,u,l,p,f,b,x,y,v;return K.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.screenId,r=t.widgetId,a=t.isEmitOT,i=void 0===a||a,c=Oe.Bb(r),g.next=4,q.f(Nt.D);case 4:if(s=g.sent,c){g.next=7;break}return g.abrupt("return");case 7:if(!i){g.next=13;break}return g.next=10,q.b(Ti,c);case 10:if(g.sent){g.next=13;break}return g.abrupt("return");case 13:if(c.type!==Le.h){g.next=21;break}return g.next=16,q.f(Nt.y);case 16:if(o=g.sent,!Ve.a(o)){g.next=21;break}return u=c.attributes.cloudDbId,g.next=21,q.b(Ye.d,u,o);case 21:if(c.id===s&&n&&he.g.setSelectedItemByWidgetId(n),!c.isGlobalWidget){g.next=27;break}return g.next=25,q.b(Ei,c,i);case 25:g.next=30;break;case 27:if(!n||!c){g.next=30;break}return g.next=30,q.b(ki,c,n,i);case 30:if(c.type!==Le.G){g.next=57;break}l=Oe.L(Le.A),p=j.a(l),g.prev=33,p.s();case 35:if((f=p.n()).done){g.next=47;break}if(b=f.value,(null===(x=Oe.Bb(b))||void 0===x?void 0:x.type)!==Le.A||x.attributes.dataSource!==r){g.next=45;break}for(v in y=x.attributes.templateSlotMap)y[v].dataBindings="";return g.next=43,q.e(d.Kg(b,"dataSource",""));case 43:return g.next=45,q.e(d.Kg(b,"templateSlotMap",y));case 45:g.next=35;break;case 47:g.next=52;break;case 49:g.prev=49,g.t0=g.catch(33),p.e(g.t0);case 52:return g.prev=52,p.f(),g.finish(52);case 55:return g.next=57,q.e(d.Uj());case 57:return g.next=59,q.e(d.Fi(!0));case 59:case"end":return g.stop()}},ra,null,[[33,49,52,55]])}function Si(e,t,n){var r,a,i,c,u,d,l,p,f,b,x,y,v,g;return K.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return d=function(e){return"string"==typeof e?Re.f(r,e):(e.constructor!==Array&&e.constructor!==Object||Object.entries(e).forEach(function(t){var n=X.a(t,2),r=n[0],a=n[1];e[r]=d(a)}),e)},I.next=3,q.f(Nt.s);case 3:return r=I.sent,I.next=6,q.f(Nt.n);case 6:if(a=I.sent,i=Oe.Db(e)){I.next=10;break}return I.abrupt("return",null);case 10:if(c=Ne.q(i.widget),u=c.attributes,i.isInvisibleWidget||void 0!==c.opacity||(c.opacity=100),d(u),l=[],!i.widget.isGlobalWidget){I.next=19;break}l=a,I.next=24;break;case 19:if(!n){I.next=24;break}return I.next=22,q.f(Nt.H,n);case 22:(p=I.sent)&&(l=[].concat(s.a(p.widgetIds),s.a(p.invisibleWidgetIds)));case 24:return f=i.title,i.contentTextField&&i.contentTextField?(x=i.contentTextField,b=u[x],b=Oe.D(e,l,b)):(f=null===(y=Re.c(r,i.title))||void 0===y?void 0:y.toString(),f=Oe.D(e,l,f)),v=Ce.a(e),g=o.a(o.a({animationRecord:{},size:{width:10,height:10}},c),{},{id:v,title:f,contentTitle:b,type:e,position:t,visible:!0,attributes:u,isGlobalWidget:i.widget.isGlobalWidget}),I.abrupt("return",g);case 30:case"end":return I.stop()}},aa)}function Oi(e){var t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.b(oe,e.title);case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}},ia)}function Ai(e,t){var n,r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=Oe.Db(e.type)){a.next=3;break}return a.abrupt("return");case 3:if(Oe.Ub(e.id,e),!e.isGlobalWidget){a.next=9;break}return a.next=7,q.e(d.hf(e.id));case 7:a.next=12;break;case 9:if(!t){a.next=12;break}return a.next=12,q.e(d.jf(t,e.id,n.isInvisibleWidget));case 12:if(e.type!==Le.B&&e.type!==Le.y){a.next=18;break}return r=e.attributes.fields,a.next=16,q.e(d.bf(tt.a(e.type,{id:e.id,name:e.title,value:r,defaultValue:"no-use"},{isWatching:!1})));case 16:a.next=21;break;case 18:if(e.type!==Le.G){a.next=21;break}return a.next=21,q.e(d.bf(tt.a(Le.G,{id:e.id,name:e.title,value:e.attributes.db,defaultValue:"no-use"},{isWatching:!1})));case 21:case"end":return a.stop()}},ca)}function Di(e){var t,n,r,i,c,s,o,u,l,p,f,b,x,y,v,g;return K.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return t=e.payload,n=t.screenId,r=t.widgetType,i=t.position,c=t.attributes,s=t.setBlockValue,o=Oe.Db(r),I.next=4,q.b(Si,r,i,n);case 4:if((u=I.sent)&&o){I.next=8;break}return console.error("Can not create widget"),I.abrupt("return");case 8:return I.next=10,q.b(_i,u);case 10:if(I.sent){I.next=13;break}return I.abrupt("return");case 13:return I.next=15,q.f(Nt.J);case 15:if(l=I.sent,u.type!==Le.n&&u.type!==Le.J){I.next=20;break}u.attributes.timeStamp=Date.now(),I.next=68;break;case 20:if(u.type!==Le.l){I.next=30;break}if(l){I.next=25;break}return I.next=24,q.e(d.Ch());case 24:return I.abrupt("return");case 25:return I.next=27,q.b(Oi,u);case 27:u.attributes.cloudDbId=I.sent,I.next=68;break;case 30:if(u.type!==Le.x&&u.type!==Le.A){I.next=38;break}return I.next=33,q.b(Ci,n,u.id,u.attributes.templateType);case 33:p=I.sent,u.widgetIds=p.widgetIds,u.attributes.templateSlotMap=p.templateSlotMap,I.next=68;break;case 38:if(u.type!==Le.m){I.next=42;break}c&&(w.isString(c.name)&&(u.title=c.name),c.header&&(u.attributes.db.header=c.header),c.data&&(u.attributes.db.data=c.data)),I.next=68;break;case 42:if(u.type!==Le.h){I.next=67;break}return I.next=45,q.f(Nt.y);case 45:if(f=I.sent,l){I.next=50;break}return I.next=49,q.e(d.Ch());case 49:return I.abrupt("return");case 50:if(c&&(u.attributes.cloudDbId=c.cloudDbId,u.attributes.name=c.name,u.attributes.columns=c.columns,u.attributes.primaryKey=c.primaryKey),"_EMPTY_CLOUD_DB_ID_"!==u.attributes.cloudDbId){I.next=64;break}return I.next=54,q.f(Nt.s);case 54:return b=I.sent,I.next=57,q.b(Ye.b,Re.c(b,"cloudDb.defaultName").toString(),Ve.a(f)?f:"");case 57:if((x=I.sent).id){I.next=62;break}return I.next=61,q.e(d.mj({type:"error",message:Re.c(b,"cloudDBWidget.generateError").toString()}));case 61:return I.abrupt("return");case 62:u.attributes.cloudDbId=x.id,u.attributes.name=x.name;case 64:u.title=u.attributes.name,I.next=68;break;case 67:u.type===Le.G&&(u.attributes.db=ze.d());case 68:return I.next=70,q.b(Ai,u,n);case 70:return s&&s(u.id),u.isGlobalWidget?null!==(y=Pe.oTHelper.globalWidget)&&void 0!==y&&y.clientOp.add(u):n&&(o.isInvisibleWidget?null!==(v=Pe.oTHelper.widget)&&void 0!==v&&v.clientOp.addInvisibleWidgetOp(n,u):null!==(g=Pe.oTHelper.widget)&&void 0!==g&&g.clientOp.addWidgetOp(n,u)),I.next=74,q.e(d.Fi(!0));case 74:if(u.type===Le.m){I.next=79;break}return I.next=77,q.b(Ri,u);case 77:return I.next=79,q.e(d.ug(u.id));case 79:return I.next=81,q.b(ji,n,u);case 81:return a.reportUse(u.type,null==l?void 0:l.id),I.abrupt("return",u);case 83:case"end":return I.stop()}},sa)}function Li(e){var t,n,a,i,c,s,o;return K.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.payload.widgetType,Oe.Db(t)){u.next=17;break}return u.next=4,q.f(Nt.t);case 4:if(n=u.sent,!(a=n.find(function(e){return r.standardize(e.type,!0)===t}))){u.next=11;break}return u.next=9,q.b(Me.u,a.cdnUrl,a.id);case 9:u.next=16;break;case 11:return u.next=13,q.f(Nt.s);case 13:return i=u.sent,u.next=16,q.e(d.mj({type:"error",message:Re.c(i,"WidgetList.addFailureToast").toString()}));case 16:r.isSafeExtensions(t)&&(s=Ge.f(t),o={id:s.id,cdnUrl:s.cdnUrl,type:s.type},null!==(c=Pe.oTHelper.extensionWidget)&&void 0!==c&&c.clientOp.addMallExtensionWidget(o));case 17:case"end":return u.stop()}},oa)}function Ci(e,t,n){var r,a,i,c,s,u,d,l,p;return K.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,q.f(Nt.s);case 2:r=f.sent,a=Ue.n[n],i=[],c={},f.t0=K.a.keys(a);case 7:if((f.t1=f.t0()).done){f.next=28;break}return s=f.t1.value,d=a[s],l=Oe.Db(d.widgetType),f.next=13,q.b(Si,d.widgetType,{x:0,y:0},e);case 13:if((p=f.sent)&&l){f.next=17;break}return console.error("can not create widget"),f.abrupt("return");case 17:return p.parentId=t,p.title=Re.c(r,d.titleMessageId).toString(),p.attributes=o.a(o.a({},p.attributes),d.attributes),p.type===Le.H&&(p.attributes.content=Re.c(r,d.contentMessageId||"").toString(),p.attributes.textAlign="left"),f.next=23,q.b(Ai,p,e);case 23:c[s]={label:p.title,widgetId:p.id,dataBindings:""},i.push(p.id),null!==(u=Pe.oTHelper.widget)&&void 0!==u&&u.clientOp.addWidgetOp(e,p),f.next=7;break;case 28:return f.abrupt("return",{widgetIds:i,templateSlotMap:c});case 29:case"end":return f.stop()}},ua)}function Ri(e){var t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,q.f(Nt.s);case 2:if(t=c.sent,n=Oe.Db(e.type)){c.next=6;break}return c.abrupt("return");case 6:if(!n.isInvisibleWidget){c.next=11;break}return a=null===(r=Re.c(t,n.title))||void 0===r?void 0:r.toString(),i=Re.c(t,"WidgetList.addSuccessToast",{widgetTitle:a}).toString(),c.next=11,q.e(d.xj("".concat(i),!0));case 11:case"end":return c.stop()}},da)}function ji(e,t){var n,r,a,i,c,s;return K.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,q.f(Nt.s);case 2:if(r=o.sent,a=Oe.Db(t.type)){o.next=6;break}return o.abrupt("return");case 6:return o.next=8,q.f(Nt.f);case 8:return i=o.sent,o.next=11,q.f(Nt.u);case 11:c=o.sent,s=null===(n=Re.c(r,a.previewAreaWidgetTitle))||void 0===n?void 0:n.toString(),_e.a("AddWidgetToStage",{screenId:e,screenName:(null==i?void 0:i.title)||"",isCooperation:!!c,widgetName:s});case 14:case"end":return o.stop()}},la)}function Pi(e){var t,n,r,a,i,c,s,o,u,l,p,f;return K.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return r=e.payload,a=r.widgetId,i=r.templateType,c=r.onSuccess,s=Oe.Bb(a),b.next=4,q.f(Nt.g);case 4:if(o=b.sent,s&&o){b.next=7;break}return b.abrupt("return");case 7:if(s.type===Le.x||s.type===Le.A){b.next=9;break}return b.abrupt("return");case 9:u=j.a(s.widgetIds),b.prev=10,u.s();case 12:if((l=u.n()).done){b.next=18;break}return p=l.value,b.next=16,q.e(d.Mf(p,o,!0));case 16:b.next=12;break;case 18:b.next=23;break;case 20:b.prev=20,b.t0=b.catch(10),u.e(b.t0);case 23:return b.prev=23,u.f(),b.finish(23);case 26:return he.t(a),b.next=29,q.b(Ci,o,a,i);case 29:return f=b.sent,Oe.Wb(a,f.widgetIds),b.next=33,q.e(d.Kg(a,"templateSlotMap",f.templateSlotMap));case 33:null!==(t=Pe.oTHelper.widget)&&void 0!==t&&t.clientOp.replaceWidgetAttributeOp(o,a,"widgetIds",f.widgetIds),null!==(n=Pe.oTHelper.widget)&&void 0!==n&&n.clientOp.replaceWidgetAttributeOp(o,a,"templateSlotMap",f.templateSlotMap),c();case 36:case"end":return b.stop()}},pa,null,[[10,20,23,26]])}function Ni(e){var t,n,r,a,i,c,s,o,u,l,p,f,b;return K.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return t=e.payload,n=t.gridId,r=t.deleteColumnIdList,x.next=3,q.f(Nt.f);case 3:if(a=x.sent){x.next=6;break}return x.abrupt("return");case 6:i=a.id,c=j.a(a.widgetIds),x.prev=8,c.s();case 10:if((s=c.n()).done){x.next=23;break}if(o=s.value,(null===(u=Oe.Bb(o))||void 0===u?void 0:u.type)!==Le.x&&(null==u?void 0:u.type)!==Le.A||u.attributes.dataSource!==n){x.next=21;break}for(f in l=!1,p=u.attributes.templateSlotMap)r.includes(p[f].dataBindings)&&(p[f].dataBindings="",l=!0);if(!l){x.next=21;break}return x.next=20,q.e(d.Kg(o,"templateSlotMap",p));case 20:null!==(b=Pe.oTHelper.widget)&&void 0!==b&&b.clientOp.replaceWidgetAttributeOp(i,o,"templateSlotMap",p);case 21:x.next=10;break;case 23:x.next=28;break;case 25:x.prev=25,x.t0=x.catch(8),c.e(x.t0);case 28:return x.prev=28,c.f(),x.finish(28);case 31:case"end":return x.stop()}},fa,null,[[8,25,28,31]])}function Vi(){return Bi.apply(this,arguments)}function Bi(){return(Bi=Q.a(K.a.mark(function e(){var t,n,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Oe.Y().map(function(e){return e.attributes.cloudDbId})).length){e.next=6;break}return e.next=4,Ye.j(t);case 4:(n=e.sent)&&(r=Ks.getState().common.language,Ks.dispatch(d.mj({type:"error",duration:4e3,message:Re.c(r,n).toString()})));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wi(){var e,t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,q.f(Nt.y);case 2:return e=c.sent,c.next=5,q.b(function(){return Ui(!1)});case 5:return t=c.sent,c.next=8,q.f(Nt.J);case 8:if(n=c.sent,t){c.next=11;break}return c.abrupt("return");case 11:if(n){c.next=15;break}return c.next=14,q.e(d.Ch());case 14:return c.abrupt("return");case 15:return c.prev=15,r=Oe.cb(),c.next=19,q.f(Nt.A);case 19:return a=c.sent,c.next=22,q.b(me.l,a,t);case 22:return i=c.sent,c.next=25,q.e(d.Ni(i.pack_label));case 25:return c.next=27,q.e(d.Ig());case 27:return ge(r.map(function(e){return e.attributes.cloudDbId}),2,1,Ve.a(e)?e:void 0),c.next=30,Vi();case 30:c.next=38;break;case 32:return c.prev=32,c.t0=c.catch(15),c.next=36,q.e(d.Ki(-1));case 36:return c.next=38,q.b(Gi,c.t0.message);case 38:case"end":return c.stop()}},ba,null,[[15,32]])}function Ui(e,t){var n,r,a,i,c,s,o,u,l,p,f,b,x,y,v,g,I,m,E,h,k;return K.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,q.f(Nt.y);case 2:return n=T.sent,T.next=5,q.f(Nt.s);case 5:return r=T.sent,T.next=8,q.f(Nt.C);case 8:return a=T.sent,T.next=11,q.f(Nt.m);case 11:return i=T.sent,T.next=14,q.f(Nt.k);case 14:return c=T.sent,T.next=17,q.f(Nt.l);case 17:return s=T.sent,T.next=20,q.f(Nt.n);case 20:return o=T.sent,T.next=23,q.f(Nt.f);case 23:return u=T.sent,T.next=26,q.f(Nt.v);case 26:if(l=T.sent,u){T.next=29;break}return T.abrupt("return");case 29:if(he.z.updateCurrentWorkspaceData(),p=he.z.hasCloudBlock("cloudRoom"),f=he.z.hasCloudBlock("cloudStorage"),b=he.z.hasCloudBlock("cloudDB"),x=he.z.hasCloudBlock("cloudDict"),y=he.z.hasCloudBlock("cloudTable"),v=Oe.q(),!(p||b||f||x||y||v)){T.next=49;break}if(Ve.a(n)){T.next=43;break}return T.next=40,q.e(d.mj({duration:4e3,showPrefixIcon:!1,message:Re.c(r,"project.saving").toString()}));case 40:return T.next=42,q.b(nc,d.tg({isUpdate:!1,isAutoSave:!0}));case 42:n=T.sent;case 43:if(l){T.next=49;break}return T.next=46,q.b(ic);case 46:return T.next=48,q.f(Nt.v);case 48:l=T.sent;case 49:return g=e?u.id:a.toArray()[0].id,T.next=52,$i();case 52:return I=T.sent,T.next=55,ec();case 55:return m=T.sent,T.next=58,tc();case 58:return E=T.sent,(h=me.c(n,he.z,a.toArray(),i,c,Oe.kb(),I,m,g,l,o,s)).fontFileMap=E,h.blockCode=he.z.generateAllWorkspaceCodes(h.screenList,t),void 0!==(k=ee.minify(h.blockCode,{keep_fnames:!0})).code&&(h.blockCode=k.code),T.abrupt("return",h);case 65:case"end":return T.stop()}},xa)}function Mi(){var e,t,n,r,a,i,c,s;return K.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,q.f(Nt.B);case 2:return e=o.sent,o.next=5,q.e(d.Oi(!0));case 5:return o.next=7,q.e(d.Ii(!1));case 7:return o.next=9,q.e(d.Ki(0));case 9:t=0,o.prev=10;case 11:if(!(t<100&&t>=0&&e)){o.next=22;break}return o.next=14,q.b(me.a,e);case 14:return n=o.sent,t=n.progress,o.next=18,q.e(d.Ki(t));case 18:return o.next=20,q.c(1e3);case 20:o.next=11;break;case 22:if(-1!==t){o.next=27;break}return o.next=25,q.e(d.Oi(!1));case 25:return o.next=27,q.b(Gi,"-1");case 27:if(-2!==t){o.next=32;break}return o.next=30,q.e(d.Oi(!1));case 30:return o.next=32,q.b(Gi,"取消打包");case 32:if(100!==t){o.next=49;break}return o.next=35,q.b(me.i,e);case 35:return r=o.sent,a=r.url,i=r.version,c=r.expireTime,o.next=41,q.e(d.Oi(!1,a));case 41:return o.next=43,q.e(d.Ji({version:i,expireTime:c,startTimeTamp:Date.now()}));case 43:return o.next=45,q.e(d.Mi(!0));case 45:return o.next=47,q.e(d.Li(!1));case 47:return o.next=49,q.b(Gi);case 49:o.next=61;break;case 51:return o.prev=51,o.t0=o.catch(10),o.next=55,q.e(d.Ki(-1));case 55:return o.next=57,q.e(d.Oi(!1));case 57:return s=o.t0,console.error(o.t0),o.next=61,q.b(Gi,s.message);case 61:case"end":return o.stop()}},ya,null,[[10,51]])}function Gi(e){var t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,q.f(Nt.y);case 2:return t=c.sent,c.next=5,q.f(Nt.F);case 5:return n=c.sent,c.next=8,q.f(Nt.A);case 8:return r=c.sent,c.next=11,q.f(Nt.w);case 11:a=c.sent,i=r.apkSplash.match(/splash0(\d)\.png/),_e.a("WorkPack",{workId:t,sourceTag:n.tag,sourceId:n.id,launchScreenId:i?i[1]:"0",apkName:r.apkName,isSuccess:!e,failReason:e||"",bcmUrl:e?a:"",packLabel:e&&r.packLabel?r.packLabel:""});case 14:case"end":return c.stop()}},va)}function Fi(e){var t,n,a,i,c,s,o,u,l,p;return K.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload.isPlayCurrentScreen,f.next=3,q.f(Nt.s);case 3:return n=f.sent,f.next=6,q.e(d.Sg());case 6:return f.prev=6,f.next=9,q.b(function(){return Ui(t,!0)});case 9:if(a=f.sent){f.next=12;break}return f.abrupt("return");case 12:if(i=a.widgetMap,c=new Set,s=new Set,o=new Set,u=!0,Object.values(i).forEach(function(e){var t,a=e.type,i=Ge.f(a);if(a.includes(r.UNSAFE_EXTENSION_PREFIX),null==i||null===(t=i.types)||void 0===t?void 0:t.platforms){var c=i.types.platforms.includes("web");if(!c){if(Me.q(a))o.add(i.types.title);else{var s=Oe.Db(a);if(s){var d=Re.c(n,s.title);o.add(d)}}u=c}}}),!s.size){f.next=22;break}return f.next=21,q.e(d.zh({allowText:Re.c(n,"cloudDb.know").toString(),title:"error",content:Re.c(n,"Play.widgetNotSupportsForbiddenKeywords",{widgetTypeNames:Array.from(c).join("、"),keywords:Array.from(s).join("、")}).toString(),cancelBtnVisible:!1}));case 21:return f.abrupt("return");case 22:if(u){f.next=25;break}return f.next=25,q.e(d.mj({type:"info",duration:4e3,message:Re.c(n,"Play.widgetNotSupportsWebPlatform",{widgetTypeNames:Array.from(o).join("、")}).toString()}));case 25:return f.next=27,q.f(Nt.y);case 27:return l=f.sent,he.z.stopWarningAnimation(),f.next=31,q.b(me.b,l,a);case 31:return f.next=33,q.e(d.Cj());case 33:return f.next=35,q.b(Hi,i);case 35:return He.b({playing:!0}),f.next=38,q.b(Yi);case 38:f.next=51;break;case 40:if(f.prev=40,f.t0=f.catch(6),!(f.t0 instanceof ke.b)){f.next=48;break}return p={type:"lintError",screenId:f.t0.screenId,blockId:f.t0.blockId,message:Re.c(n,f.t0.message,f.t0.data)+""},f.next=46,q.e(d.nf(p));case 46:return f.next=48,q.b(Ji,p);case 48:return console.error(f.t0),f.next=51,q.b(Yi,f.t0.message);case 51:case"end":return f.stop()}},ga,null,[[6,40]])}function Hi(e){var t,n,r,a,i,c,s,o,u,l;return K.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,q.f(Nt.s);case 2:t=p.sent,n=0,r=Object.values(e);case 4:if(!(n<r.length)){p.next=19;break}if((a=r[n]).type!==Le.E){p.next=16;break}if(i=a.attributes,c=i.maxValue,s=i.minValue,o=i.step,c!==s){p.next=12;break}return u={type:"warning",screenId:"",blockId:"",message:Re.c(t,"slider.maxValueEqualMinValue",{title:a.title}).toString()},p.next=12,q.e(d.nf(u));case 12:if(!(o>c-s)){p.next=16;break}return l={type:"warning",screenId:"",blockId:"",message:Re.c(t,"slider.stepGreaterThanRange",{title:a.title}).toString()},p.next=16,q.e(d.nf(l));case 16:n++,p.next=4;break;case 19:case"end":return p.stop()}},Ia)}function Yi(e){var t,n;return K.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,q.f(Nt.y);case 2:return t=r.sent,r.next=5,q.f(Nt.G);case 5:n=r.sent,_e.a("WorkRun",{workId:t,workName:n,workType:"APP工匠",isSuccess:!e,failReason:e||""});case 7:case"end":return r.stop()}},ma)}function Ji(e){var t,n,r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.f(Nt.e);case 2:t=a.sent,n=t.filter(function(e){return"error"===e.get("type")}).size+t.filter(function(e){return"customError"===e.get("type")}).size,r=t.filter(function(e){return"warning"===e.get("type")}).size,_e.a("ConsoleDetail",{errorCount:n,warningCount:r,errorMessage:e.message,warningMessage:""});case 6:case"end":return a.stop()}},Ea)}function zi(e){var t,n,r,a,i,c,s,o,u,l,p,f;return K.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,q.b(function(){return Ui(!1)});case 2:if(t=b.sent){b.next=5;break}throw new Error("can not generate player data");case 5:return b.next=7,q.f(Nt.y);case 7:return n=b.sent,b.next=10,q.b(d.Bf,e.payload.name);case 10:return r=new Blob([JSON.stringify(t)],{type:"application/json,charset=utf-8;"}),a=new File([r],"test.json",{type:r.type}),b.next=14,q.b(Te.e,a,"JSON");case 14:return i=b.sent,c=e.payload,s=c.name,o=c.description,u=c.operation,l=c.coverUrl,p={name:s,description:o||Se.a,operation:u||Se.b,coverUrl:l,workId:n,bcmcUrl:i.url,playerUrl:Ne.E(n)},b.next=19,q.b(me.m,p);case 19:if(200===(f=b.sent).code){b.next=22;break}throw Error("".concat(f.code));case 22:return ge(Oe.cb().map(function(e){return e.attributes.cloudDbId}),2,1,Ve.a(n)?n:void 0),b.next=26,Vi();case 26:return b.abrupt("return",n);case 27:case"end":return b.stop()}},ha)}function Ki(e){var t,n,r,a,i,c,s,u,l,p;return K.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,q.f(Nt.y);case 2:return t=f.sent,n=Ve.a(t),f.next=6,q.b(nc,d.tg({isUpdate:n,isAutoSave:!0}));case 6:return r=f.sent,a=e.payload.info,f.next=10,q.f(Nt.J);case 10:return i=f.sent,f.next=13,q.b(function(){return Ui(!1)});case 13:if(c=f.sent){f.next=16;break}throw new Error("can not generate player data");case 16:if(i){f.next=18;break}throw new Error("user not login");case 18:return s=new Blob([JSON.stringify(o.a(o.a({},c),{},{userInfo:{name:i.nickname,avatarUrl:i.avatar_url},title:a.title,description:a.desc,coverUrl:a.img}))],{type:"application/json,charset=utf-8;"}),u=new File([s],"test.json",{type:s.type}),f.next=22,q.b(Te.e,u,"JSON");case 22:return l=f.sent,ge(Oe.cb().map(function(e){return e.attributes.cloudDbId}),2,1,Ve.a(r)?r:void 0),f.next=27,Vi();case 27:return f.next=29,q.b(me.n,r,l.url);case 29:if(200===(p=f.sent).code){f.next=32;break}throw Error("".concat(p.code));case 32:return f.abrupt("return",r);case 33:case"end":return f.stop()}},ka)}function qi(e){var t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.shouldCloneCloud,c.next=3,q.f(Nt.f);case 3:return n=c.sent,c.next=6,q.f(Nt.G);case 6:if(r=c.sent,!n){c.next=13;break}return c.next=10,q.b(Ve.b,t);case 10:a=c.sent,i=new Blob([JSON.stringify(a)],{type:"application/json,charset=utf-8;"}),Ne.s(URL.createObjectURL(i),r);case 13:case"end":return c.stop()}},Ta)}function Qi(){var e;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.f(Nt.J);case 2:if(e=t.sent,t.prev=3,!e){t.next=7;break}return t.next=7,q.b(Te.c,Oe.jb(),function(e){var t;null!==(t=Pe.oTHelper.imageFileList)&&void 0!==t&&t.clientOp.replaceImageFileCdnUrl(e.id,e.cdnUrl)});case 7:t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(3),t.t0,Te.a,t.t0;case 13:case"end":return t.stop()}},_a,null,[[3,9]])}function Xi(e,t){return Zi.apply(this,arguments)}function Zi(){return(Zi=Q.a(K.a.mark(function e(t,n){var r,a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=12;break}if(!(r=document.getElementById(t.id))){e.next=12;break}return e.prev=3,e.next=6,we.a(r,1);case 6:t.snapshot=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error("uploadImageDataUrlToCdn htmlToImage error",e.t0);case 12:if(!t.snapshot.startsWith("http")){e.next=14;break}return e.abrupt("return",Promise.resolve());case 14:return e.prev=14,e.next=17,Te.f(t.snapshot);case 17:a=e.sent,t.snapshot=a,e.next=25;break;case 21:e.prev=21,e.t1=e.catch(14),e.t1,Te.a,console.error("uploadImageDataUrlToCdn error",e.t1);case 25:case"end":return e.stop()}},e,null,[[3,9],[14,21]])}))).apply(this,arguments)}function $i(){var e,t,n,r=arguments;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=r.length>0&&void 0!==r[0]&&r[0],a.next=3,q.f(Nt.I);case 3:return t=a.sent,n={},t.forEach(function(t){n[t.id]=o.a(o.a({},t),{},{cdnUrl:e&&t.source||t.cdnUrl})}),a.abrupt("return",n);case 7:case"end":return a.stop()}},wa)}function ec(){var e,t,n,r=arguments;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=r.length>0&&void 0!==r[0]&&r[0],a.next=3,q.f(Nt.o);case 3:return t=a.sent,n={},t.forEach(function(t){n[t.id]=o.a(o.a({},t),{},{cdnUrl:e&&t.source||t.cdnUrl})}),a.abrupt("return",n);case 7:case"end":return a.stop()}},Sa)}function tc(){var e,t,n,r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.f(Nt.j);case 2:return e=a.sent,t={},a.next=6,q.f(Nt.C);case 6:return n=a.sent,r={},e.forEach(function(e){t[e.id]=e}),n.forEach(function(e){e.widgetIds.forEach(function(e){var n=Oe.Bb(e);if((null==n?void 0:n.type)===Le.H||(null==n?void 0:n.type)===Le.z||(null==n?void 0:n.type)===Le.w){var a,i=n.attributes.fontFamily;!r[i]&&(null===(a=t[i])||void 0===a?void 0:a.cdnUrl)&&(r[i]=t[i])}if(n&&n.attributes&&"EXTENSION_QUILL_RICH_TEXT_WIDGET"===n.type){var c=n.attributes.content,s=void 0===c?"":c;qe.a(s).forEach(function(e){var n;!r[e]&&(null===(n=t[e])||void 0===n?void 0:n.cdnUrl)&&(r[e]=t[e])})}})}),a.abrupt("return",r);case 11:case"end":return a.stop()}},Oa)}function nc(e){var t,n,r,a,i,c,s,o,u,l,p,f,b,x,y,v,g,I,m,E,h,k,T,_,w;return K.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return t=e.payload,n=t.isUpdate,r=t.isNeedReport,a=t.isAutoSave,i=t.isSaveAs,S.next=3,q.f(Nt.C);case 3:return c=S.sent,S.next=6,q.f(Nt.y);case 6:return s=S.sent,o=Math.ceil(10*Math.random())+10,S.next=10,q.f(Nt.J);case 10:return u=S.sent,S.next=13,q.f(Nt.F);case 13:l=S.sent,p=20,S.next=17;break;case 17:if(u){S.next=21;break}return S.next=20,q.e(d.Ch());case 20:return S.abrupt("return");case 21:return S.next=24,q.b(_r,!0);case 24:if(!(S.sent.length>0)){S.next=27;break}throw new Error(ut.a.CLOUD_SPACE_DATA_ERROR);case 27:return S.next=29,q.f(Nt.G);case 29:if(f=S.sent,!i){S.next=35;break}return f+="-副本",S.next=35,q.e(d.Bf(f));case 35:return S.next=37,q.e(d.Pi(o));case 37:return S.next=39,q.e(d.Si(!0));case 39:return b=c.map(function(e){return e.toJS()}).toJS(),x=b.map(function(e,t){return Xi(e,0===t)}),S.next=43,Promise.all(x);case 43:y=b[0],v=y.snapshot,g=j.a(b),S.prev=46,g.s();case 48:if((I=g.n()).done){S.next=56;break}if(m=I.value,!(E=m.snapshot).startsWith("http")){S.next=54;break}return S.next=54,q.e(d.Xj(m.id,E));case 54:S.next=48;break;case 56:S.next=61;break;case 58:S.prev=58,S.t0=S.catch(46),g.e(S.t0);case 61:return S.prev=61,g.f(),S.finish(61);case 64:return v.startsWith("http")||(v="https://creation.codemao.cn/716/appcraft/IMAGE_ssdp_AuDw_1645089354494.png"),S.next=67,q.b(Ve.b);case 67:return h=S.sent,S.next=70,q.b(Ee.h,JSON.stringify(h));case 70:return k=S.sent,S.next=73,q.e(d.Vj(k));case 73:return S.next=75,q.e(d.Pi(50));case 75:if(!n){S.next=106;break}return T={name:f.substring(0,p),bcmUrl:k,coverUrl:v,id:s,saveType:a?O.g.AutoSave:O.g.ByUser},S.prev=77,S.next=80,q.b(Ee.g,T);case 80:if(!r){S.next=83;break}return S.next=83,q.b(rc,!0);case 83:S.next=93;break;case 85:return S.prev=85,S.t1=S.catch(77),S.next=89,q.e(d.Si(!1));case 89:if(!r){S.next=92;break}return S.next=92,q.b(rc,!1,S.t1.message);case 92:throw S.t1;case 93:return S.next=95,q.e(d.Pi(100));case 95:return S.next=97,q.e(d.Fi(!1));case 97:return S.next=99,q.e(d.Si(!1));case 99:return S.next=101,q.e(d.Ei(Date.now()));case 101:return S.next=103,q.b(Rc,s);case 103:return S.abrupt("return",s);case 106:return _={name:f.substring(0,p),bcmUrl:k,coverUrl:v,saveType:a?O.g.AutoSave:O.g.ByUser,sourceTag:l.tag},S.prev=107,S.next=110,q.b(Ee.f,_);case 110:if(w=S.sent,!r){S.next=114;break}return S.next=114,q.b(rc,!0);case 114:S.next=124;break;case 116:return S.prev=116,S.t2=S.catch(107),S.next=120,q.e(d.Si(!1));case 120:if(!r){S.next=123;break}return S.next=123,q.b(rc,!1,S.t2.message);case 123:throw S.t2;case 124:if(!w){S.next=141;break}return S.next=127,q.e(d.Pi(100));case 127:return S.next=129,q.e(d.Fi(!1));case 129:return S.next=131,q.e(d.Uh(w));case 131:return S.next=133,q.e(d.Ei(Date.now()));case 133:return S.next=135,q.e(d.Si(!1));case 135:return he.z.setCurrentProjectId(w),S.next=138,q.b(ic);case 138:return Ne.jb(w),S.next=141,q.b(Rc,w);case 141:if(!i){S.next=144;break}return S.next=144,q.e(N.n());case 144:return Ne.k(["courseId","templateId"]),rt(),S.abrupt("return",w);case 147:case"end":return S.stop()}},Aa,null,[[46,58,61,64],[77,85],[107,116]])}function rc(e,t){var n,r,a;return K.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,q.f(Nt.y);case 2:return n=i.sent,i.next=5,q.f(Nt.G);case 5:return r=i.sent,i.next=8,q.f(Nt.F);case 8:a=i.sent,_e.a("WorkSave",{workId:n,workName:r,workType:"APP工匠",sourceTag:a.tag,sourceId:a.id,isSuccess:e,failReason:t||""});case 10:case"end":return i.stop()}},Da)}function ac(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.e(d.Si(!1));case 2:return e.next=4,q.e(d.Qi(!1));case 4:case"end":return e.stop()}},La)}function ic(){var e,t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.f(Nt.y);case 2:return e=n.sent,n.next=5,q.b(me.k,e);case 5:return t=n.sent,n.next=8,q.e(d.Ai(t));case 8:case"end":return n.stop()}},Ca)}function cc(e){var t,n,r,a,i,c,s,o,u,l,p,f,b,x,y,v,g;return K.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return t=e.payload,n=t.key,r=t.value,a=t.widgetId,i=t.shouldUpdatePreviewArea,c=void 0===i||i,s=t.shouldUpdateEditArea,o=void 0===s||s,u=t.isEmitOT,l=void 0===u||u,p=t.isBasePropertyPriority,f=void 0===p||p,b=Oe.Bb(a),I.next=4,q.f(Nt.C);case 4:if(x=I.sent,y=x.find(function(e){var t;return e.widgetIds.includes(a)||(null===(t=e.invisibleWidgetIds)||void 0===t?void 0:t.includes(a))}),b&&b.type){I.next=8;break}return I.abrupt("return");case 8:if(l&&(b.isGlobalWidget?null===(v=Pe.oTHelper.globalWidget)||void 0===v||v.clientOp.replaceWidgetAttributeOp(a,n.toString(),r,f):y&&(null===(g=Pe.oTHelper.widget)||void 0===g||g.clientOp.replaceWidgetAttributeOp(y.id,a,n.toString(),r,f))),!Oe.o.includes(n)&&!(n in b)||!f){I.next=14;break}return I.next=12,q.b(oc,n,r,a);case 12:case 17:I.next=22;break;case 14:if(!(n in b.attributes)){I.next=19;break}return I.next=17,q.e(d.Kg(a,n,r));case 19:return console.warn("This property ".concat(n," maybe is invalid")),I.next=22,q.e(d.Kg(a,n,r));case 22:if(!c){I.next=25;break}return I.next=25,q.e(d.Uj());case 25:if(!o){I.next=28;break}return I.next=28,q.e(d.Qj());case 28:case"end":return I.stop()}},Ra)}function sc(e){var t,n,r,a,i,c,s,o,u,l,p;return K.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.payload,n=t.widgetId,r=t.key,a=t.value,Oe.Vb(n,r,a),i=Ks.getState().project.id,n.includes(Le.G)&&"db"===r&&$e.a.get(n).then(function(e){e?q.e(d.Pj(n,"value",e)):q.e(d.Pj(n,"value",a))}),!n.includes(Le.B)&&!n.includes(Le.y)){f.next=14;break}if("fields"!==r){f.next=14;break}if(c=Ze.getLocalDocumentObject(i,n)){f.next=12;break}return f.next=10,q.e(d.Pj(n,"value",a));case 10:f.next=14;break;case 12:return f.next=14,q.e(d.Pj(n,"value",c));case 14:return f.next=16,q.e(d.Fi(!0));case 16:if(s=Oe.Bb(n)){f.next=19;break}return f.abrupt("return");case 19:if(s.type===Le.B&&"fields"===r&&he.o(s.id,a),s.type===Le.G&&"db"===r&&he.p(s.id,a),!s.title){f.next=23;break}return f.abrupt("return");case 23:if(o=Oe.Db(s.type)){f.next=26;break}return f.abrupt("return");case 26:o.contentTextField===r&&(u=s.contentTitle,(l=(l=(l=a).replace(O.E,"")).trim())?l=Oe.C(n,s.type,l):(p=o.previewAreaWidgetTitle,p=Re.d(p),l=Oe.C(n,s.type,p)),u!==l&&(s.contentTitle=l,he.g.updateToolBoxWidgetTitle(n,l),he.y(n,l,s.type)));case 28:case"end":return f.stop()}},ja)}function oc(e,t,n){var r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=Oe.Bb(n)){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,q.e(d.Fi(!0));case 5:(Oe.o.includes(e)||e in r)&&("size"!==e&&"position"!==e||(t=o.a(o.a({},r[e]),t)),r[e]=t);case 6:case"end":return a.stop()}},Pa)}function uc(e,t){return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return he.g.updateToolBoxWidgetTitle(e,t),he.x(e,t),n.next=4,q.e(d.Yj(e,t));case 4:case"end":return n.stop()}},Na)}function dc(e,t){var n,r,a;return K.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,q.f(Nt.y);case 2:if(n=i.sent,(r=Oe.Bb(e))&&r.type===Le.l){i.next=6;break}return i.abrupt("return");case 6:return a=r.attributes.cloudDbId,i.next=9,q.b(de,a,t,Ve.a(n)?n:void 0);case 9:case"end":return i.stop()}},Va)}function lc(e,t){var n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,q.f(Nt.y);case 2:if(n=c.sent,(r=Oe.Bb(e))&&r.type===Le.h){c.next=6;break}return c.abrupt("return",t);case 6:return a=r.attributes.cloudDbId,c.next=9,q.b(Ye.p,a,t,Ve.a(n)?n:void 0);case 9:return i=c.sent,c.abrupt("return",i||t);case 11:case"end":return c.stop()}},Ba)}function pc(e){var t,n,r,a,i,c,s,o,u,l,p,f,b,x;return K.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(t=e.payload,n=t.widgetId,r=t.title,a=t.shouldUpdatePreviewArea,i=t.shouldUpdateEditArea,c=t.isEmitOT,s=void 0===c||c,o=Oe.Bb(n)){y.next=4;break}return y.abrupt("return");case 4:return y.next=6,q.f(Nt.f);case 6:return u=y.sent,l=null==u?void 0:u.id,p=o.type,y.next=11,q.b(dc,n,r);case 11:return y.next=13,q.b(lc,n,r);case 13:return f=y.sent,Oe.Xb(n,f),Oe.Vb(n,"name",f),he.g.updateToolBoxWidgetTitle(n,f),he.y(n,f,p),y.next=20,q.e(d.Fi(!0));case 20:if(!a){y.next=23;break}return y.next=23,q.e(d.Uj());case 23:if(!i){y.next=26;break}return y.next=26,q.e(d.Qj());case 26:return y.next=28,q.e(d.Pj(o.id,"name",f));case 28:s&&(o.isGlobalWidget?null!==(b=Pe.oTHelper.globalWidget)&&void 0!==b&&b.clientOp.replaceWidgetAttributeOp(n,"title",f):l&&null!==(x=Pe.oTHelper.widget)&&void 0!==x&&x.clientOp.replaceWidgetAttributeOp(l,n,"title",f));case 29:case"end":return y.stop()}},Wa)}function fc(){var e,t,n,r,i,c,s,o,u,l;return K.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,e=[],t=1,n=100,p.next=6,q.b(a.boughtList,t,n);case 6:if(r=p.sent,i=r.list,c=r.total,s=Math.ceil(c/n),e=e.concat(i),!(s>1)){p.next=22;break}t+=1;case 13:if(!(t<=s)){p.next=22;break}return p.next=16,q.b(a.boughtList,t,n);case 16:o=p.sent,u=o.list,e=e.concat(u);case 19:t++,p.next=13;break;case 22:return p.next=24,q.e(d.Sh(e));case 24:p.next=30;break;case 26:if(p.prev=26,p.t0=p.catch(0),40400100!==(null===(l=p.t0.response)||void 0===l?void 0:l.data.code)){p.next=30;break}return p.abrupt("return");case 30:case"end":return p.stop()}},Ua,null,[[0,26]])}function bc(e){var t,n,r,a;return K.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.widgetCloneList,r=t.screenId,i.next=3,q.f(Nt.g);case 3:if(a=i.sent,r&&a!==r){i.next=9;break}return i.next=7,q.b(yc,n);case 7:i.next=11;break;case 9:return i.next=11,q.b(xc,n,r);case 11:case"end":return i.stop()}},Ma)}function xc(e,t){var n,r,i,c,s,o,u,l,p,f;return K.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,q.f(Nt.C);case 2:return n=b.sent,b.next=5,q.f(Nt.J);case 5:if(r=b.sent,i=n.findIndex(function(e){return e.id===t}),!(c=n.get(i))){b.next=36;break}if(!e.length){b.next=36;break}o=j.a(e),b.prev=11,o.s();case 13:if((u=o.n()).done){b.next=21;break}return p=u.value,null!==(l=Pe.oTHelper.widget)&&void 0!==l&&l.clientOp.addWidgetOp(t,p),b.next=18,q.e(d.jf(c.id,p.id));case 18:p.parentId||a.reportUse(p.type,null==r?void 0:r.id);case 19:b.next=13;break;case 21:b.next=26;break;case 23:b.prev=23,b.t0=b.catch(11),o.e(b.t0);case 26:return b.prev=26,o.f(),b.finish(26);case 29:return b.next=31,q.b(di,d.vg(i));case 31:return f=null===(s=e[0])||void 0===s?void 0:s.id,b.next=34,q.e(d.ug(f));case 34:return b.next=36,q.e(d.Fi(!0));case 36:case"end":return b.stop()}},Ga,null,[[11,23,26,29]])}function yc(e){var t,n,r,i,c,o,u,l,p,f,b,x,y,v;return K.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,q.f(Nt.x);case 2:return t=g.sent,g.next=5,q.f(Nt.C);case 5:return n=g.sent,g.next=8,q.f(Nt.J);case 8:if(r=g.sent,i=n.get(t),!e.length||!i){g.next=50;break}o=i.get("id"),u=j.a(e),g.prev=13,u.s();case 15:if((l=u.n()).done){g.next=37;break}if(!(f=l.value).parentId){g.next=29;break}if(f.position.x+=20,f.position.y-=20,f.type!==Le.a&&f.type!==Le.c){g.next=27;break}if(!(b=Oe.Bb(f.parentId))){g.next=27;break}return y=(x=b).widgetIds.includes(f.id)?s.a(x.widgetIds):[].concat(s.a(x.widgetIds),[f.id]),g.next=27,q.e(d.Lg(f.parentId,"widgetIds",y,!0,!0,!0,!0));case 27:g.next=31;break;case 29:f.position.x+=10,f.position.y+=10;case 31:return null!==(p=Pe.oTHelper.widget)&&void 0!==p&&p.clientOp.addWidgetOp(o,f),g.next=34,q.e(d.jf(o,f.id));case 34:f.parentId||a.reportUse(f.type,null==r?void 0:r.id);case 35:g.next=15;break;case 37:g.next=42;break;case 39:g.prev=39,g.t0=g.catch(13),u.e(g.t0);case 42:return g.prev=42,u.f(),g.finish(42);case 45:return v=null===(c=e[0])||void 0===c?void 0:c.id,g.next=48,q.e(d.ug(v));case 48:return g.next=50,q.e(d.Fi(!0));case 50:case"end":return g.stop()}},Fa,null,[[13,39,42,45]])}function vc(e){var t,n,r,i,c,u,l,p,f,b,x,y,v,g,I,m,E;return K.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.widgetId,r=t.position,i=Le.c,c=Oe.Db(i),h.next=5,q.f(Nt.s);case 5:return u=h.sent,h.next=8,q.f(Nt.x);case 8:return l=h.sent,h.next=11,q.f(Nt.C);case 11:if(p=h.sent,(f=l>-1?p.get(l):void 0)&&c){h.next=15;break}return h.abrupt("return");case 15:return h.next=17,q.f(Nt.J);case 17:if(b=h.sent,x=c.widget.attributes,y=c.widget.isGlobalWidget,v=c.title?Oe.D(i,f.widgetIds,Re.c(u,c.title).toString()):"",g=Ce.a(i),I={id:g,title:v,type:Le.c,position:r,visible:!0,size:c.widget.size,parentId:n,animationRecord:{},attributes:o.a({},x),isGlobalWidget:y},Oe.Ub(g,I),!(m=Oe.Bb(n))){h.next=39;break}return m.widgetIds.push(g),h.next=29,q.e(d.Uj());case 29:return h.next=31,q.e(d.Qj());case 31:return h.next=33,q.e(d.jf(f.id,I.id));case 33:return h.next=35,q.e(d.ug(I.id));case 35:return h.next=37,q.b(ji,f.id,I);case 37:null!==(E=Pe.oTHelper.widget)&&void 0!==E&&E.clientOp.addBrushAndActorWidgetOp(f.id,I,m.id,s.a(m.widgetIds)),a.reportUse(I.type,null==b?void 0:b.id);case 39:case"end":return h.stop()}},Ha)}function gc(e){var t,n,r,i,c,o,u,l,p,f,b,x,y,v,g,I,m,E;return K.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.widgetId,r=t.position,i=n,c=Le.a,o=Oe.Db(c),h.next=6,q.f(Nt.s);case 6:return u=h.sent,h.next=9,q.f(Nt.x);case 9:return l=h.sent,h.next=12,q.f(Nt.C);case 12:if(p=h.sent,f=l>-1?p.get(l):void 0){h.next=16;break}return h.abrupt("return");case 16:if(o){h.next=18;break}return h.abrupt("return");case 18:return h.next=20,q.f(Nt.J);case 20:if(b=h.sent,x=w.cloneDeep(o.widget.attributes),y=o.widget.isGlobalWidget,x.actionList.push({id:Ce.a(Qe.a),name:Re.c(u,"ActorStyleDialog.defaultActionName").toString(),styleList:[],interval:200}),v=o.title?Oe.D(c,f.widgetIds,Re.c(u,o.title).toString()):"",g=Ce.a(c),I={id:g,title:v,type:Le.a,position:r,visible:!0,parentId:i,animationRecord:{},size:{width:0,height:0},attributes:x,isGlobalWidget:y},Oe.Ub(g,I),!(m=Oe.Bb(i))){h.next=43;break}return m.widgetIds.push(g),h.next=33,q.e(d.Uj());case 33:return h.next=35,q.e(d.Qj());case 35:return h.next=37,q.e(d.jf(f.id,I.id));case 37:return h.next=39,q.e(d.ug(I.id));case 39:return h.next=41,q.b(ji,f.id,I);case 41:null!==(E=Pe.oTHelper.widget)&&void 0!==E&&E.clientOp.addBrushAndActorWidgetOp(f.id,I,m.id,s.a(m.widgetIds)),a.reportUse(I.type,null==b?void 0:b.id);case 43:case"end":return h.stop()}},Ya)}function Ic(e){var t,n,r,a,i,c,s;return K.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.screenId,r=t.blockId,o.next=3,q.f(Nt.s);case 3:return a=o.sent,o.next=6,q.f(Nt.f);case 6:return i=o.sent,o.next=9,q.f(Nt.C);case 9:if(c=o.sent,s=c.findIndex(function(e){return e.id===n}),(null==i?void 0:i.id)!==n){o.next=16;break}return o.next=14,q.b(he.z.playWarningAnimation,r);case 14:o.next=19;break;case 16:if(!(s>-1)){o.next=19;break}return o.next=19,q.b(di,d.vg(s));case 19:if(!he.z.getBlockById(r)){o.next=25;break}return o.next=23,q.b(he.z.playWarningAnimation,r);case 23:o.next=27;break;case 25:return o.next=27,q.e(d.mj({message:Re.c(a,"theBlockHasBeRemoved").toString(),showCloseIcon:!1,showPrefixIcon:!1,type:"error"}));case 27:case"end":return o.stop()}},Ja)}function mc(e){var t,n,r,a,i,c;return K.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.screenIds,s.next=3,q.f(Nt.C);case 3:return n=s.sent,r=n.map(function(e){return e.id}).toJSON(),s.next=7,q.f(Nt.f);case 7:if(a=s.sent,w.isEqual(r,t)){s.next=16;break}return i=[],t.forEach(function(e){var t=n.find(function(t){return t.id===e});t&&i.push(t)}),s.next=13,q.e(d.Aj(u.a.List(i)));case 13:return c=t.indexOf(a.id),s.next=16,q.e(d.Bi(c));case 16:case"end":return s.stop()}},za)}function Ec(e){var t,n,r,a,i,c,s;return K.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,n=t.screenId,r=t.key,a=t.value,i=t.isEmitOT,c=void 0===i||i,"title"!==r||"string"!=typeof a){o.next=7;break}return o.next=4,q.b(uc,n,a);case 4:he.y(n,a,"SCREEN"),o.next=9;break;case 7:return o.next=9,q.e(d.Wj(n,r,a));case 9:return o.next=11,q.e(d.Fi(!0));case 11:c&&null!==(s=Pe.oTHelper.screen)&&void 0!==s&&s.clientOp.updateScreenStyle(n,r,a);case 12:case"end":return o.stop()}},Ka)}function hc(e){var t,n,r,a,i,c,s,o;return K.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.isEmitOT,r=void 0===n||n,a=t.widgetId,u.next=3,q.f(Nt.f);case 3:return i=u.sent,u.next=6,q.f(Nt.i);case 6:return c=u.sent,u.next=9,q.e(d.Xh(a));case 9:c&&setTimeout(function(){return he.g.setSelectedItemByWidgetId(a||i.id)},10),r&&null!==(s=Pe.oTHelper.customEvent)&&void 0!==s&&null!==(o=s.emit)&&void 0!==o&&o.focusItem("widget",a);case 11:case"end":return u.stop()}},qa)}function kc(e){var t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.title,r=t.isEmitOT,a=void 0===r||r,c.next=3,q.e(d.Qg(n));case 3:return c.next=5,q.e(d.Fi(!0));case 5:a&&null!==(i=Pe.oTHelper.projectOt)&&void 0!==i&&i.clientOp.changeProjectProperty("title",n);case 6:case"end":return c.stop()}},Qa)}function Tc(e){var t,n,r,a,i,c,s,o;return K.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.screenId,r=t.widgetId,a=t.widgetIds,i=t.isEmitOT,c=void 0===i||i,(s=Oe.Bb(r))&&(s.widgetIds=a),u.next=5,q.e(d.Fi(!0));case 5:return u.next=7,q.e(d.Uj());case 7:return u.next=9,q.e(d.Qj());case 9:c&&null!==(o=Pe.oTHelper.widget)&&void 0!==o&&o.clientOp.replaceWidgetAttributeOp(n,r,"widgetIds",a);case 10:case"end":return u.stop()}},Xa)}function _c(){var e,t,n,r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.f(Nt.y);case 2:return e=a.sent,a.next=5,q.f(Nt.G);case 5:return t=a.sent,a.next=8,q.b(me.e,e);case 8:if(!(n=a.sent)||!n.pack_label){a.next=14;break}return a.next=12,q.e(d.Ji({apkIcon:n.apk_icon,apkName:n.apk_name,packLabel:n.pack_label,apkSplash:n.app_splash||""}));case 12:a.next=16;break;case 14:return a.next=16,q.e(d.Ji({apkName:t}));case 16:if(!(Oe.Y().length>0&&"true"!==localStorage.getItem("cloudDBPublishGuide"))){a.next=23;break}return r=function(){return Ks.dispatch(d.Ii(!0))},a.next=21,q.e(d.kj(!0,"pack",r));case 21:a.next=25;break;case 23:return a.next=25,q.e(d.Ii(!0));case 25:case"end":return a.stop()}},Za)}function wc(){var e,t,n;return K.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,q.f(Nt.B);case 2:return e=r.sent,r.next=5,q.b(me.d,e);case 5:return r.next=7,q.e(d.Li(!1));case 7:return r.next=9,q.f(Nt.y);case 9:return t=r.sent,r.next=12,q.f(Nt.A);case 12:n=r.sent,_e.a("CancelWorkPack",{workId:t,apkName:n.apkName});case 14:case"end":return r.stop()}},$a)}function Sc(){var e;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.f(Nt.s);case 2:return e=t.sent,t.next=5,q.e(d.zh({onConfirm:function(){Ks.dispatch(d.Ch())},allowText:Re.c(e,"cloudDbUserLogin").toString(),cancelText:Re.c(e,"cloudDbUserCancelLogin").toString(),title:Re.c(e,"cloudDbUserNotLoginTitle").toString(),content:Re.c(e,"cloudDbUserNotLoginDescription").toString()}));case 5:case"end":return t.stop()}},ei)}function Oc(){var e,t,n,r,a,i,c,o,u,l,p,f,b,x,y,v,g,I,m,E,h,k,T,_,w,S,O,A,D,L;return K.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,q.f(Nt.y);case 2:return e=C.sent,t=Oe.cb(),n=[],C.prev=5,C.next=8,q.b(ce,Ve.a(e)?e:void 0);case 8:n=C.sent,C.next=17;break;case 11:if(C.prev=11,C.t0=C.catch(5),!(40400100===(null===(r=C.t0.response)||void 0===r?void 0:r.data.code)&&t.length>0)){C.next=16;break}return C.next=16,q.b(Sc);case 16:return C.abrupt("return");case 17:a=!1,i=[],c=[],o=t.filter(function(e){return!n.some(function(t){return t.id===e.attributes.cloudDbId})}),u=j.a(n),C.prev=22,u.s();case 24:if((l=u.n()).done){C.next=31;break}return p=l.value,C.next=28,q.b(Lc,p.id);case 28:p.fields=C.sent;case 29:C.next=24;break;case 31:C.next=36;break;case 33:C.prev=33,C.t1=C.catch(22),u.e(C.t1);case 36:return C.prev=36,u.f(),C.finish(36);case 39:n.reverse().forEach(function(e){var t=Oe.cb().find(function(t){return t.attributes.cloudDbId===e.id});t?(Oe.Vb(t.id,"fields",e.fields),i.push(t)):c.push(e)}),f=0,b=c;case 41:if(!(f<b.length)){C.next=56;break}return x=b[f],C.next=45,q.b(Si,Le.l,{x:0,y:0});case 45:if(!(y=C.sent)){C.next=53;break}return y.title=x.name,y.attributes.cloudDbId=x.id,y.attributes.fields=x.fields,i.push(y),C.next=53,q.b(Ai,y);case 53:f++,C.next=41;break;case 56:if(!(o.length+i.length<=De.f)){C.next=83;break}v=i.map(function(e){return e.title}),g=j.a(o),C.prev=59,g.s();case 61:if((I=g.n()).done){C.next=73;break}return m=I.value,v.includes(m.title)&&(a=!0,m.title=Oe.ac(m.title,v),v.push(m.title)),C.next=66,q.b(oe,m.title);case 66:return E=C.sent,m.attributes.cloudDbId=E,C.next=70,q.b(ye,E,{addItems:s.a(m.attributes.fields),editItems:[],deleteItems:[]},Ve.a(e)?e:void 0);case 70:ge([E],2,0,Ve.a(e)?e:void 0);case 71:C.next=61;break;case 73:C.next=78;break;case 75:C.prev=75,C.t2=C.catch(59),g.e(C.t2);case 78:return C.prev=78,g.f(),C.finish(78);case 81:C.next=106;break;case 83:h=j.a(o),C.prev=84,h.s();case 86:if((k=h.n()).done){C.next=95;break}return T=k.value,_=T.type,w=T.id,he.q(_,w),Oe.F(T.id),C.next=93,q.e(d.Lh(w));case 93:C.next=86;break;case 95:C.next=100;break;case 97:C.prev=97,C.t3=C.catch(84),h.e(C.t3);case 100:return C.prev=100,h.f(),C.finish(100);case 103:S=Re.d("cloudDbCountOverflowTitle"),O=Re.d("cloudDbCountOverflowDescription",{workDbCount:o.length.toString(),selfDbCount:i.length.toString(),maxCount:De.f.toString()}),$.a.info({title:S,icon:null,centered:!0,content:O,okText:"确认",width:480,okButtonProps:{shape:"circle"}});case 106:return a&&(A=Re.d("cloudDbNameConflictTitle"),D=Re.d("cloudDbNameConflictDescription"),$.a.info({title:A,icon:null,centered:!0,content:D,okText:"确认",width:480,okButtonProps:{shape:"circle"}})),C.next=109,q.e(d.Qj());case 109:return C.next=111,q.f(Nt.n);case 111:L=C.sent,he.g.updateGlobalWidget(L);case 113:case"end":return C.stop()}},ti,null,[[5,11],[22,33,36,39],[59,75,78,81],[84,97,100,103]])}function Ac(){var e,t,n,r,a,i;return K.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,q.f(Nt.s);case 2:return e=c.sent,t=Oe.Y(),c.next=6,q.f(Nt.J);case 6:return n=c.sent,c.next=9,q.f(Nt.K);case 9:if(c.sent){c.next=12;break}return c.abrupt("return");case 12:return c.next=14,q.b(Sr);case 14:if(0!==t.length){c.next=16;break}return c.abrupt("return");case 16:if(n){c.next=23;break}return t.forEach(function(e){Oe.F(e.id)}),c.next=20,q.e(d.mj({message:Re.c(e,"cloudDb.noLoginError").toString(),type:"info"}));case 20:return c.next=22,q.e(d.Ch());case 22:return c.abrupt("return");case 23:return c.next=25,q.b(Ye.g,"dev");case 25:if(r=c.sent){c.next=28;break}return c.abrupt("return");case 28:if(a=!1,i=!1,t.forEach(function(e){var t=e.attributes.cloudDbId,n=e.id,c=r.find(function(e){return e.id===t});if(c){if(e.title!==c.name){i=!0;var s=c.name;Oe.Xb(n,s),he.g.updateToolBoxWidgetTitle(n,s),he.y(e.id,s,"CLOUD_DB"),Oe.Vb(n,"name",s),Ks.dispatch(d.Uj()),Ks.dispatch(d.Qj())}e.attributes.primaryKey!==c.primary_column&&(i=!0,Oe.Vb(n,"primaryKey",c.primary_column)),JSON.stringify(e.attributes.columns)!==JSON.stringify(c.columns)&&(i=!0,Ks.dispatch(d.zg(t,c.columns)))}else a=!0,Oe.F(n),he.q("CLOUD_DB",n)}),!a){c.next=36;break}return c.next=34,q.e(d.zh({allowText:Re.c(e,"cloudDb.know").toString(),title:Re.c(e,"cloudDb.dataRemoveTitle").toString(),content:Re.c(e,"cloudDb.dataRemoveContent").toString(),cancelBtnVisible:!1}));case 34:c.next=39;break;case 36:if(!i){c.next=39;break}return c.next=39,q.e(d.mj({message:Re.c(e,"cloudDb.dataChangeNotice").toString(),type:"error"}));case 39:return c.next=41,q.e(d.Qj());case 41:case"end":return c.stop()}},ni)}function Dc(e){var t,n,r,a,i,c,s,o,u,l,p,f,b;return K.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(t=e.payload,n=t.fields,r=t.setBlockValue,a=t.widgetId,(i=Oe.Bb(a))&&i.type===Le.l){x.next=4;break}return x.abrupt("return");case 4:return c=i.attributes.cloudDbId,s=i.attributes.fields,o=[],u=[],l=[],x.next=11,q.f(Nt.y);case 11:if(p=x.sent,f=n.length!==s.length,n.forEach(function(e){var t=!0;s.forEach(function(n){n.id===e.id&&(w.isEqual(e,n)||(f=!0,u.push(e)),t=!1)}),t&&(f=!0,o.push({key:e.key,value:e.value,type:e.type}))}),s.forEach(function(e){n.some(function(t){return t.id===e.id})||(l.push(e.id),f=!0)}),!f){x.next=26;break}return x.next=18,q.b(ye,c,{addItems:o,editItems:u,deleteItems:l},Ve.a(p)?p:void 0);case 18:return(b=x.sent).addItems&&b.addItems.forEach(function(e){e.id=e.id+"",n.forEach(function(t){e.key===t.key&&(t.id=e.id)})}),x.next=22,q.b(cc,d.Lg(a,"fields",n,!1,!0));case 22:r&&1===b.addItems.length&&r(b.addItems[0].key),u.forEach(function(e){var t=s.find(function(t){return t.id===e.id});t&&he.n(a,t.key,e.key)}),b.deleteItems&&b.deleteItems.forEach(function(e){var t=s.find(function(t){return t.id===e.toString()});t&&he.n(a,t.key,"")}),ge([c],2,0,Ve.a(p)?p:void 0);case 26:case"end":return x.stop()}},ri)}function Lc(e){var t,n,r,a,i,c,s;return K.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,q.f(Nt.y);case 2:return t=o.sent,n=[],r=1,a=500,o.next=8,q.b(be,e,r,a,Ve.a(t)?t:void 0);case 8:if(i=o.sent,n=n.concat(i.items),!((c=Math.ceil(i.total/a))>1)){o.next=21;break}r+=1;case 13:if(!(r<=c)){o.next=21;break}return o.next=16,q.b(be,e,r,a,Ve.a(t)?t:void 0);case 16:s=o.sent,n=n.concat(s.items);case 18:r++,o.next=13;break;case 21:return o.abrupt("return",n);case 22:case"end":return o.stop()}},ai)}function Cc(e){var t,n,r,a,i,c;return K.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,q.f(function(e){return e.oTState.collWorkId});case 2:return t=s.sent,n=e.payload.archiveId,s.next=6,q.e(d.si(""));case 6:if(!n){s.next=33;break}return s.next=9,q.b(Ee.e,n);case 9:if(r=s.sent,!(a=r.content)){s.next=32;break}return s.next=14,q.e(d.bg());case 14:return s.next=16,q.e(d.cg());case 16:return s.next=18,q.b(gi,a);case 18:return s.next=20,q.e(d.dg());case 20:return s.next=22,q.e(d.Ei(void 0));case 22:return s.next=24,q.e(d.Fi(!1));case 24:return s.next=26,q.e(d.tj(!1));case 26:return s.next=28,q.f(Nt.s);case 28:return i=s.sent,s.next=31,q.e(d.mj({message:Re.c(i,"History.revertSuccess").toString(),type:"success"}));case 31:t&&null!==(c=je.a.client)&&void 0!==c&&c.forceSetDoc();case 32:ct();case 33:case"end":return s.stop()}},ii)}function Rc(e){var t,n,r,a,i,c;return K.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return rt(),t=Oe.Y(),n=t.map(function(e){return e.attributes.cloudDbId}),s.next=5,q.b(Oe.R);case 5:return r=s.sent,s.next=8,q.b(Oe.sb);case 8:return a=s.sent,s.next=11,q.b(Oe.S);case 11:return i=s.sent,s.next=14,q.b(Oe.tb);case 14:if(c=s.sent,!(t.length>0)){s.next=18;break}return s.next=18,q.b(Ye.a,n,e);case 18:if(s.prev=18,!(r.length>0)){s.next=24;break}return s.next=22,q.b(ot.d,e,r);case 22:return s.next=24,q.e(d.lf(r));case 24:s.next=29;break;case 26:s.prev=26,s.t0=s.catch(18),console.error(s.t0);case 29:if(s.prev=29,!(a.length>0)){s.next=35;break}return s.next=33,q.b(ot.v,e,a);case 33:return s.next=35,q.e(d.Ih(a));case 35:s.next=40;break;case 37:s.prev=37,s.t1=s.catch(29),console.error(s.t1);case 40:if(s.prev=40,!(i.length>0)){s.next=46;break}return s.next=44,q.b(ot.e,e,i);case 44:return s.next=46,q.e(d.mf(i));case 46:s.next=51;break;case 48:s.prev=48,s.t2=s.catch(40),console.error(s.t2);case 51:if(s.prev=51,!(c.length>0)){s.next=57;break}return s.next=55,q.b(ot.w,e,c);case 55:return s.next=57,q.e(d.Jh(c));case 57:s.next=62;break;case 59:s.prev=59,s.t3=s.catch(51),console.error(s.t3);case 62:case"end":return s.stop()}},ci,null,[[18,26],[29,37],[40,48],[51,59]])}function jc(e){var t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=e.payload.json)){n.next=4;break}return n.next=4,q.b(gi,t);case 4:case"end":return n.stop()}},si)}function Pc(e){var t,n,r,a,i,c,s,o;return K.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload.callback,u.next=3,q.f(Nt.E);case 3:return n=u.sent,u.next=6,q.f(Nt.y);case 6:if(r=u.sent,a=Ve.a(r),n.title){u.next=29;break}if(!a){u.next=24;break}return u.next=12,q.b(me.g,r,0);case 12:if(!(i=u.sent)||!i.data){u.next=22;break}return u.next=16,q.b(fetch,i.data.bcmc_url);case 16:return c=u.sent,u.next=19,c.json();case 19:return s=u.sent,u.next=22,q.e(d.Ti({title:s.title,desc:s.description||Se.c,img:s.coverUrl||Je.a}));case 22:u.next=29;break;case 24:return u.next=26,q.f(Nt.G);case 26:return o=u.sent,u.next=29,q.e(d.Ti({title:o,desc:Se.c,img:Je.a}));case 29:if(!(Oe.Y().length>0&&"true"!==localStorage.getItem("cloudDBPublishGuide"))){u.next=35;break}return u.next=33,q.e(d.kj(!0,"share",t));case 33:u.next=36;break;case 35:t();case 36:return u.abrupt("return");case 37:case"end":return u.stop()}},oi)}Yn={},Z.a(Yn,d.H,li),Z.a(Yn,d.M,wi),Z.a(Yn,d.gb,Di),Z.a(Yn,d.lb,Li),Z.a(Yn,d.jb,Wi),Z.a(Yn,d.Jb,Mi),Z.a(Yn,d.kb,Fi),Z.a(Yn,d.Mb,cc),Z.a(Yn,d.Lb,sc),Z.a(Yn,d.Ob,pc),Z.a(Yn,d.db,fc),Z.a(Yn,d.nb,Ii),Z.a(Yn,d.D,mi),Z.a(Yn,d.N,qi),Z.a(Yn,d.G,bi),Z.a(Yn,d.F,xi),Z.a(Yn,d.U,fi),Z.a(Yn,d.vb,di),Z.a(Yn,d.E,bc),Z.a(Yn,d.fb,vc),Z.a(Yn,d.eb,gc),Z.a(Yn,d.tb,nc),Z.a(Yn,d.Ib,ic),Z.a(Yn,d.hb,Ic),Z.a(Yn,d.y,ac),Z.a(Yn,d.xb,mc),Z.a(Yn,d.Kb,Ec),Z.a(Yn,d.Bc,vi),Z.a(Yn,d.Nb,Tc),Z.a(Yn,d.ub,hc),Z.a(Yn,d.B,kc),Z.a(Yn,d.T,_c),Z.a(Yn,d.x,wc),Z.a(Yn,d.ab,Oc),Z.a(Yn,d.zb,Dc),Z.a(Yn,d.Kc,zi),Z.a(Yn,d.Lc,Ki),Z.a(Yn,d.z,Pi),Z.a(Yn,d.rb,Ni),Z.a(Yn,d.sb,Cc),Z.a(Yn,d.dc,jc),Z.a(Yn,d.bb,Ac),Z.a(Yn,d.V,Pc);var Nc,Vc=Yn,Bc=yt(Vc);function Wc(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.g(Object.keys(Vc),Bc);case 2:case"end":return e.stop()}},ui)}const Uc=n(93101);var Mc=K.a.mark(as),Gc=K.a.mark(is),Fc=K.a.mark(cs),Hc=K.a.mark(ss),Yc=K.a.mark(os),Jc=K.a.mark(us),zc=K.a.mark(ds),Kc=K.a.mark(ls),qc=K.a.mark(fs),Qc=K.a.mark(bs),Xc=K.a.mark(xs),Zc=K.a.mark(ys),$c=K.a.mark(vs),es=K.a.mark(gs),ts=K.a.mark(Is),ns=K.a.mark(ms),rs=K.a.mark(Ts);function as(){var e,t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.f(Nt.s);case 2:return t=n.sent,n.next=5,q.e(d.mj({type:"error",message:(null===(e=Re.c(t,"noSelectDoc"))||void 0===e?void 0:e.toString())||"",showCloseIcon:!1}));case 5:case"end":return n.stop()}},Mc)}function is(e){var t,n,r,a,i,c,s,o,u,p,f;return K.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.payload,n=t.variableType,r=t.id,a=t.name,i=t.defaultValue,c=t.screenId,s=t.setBlockValue,o=t.isEmitOT,u=void 0===o||o,p=t.index,b.next=3,q.e(d.gf(n,r,a,i,c,p));case 3:return b.next=5,q.e(d.bf(tt.a("PRIMITIVE",{id:r,name:a,type:"PRIMITIVE",screenId:n===l.i.GLOBAL?l.i.GLOBAL:c,value:i,defaultValue:i},{isWatching:!1})));case 5:return b.next=7,q.e(d.Fi(!0));case 7:u&&(null!==(f=Pe.oTHelper.primitiveVariables)&&void 0!==f&&f.clientOp.add(n,c,r,a,i,p),s&&s(r));case 8:case"end":return b.stop()}},Gc)}function cs(e){var t,n,r,a,i,c,s,o,u,p,f;return K.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.payload,n=t.arrayType,r=t.id,a=t.name,i=t.defaultValue,c=t.screenId,s=t.setBlockValue,o=t.index,u=t.isEmitOT,p=void 0===u||u,b.next=3,q.e(d.Ye(n,r,a,i,c,o));case 3:return b.next=5,q.e(d.bf(tt.a("LIST",{id:r,name:a,type:"LIST",screenId:n===l.i.GLOBAL?l.i.GLOBAL:c,value:i,defaultValue:i},{isWatching:!1})));case 5:return b.next=7,q.e(d.Fi(!0));case 7:p&&(null!==(f=Pe.oTHelper.arrayVariables)&&void 0!==f&&f.clientOp.add(n,c,r,a,i,o),s&&s(r));case 8:case"end":return b.stop()}},Fc)}function ss(e){var t,n,r,a,i,c,s,o,u,p,f,b;return K.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return t=e.payload,n=t.setBlockValue,r=t.isEmitOT,a=void 0===r||r,i=Uc.a(t,["setBlockValue","isEmitOT"]),x.next=3,q.e(d.ff(i));case 3:return x.next=5,q.e(d.bf(tt.a("DICT",{id:i.id,name:i.name,type:"DICT",screenId:i.scopeType===l.i.GLOBAL?l.i.GLOBAL:i.screenId,value:i.defaultValue,defaultValue:i.defaultValue},{isWatching:!1})));case 5:return x.next=7,q.e(d.Fi(!0));case 7:a&&(s=i.id,o=i.scopeType,u=i.screenId,p=i.name,f=i.defaultValue,b=i.index,null!==(c=Pe.oTHelper.objectVariables)&&void 0!==c&&c.clientOp.add(o,u,s,p,f,b),n&&n(s));case 8:case"end":return x.stop()}},Hc)}function os(e,t,n,r){return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.e(d.zi(e,t,n,r));case 2:return a.next=4,q.e(d.Pj(t,"name",n));case 4:he.m(he.c.PRIMITIVE,t,n);case 5:case"end":return a.stop()}},Yc)}function us(e){var t,n,r,a,i,c,s,o,u;return K.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.payload,n=t.variableType,r=t.id,a=t.screenId,i=t.key,c=t.value,s=t.isEmitOT,o=void 0===s||s,"name"!==i){l.next=6;break}return l.next=4,q.b(os,n,r,c.toString(),a);case 4:l.next=17;break;case 6:if("defaultValue"!==i){l.next=17;break}return l.next=9,q.e(d.yi(n,r,c,a));case 9:return l.next=11,q.e(d.Hg(n,r,"value",c,a,!0));case 11:return l.next=13,q.e(d.Pj(r,"defaultValue",c));case 13:if(Ks.getState().project.playing){l.next=17;break}return l.next=17,q.e(d.Pj(r,"value",c));case 17:return l.next=19,q.e(d.Fi(!0));case 19:o&&null!==(u=Pe.oTHelper.primitiveVariables)&&void 0!==u&&u.clientOp.update(n,a,r,i,c);case 20:case"end":return l.stop()}},Jc)}function ds(e){var t,n,r,a,i,c,s,o,u;return K.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.payload,n=t.arrayType,r=t.id,a=t.screenId,i=t.key,c=t.value,s=t.isEmitOT,o=void 0===s||s,"name"!==i){l.next=6;break}return l.next=4,q.b(ls,n,r,c.toString(),a);case 4:l.next=17;break;case 6:if("defaultValue"!==i||!Array.isArray(c)){l.next=17;break}return l.next=9,q.e(d.ai(n,r,c,a));case 9:return l.next=11,q.e(d.yg(n,r,"value",c,a,!0));case 11:return l.next=13,q.e(d.Pj(r,"defaultValue",c));case 13:if(Ks.getState().project.playing){l.next=17;break}return l.next=17,q.e(d.Pj(r,"value",c));case 17:return l.next=19,q.e(d.Fi(!0));case 19:o&&null!==(u=Pe.oTHelper.arrayVariables)&&void 0!==u&&u.clientOp.updateProperty(n,a,r,i,c);case 20:case"end":return l.stop()}},zc)}function ls(e,t,n,r){return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.e(d.Zh(e,t,n,r));case 2:return a.next=4,q.e(d.Fi(!0));case 4:return a.next=6,q.e(d.Pj(t,"name",n));case 6:he.m(he.c.ARRAY,t,n);case 7:case"end":return a.stop()}},Kc)}function ps(e,t){var n,r=!1;for(n in e)e[n]!==t[n]&&(r=!0);return r}function fs(e){var t,n,r,a,i,c,s,o,u;return K.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.payload,n=t.scopeType,r=t.id,a=t.screenId,i=t.key,c=t.value,s=t.isEmitOT,o=void 0===s||s,"name"!==i){l.next=6;break}return l.next=4,q.b(bs,n,r,c.toString(),a);case 4:l.next=15;break;case 6:if("defaultValue"!==i||"object"!=typeof c){l.next=15;break}return l.next=9,q.e(d.wi(n,r,c,a));case 9:return l.next=11,q.e(d.Pj(r,"defaultValue",c));case 11:if(Ks.getState().project.playing){l.next=15;break}return l.next=15,q.e(d.Pj(r,"value",c));case 15:return l.next=17,q.e(d.Fi(!0));case 17:o&&null!==(u=Pe.oTHelper.objectVariables)&&void 0!==u&&u.clientOp.updateProperty(n,a,r,i,c);case 18:case"end":return l.stop()}},qc)}function bs(e,t,n,r){return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,q.e(d.xi(e,t,n,r));case 2:return a.next=4,q.e(d.Fi(!0));case 4:return a.next=6,q.e(d.Pj(t,"name",n));case 6:he.m(he.c.OBJECT,t,n);case 7:case"end":return a.stop()}},Qc)}function xs(e){var t,n,r,a,i,c,s,o,u,l;return K.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,n=t.id,r=t.fields,a=t.isEmitOT,i=void 0===a||a,c=Oe.yb(n),p.next=4,q.f(Nt.y);case 4:if(s=p.sent,o=[],u=[],l=r.length!==c.length,c.forEach(function(e){r.forEach(function(t){t.id===e.id&&(ps(e,t)&&(l=!0),t.key!==e.key&&o.push(t))}),r.some(function(t){return t.id===e.id})||(u.push(e),l=!0)}),!l){p.next=15;break}return p.next=12,q.e(d.Lg(n,"fields",r,!1,!0,i));case 12:o.forEach(function(e){he.m(he.c.DOC_KEYS,e.id,e.key)}),u.forEach(function(e){he.q(he.c.DOC_KEYS,e.id)}),We(s);case 15:case"end":return p.stop()}},Xc)}function ys(e){var t,n,r,a,i,c,s;return K.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.variableType,r=t.id,a=t.screenId,i=t.isEmitOT,c=void 0===i||i,o.next=3,q.e(d.dh(n,r,a));case 3:return o.next=5,q.e(d.Fi(!0));case 5:return he.q(he.c.PRIMITIVE,r),c&&null!==(s=Pe.oTHelper.primitiveVariables)&&void 0!==s&&s.clientOp.remove(n,a,r),he.m(he.c.PRIMITIVE,r,Oe.g),o.next=10,q.e(d.bh(r));case 10:case"end":return o.stop()}},Zc)}function vs(e){var t,n,r,a,i,c,s;return K.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.arrayType,r=t.id,a=t.screenId,i=t.isEmitOT,c=void 0===i||i,o.next=3,q.e(d.ah(n,r,a));case 3:return o.next=5,q.e(d.Fi(!0));case 5:return he.q(he.c.ARRAY,r),c&&null!==(s=Pe.oTHelper.arrayVariables)&&void 0!==s&&s.clientOp.remove(n,a,r),he.m(he.c.ARRAY,r,Oe.g),o.next=10,q.e(d.bh(r));case 10:case"end":return o.stop()}},$c)}function gs(e){var t,n,r,a,i,c,s;return K.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.scopeType,r=t.id,a=t.screenId,i=t.isEmitOT,c=void 0===i||i,o.next=3,q.e(d.ch(n,r,a));case 3:return o.next=5,q.e(d.Fi(!0));case 5:return he.q(he.c.OBJECT,r),c&&null!==(s=Pe.oTHelper.objectVariables)&&void 0!==s&&s.clientOp.remove(n,a,r),o.next=9,q.e(d.bh(r));case 9:case"end":return o.stop()}},es)}function Is(e){var t,n,r,a,i,c,s,o;return K.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.name,r=t.screenId,a=t.setBlockValue,i=t.index,c=t.isEmitOT,s=void 0===c||c,u.next=3,q.e(d.Ze(n,r,i));case 3:return u.next=5,q.e(d.Fi(!0));case 5:s&&(null!==(o=Pe.oTHelper.broadcasts)&&void 0!==o&&o.clientOp.add(r,n,i),a&&a(n));case 6:case"end":return u.stop()}},ts)}function ms(e){var t,n,r,a,i,c,s,o,u,l,p;return K.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.payload,n=t.id,r=t.columns,a=t.isEmitOT,i=void 0===a||a,c=Oe.Y(),s=c.find(function(e){return e.attributes.cloudDbId===n})){f.next=5;break}return f.abrupt("return");case 5:return o=s.attributes.columns,f.next=8,q.f(Nt.y);case 8:return u=f.sent,l=[],p=[],o&&o.forEach(function(e){var t=r.find(function(t){return t.id===e.id});t?t.name!==e.name&&p.push({id:e.id,newName:t.name}):l.push({id:e.id})}),f.next=14,q.e(d.Lg(s.id,"columns",r,!1,!0,i));case 14:p.forEach(function(e){he.m(he.c.COLUMNS,e.id,e.newName)}),l.forEach(function(e){he.q(he.c.COLUMNS,e.id)}),We(u);case 17:case"end":return f.stop()}},ns)}Nc={},Z.a(Nc,d.Fb,xs),Z.a(Nc,d.ib,as),Z.a(Nc,d.u,is),Z.a(Nc,d.o,cs),Z.a(Nc,d.t,ss),Z.a(Nc,d.L,ys),Z.a(Nc,d.I,vs),Z.a(Nc,d.K,gs),Z.a(Nc,d.p,Is),Z.a(Nc,d.Hb,us),Z.a(Nc,d.yb,ds),Z.a(Nc,d.Gb,fs),Z.a(Nc,d.Ab,ms);var Es,hs=Nc,ks=yt(hs);function Ts(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.g(Object.keys(hs),ks);case 2:case"end":return e.stop()}},rs)}const _s=n(85541),ws=n(25235);var Ss,Os=K.a.mark(Cs),As=K.a.mark(Rs),Ds=K.a.mark(js),Ls=K.a.mark(Ns);function Cs(e){var t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,q.e(d.ej(e.payload));case 3:if(!t){n.next=9;break}return _s.a(t.id,t.nickname),n.next=7,q.b(Qi);case 7:n.next=15;break;case 9:return je.a.disconnect(),n.next=12,q.e(d.Gf());case 12:return n.next=14,q.e(N.n());case 14:_s.b();case 15:case"end":return n.stop()}},Os)}function Rs(e){var t;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.b(ws.b);case 3:return t=e.sent,e.next=6,q.e(d.gi(t));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},As,null,[[0,8]])}function js(e){var t;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.b(ws.c);case 3:return t=e.sent,e.next=6,q.e(d.bj(t));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},Ds,null,[[0,8]])}var Ps=yt((Es={},Z.a(Es,d.wb,Cs),Z.a(Es,d.S,Rs),Z.a(Es,d.W,js),Es));function Ns(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.g([d.wb],Ps);case 2:return e.next=4,q.g([d.S],Ps);case 4:return e.next=6,q.g([d.W],Ps);case 6:case"end":return e.stop()}},Ls)}var Vs=K.a.mark(Us),Bs=K.a.mark(Ms),Ws=K.a.mark(Hs);function Us(e){var t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.list,n.next=3,q.e(N.u(t));case 3:case"end":return n.stop()}},Vs)}function Ms(e){var t,n,r,a;return K.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.info,i.next=3,q.f(function(e){return e.oTState.userFocusOTInfoList});case 3:return n=i.sent,a=n.findIndex(function(e){return e.userId===t.userId}),r=a>-1?n.update(a,function(){return o.a(o.a({},n.get(a)),t)}):n.push(t),i.next=8,q.e(N.v(r));case 8:case"end":return i.stop()}},Bs)}Ss={},Z.a(Ss,N.a,Us),Z.a(Ss,N.b,Ms);var Gs=Ss,Fs=yt(Gs);function Hs(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.g(Object.keys(Gs),Fs);case 2:case"end":return e.stop()}},Ws)}var Ys=K.a.mark(Js);function Js(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a([q.d(Wc),q.d(Ts),q.d(Ns),q.d(Hs),q.d(Rn),q.d(Mr)]);case 2:case"end":return e.stop()}},Ys)}window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||window.compose;var zs=c.a(),Ks=i.createStore(H,i.applyMiddleware(zs));function qs(){return Ks}function Qs(e){return Ks.dispatch(e)}function Xs(){return Ks.getState().common.language}zs.run(Js)},67869:(e,t,n)=>{n.d(t,{Vi:()=>i});const r=n(18776);var a={window:void 0,document:{getElementById:function(e){return e?document.querySelector("#".concat(r.a," #").concat(e)):null}},history:void 0,navigator:{userAgent:navigator.userAgent},localStorage:void 0,top:void 0,self:void 0,parent:void 0,frames:void 0,opener:void 0,fetch:void 0,XMLHttpRequest:void 0,location:void 0,open:void 0,alert:void 0,confirm:void 0,prompt:void 0,print:void 0,sessionStorage:void 0,postMessage:void 0,eval:function(){console.error("eval is not implemented")}};const i=["parent.location","top.location","WebSocket","XMLHttpRequest",".fetch","socketcv.codemao.cn"];Object.keys(a),Object.values(a)},83943:(e,t,n)=>{n.r(t),n.d(t,{callMethod:()=>r.callMethod,clearExternalModules:()=>ne,getExternalModules:()=>te,getProperty:()=>r.getProperty,modules:()=>X,onWidgetEvent:()=>r.onWidgetEvent,require:()=>$,requireExternalModule:()=>ee,setProperty:()=>r.setProperty});var r=n(48588),a=n(2543),i=n.n(a),c=n(87583),s=n(33075),o=n(20590),u=n(20354),d=n.n(u),l=n(59947),p=n(81203),f=n(63771),b=n(81324),x=n(34164),y=n(72505),v=n.n(y),g=n(37819),I={};Object.defineProperty(I,"setHeader",{get:function(){return k}}),Object.defineProperty(I,"setDataSerializer",{get:function(){return T}}),Object.defineProperty(I,"setRequestTimeout",{get:function(){return _}}),Object.defineProperty(I,"getCookieString",{get:function(){return w}}),Object.defineProperty(I,"setCookie",{get:function(){return S}}),Object.defineProperty(I,"clearCookies",{get:function(){return O}}),Object.defineProperty(I,"removeCookies",{get:function(){return A}}),Object.defineProperty(I,"post",{get:function(){return L}}),Object.defineProperty(I,"get",{get:function(){return C}}),Object.defineProperty(I,"put",{get:function(){return R}}),Object.defineProperty(I,"patch",{get:function(){return j}}),Object.defineProperty(I,"head",{get:function(){return P}}),Object.defineProperty(I,"options",{get:function(){return N}}),Object.defineProperty(I,"downloadFile",{get:function(){return V}}),Object.defineProperty(I,"uploadFile",{get:function(){return B}}),Object.defineProperty(I,"abort",{get:function(){return W}});var m={};Object.defineProperty(m,"wsConnect",{get:function(){return F}}),Object.defineProperty(m,"wsSend",{get:function(){return H}}),Object.defineProperty(m,"wsClose",{get:function(){return Y}});var E={};Object.defineProperty(E,"isStepCountingAvailable",{get:function(){return J}}),Object.defineProperty(E,"requestPermission",{get:function(){return z}}),Object.defineProperty(E,"startStepperUpdates",{get:function(){return K}}),Object.defineProperty(E,"stopStepperUpdates",{get:function(){return q}});var h=window.cordova&&window.cordova.plugin&&window.cordova.plugin.http||{};function k(e,t,n){h.setHeader(e,t,n)}function T(e){h.setDataSerializer(e)}function _(e){h.setRequestTimeout(e)}function w(e){return h.getCookieString(e)}function S(e,t,n){h.setCookie(e,t,n||{})}function O(){h.clearCookies()}function A(e,t){h.removeCookies(e,t)}function D(){}function L(e,t,n,r,a){return h.post(e,t,n,r||D,a||D)}function C(e,t,n,r,a){return h.get(e,t||{},n||{},r||D,a||D)}function R(e,t,n,r,a){return h.put(e,t,n,r||D,a||D)}function j(e,t,n,r,a){return h.patch(e,t,n,r||D,a||D)}function P(e,t,n,r,a){return h.head(e,t,n,r||D,a||D)}function N(e,t,n,r,a){return h.options(e,t,n,r||D,a||D)}function V(e,t,n,r,a,i){return h.downloadFile(e,t,n,r,a||D,i||D)}function B(e,t,n,r,a,i,c){return h.uploadFile(e,t,n,r,a,i||D,c||D)}function W(e){return h.abort(e)}if(!f.d()){var U={},M=function(e){var t=U[e];t.onmessage=void 0,t.onclose=void 0,U[e]=void 0},G={wsConnect:function(e,t,n,r){var a,i=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),c=new m(e.url);e.timeout&&e.timeout>0&&(a=setTimeout(function(){c.close()},e.timeout)),c.onopen=function(){a&&clearTimeout(a),U[i]=c,function(e,t,n){var r=U[e];r.onmessage=function(n){t({webSocketId:e,message:n.data,callbackMethod:"onMessage"})},r.onclose=function(t){n({webSocketId:e,code:t.code,reason:t.reason,callbackMethod:"onClose"}),M(e)}}(i,t,t),n({webSocketId:i,code:0})},c.onerror=function(){r({webSocketId:i,code:1006,reason:"Error connecting to "+e.url,callbackMethod:"onFail"})}},wsSend:function(e,t){var n=U[e];n&&n.send(t)},wsClose:function(e,t,n){var r=U[e];r&&(r.close(t,n),M(e))}};window.CordovaWebsocketPlugin=G}function F(e,t,n,r){var a;(null===(a=e.url)||void 0===a?void 0:a.includes("codemao.cn"))||b.O(e.url||"")||window.CordovaWebsocketPlugin.wsConnect(e,function(e){t(e)},function(e){n(e)},function(e){r(e)})}function H(e,t){window.CordovaWebsocketPlugin.wsSend(e,t)}function Y(e,t,n){t=t||1e3,n=n||"bye",window.CordovaWebsocketPlugin.wsClose(e,t,n)}function J(){return new Promise(function(e){window.stepper.isStepCountingAvailable().then(function(t){t?(console.log("isStepCountingAvailable Available !"),e(!0)):(console.log("isStepCountingAvailable Not available :-S"),e(!1))}).catch(function(t){console.error("isStepCountingAvailable error",t),e(!1)})})}function z(){return new Promise(function(e){window.stepper.requestPermission().then(function(t){t?(console.log("requestPermission Authorized !"),e(!0)):(console.log("requestPermission Denied :-S"),e(!1))}).catch(function(t){console.error("requestPermission error",t),e(!1)})})}function K(e,t,n){window.stepper.startStepperUpdates(e,t,n,{})}function q(){window.stepper.stopStepperUpdates()}v().interceptors.request.use(function(e){var t=e.url||"";return e.baseURL&&(t=e.baseURL+t.slice(1)),b.Y(t)?e:Promise.reject(new Error("auth failed"))},function(e){return Promise.reject(e)});var Q={isNative:f.d,filterXss:f.i,getWidgetImageUrl:g.b},X=new Map;const Z={"crypto-js":{url:"https://static.codemao.cn/appcraft/modules/crypto-js/4.1.1/crypto-js.js",ref:"CryptoJS"}};function $(e){if(Z[e]){const{ref:t}=Z[e];return window[t]}switch(e){case"http":return I;case"lodash":return i();case"qrcode":return c;case"pedometer":return p;case"websocket":return m;case"brightness":return x;case"stepper":return E;case"axios":return v();case"utils":return Q;case"vika":return s.Vika;case"antd-mobile":return l;case"color":return o.default;case"html2canvas":return d();default:return{}}}function ee(e){Z[e]&&X.set(e,Z[e].url)}function te(){return Array.from(X.values())}function ne(){X.clear()}}}]);