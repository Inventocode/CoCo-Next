"use strict";(self.webpackChunkcoco_next=self.webpackChunkcoco_next||[]).push([[4483],{1265:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FieldImage=void 0;var n=r(31635),i=r(71519),o=r(24042),a=r(99186),s=r(15261),c=function(t){function e(e){var n=t.call(this,e.opt_alt)||this;return n.field_type="FieldImage",n.editable=!1,n.src_=e.src,n.width_=isNaN(Number(e.width))?r.DEFAULT_WIDTH:Number(e.width),n.height_=isNaN(Number(e.height))?n.width_:Number(e.height),n.size_=new a.Size(n.width_,n.height_+2*n.theme.renderer.STATEMENT_ROW_PADDING_Y_TO_VALUE_BLOCK),n.text_="",n.tag=e.opt_tag||void 0,n}var r;return(0,n.__extends)(e,t),r=e,e.prototype.update_width=function(){this.size_.width=this.width_},e.prototype.update_height=function(){this.size_.height=this.height_+2*this.theme.renderer.STATEMENT_ROW_PADDING_Y_TO_VALUE_BLOCK},e.prototype.set_value=function(t){null!=t&&(this.src_=t,this.image_element&&this.image_element.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t||""))},e.prototype.init=function(){if(!this.field_group){if(this.field_group=(0,s.create_svg_element)("g",{}),this.visible_||(this.field_group.style.display="none"),"string"==typeof this.src_?(this.image_element=(0,s.create_svg_element)("image",{height:this.height_+"px",width:this.width_+"px"},this.field_group),this.set_value(this.src_)):(this.image_element=this.src_,this.field_group.appendChild(this.image_element)),null==this.source_block)throw new ReferenceError("Field should have source block before init.");if(null!=this.source_block){var t=this.source_block.get_svg_root();if(null==t)throw new ReferenceError("Field should have svg root before init.");t.appendChild(this.field_group)}}},e.prototype.layout=function(t,e){if(this.source_block&&(t[0]+=this.render_sep,!(0,o.is_nil)(this.image_element))){if("quote_left"===this.tag||"quote_right"===this.tag){var r="quote_left"==this.tag?t[0]-4:t[0]-6;return this.image_element.classList.add("blocklyQuote"),void this.image_element.setAttribute("transform","translate("+r+", "+(t[1]+6)+")")}var n=this.get_img_scale(),i=Number(((1-n)*this.size_.width/2).toFixed(2)),a=this.source_block.previous_connection?4*i:3*i,s=1.5*i;this.image_element.setAttribute("transform","scale("+n+") translate("+(t[0]+a)+", "+(t[1]+e/2-this.height_/2+s)+")"),t[0]+=this.size_.width}},e.prototype.get_img_scale=function(){return 1},e.prototype.on_mouse_down=function(t){if(t.preventDefault(),t.stopPropagation(),this.source_block&&this.source_block.get_workspace()&&!this.source_block.is_in_flyout){this.tooltip&&this.tooltip.hide();var e=this.source_block.get_workspace().get_gesture(t);e&&e.set_start_field(this)}},e.DEFAULT_WIDTH=20,r=(0,n.__decorate)([(0,i.injectable)()],e)}(r(35422).Field);e.FieldImage=c},2894:(t,e,r)=>{r.r(e),r.d(e,{a:()=>f,b:()=>d,c:()=>u,default:()=>b});const n=r(5587),i=r(3631),o=r(79955),a=r(95022),s=r(34556),c=r(71023);function u(t,e){for(var r in t){var n=t[r];if(1===e)if(n.type===i.v&&""===n.attributes.fileId&&(n.attributes.fileId="https://creation.codemao.cn/coconut/web/1.10.0/static/media/defaultImage.8392642c.svg"),n.type!==i.H||n.parentId)if(n.type===i.w){var c=n.attributes.sizeType;if(c){var u=o.ob(c);n.size.height=u.height,n.attributes.fontSize=u.fontSize}n.attributes.color&&(n.attributes.backgroundColor=n.attributes.color),n.attributes.mode&&(n.attributes.templateMode=n.attributes.mode),n.attributes.placeholderColor=a.n,n.attributes.valueColor=a.o,n.attributes.fontFamily=a.f,n.attributes.backgroundMode=s.a.TEMPLATE,n.attributes.backgroundImage=a.a,n.attributes.imageResizeMode=s.b.CONTAIN}else n.type===i.F&&l(n);else{var d="__textWidgetMigrateContainer",f=document.getElementById(d);f||((f=document.createElement("div")).id=d,f.style.whiteSpace="pre",f.style.wordBreak="break-all",f.style.position="absolute",f.style.zIndex="-100",f.style.visibility="hidden",f.style.padding="6px",document.body.appendChild(f));var p=n.attributes,h=p.fontSize,_=p.content.replace(/&nbsp;/g," ");n.attributes.content=_,40===n.size.width&&40===n.size.height&&n.attributes.sizeAdaptive===i.q.AUTO_ALL?(f.style.fontSize="".concat(h,"px"),f.innerText=_,n.size.width=Math.max(40,f.clientWidth),n.size.height=Math.max(40,f.clientHeight),n.attributes.sizeAdaptive=i.q.AUTO_HEIGHT,f.innerText=""):n.attributes.sizeAdaptive=i.q.FIXED}else 2===e&&n.type===i.F&&l(n)}}function l(t){var e=t.attributes.mode,r=t.attributes.sizeType;if(e&&r){var n=c.l[e][r];t.size.width=n.width,t.size.height=n.height}t.attributes.backgroundMode=s.a.TEMPLATE,t.attributes.imageResizeMode=s.b.CONTAIN}function d(t){var e=t.screens;Object.values(e).forEach(function(t){t.objectVariables||(t.objectVariables=[])}),t.globalObjectList||(t.globalObjectList=[])}function f(t){var e=function(t){var e=[];for(var r in t)if(t[r]){var n=t[r].blocks;if(n)for(var i in n){var o=n[i].fields;if(o){var a=o.BROADCAST;a&&!e.includes(a)&&e.push(a)}}}return e}(t.blockJsonMap);return{title:t.title,screenIds:t.screenList.map(function(t){return t.id}),screens:p(t.screenList,t.widgetMap,e),blockly:h(t.blockJsonMap),imageFileList:_(t.imageFileList),soundFileList:_(t.soundFileList),iconFileList:_(t.iconFileList),version:t.version,apiToken:t.apiToken||"",globalVariableList:m(t.variableMap).variableList,globalArrayList:m(t.variableMap).arrayList,globalObjectList:m(t.variableMap).objectList,globalWidgetIds:v(t.widgetMap).list,globalWidgets:v(t.widgetMap).map,authorId:t.authorId,extensionWidgetList:t.extensionWidgetList,unsafeExtensionWidgetList:t.unsafeExtensionWidgetList,fontFileList:_(t.fontFileList),sourceTag:t.sourceTag,sourceId:t.sourceId}}function p(t,e,r){var i,o={},a=n.a(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.arrayVariables=[],s.broadcasts=r,s.objectVariables=[],s.primitiveVariables=[],s.widgets=g(s.widgetIds.concat(s.invisibleWidgetIds),e),o[s.id]=s}}catch(t){a.e(t)}finally{a.f()}return o}function h(t){var e={};for(var r in t)e[r]={screenId:r,workspaceJson:t[r],workspaceOffset:{x:0,y:0}};return e}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[];for(var r in t)e.push(t[r]);return e}function v(t){var e=[],r={};for(var n in t)t[n].isGlobalWidget&&(e.push(n),r[n]=t[n]);return{list:e,map:r}}function g(t,e){var r={};return t.forEach(function(t){r[t]=e[t]}),r}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],r=[],n=[];for(var i in t)i.startsWith("VARIABLE")?e.push({defaultValue:t[i],id:i,name:i,value:t[i]}):i.startsWith("OBJECT")?n.push({defaultValue:t[i],id:i,name:i,value:t[i]}):i.startsWith("ARRAY")&&r.push({defaultValue:t[i],id:i,name:i,value:t[i]});return{variableList:e,objectList:n,arrayList:r}}const b=f},9276:(t,e,r)=>{r.r(e),r.d(e,{a:()=>o,b:()=>s,c:()=>i,d:()=>u,default:()=>d,e:()=>a,f:()=>l,g:()=>c});var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var o=function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function s(t,e,r,n){return new(r||(r=Promise))(function(i,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var r,n,i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}const d=o},9296:(t,e,r)=>{r.r(e),r.d(e,{a:()=>o,b:()=>i,default:()=>a});const n=r(96540);var i=n.isValidElement;function o(t,e){return function(t,e,r){return i(t)?n.cloneElement(t,"function"==typeof r?r(t.props||{}):r):e}(t,t,e)}const a=o},14435:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FieldTextInput=void 0;var n=r(31635),i=r(71519),o=r(53307),a=r(99186),s=r(15261),c=r(82390),u=function(t){function e(e){var r=t.call(this,e.text,e.opt_validator)||this;return r.field_type="FieldTextInput",r.spellcheck_=!0,r.is_composition_inputting=!1,r.on_start_composition=function(){r.is_composition_inputting=!0},r.on_end_composition=function(){r.is_composition_inputting=!1},r.size_=new a.Size(0,30),r}var r;return(0,n.__extends)(e,t),r=e,e.prototype.resize_editor=function(){var t;if(this.source_block&&this.workspace_){var e,r,n=this.widget_div.DIV;this.field_group&&n&&(this.source_block.is_shadow()?(e={width:this.source_block.width,height:this.source_block.height},r=(0,s.get_page_offset)(this.source_block.svg_group)):(e=(0,s.get_size_attr)(this.border_rect||this.field_group),r=(0,s.get_page_offset)(this.field_group)),n.style.width=e.width+"px",n.style.height=e.height+"px",n.style.left=r[0]+"px",n.style.top=r[1]+"px",n.style.transformOrigin="top left",n.style.transform="scale("+(null!==(t=this.workspace_.get_scale())&&void 0!==t?t:1)+")")}},e.prototype.show_editor=function(t,e){var r=this;if(!this.source_block)throw new ReferenceError("source_block is undefined");if(this.workspace_=this.source_block.get_workspace(),this.widget_div.show(this,function(){r.focus(!1),e&&e(),r.widget_dispose()()}),null==this.widget_div.DIV)throw new Error("DIV is undefined");return this.html_input=this.widget_create(),this.bind_input_events(),this.html_input.focus(),this.html_input.select(),this.html_input},e.prototype.update_width=function(){if(this.text_element&&this.source_block){var t=this.utils.get_cached_width(this.text_element);if(!this.source_block.is_shadow()){var e=t>=this.theme.renderer.TEXT_MIN_WIDTH_IN_FIELD?this.theme.renderer.TEXT_PADDING_IN_FIELD:(this.theme.renderer.TEXT_MIN_WIDTH_IN_FIELD+2*this.theme.renderer.TEXT_PADDING_IN_FIELD-t)/2;this.text_element.setAttribute("x",""+e),t+=2*e}this.size_.width=t}},e.prototype.update_height=function(){var e;t.prototype.update_height.call(this),null!==(e=this.text_element)&&void 0!==e&&e.setAttribute("y",String(this.size_.height/2))},e.prototype.layout=function(t,e){this.field_group&&this.text_element&&(t[0]+=this.render_sep,this.field_group.setAttribute("transform","translate("+t[0]+", "+(t[1]+(e-this.size_.height)/2)+")"),t[0]+=this.size_.width)},e.prototype.validate_=function(){var t="true";this.html_input&&(this.source_block&&(t=this.call_validator(this.html_input.value)),null==t?(0,s.add_class)(this.html_input,"blocklyInvalidInput"):(0,s.remove_class)(this.html_input,"blocklyInvalidInput"))},e.prototype.widget_dispose=function(t){var e=this;return function(){var r,n;if(e.source_block&&e.workspace_&&e.html_input){var i;t||(t=e.html_input.value);var o=e.events.get_group();e.events.set_group(o||!0),t!==e.html_input.defaultValue&&e.events.is_enabled()&&(i=e.change_event_factory("field",{block:e.source_block,old_value:e.html_input.defaultValue,new_value:t,name:e.name})),e.set_text(t),(null===(r=e.source_block)||void 0===r?void 0:r.rendered)&&e.source_block.render(),e.html_input.onKeyDownWrapper_&&e.events.unbind_event(e.html_input.onKeyDownWrapper_),e.html_input.onKeyUpWrapper_&&e.events.unbind_event(e.html_input.onKeyUpWrapper_),e.html_input.onKeyPressWrapper_&&e.events.unbind_event(e.html_input.onKeyPressWrapper_),e.html_input.onInputWrapper_&&e.events.unbind_event(e.html_input.onInputWrapper_||[]),e.html_input.onWorkspaceChangeWrapper_&&null!==(n=e.workspace_)&&void 0!==n&&n.remove_change_listener(e.html_input.onWorkspaceChangeWrapper_),e.html_input.on_composition_start_wrapper_&&e.events.unbind_event(e.html_input.on_composition_start_wrapper_),e.html_input.on_composition_end_wrapper_&&e.events.unbind_event(e.html_input.on_composition_end_wrapper_),delete e.html_input;var a=e.widget_div.DIV.style;a.width="auto",a.height="auto",a.fontSize="",a.transition="",a.boxShadow="",a.borderRadius="",i&&e.events.fire(i),e.events.set_group(!1)}}},e.prototype.on_html_input_keydown=function(t){var e;this.html_input&&(13==t.keyCode?this.widget_div.hide():27==t.keyCode?(this.html_input.value=this.html_input.defaultValue,this.widget_div.hide()):9==t.keyCode&&(this.widget_div.hide(),null!==(e=this.source_block)&&void 0!==e&&e.tab(this,!t.shiftKey),t.preventDefault()))},e.prototype.on_html_input_change=function(){var t;if(this.html_input){var e=this.html_input.value;e!==this.html_input.oldValue_?(this.html_input.oldValue_=e,this.set_value(e),this.validate_()):c.is.webkit()&&null!==(t=this.source_block)&&void 0!==t&&t.render(),this.resize_editor()}},e.prototype.widget_create=function(t,e){var n;void 0===t&&(t="input"),void 0===e&&(e="blocklyHtmlInput");var i=this.widget_div.DIV;if(!this.source_block||!this.workspace_||!i)throw new Error("Trying to create a field editor without a source block.");var o=(0,s.create_dom)(t,e);if(o.setAttribute("spellcheck",String(this.spellcheck_)),o.style.fontSize=r.FONTSIZE+"pt",o.value=o.defaultValue=this.text_,o.oldValue_=void 0,o.style.webkitAppearance="none",i.appendChild(o),this.resize_editor(),this.validate_(),"dark"===this.source_block.workspace.options.theme)return o;if(this.source_block.is_shadow()){i.style.borderRadius=r.FONTSIZE+"pt",o.style.borderRadius=r.FONTSIZE+"pt";var a=(null===(n=this.source_block.parent_block)||void 0===n?void 0:n.get_colour())||"#fff";o.style.boxShadow="inset "+a+" 0px 0px 0px 2px"}else i.style.borderRadius="4px",o.style.borderRadius="4px",a=this.source_block.get_colour()||"#fff",o.style.boxShadow="inset "+a+" 0px 0px 0px 2px";return i.style.transition="box-shadow 0.25s ease 0s",i.style.boxShadow="rgba(255, 255, 255, 1) 0px 0px 0px 3px",o},e.prototype.bind_input_events=function(){var t;this.html_input&&(this.html_input.onKeyDownWrapper_=this.events.bind_event_with_checks(this.html_input,"keydown",this,this.on_html_input_keydown),this.html_input.onKeyUpWrapper_=this.events.bind_event_with_checks(this.html_input,"keyup",this,this.on_html_input_change),this.html_input.onKeyPressWrapper_=this.events.bind_event_with_checks(this.html_input,"keypress",this,this.on_html_input_change),this.html_input.onInputWrapper_=this.events.bind_event(this.html_input,"input",this,this.on_html_input_change),this.html_input.onWorkspaceChangeWrapper_=this.resize_editor.bind(this),null!==(t=this.workspace_)&&void 0!==t&&t.add_change_listener(this.html_input.onWorkspaceChangeWrapper_),this.html_input.on_composition_start_wrapper_=this.events.bind_event_with_checks(this.html_input,"compositionstart",this,this.on_start_composition),this.html_input.on_composition_end_wrapper_=this.events.bind_event_with_checks(this.html_input,"compositionend",this,this.on_end_composition))},e.prototype.set_spell_check=function(t){this.spellcheck_=t},e.prototype.set_value=function(e){if(null!=e){if(this.source_block){var r=this.call_validator(e);null!=r&&(e=r)}t.prototype.set_value.call(this,e)}},e.prototype.init=function(){var e;t.prototype.init.call(this,!0),(null===(e=this.source_block)||void 0===e?void 0:e.is_shadow())&&this.source_block.get_svg_root().classList.add("blocklyShadowTextInput"),this.field_group&&this.field_group.classList.add("blocklyFieldTextInput")},e.FONTSIZE=12,(0,n.__decorate)([(0,o.lazy_inject)(o.BINDING.widget_div)],e.prototype,"widget_div",void 0),r=(0,n.__decorate)([(0,i.injectable)()],e)}(r(35422).Field);e.FieldTextInput=u},22765:(t,e,r)=>{r.r(e),r.d(e,{a:()=>d,b:()=>c,c:()=>s,d:()=>l,default:()=>f,e:()=>u});const n=r(48096),i=r(16693),o=r(30691),a=r(54181);function s(t){return"".concat(t,".__widgetName")}function c(t,e){return"".concat(t,".").concat(e)}function u(t){var e=t.type,r={},a=s(e);r[a]=t.title,t.properties.forEach(function(t){var n=t.key,i=t.label,o=c(e,n);r[o]=i});var u=o.b(),l=n.a({},u,r);i.a(l)}function l(t,e){for(var r in e){var n=e[r],o={},a=s(t.type);for(var u in o[a]=n[t.title],n)o[c(t.type,u)]=n[u];e[r]=o}i.a(e)}function d(t,e,r){if(a.d(t))return e;var n="".concat(t,".").concat(e),s=o.b();return i.c(s,n,r)}const f=d},24329:(t,e,r)=>{var n,i;r.r(e),r.d(e,{a:()=>n,default:()=>o}),(i=n||(n={})).BUTTON="BUTTON",i.DEFAULT="DEFAULT";const o=n},25797:(t,e)=>{var r={};function n(t,e){}e.a=function(t,e){!function(t,e,n){e||r[n]||(t(!1,n),r[n]=!0)}(n,t,e)}},27378:(t,e,r)=>{r.r(e),r.d(e,{a:()=>i,default:()=>o});const n=r(21272);function i(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{line:1,column:0},r=e.line,i=e.column,o=0,a=1;o>=0&&o<t.length&&a<r;)(o=t.indexOf("\n",o+1))>=0&&"\r"===t.charAt(o)&&o++,a++;o=Math.min(o+i+2,t.length-1);for(var s="";o>=0;){var c=t.charAt(o);if("/"===c&&"*"===s)break;s=c,o--}var u={};if(-1===o)return u;var l=/\/\* ([^/*]+) \*\//.exec(t.substr(o));return l&&l[1].split(";").forEach(function(t){var e=t.split("="),r=n.a(e,2),i=r[0],o=r[1];i&&o&&(u[i]=o)}),u}const o=i},29189:t=>{t.exports={hide:"style_hide__xbMGj","coco-widget-wrapper":"style_coco-widget-wrapper__2QHeH","coco-child-widget":"style_coco-child-widget__3Ty5d","coco-child-widget-selected":"style_coco-child-widget-selected__6dONS","coco-child-widget-full":"style_coco-child-widget-full__wKqkZ",flexSC:"style_flexSC__3puyC",flexCC:"style_flexCC__bfcgk",flexLC:"style_flexLC__2eEwz",icon:"style_icon___wwbG",itemTiled:"style_itemTiled__2kkMG",itemCard:"style_itemCard__3Anwe",listViewerBox:"style_listViewerBox__2s1Ku",templateSlot:"style_templateSlot__2rYHs",template1:"style_template1__2XEN-",title:"style_title__32L4i",titleSlot:"style_titleSlot__3Daky",iconBox:"style_iconBox__3rk1k",template2:"style_template2__v3Im5",subTitleBox:"style_subTitleBox__2B9gc",subTitle:"style_subTitle__3cYm2",subTitleSlot:"style_subTitleSlot__3WzuE",template3:"style_template3__1Pz9H",smallImgBox:"style_smallImgBox__1jSTa",smallImgSlot:"style_smallImgSlot__1d6Xx",template4:"style_template4__3B2se",avatarAndTitle:"style_avatarAndTitle__2xROs",avatarImgBox:"style_avatarImgBox__2c3Zm",avatarImgSlot:"style_avatarImgSlot__1Qh5W",template5:"style_template5__Ayk7Z",imgAndTitleBox:"style_imgAndTitleBox__2rs5w",desc:"style_desc__3PxGW",titleSlot1:"style_titleSlot1__1Di1P",titleSlot2:"style_titleSlot2__1H_uo",descSlot:"style_descSlot__wATUS",template6:"style_template6__Ezw69",bannerImgBox:"style_bannerImgBox__19zO-",bannerImgSlot:"style_bannerImgSlot__28S_8",descSlot1:"style_descSlot1__35eTr",descSlot2:"style_descSlot2__3wSkr"}},29306:(t,e,r)=>{function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.r(e),r.d(e,{a:()=>n,default:()=>i});const i=n},32533:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.draw_arrow=e.position_dropdown=void 0;var n=r(77276),i=r(15261),o=r(72137);e.position_dropdown=function(t,e){var r=e.get_svg_root();if(!e.source_block||!r)return n.vec2.create();var a=(0,i.get_viewport_size)(),s=(0,o.get_viewport_page_offset)(document),c=e.source_block.is_shadow()?(0,i.get_page_offset)(e.source_block.get_svg_root()):(0,i.get_page_offset)(e.border_rect||r),u=e.source_block.get_workspace().get_scale(),l=e.source_block.is_shadow()?{width:e.source_block.width*u,height:e.source_block.height*u}:{width:e.get_size().width*u,height:e.get_size().height*u},d=e.source_block.is_shadow()?e.source_block.parent_block:e.source_block;if(!d)return n.vec2.create();var f=e.source_block.workspace.options.dropdown,p=f.menu.scalable?Math.max(u,1):1;t.parentElement&&(t.parentElement.style.transform="scale("+p+")",t.parentElement.style.transformOrigin="left top");var h=(0,o.get_size)(t),_=document.createElement("div");_.classList.add("dropdown-triangle");var v=d.inputList.find(function(t){return t.fieldRow.indexOf(e)>-1}),g=((((null==v?void 0:v.height)||d.first_row_height)+2)*u-l.height)/2;if(c[1]<=a.height/2+s[1]?(c[1]+=l.height+g,t.classList.add("lower"),_.classList.add("lower")):(c[1]-=h.height+g,t.classList.add("upper"),_.classList.add("upper"),_.style.top=h.height+"px"),(0,i.insert_before)(_,t),"first"===f.menu.align){var m=e.image_element?Number(e.image_element.getAttribute("x")):e.text_element?Number(e.text_element.getAttribute("x")):NaN;m=isNaN(m)?f.padding:m;var b=t.firstElementChild?parseFloat((0,o.get_computed_style)(t.firstElementChild,"padding-left")):-m*u;c[0]=c[0]+m*u-b*p,c[0]=Math.min(c[0],a.width+s[0]-h.width)}else"center"===f.menu.align?(t.parentElement&&(t.parentElement.style.transform="scale("+p+") translateX(-50%)"),c[0]+=l.width/2,c[0]=Math.min(c[0],a.width+s[0]-h.width/2),c[0]=Math.max(c[0],s[0]+h.width/2)):"left"===f.menu.align&&(c[0]=Math.min(c[0],a.width+s[0]-h.width));return c},e.draw_arrow=function(t){void 0===t&&(t="triangle");var e=(0,i.create_svg_element)("g",{class:"blocklyDropdownArrow"});return"line"===t?(0,i.create_svg_element)("path",{d:"M5.99695526,7.90416306 L9.03751442,4.8636039 C9.38898628,4.51213203 9.95883476,4.51213203 10.3103066,4.8636039 C10.6617785,5.21507576 10.6617785,5.78492424 10.3103066,6.1363961 L6.63335137,9.81335137 C6.2818795,10.1648232 5.71203102,10.1648232 5.36055916,9.81335137 L1.6836039,6.1363961 C1.33213203,5.78492424 1.33213203,5.21507576 1.6836039,4.8636039 C2.03507576,4.51213203 2.60492424,4.51213203 2.9563961,4.8636039 L5.99695526,7.90416306 Z"},e):(0,i.create_svg_element)("path",{d:"M2.49351315,4 L9.50652922,4 C9.77906561,4 10,4.24184373 10,4.54017309 C10,4.65100154 9.96885725,4.75914782 9.91079624,4.84994202 L6.4042882,9.76954945 C6.24799884,10.0139504 5.94030478,10.0733882 5.71703428,9.90230757 C5.66983808,9.86614356 5.62879151,9.82121232 5.59575417,9.76954945 L2.08924613,4.84994202 C1.93295678,4.60554109 1.98725573,4.26872671 2.21052624,4.09764605 C2.29347055,4.03409011 2.39226671,4 2.49351315,4 Z"},e),e}},34156:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FieldNumber=void 0;var n=r(31635),i=r(71519),o=r(53307),a=r(32791),s=r(14289),c=r(99186),u=r(15261),l=r(23250),d=function(t){function e(e){var r=t.call(this,{text:e.opt_value&&!isNaN(e.opt_value)?String(e.opt_value):"0",opt_validator:e.opt_validator})||this;return r.controller_option=void 0,r.controller=void 0,r.min_=-1/0,r.max_=1/0,r.precision_=0,r.should_show_quote=!1,r.field_type="FieldNumber",r.set_constraints(e.opt_min,e.opt_max,e.opt_precision),r.allow_text=void 0,r.controller_option=e.opt_controller||void 0,e.opt_controller&&r.set_controller_option(e.opt_controller),r}var r;return(0,n.__extends)(e,t),r=e,e.prototype.show_input_controller=function(t){},e.prototype.hide_input_controller=function(){},e.prototype.init=function(){!this.field_group&&this.source_block&&(this.update_allow_text(),this.field_group=(0,u.create_svg_element)("g",{}),this.visible_||(this.field_group.style.display="none"),this.source_block.is_shadow()||(this.border_rect=(0,u.create_svg_element)("rect",{rx:4,ry:4},this.field_group),this.field_group&&this.field_group.classList.add("blocklyFieldTextInput")),this.input_element=(0,u.create_svg_element)("g",{class:"blocklyInputElement"},this.field_group),this.text_element=(0,u.create_svg_element)("text",{class:"blocklyText","font-size":this.theme.font.SIZE,"dominant-baseline":"central"},this.input_element),this.update_editable(),this.source_block.get_svg_root().appendChild(this.field_group),this.bind_field_click_event(),this.update_input(),this.render_())},e.prototype.set_constraints=function(t,e,r){r=parseFloat(r),this.precision_=isNaN(r)?0:r,t=parseFloat(t),this.min_=isNaN(t)?-1/0:t,e=parseFloat(e),this.max_=isNaN(e)?1/0:e,this.set_value(this.get_validated_value(this.get_value()))},e.prototype.get_validated_value=function(t){if(!(0,c.is_valid_number)(t))return this.allow_text?t:"";var e=parseFloat(t);if(this.precision_&&(e=Math.round(e/Number(this.precision_))*Number(this.precision_)),!this.exceptions||-1===this.exceptions.indexOf(e)){if(null!=this.mod_&&e!==1/0&&e!==-1/0){var r=Number(this.max_),n=Number(this.min_),i=r-n;e%=i,this.mod_?e<=n?e+=i:e>r&&(e-=i):e<n?e+=i:e>=r&&(e-=i)}e=(0,c.clamp)(e,this.min_,this.max_)}return String(e)},e.prototype.set_allow_text=function(t){void 0===this.allow_text&&void 0!==t&&(this.allow_text=t)},e.prototype.update_allow_text=function(){var t,e;if(void 0===this.allow_text&&(null===(t=this.source_block)||void 0===t?void 0:t.parent_block)){var n=!1,i=this.source_block.parent_block,o=null===(e=i.get_input_with_block(this.source_block))||void 0===e?void 0:e.name;(r.WHITE_LIST_BLOCKS.includes(i.type)||Object.keys(r.WHITE_LIST_SPECIAL).includes(i.type)&&r.WHITE_LIST_SPECIAL[i.type]===o)&&(n=!0),this.set_allow_text(n)}},e.prototype.set_mod=function(t){this.mod_=t?"true"===t:void 0},e.prototype.set_exceptions=function(t){this.exceptions=t||void 0},e.prototype.widget_dispose=function(){var e=this;return function(){if(e.html_input){var r=e.get_validated_value(e.html_input.value)||e.html_input.defaultValue;t.prototype.widget_dispose.call(e,r)(),e.controller&&e.controller.hide()}}},e.prototype.reset_text_element=function(){var t=this;if(this.input_element&&this.text_element){(0,u.remove_children)(this.input_element);var e=function(){l.is.safari()||l.is.mobile()?t.text_element=(0,u.create_svg_element)("text",{class:"blocklyText",dy:".4em","font-size":t.theme.font.SIZE},t.input_element):t.text_element=(0,u.create_svg_element)("text",{class:"blocklyText","dominant-baseline":"central","font-size":t.theme.font.SIZE},t.input_element)};this.should_show_quote?((0,u.create_svg_element)("path",{d:s.ICON.LEFT_QUOTA,transform:"translate("+r.LEFT_QUOTE_X+", "+r.QUOTE_Y+")",class:"blocklyQuote"},this.input_element),e(),this.quote_right=(0,u.create_svg_element)("path",{d:s.ICON.RIGHT_QUOTA,class:"blocklyQuote"},this.input_element)):(delete this.quote_right,e())}},e.prototype.add_quote_input=function(){var t;if(this.visible_&&this.text_element){this.quote_right||this.reset_text_element(),(0,u.remove_children)(this.text_element);var e=document.createTextNode(this.get_display_text());this.text_element.appendChild(e),this.update_width();var n=r.LEFT_QUOTE_X+r.QUOTE_WIDTH+this.size_.width;null!==(t=this.quote_right)&&void 0!==t&&t.setAttribute("transform","translate("+n+", "+r.QUOTE_Y+")")}else this.size_.width=0},e.prototype.remove_quote_input=function(){this.quote_right&&this.reset_text_element()},e.prototype.update_input=function(){this.should_show_quote=!!this.allow_text&&!(0,c.is_valid_number)(this.get_display_text()),this.should_show_quote?this.add_quote_input():this.remove_quote_input()},e.prototype.set_text=function(t){null!==t&&(t=String(t))!==this.text_&&(this.text_=t,this.update_input(),this.force_rerender(),this.controller&&this.controller.update_value(Number(t)))},e.prototype.set_controller_option=function(t){switch(this.controller_option=t,t.type){case a.ControllerType.SLIDER:this.controller=this.slider_controller;break;case a.ControllerType.ANGLE_SCALE:this.controller=this.angle_controller;break;case a.ControllerType.COLOR_PICKER:this.controller=this.color_controller}},e.prototype.get_controller_option=function(){return this.controller_option},e.prototype.show_editor=function(t,e){var r=this;if(!this.source_block)throw new ReferenceError("source_block is undefined");if(this.workspace_=this.source_block.get_workspace(),this.widget_div.show(this,function(){r.focus(!1),r.runtime_data.editing===r&&r.focus(!1),e&&e(),r.widget_dispose()()}),null==this.widget_div.DIV)throw new Error("DIV is undefined");return this.html_input=this.widget_create(),this.bind_input_events(),this.html_input.focus(),this.html_input.select(),this.controller&&this.controller_option&&this.controller.show(this,this.controller_option),this.html_input},e.QUOTE_WIDTH=10,e.LEFT_QUOTE_X=-10,e.QUOTE_Y=0,e.WHITE_LIST_BLOCKS=["math_arithmetic","logic_compare","variables_set","change_variable","cloud_variables_set","change_cloud_variable","lists_append","lists_index_of","lists_is_exist","cloud_lists_append","cloud_lists_index_of","cloud_lists_is_exist","procedures_2_callnoreturn","procedures_2_callreturn","procedures_2_return_value","wood_block_set","wood_block_get","auto_player_set_feature"],e.WHITE_LIST_SPECIAL={lists_insert_value:"VALUE",lists_replace:"VALUE",cloud_lists_insert_value:"VALUE",cloud_lists_replace:"VALUE"},(0,n.__decorate)([(0,o.lazy_inject)(o.BINDING.slider_controller)],e.prototype,"slider_controller",void 0),(0,n.__decorate)([(0,o.lazy_inject)(o.BINDING.angle_controller)],e.prototype,"angle_controller",void 0),(0,n.__decorate)([(0,o.lazy_inject)(o.BINDING.color_controller)],e.prototype,"color_controller",void 0),r=(0,n.__decorate)([(0,i.injectable)()],e)}(r(14435).FieldTextInput);e.FieldNumber=d},34164:(t,e,r)=>{r.r(e),r.d(e,{getBrightness:()=>o,setBrightness:()=>a,setKeepScreenOn:()=>s});const n=r(63771);var i=1;function o(){if(n.d()){var t=window.cordova.plugins.brightness;return new Promise(function(e,r){t.getBrightness(function(t){console.info("getBrightness native value",t),-1!==(t=Number(t))?(t=Math.round(100*t),e(t)):e(t)},function(t){console.error("getBrightness error",t),r("getBrightness error",t)})})}var e=Math.round(100*i);return Promise.resolve(e)}function a(t){t=Math.min(100,Math.max(0,t)),t/=100,n.d()?window.cordova.plugins.brightness.setBrightness(t,function(){console.info("setBrightness success",t)},function(t){console.error("setBrightness error",t)}):i=t}function s(t){n.d()&&window.cordova.plugins.brightness.setKeepScreenOn(t)}},35422:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Field=void 0;var n=r(31635),i=r(71519),o=r(77276),a=r(53307),s=r(32791),c=r(99186),u=r(15261),l=r(23250),d=function(){function t(t,e){var r;void 0===t&&(t=""),this.field_type="Field",this.editable=!0,this.visible_=!0,this.size_=new c.Size(0,0),this.text_="",this.name=void 0,this.margin_left=this.theme.renderer.SEP_SPACE_X,this.render_sep=this.margin_left,this.validator_=void 0,this.set_value(t),this.validator_=e,this.max_display_length=(null===(r=this.workspace_db.current)||void 0===r?void 0:r.get_options().field_max_length)||50,this.value_before_editing=void 0}return t.prototype.set_validator=function(t){this.validator_=t},t.prototype.get_validator=function(){return this.validator_},t.prototype.set_value=function(t,e){var r,n=this.get_value();n!=t&&(this.source_block&&this.events.is_enabled()&&this.runtime_data.editing!==this&&(r=this.change_event_factory("field",{block:this.source_block,old_value:n,new_value:t,name:this.name})),this.set_text(t),r&&this.events.fire(r))},t.prototype.set_text=function(t){t!==this.text_&&(this.text_=t,this.force_rerender())},t.prototype.force_rerender=function(){this.size_.width=0,this.source_block&&this.source_block.rendered&&(this.source_block.is_collapsed()?this.source_block.update_collapsed(!0):this.source_block.render())},t.prototype.get_text=function(){return this.text_},t.prototype.get_value=function(){return this.text_},t.prototype.init=function(t,e){if(void 0===t&&(t=!0),!this.field_group&&this.source_block){if(this.field_group=(0,u.create_svg_element)("g",{}),this.visible_||(this.field_group.style.display="none"),this.source_block.is_shadow()||(this.border_rect=(0,u.create_svg_element)("rect",{rx:4,ry:4},this.field_group)),t&&(this.input_element=(0,u.create_svg_element)("g",{class:"blocklyInputElement"},this.field_group),l.is.safari()||l.is.mobile()?this.text_element=(0,u.create_svg_element)("text",{class:"blocklyText",dy:".4em","font-size":this.theme.font.SIZE},this.input_element):this.text_element=(0,u.create_svg_element)("text",{class:"blocklyText","dominant-baseline":"central","font-size":this.theme.font.SIZE},this.input_element)),this.update_editable(),null!=this.source_block){var r=this.source_block.get_svg_root();if(null==r)throw new ReferenceError("Field should have svg root when init.");r.appendChild(this.field_group)}this.bind_field_click_event(),e||this.render_()}},t.prototype.bind_field_click_event=function(){if(this.field_group&&this.source_block){var t=this.source_block.is_shadow()?this.field_group.parentElement:this.field_group;t?this.mouse_down_wrapper=this.events.bind_event_with_checks(t,"mouseup",this,this.on_mouse_down):console.warn("Field has no parent element.")}},t.prototype.get_scaled_bbox=function(){if(null==this.source_block)throw new ReferenceError("Field has not been insert to workspace.");var t=this.source_block.get_workspace();if(null==t)throw new ReferenceError("Field's source block has not been insert to workspace.");if(!this.field_group)return new c.Size(0,0);var e=(0,u.get_size_attr)(this.border_rect||this.field_group),r=t.get_scale();return new c.Size(e.width*r,e.height*r)},t.prototype.update_editable=function(){var t=this.field_group;if(this.editable&&t){if(!this.source_block||!this.field_group)throw new Error("no necessary elements.");this.source_block.is_editable()?((0,u.add_class)(t,"blocklyEditable"),(0,u.remove_class)(t,"blocklyNonEditable")):((0,u.add_class)(t,"blocklyNonEditable"),(0,u.remove_class)(t,"blocklyEditable"),this.field_group.style.cursor="")}},t.prototype.on_mouse_down=function(t){if(this.source_block&&this.source_block.get_workspace()&&!this.source_block.is_in_flyout){this.tooltip&&this.tooltip.hide();var e=this.source_block.get_workspace().get_gesture(t);e&&e.set_start_field(this)}},t.prototype.is_currently_editable=function(){return this.editable&&!!this.source_block&&this.source_block.is_editable()},t.prototype.get_size=function(){return this.size_.width||this.render_(),this.size_},t.prototype.layout=function(t,e){if(null!=this.field_group){t[0]+=this.render_sep;var r=t[0],n=t[1]+(e-this.size_.height)/2,i=(0,u.get_translate)(this.field_group);i&&i.x===r&&i.y===n||this.field_group.setAttribute("transform","translate("+r+","+n+")"),t[0]+=this.size_.width}},t.prototype.dispose=function(){this.mouse_down_wrapper&&(this.events.unbind_event(this.mouse_down_wrapper),this.mouse_down_wrapper=void 0),delete this.source_block,null!=this.field_group&&((0,u.remove_node)(this.field_group),this.field_group=void 0),(this.input_element||this.text_element)&&(this.input_element&&(0,u.remove_node)(this.input_element),this.text_element&&(0,u.remove_node)(this.text_element),delete this.text_element,delete this.input_element),this.validator_=void 0},t.prototype.render_=function(){var t,e;this.visible_?this.image_element?this.size_.width=parseFloat(this.image_element.getAttribute("width")||"0")||0:this.text_element?((0,u.remove_children)(this.text_element),this.text_element.appendChild(document.createTextNode(this.get_display_text())),this.update_width(),this.update_height(),null!==(t=this.border_rect)&&void 0!==t&&t.setAttribute("width",""+this.size_.width),null!==(e=this.border_rect)&&void 0!==e&&e.setAttribute("height",""+this.size_.height)):this.size_.width=0:this.size_.width=0},t.prototype.update_width=function(){this.text_element&&(this.size_.width=this.utils.get_cached_width(this.text_element))},t.prototype.update_height=function(){this.source_block&&(this.size_.height=this.source_block.is_shadow()?this.theme.renderer.SHADOW_FIELD_HEIGHT:this.theme.renderer.FIELD_HEIGHT)},t.prototype.get_absolute_xy=function(){var t=this.border_rect||this.field_group;return t?(0,u.get_page_offset)(t):o.vec2.create()},t.prototype.get_svg_root=function(){return this.field_group},t.prototype.show_editor=function(t,e){throw new ReferenceError("show_editor 不能在 field 中调用，需要由子类实现")},t.prototype.set_visible=function(t){if(this.visible_!=t){this.visible_=t;var e=this.get_svg_root(),r=this.input_element||this.text_element;e&&(e.style.display=t?"block":"none",this.render_()),r&&(r.style.display=t?"block":"none",this.render_())}},t.prototype.get_display_text=function(){var t=this.text_;return t?(t.length>this.max_display_length&&(t=t.substring(0,this.max_display_length-2)+"…"),t=t.replace(/\s/g," ")):" "},t.prototype.call_validator=function(t){if(null!=t){if(!this.validator_)return t;var e=this.validator_.call(this,t);if(null!=e)return e}},t.prototype.set_html_input_value=function(t){this.html_input&&(this.html_input.value=t)},t.prototype.focus=function(t){if(void 0===t&&(t=!0),this.source_block){var e=this.runtime_data.editing;t?(this.value_before_editing=this.get_value(),this.runtime_data.editing=this):(this.value_before_editing=void 0,this.runtime_data.editing=void 0);var r=this.runtime_data.editing;e&&e!==r&&this.events.is_enabled()&&(e.value_before_editing&&(e.value_before_editing=void 0),this.events.fire(this.ui_event_factory({type:s.UIEventType.FIELD_FOCUS_CHANGE,workspace_id:this.source_block.workspace.id,old_value:this.name,new_value:void 0,block_id:this.source_block.id}))),r&&r!==e&&this.events.is_enabled()&&this.events.fire(this.ui_event_factory({type:s.UIEventType.FIELD_FOCUS_CHANGE,workspace_id:this.source_block.workspace.id,old_value:void 0,new_value:this.name,block_id:this.source_block.id}))}},(0,n.__decorate)([(0,a.lazy_inject)(a.BINDING.events)],t.prototype,"events",void 0),(0,n.__decorate)([(0,a.lazy_inject)(a.BINDING.theme)],t.prototype,"theme",void 0),(0,n.__decorate)([(0,a.lazy_inject)(a.BINDING.utils)],t.prototype,"utils",void 0),(0,n.__decorate)([(0,a.lazy_inject)(a.BINDING.workspace_db)],t.prototype,"workspace_db",void 0),(0,n.__decorate)([(0,a.lazy_inject)(a.BINDING.runtime_data)],t.prototype,"runtime_data",void 0),(0,n.__decorate)([(0,a.lazy_inject)(a.BINDING.tooltip)],t.prototype,"tooltip",void 0),(0,n.__decorate)([(0,a.lazy_inject)(a.BINDING.ChangeEvent)],t.prototype,"change_event_factory",void 0),(0,n.__decorate)([(0,a.lazy_inject)(a.BINDING.UIEvent)],t.prototype,"ui_event_factory",void 0),(0,n.__decorate)([(0,i.injectable)()],t)}();e.Field=d},36880:(t,e,r)=>{r.r(e),r.d(e,{A:()=>s,B:()=>d,C:()=>a,D:()=>v,E:()=>u,F:()=>l,G:()=>o,H:()=>x,I:()=>E,J:()=>m,K:()=>b,a:()=>P,b:()=>D,c:()=>U,d:()=>j,default:()=>M,e:()=>S,f:()=>y,g:()=>w,h:()=>z,i:()=>A,j:()=>F,k:()=>p,l:()=>h,m:()=>f,n:()=>k,o:()=>T,p:()=>L,q:()=>R,r:()=>I,s:()=>g,t:()=>N,u:()=>O,v:()=>_,w:()=>c,x:()=>n,y:()=>i,z:()=>C});var n=function(t){return t.project.currentScreenIndex},i=function(t){return t.project.id},o=function(t){return t.project.title},a=function(t){return t.project.screens},s=function(t){return t.project.packageInfo},c=function(t){return t.project.bcmUrl},u=function(t){return t.project.projectShareInfo},l=function(t){return t.project.projectSource},d=function(t){return t.project.packageTaskLabel},f=function(t){return t.project.globalVariableList},p=function(t){return t.project.globalArrayList},h=function(t){return t.project.globalObjectList},_=function(t){return t.project.apiToken},v=function(t){return t.project.selectedWidgetId},g=function(t){return t.common.language},m=function(t){return t.common.userInfo},b=function(t){return t.common.userInfoFetchDone},y=function(t){return t.project.screens.get(t.project.currentScreenIndex)},w=function(t){var e=t.project.screens.get(t.project.currentScreenIndex);return null==e?void 0:e.id},x=function(t,e){return t.project.screens.find(function(t){return t.id===e})},E=function(t){return t.resource.soundFileList},k=function(t){return t.project.globalWidgetIds},I=function(t){return t.oTState.isAuthor},O=function(t){return t.oTState.collWorkId},S=function(t){return t.common.consoleMessages},T=function(t){return t.resource.iconFileList},N=function(t){return t.common.myExtensionWidgets},A=function(t){return t.block.flyoutVisible},F=function(t){return t.resource.fontFileList},C=function(t){return t.project.jsonFrom},L=function(t){return t.cloudSpace.initialRefDictIds},R=function(t){return t.cloudSpace.initialRefTableIds},D=function(t){return t.cloudSpace.cloudDictList},j=function(t){return t.cloudSpace.cloudTableList},U=function(t){return t.cloudSpace.cloudTableColumnList},P=function(t){return t.cloudSpace.cloudDictKeysList},z=function(t){return t.common.editAreaUpdatedAt};const M=P},37819:(t,e,r)=>{r.r(e),r.d(e,{a:()=>l,b:()=>c,c:()=>u,d:()=>s,default:()=>d});const n=r(5587),i=r(79955),o=r(81324),a=r(70817);function s(t){return void 0!==c(t)}function c(t){if("string"==typeof t){if(""===t)return t;if(o.U(t))return t;var e=a.a().getState(),r=e.imageFileMap.get(t);if(r){var s=i.lb(r);if(s)return s}if(t.endsWith(".svg")){var c,u=e.iconFileMap,l=n.a(u.values());try{for(l.s();!(c=l.n()).done;){var d=c.value;if("".concat(d.name,".svg")===t)return d.cdnUrl||d.source}}catch(t){l.e(t)}finally{l.f()}}}}function u(t){var e=l(t);return Boolean(e)}function l(t){if("string"==typeof t){var e,r=a.a().getState(),s=r.iconFileMap,c=s.get(t);if(c)return c;var u=n.a(s.values());try{for(u.s();!(e=u.n()).done;){var l=e.value;if(l.name+".svg"===t)return l}}catch(t){u.e(t)}finally{u.f()}var d=r.imageFileMap.get(t),f=o.U(t)?t:d?i.lb(d):"";return".svg"===(null==d?void 0:d.extension)?{id:d.id,name:d.id,source:d.source,cdnUrl:f||""}:(null==f?void 0:f.endsWith(".svg"))?{id:f,name:f,cdnUrl:f}:f}}const d=l},40779:(t,e)=>{e.a={getItem:function(t){return localStorage.getItem(t)},setItem:function(t,e){return localStorage.setItem(t,e)},removeItem:function(t){return localStorage.removeItem(t)},multiSet:function(t){t.forEach(function(t){localStorage.setItem(t[0],t[1])})},getAllKeys:function(){return Object.keys(localStorage)},multiRemove:function(t){t.forEach(function(t){localStorage.removeItem(t)})}}},41701:(t,e,r)=>{var n=r(25797);e.a=function(t,e,r){n.a(t,"[antd: ".concat(e,"] ").concat(r))}},42025:(t,e,r)=>{var n;r.r(e),r.d(e,{a:()=>n,b:()=>u,default:()=>l});const i=r(66905),o=r(94193),a=r(27516),s=r(40739);var c;(c=n||(n={})).NO_UNDEF="NO_UNDEF",c.NO_RETURN_FUNCTION="NO_RETURN_FUNCTION",c.BRANCH_RETURN_FUNCTION="BRANCH_RETURN_FUNCTION",c.RETURN_NOT_IN_FUNCTION="RETURN_NOT_IN_FUNCTION",c.PARAMETER_NOT_IN_FUNCTION="PARAMETER_NOT_IN_FUNCTION",c.FUNCTION_IS_UNDEF="FUNCTION_IS_UNDEF",c.LOOP_CONTROL_NOT_IN_LOOP="LOOP_CONTROL_NOT_IN_LOOP",c.WIDGET_NOT_EXISTS="WIDGET_NOT_EXISTS",c.PARAM_NOT_IN_CONTEXT="PARAM_NOT_IN_CONTEXT";var u=function(t){o.a(r,t);var e=a.a(r);function r(t,n,o,a,s){var c;return i.a(this,r),(c=e.call(this,t)).type=void 0,c.blockId=void 0,c.screenId=void 0,c.data=void 0,c.type=t,c.blockId=o,c.screenId=n,c.message=a,c.data=s,c}return r}(s.a(Error));const l=n},43613:(t,e,r)=>{var n,i;r.r(e),r.d(e,{a:()=>d,b:()=>p,c:()=>f,d:()=>c,default:()=>h,e:()=>u,f:()=>l});const o=r(48096),a=r(83259),s=r(39059);var c="icon-widget-old-button";n={},o.a(n,s.c.TINY,{height:32,fontSize:20,maxWidth:a.e,minWidth:32}),o.a(n,s.c.SMALL,{height:40,fontSize:24,maxWidth:a.e,minWidth:40}),o.a(n,s.c.MEDIUM,{height:56,fontSize:24,maxWidth:a.e,minWidth:56}),o.a(n,s.c.LARGE,{height:80,fontSize:44,maxWidth:a.e,minWidth:80}),o.a(n,s.c.HUGE,{height:112,fontSize:52,maxWidth:a.e,minWidth:112});var u=n;i={},o.a(i,s.c.TINY,{height:28,fontSize:12,maxWidth:a.e,minWidth:64}),o.a(i,s.c.SMALL,{height:28,fontSize:12,maxWidth:a.e,minWidth:64}),o.a(i,s.c.MEDIUM,{height:40,fontSize:16,maxWidth:a.e,minWidth:68}),o.a(i,s.c.LARGE,{height:52,fontSize:20,maxWidth:a.e,minWidth:78}),o.a(i,s.c.HUGE,{height:52,fontSize:20,maxWidth:a.e,minWidth:78});var l=i,d="#148cefff",f=!1,p=!1;const h=d},46656:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FieldColour=void 0;var n=r(31635),i=r(71519),o=r(53307),a=r(15261),s=r(24042),c=r(72137),u=r(99186),l=function(t){function e(e){var n=t.call(this,e.colour,e.opt_validator)||this;return n.field_type="FieldColour",n.colour_=r.OVERRIDE_COLOR||"#cc33cc",n.size_=new u.Size(40,30),n.colour_=e.colour,n}var r;return(0,n.__extends)(e,t),r=e,e.prototype.init=function(){var e,r=this;t.prototype.init.call(this,!1),this.border_rect||(this.border_rect=(0,a.create_svg_element)("rect",{rx:4,ry:4},this.field_group)),this.border_rect.setAttribute("width",String(this.size_.width)),this.border_rect.setAttribute("height",String(this.size_.height)),this.border_rect.setAttribute("stroke","#fff"),this.border_rect.setAttribute("stroke-width","1.5"),this.border_rect.setAttribute("rx","15"),this.border_rect.setAttribute("ry","15"),this.border_rect.addEventListener("mouseover",function(){r.runtime_data.editing!==r&&r.border_rect&&r.border_rect.setAttribute("stroke-width","3")}),this.border_rect.addEventListener("mouseleave",function(){r.runtime_data.editing!==r&&r.border_rect&&r.border_rect.setAttribute("stroke-width","1.5")}),this.background_transparent_element||(this.background_transparent_element=(0,a.create_svg_element)("rect",{rx:15,ry:15,width:40,height:30,fill:"url(#transparentPattern)"}),null!==(e=this.field_group)&&void 0!==e&&e.insertBefore(this.background_transparent_element,this.border_rect)),this.set_value(this.get_value())},e.prototype.get_value=function(){return this.colour_},e.prototype.set_value=function(t){var e,r;this.source_block&&this.events.is_enabled()&&this.colour_!=t&&(r=this.change_event_factory("field",{block:this.source_block,old_value:this.colour_,new_value:t,name:this.name})),this.colour_=t,null!==(e=this.border_rect)&&void 0!==e&&e.setAttribute("fill",this.colour_),r&&this.events.fire(r)},e.prototype.render_=function(){(0,s.is_nil)(this.field_group)||this.border_rect&&this.field_group.appendChild(this.border_rect)},e.prototype.show_editor=function(){var t,e=this;this.widget_div.show(this,this.widget_dispose.bind(this)),this.border_rect&&(this.border_rect.setAttribute("stroke-width","3"),this.border_rect.setAttribute("filter","url(#hiblur)"));var n=document.createElement("div");n.classList.add("color_selector","clearfix"),r.COLOURS.forEach(function(t){var e=document.createElement("i");e.classList.add("color_selector_item"),e.dataset.value=t,e.style.background=t,n.appendChild(e)});var i=(0,a.get_viewport_size)(),o=(0,c.get_viewport_page_offset)(document),u=this.get_absolute_xy(),l=this.get_scaled_bbox();this.widget_div.DIV.appendChild(n);var d=(0,c.get_size)(n);u[1]+d.height+l.height>=i.height+o[1]?u[1]-=d.height-1:u[1]+=l.height-1,u[0]>i.width+o[0]-d.width&&(u[0]=i.width+o[0]-d.width),this.widget_div.position(u[0],u[1],i,o,null===(t=this.source_block)||void 0===t?void 0:t.RTL),n.addEventListener("click",function(t){var r=t.target;if(r.classList.contains("color_selector_item")){var n=r.dataset.value;e.widget_div.hide(),e.source_block&&(n=e.call_validator(n)),(0,s.is_nil)(n)||e.set_value(n)}})},e.prototype.widget_dispose=function(){this.focus(!1),this.border_rect&&(this.border_rect.setAttribute("stroke-width","1.5"),this.border_rect.removeAttribute("filter")),this.events.set_group(!1)},e.prototype.layout=function(t,e){null!=this.field_group&&(t[0]+=this.render_sep,this.field_group.setAttribute("transform","translate("+t[0]+", "+(t[1]+(e-this.size_.height)/2)+")"),t[0]+=this.size_.width)},e.COLUMNS=7,e.COLOURS=["#ffffff","#cccccc","#c0c0c0","#999999","#666666","#333333","#000000","#ffcccc","#ff6666","#ff0000","#cc0000","#990000","#660000","#330000","#ffcc99","#ff9966","#ff9900","#ff6600","#cc6600","#993300","#663300","#ffff99","#ffff66","#ffcc66","#ffcc33","#cc9933","#996633","#663333","#ffffcc","#ffff33","#ffff00","#ffcc00","#999900","#666600","#333300","#99ff99","#66ff99","#33ff33","#33cc00","#009900","#006600","#003300","#99ffff","#33ffff","#66cccc","#00cccc","#339999","#336666","#003333","#ccffff","#66ffff","#33ccff","#3366ff","#3333ff","#000099","#000066","#ccccff","#9999ff","#6666cc","#6633ff","#6600cc","#333399","#330099","#ffccff","#ff99ff","#cc66cc","#cc33cc","#993399","#663366","#330033"],(0,n.__decorate)([(0,o.lazy_inject)(o.BINDING.widget_div)],e.prototype,"widget_div",void 0),r=(0,n.__decorate)([(0,i.injectable)()],e)}(r(35422).Field);e.FieldColour=l},47716:(t,e,r)=>{r.r(e),r.d(e,{a:()=>i,b:()=>n,default:()=>o});var n=r(96540).createContext(null),i=n.Provider;const o=i},51837:(t,e,r)=>{r.r(e),r.d(e,{a:()=>a,b:()=>o,c:()=>n,d:()=>i,default:()=>u,e:()=>c,f:()=>s});var n="icon-widget-cloud-storage",i=[],o=!0,a=!0,s=10,c="https://codemao.yuque.com/kzbwh0/coco_guide/ako277is0gzrm4ig";const u=a},51977:(t,e,r)=>{r.r(e),r.d(e,{a:()=>o,default:()=>a});const n=r(14583),i=r(60700);function o(t,e,r){return(o=i.a()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return r&&n.a(o,r.prototype),o}).apply(null,arguments)}const a=o},58184:(t,e,r)=>{function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.r(e),r.d(e,{a:()=>n,default:()=>i});const i=n},62238:(t,e,r)=>{r.r(e),r.d(e,{a:()=>a,b:()=>o,c:()=>s,default:()=>c});var n={default:{viewBox:"0 0 1024 1024",path:["M792.96 352a64 64 0 0 1 63.616 70.72l-50.56 480A64 64 0 0 1 742.4 960H281.6a64 64 0 0 1-63.616-57.28l-50.56-480A64 64 0 0 1 231.104 352h561.792zM384 464a48 48 0 0 0-47.552 41.472L336 512v288l0.448 6.528a48 48 0 0 0 95.104 0l0.448-6.528V512l-0.448-6.528A48 48 0 0 0 384 464z m256 0a48 48 0 0 0-47.552 41.472L592 512v288l0.448 6.528a48 48 0 0 0 95.104 0l0.448-6.528V512l-0.448-6.528A48 48 0 0 0 640 464zM512 64c81.6 0 148.928 48.896 158.72 112h257.28a48 48 0 0 1 6.528 95.552l-6.528 0.448h-832a48 48 0 0 1-6.528-95.552L96 176h257.28C363.008 112.896 430.336 64 512 64z"]}},i=n;function o(){i=n}function a(t){return i[t]}function s(t,e,r){i[t]={path:e,viewBox:r}}const c=a},62710:(t,e,r)=>{r.d(e,{a:()=>o});const n=r(66905),i=r(99666);var o=function(){function t(){n.a(this,t),this.listeners={}}return i.a(t,[{key:"addEventListener",value:function(t,e){var r=this.listeners[t];r?-1===r.indexOf(e)&&r.push(e):this.listeners[t]=[e]}},{key:"removeEventListener",value:function(t,e){if(e){var r=this.listeners[t];if(r){var n=r.indexOf(e);if(-1===n)return;r.splice(n,1),r.length||delete this.listeners[t]}}else delete this.listeners[t]}},{key:"emit",value:function(t,e){var r=this.listeners[t];r&&r.forEach(function(t){return t(e)})}}]),t}()},64909:t=>{t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l},set:function(e){return t.l=e}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i},set:function(e){t.i=e}}),t.webpackPolyfill=1),t}},65703:(t,e,r)=>{function n(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}r.r(e),r.d(e,{a:()=>n,default:()=>i});const i=n},66622:(t,e,r)=>{r.r(e),r.d(e,{a:()=>i,default:()=>o});const n=r(41571);function i(t,e){if(t){if("string"==typeof t)return n.a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n.a(t,e):void 0}}const o=i},67641:(t,e,r)=>{r.r(e),r.d(e,{a:()=>i,default:()=>o});const n=r(29306);function i(t,e,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n.a(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}const o=i},68435:(t,e,r)=>{function n(t){var e=[];try{var r=new RegExp("ql-font-(\\w*)","g"),n=t.match(r);new Set(Array.from(n||[])).forEach(function(t){return e.push(t.slice(8))})}catch(t){}return e}r.r(e),r.d(e,{a:()=>n,default:()=>i});const i=n},69463:(t,e,r)=>{function n(t){if(Array.isArray(t))return t}r.r(e),r.d(e,{a:()=>n,default:()=>i});const i=n},72824:(t,e,r)=>{var n=r(89595);function i(e,r,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,r){var i=n(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(r):o.value}},i(e,r,o||e)}t.exports=i},74754:(t,e,r)=>{var n;r.r(e),r.d(e,{A:()=>Ee,Ab:()=>z,B:()=>we,Bb:()=>We,C:()=>Re,Cb:()=>Nt,D:()=>Tt,Db:()=>L,E:()=>Ce,Eb:()=>R,F:()=>Te,Fb:()=>ce,G:()=>Ae,Gb:()=>kt,H:()=>bt,Hb:()=>Yt,I:()=>Zt,Ib:()=>Xt,J:()=>Ut,Jb:()=>Ue,K:()=>F,Kb:()=>$t,L:()=>C,Lb:()=>ze,M:()=>yt,Mb:()=>Me,N:()=>wt,Nb:()=>A,O:()=>Jt,Ob:()=>ye,P:()=>Ht,Pb:()=>xe,Q:()=>Gt,Qb:()=>Se,R:()=>Ft,Rb:()=>ee,S:()=>W,Sb:()=>zt,T:()=>q,Tb:()=>je,U:()=>P,Ub:()=>ue,V:()=>Dt,Vb:()=>Lt,W:()=>V,Wb:()=>Vt,X:()=>vt,Xb:()=>qt,Y:()=>U,Yb:()=>Bt,Z:()=>M,Zb:()=>Qt,a:()=>_t,ab:()=>Rt,ac:()=>mt,b:()=>ht,bb:()=>B,bc:()=>me,c:()=>ft,cb:()=>rt,cc:()=>fe,d:()=>pt,db:()=>Ct,dc:()=>pe,default:()=>Ge,e:()=>dt,eb:()=>Be,f:()=>lt,fb:()=>ve,g:()=>n,gb:()=>ge,h:()=>Y,hb:()=>ae,i:()=>Z,ib:()=>se,j:()=>Q,jb:()=>re,k:()=>X,kb:()=>ne,l:()=>K,lb:()=>ie,m:()=>de,mb:()=>oe,n:()=>le,nb:()=>te,o:()=>Ve,ob:()=>Kt,p:()=>Ot,pb:()=>j,q:()=>St,qb:()=>tt,r:()=>De,rb:()=>At,s:()=>It,sb:()=>$,t:()=>D,tb:()=>gt,u:()=>Wt,ub:()=>xt,v:()=>Mt,vb:()=>Et,w:()=>et,wb:()=>Pe,x:()=>Ie,xb:()=>qe,y:()=>ke,yb:()=>he,z:()=>be,zb:()=>_e});const i=r(7452);var o,a,s=(a=(o=i)&&o.__esModule?function(){return o.default}:function(){return o},Object.defineProperty(a,"a",{enumerable:!0,get:a}),a);const c=r(21009),u=r(21272),l=r(48096),d=r(78698),f=r(54176),p=r(5587),h=r(4903),_=r(3631),v=r(65708),g=r(81324),m=r(39059),b=r(43613),y=r(95022),w=r(81546),x=r(69658),E=r(83259),k=r(30691),I=r(93833),O=r(87654);var S;(S=n||(n={}))[S.UI=0]="UI",S[S.STAGE=1]="STAGE",S[S.MEDIA=2]="MEDIA",S[S.SENSOR=3]="SENSOR",S[S.DATE=4]="DATE",S[S.LOCAL_STORAGE=5]="LOCAL_STORAGE",S[S.CLOUD_STORAGE=6]="CLOUD_STORAGE",S[S.NETWORK=7]="NETWORK",S[S.EXTENSION=8]="EXTENSION",S[S.DATABASE=9]="DATABASE",S[S.SOCIAL=10]="SOCIAL",S[S.CLOUD_SPACE=11]="CLOUD_SPACE";var T=new Map,N=new Map;function A(t,e){e.forEach(function(e){var r=e.type;if(T.has(r))console.error("Component ".concat(r," is registered"));else{T.set(r,e);var n=N.get(t)||[];n.push(e),N.set(t,n)}})}function F(){var t=[];return T.forEach(function(e){t.push(e)}),t}function C(){var t=[];return T.forEach(function(e){return t.push(e.type)}),t}function L(t){return T.get(t)}function R(t){return N.get(t)||[]}function D(t){var e;null!==(e=N.get(t))&&void 0!==e&&e.forEach(function(e){!function(t,e){if(T.has(e)){T.delete(e);var r=(N.get(t)||[]).filter(function(t){return t.type!==e});N.set(t,r)}else console.error("Component ".concat(e," is not registered"))}(t,e.type)}),N.delete(t)}function j(){var t=[];return h.g.forEach(function(e){e.type!==_.y&&e.type!==_.B||t.push({id:e.id,title:e.title})}),t}function U(){var t=[];return h.g.forEach(function(e){e.type===_.l&&t.push({id:e.id,title:e.title})}),t}function P(){var t=[];return h.g.forEach(function(e){e.type===_.h&&t.push({id:e.id,title:e.title})}),t}function z(t){var e=Nt(t);if(e&&(e.type===_.y||e.type===_.B||e.type===_.l)){var r=e.attributes.fields;return void 0===r?[]:r}return[]}function M(t){var e=Nt(t);return e&&e.type===_.l?e.attributes.cloudDbId:null}function W(t){var e=Nt(t);return e&&e.type===_.h?e.attributes.columns:[]}function q(t){var e=Nt(t);return e&&e.type===_.h?e.attributes.cloudDbId:null}function B(t){var e=Nt(t);return e&&e.type===_.k?e.attributes.cloudTableId:null}function V(t){var e=Nt(t);return e&&e.type===_.j?e.attributes.cloudDictId:null}const G=r(5197),J=r(84064),H=r(22765);var K=["Size","Coordinate","VisibleSwitch","WidgetOpacity"],X=["size","position","visible","opacity"],Z={key:"__opacity",label:"",valueType:"number",defaultValue:100,validators:{lessThan:J.j,greaterThan:J.r,isInteger:!0}},Q={key:"__visible",label:"",valueType:"boolean",defaultValue:!0},Y={key:"__disabled",label:"",valueType:"boolean",defaultValue:!1};function $(t){var e=t.property,r=t.widgetType,n=t.widgetId,i="widget_get";return t.isSetProperty&&(i="widget_set"),'<block type="'.concat(i,'" uncache="true">\n    <mutation property="').concat(e,'" widget_type="').concat(r,'"></mutation>\n    <field name="WIDGET_ID">').concat(n,"</field>\n  </block>")}function tt(t){var e=t.property,r=t.widgetType,n=t.widgetId;return'<block type="widget_method" uncache="true">\n  <mutation\n    widget_type="'.concat(r,'"\n    method="').concat(e,'">\n  </mutation>\n  <field name="WIDGET_ID">').concat(n,"</field>\n</block>")}function et(t,e){var r="flyout-line-".concat(e),n=document.getElementById(r);n||((n=document.createElement("div")).id=r,n.style.display="none"),t.forEach(function(t){var r,i=t.lineLabel,o=t.text,a=document.getElementById(i);if(!a){(a=document.createElement("div")).id=i,a.style.display="flex",a.style.alignItems="center",a.style.width="".concat(O.b+40,"px");var s=document.createElement("div");s.style.width="6px",s.style.height="6px",s.style.borderRadius="50%",s.style.backgroundColor="#82778C";var c=document.createElement("div");c.style.fontSize="14px",c.style.fontFamily="NotoSansCJKsc-Medium, NotoSansCJKsc",c.style.color="#82778C",c.style.marginLeft="8px";var u=H.a(e,o)||o;c.innerText=u;var l=document.createElement("div");l.style.flex="1",l.style.height="1px",l.style.backgroundColor="#F2F2F2",l.style.marginLeft="8px",a.appendChild(s),a.appendChild(c),a.appendChild(l),null!==(r=n)&&void 0!==r&&r.appendChild(a),G.Blink.mainWorkspace.register_flyout_button(i,function(){var t=document.createElementNS(O.c,"foreignObject");t.style.overflow="visible";var e=document.getElementById(i);if(e){var r=e.clientWidth,n=e.clientHeight;t.setAttribute("width","".concat(r)),t.setAttribute("height","".concat(n)),t.appendChild(e)}return{svg_group:t,update_callback:function(e){var r=t.querySelector("#".concat(i));if(r){var n=r.clientWidth,o=r.clientHeight;n/=O.d,o/=O.d,t.setAttribute("width","".concat(n)),t.setAttribute("height","".concat(o)),e.width=n,e.height=o}}}})}}),document.body.append(n)}function rt(t){var e=t.widgetType,r=t.title,n=t.lineId,i="flyout-line-".concat(e,"-").concat(n);return et([{lineLabel:i,text:r}],e),'<label type="'.concat(i,'"></label>')}const nt=r(2543),it=r(4999),ot=r(36880);var at=s.a.mark(yt),st=s.a.mark(wt),ct=s.a.mark(xt),ut=s.a.mark(Et),lt=0,dt="DB_NOT_EXIST",ft=2e3,pt=5e3,ht=.8,_t=1;function vt(){var t=[];return h.g.forEach(function(e){e.type===_.j&&t.push(e)}),t}function gt(){var t=[];return h.g.forEach(function(e){e.type===_.k&&e.attributes.cloudTableId&&t.push(e.attributes.cloudTableId),e.type===_.A&&"number"==typeof e.attributes.dataSource&&t.push(e.attributes.dataSource)}),t}function mt(t){var e=[];for(var r in t){var n=t[r];n.type===_.j&&n.attributes.cloudDictId!==lt&&(e.push(nt.cloneDeep(n)),n.attributes.cloudDictId=lt),n.type===_.k&&n.attributes.cloudTableId!==lt&&(e.push(nt.cloneDeep(n)),n.attributes.cloudTableId=lt),n.type===_.A&&"number"==typeof n.attributes.dataSource&&(e.push(nt.cloneDeep(n)),n.attributes.dataSource="")}return e}function bt(){return h.b.clear()}function yt(){var t,e,r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,it.f(ot.p);case 2:return t=n.sent,e=vt(),r=e.map(function(t){return t.attributes.cloudDictId}),n.abrupt("return",g.r(r,f.a(t)).filter(function(t){return t!==lt}));case 6:case"end":return n.stop()}},at)}function wt(){var t,e;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,it.f(ot.q);case 2:return t=r.sent,e=gt(),r.abrupt("return",g.r(e,f.a(t)).filter(function(t){return t!==lt}));case 5:case"end":return r.stop()}},st)}function xt(){var t,e,r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,it.f(ot.p);case 2:return t=n.sent,e=vt(),r=e.map(function(t){return t.attributes.cloudDictId}),n.abrupt("return",g.r(f.a(t),r).filter(function(t){return t!==lt}));case 6:case"end":return n.stop()}},ct)}function Et(){var t,e;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,it.f(ot.q);case 2:return t=r.sent,e=gt(),r.abrupt("return",g.r(f.a(t),e).filter(function(t){return t!==lt}));case 5:case"end":return r.stop()}},ut)}function kt(t){var e=Nt(t);if(e){var r=e.title||e.contentTitle;return r||(r=function(t){var e=Nt(t);if(e){var r,n=(null===(r=L(e.type))||void 0===r?void 0:r.contentTextField)||"";return e.attributes[n]||""}}(t).replace(O.E,"").substr(0,20)),r||""}return""}function It(t,e){var r=Nt(t);return!!r&&function(t){var e=jt(),r=[];return e&&(e.widgetIds.forEach(function(e){var n=Nt(e);(null==n?void 0:n.type)===t&&r.push(n)}),e.invisibleWidgetIds.forEach(function(e){var n=Nt(e);(null==n?void 0:n.type)===t&&r.push(n)})),Ct().forEach(function(e){var n=Nt(e);(null==n?void 0:n.type)===t&&r.push(n)}),r}(r.type).some(function(r){var n=r.title||r.contentTitle;return r.id!==t&&n===e})}function Ot(){var t=!1;return h.g.forEach(function(e){(null==e?void 0:e.type)===_.A&&"number"==typeof e.attributes.dataSource&&(t=!0)}),t}function St(t,e){var r=k.d.getState().project.screens,n=new Set;return Array.from(r).forEach(function(e){e.id!==t&&n.add(e.title)}),n.has(e)}function Tt(t){h.g.delete(t)}function Nt(t){return h.g.get(t)}function At(t){var e=h.g.get(t);if(e&&e.parentId)return h.g.get(e.parentId)}function Ft(t){var e,r=[],n=h.g.keys(),i=p.a(n);try{for(i.s();!(e=i.n()).done;){var o,a=e.value;(null===(o=h.g.get(a))||void 0===o?void 0:o.parentId)===t&&r.push(a)}}catch(t){i.e(t)}finally{i.f()}return r}function Ct(){return k.d.getState().project.globalWidgetIds}function Lt(t,e){return h.g.set(t,e)}function Rt(){var t=[];return h.g.forEach(function(e){e.type===_.l&&t.push(e)}),t}function Dt(){var t=[];return h.g.forEach(function(e){e.type===_.h&&t.push(e)}),t}function jt(){var t=k.d.getState().project.currentScreenIndex;return k.d.getState().project.screens.get(t)}function Ut(t){var e=[];return h.g.forEach(function(r){r.type===t&&e.push(r.id)}),e}function Pt(t){var e=jt(),r=[];return e&&(e.widgetIds.forEach(function(e){var n;(null===(n=Nt(e))||void 0===n?void 0:n.type)===t&&r.push(e)}),e.invisibleWidgetIds.forEach(function(e){var n;(null===(n=Nt(e))||void 0===n?void 0:n.type)===t&&r.push(e)})),Ct().forEach(function(e){var n;(null===(n=Nt(e))||void 0===n?void 0:n.type)===t&&r.push(e)}),r}function zt(t){for(var e in h.g.clear(),t)h.g.set(e,t[e])}function Mt(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,n=[],i=Nt(t);if(i){var o=function t(e){var r=e instanceof Array?[]:{};if(e instanceof Array||e instanceof Object){for(var n in e)r[n]=t(e[n]);return r}return e}(i);n.push(o);var a=v.a(i.type);if(o.id=a,i.title){var s=we(i.type,Pt(i.type),i.title);o.title=s}else if(i.contentTitle){var c=we(i.type,Pt(i.type),i.contentTitle);o.contentTitle=c}if(r)o.parentId=r;else if(o.parentId){var u=Nt(o.parentId);if(u){var l=u;l.widgetIds=[].concat(f.a(l.widgetIds),[a])}}if(i.type===_.f){var d=o;d.widgetIds=[],i.widgetIds.forEach(function(t){var e=Mt(t,!0,a);if(e.length){var r=e[0];n.push(r);var i=r.id;d.widgetIds.push(i)}})}if(i.type===_.x||i.type===_.A){var p=o;for(var h in p.widgetIds=[],i.attributes.templateSlotMap){var g=Mt(i.attributes.templateSlotMap[h].widgetId,!0,a);if(g.length){var m=g[0];n.push(m);var b=m.id;p.widgetIds.push(b),p.attributes.templateSlotMap[h].widgetId=b}}}e&&Lt(a,o)}return n}function Wt(t,e,r){var n=Nt(t);if(n){if(!n.parentId||r){var i=function t(e){var r=e instanceof Array?[]:{};if(e instanceof Array||e instanceof Object){for(var n in e)r[n]=t(e[n]);return r}return e}(n);[].push(i);var o=v.a(n.type);i.id=o;var a=e.indexOf(t);if(a>-1?e.splice(a,1,i.id):console.error("copy screen error"),r&&(i.parentId=r),n.type===_.f){var s=i;s.widgetIds=[],n.widgetIds.forEach(function(t){var r=Wt(t,e,o);r&&s.widgetIds.push(r.id)})}if(n.type===_.x||n.type===_.A){var c=i;for(var u in c.widgetIds=[],n.attributes.templateSlotMap){var l=Wt(n.attributes.templateSlotMap[u].widgetId,e,o);l&&(c.widgetIds.push(l.id),c.attributes.templateSlotMap[u].widgetId=l.id)}}return Lt(i.id,i),i}}else console.error("cloneScreenWidget get widget error")}function qt(t,e){var r=Nt(t);r&&"widgetIds"in r&&(r.widgetIds=e)}function Bt(t,e){var r=Nt(t);r&&(r.title=e)}function Vt(t,e,r){var n=Nt(t);n&&(n.attributes=d.a(d.a({},n.attributes),{},l.a({},e,r)))}function Gt(t,e){switch(e){case m.b.CONTAINED_ICON:case m.b.OUTLINED_ICON:return b.e[t];case m.b.CONTAINED_TEXT:case m.b.OUTLINED_TEXT:return b.f[t]}}var Jt=function(t){switch(t){case m.b.OUTLINED_TEXT:case m.b.CONTAINED_TEXT:return"TEXT";case m.b.OUTLINED_ICON:case m.b.CONTAINED_ICON:return"ICON"}},Ht=function(t){var e=h.g.get(t);return e&&e.type===_.d?Jt(e.attributes.mode):""},Kt=function(t){return y.p[t]};function Xt(t){return Array.from(h.g).some(function(e){return e[1].type===_.v&&e[1].attributes.fileId===t||e[1].type===_.z&&e[1].attributes.backgroundImage===t||e[1].type===_.w&&e[1].attributes.backgroundImage===t||e[1].type===_.E&&(e[1].attributes.backgroundImageFileId===t||e[1].attributes.handleImageFileId===t||e[1].attributes.trackImageFileId===t)||e[1].type===_.f&&e[1].attributes.backgroundImage===t||!(e[1].type!==_.a||!e[1].attributes.actionList.some(function(e){return e.styleList.some(function(e){return e.source===t})}))})}function Zt(t){var e=[];return Array.from(h.g).forEach(function(r){var n=u.a(r,2);n[0];var i=n[1];i.type===_.a&&i.attributes.actionList.some(function(e){return e.styleList.some(function(e){return e.source===t})})&&e.push(i)}),e}function Qt(t){return Array.from(h.g).some(function(e){return e[1].type===_.b&&e[1].attributes.fileId===t})}function Yt(t){return Array.from(h.g).some(function(e){return(e[1].type===_.d||e[1].type===_.z)&&e[1].attributes.iconId===t})}function $t(t){var e=t.size;return!t.attributes.fileId&&e.height===x.h&&e.width===x.l}function te(t){var e=t.width,r=t.height,n=E.d,i=E.e;return e>i||r>n?e/r>i/n?{width:i,height:r/e*i}:{width:e/r*n,height:n}:{width:e,height:r}}function ee(t,e){h.g.forEach(function(r){r.type===_.v?(r.attributes.fileId===t&&(r.attributes.fileId=e),Ve(t,r.attributes.fileId)&&(r.attributes.fileId=Be(t,e,r.attributes.fileId))):"ACTOR_WIDGET"===r.type&&r.attributes.actionList.forEach(function(r){r.styleList.forEach(function(r){r.source===t&&(r.source=e),Ve(t,r.source)&&(r.source=Be(t,e,r.source))})}),"backgroundImage"in r.attributes&&(r.attributes.backgroundImage===t&&(r.attributes.backgroundImage=e),Ve(t,r.attributes.backgroundImage)&&(r.attributes.backgroundImage=Be(t,e,r.attributes.backgroundImage)))})}function re(){return h.a}function ne(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={};return h.a.forEach(function(r){e[r.id]=d.a(d.a({},r),{},{cdnUrl:t&&r.source||r.cdnUrl})}),e}function ie(t){return t.cdnUrl||t.source}function oe(t){var e=h.a.find(function(e){return e.id===t});return(null==e?void 0:e.source)||(null==e?void 0:e.cdnUrl)}function ae(t){return h.a.find(function(e){return e.id===t})}function se(t,e){return h.a.find(function(r){return r.groupId===t&&r.groupImageIndex===e})}function ce(t){if("string"==typeof t){if(g.U(t))return t;var e=ae(t);if(e)return(null==e?void 0:e.source)||(null==e?void 0:e.cdnUrl);var r=ge().find(function(e){return e.name+".svg"===t||e.id===t});return r?(null==r?void 0:r.source)||(null==r?void 0:r.cdnUrl):void 0}}function ue(t,e){void 0!==e?h.a.splice(e,0,t):h.a.push(t)}function le(t,e){var r=h.a.find(function(e){return e.id===t});r&&(r.id=e)}function de(t,e){h.a.filter(function(e){return e.groupId===t}).forEach(function(t){t.groupId=e,void 0!==t.groupImageIndex&&(t.id="".concat(e,"-").concat(t.groupImageIndex+1).concat(t.extension))})}function fe(t,e){var r=ae(t);r&&(r.cdnUrl=e)}function pe(t,e,r){var n=ae(t);n&&n.urls&&(n.urls[e]=r)}function he(t){return k.d.getState().resource.soundFileList.find(function(e){return e.id===t})}function _e(){return k.d.getState().resource.soundFileList}function ve(t){return k.d.getState().resource.iconFileList.find(function(e){return e.id===t})}function ge(){return k.d.getState().resource.iconFileList}function me(t,e){if(e.includes(t)){var r=e,n=t.replace(/\d+$/g,""),i=new RegExp("^"+n+"(\\d+)$","i"),o=[];r.forEach(function(t){var e=t.match(i);e&&e[1]&&o.push(parseInt(e[1]))});var a=1,s=t.match(i);for(s&&s[1]&&(a=parseInt(s[1]));o.includes(a);)a++;return"".concat(n).concat(a)}return t}function be(t,e){return me(t,e.toJSON().map(function(t){return t.title}))}function ye(t,e,r){var n=[];return r.toJSON().forEach(function(e){e.id!==t&&n.push(e.title)}),me(e,n)}function we(t,e,r){var n=[];return e.forEach(function(e){var r=Nt(e);r&&r.type===t&&(r.title?n.push(r.title):r.contentTitle&&n.push(r.contentTitle))}),me(r,n)}function xe(t,e,r){var n=Pt(e);return we(e,n=n.filter(function(e){return e!==t}),r)}function Ee(t,e,r){var n=Pt(e);n=n.filter(function(e){return e!==t});var i=r.replace(O.E,"");return i=i.trim(),we(e,n,i=w.c(i,40))}function ke(t){var e=t.slice(0,t.lastIndexOf(".")<0?void 0:t.lastIndexOf(".")),r=g.I(t),n=[];return re().forEach(function(t){t.extension===r&&n.push(t.id.slice(0,t.id.lastIndexOf(".")<0?void 0:t.id.lastIndexOf(".")))}),me(e,n)+r}function Ie(t){return Oe.apply(this,arguments)}function Oe(){return(Oe=c.a(s.a.mark(function t(e){var r,n,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=ke(e.name),t.next=3,g.ob(e);case 3:if(!(n=t.sent)){t.next=8;break}return ue(i={cdnUrl:"",id:r,source:n,extension:g.I(e.name)}),t.abrupt("return",i);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Se(t){var e;h.a.length=0;var r=p.a(t);try{for(r.s();!(e=r.n()).done;){var n=e.value,i=n.source;i&&g.R(i)&&(n.source=g.n(i)),h.a.push(n)}}catch(t){r.e(t)}finally{r.f()}}function Te(){return Ne.apply(this,arguments)}function Ne(){return(Ne=c.a(s.a.mark(function t(){var e,r,n,i,o,a,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=[],r=p.a(h.a),t.prev=2,r.s();case 4:if((n=r.n()).done){t.next=18;break}if(i=n.value,o=d.a({},i),a=o.cdnUrl,c=o.source,a||!c||!g.P(c)){t.next=14;break}return t.next=11,g.d(c);case 11:o.source=t.sent,t.next=15;break;case 14:a&&delete o.source;case 15:e.push(o);case 16:t.next=4;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(2),r.e(t.t0);case 23:return t.prev=23,r.f(),t.finish(23);case 26:return t.abrupt("return",e);case 27:case"end":return t.stop()}},t,null,[[2,20,23,26]])}))).apply(this,arguments)}function Ae(){return Fe.apply(this,arguments)}function Fe(){return(Fe=c.a(s.a.mark(function t(){var e,r,n,i,o,a,c,u;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=k.d.getState().resource.soundFileList.toJS(),r=[],n=p.a(e),t.prev=3,n.s();case 5:if((i=n.n()).done){t.next=19;break}if(o=i.value,a=d.a({},o),c=a.cdnUrl,u=a.source,c||!u||!g.P(u)){t.next=15;break}return t.next=12,g.d(u);case 12:a.source=t.sent,t.next=16;break;case 15:c&&delete a.source;case 16:r.push(a);case 17:t.next=5;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(3),n.e(t.t0);case 24:return t.prev=24,n.f(),t.finish(24);case 27:return t.abrupt("return",r);case 28:case"end":return t.stop()}},t,null,[[3,21,24,27]])}))).apply(this,arguments)}function Ce(){return Le.apply(this,arguments)}function Le(){return(Le=c.a(s.a.mark(function t(){var e,r,n,i,o,a,c,u;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=k.d.getState().resource.iconFileList.toJS(),r=[],n=p.a(e),t.prev=3,n.s();case 5:if((i=n.n()).done){t.next=19;break}if(o=i.value,a=d.a({},o),c=a.cdnUrl,u=a.source,c||!u||!g.P(u)){t.next=15;break}return t.next=12,g.d(u);case 12:a.source=t.sent,t.next=16;break;case 15:c&&delete a.source;case 16:r.push(a);case 17:t.next=5;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(3),n.e(t.t0);case 24:return t.prev=24,n.f(),t.finish(24);case 27:return t.abrupt("return",r);case 28:case"end":return t.stop()}},t,null,[[3,21,24,27]])}))).apply(this,arguments)}function Re(t){var e=h.a.findIndex(function(e){return e.id===t});!function(t){h.g.forEach(function(e){e.type===_.v&&e.attributes.fileId===t&&(e.attributes.fileId=""),e.type===_.f&&e.attributes.backgroundImage===t&&(e.attributes.backgroundImage="")})}(t),h.a.splice(e,1)}function De(t){var e=document.getElementById(t);return(null==e?void 0:e.dataset.clickType)===O.h.CLICK}function je(t){h.g.forEach(function(e){e.type===_.b&&e.attributes.fileId===t&&(e.attributes.fileId="")})}function Ue(t){return!!ae(t)}function Pe(t,e){var r=I.z.checkOtherScreenFieldValueIsSelected(t,e),n=k.d.getState().project.screens,i=k.d.getState().project.currentScreenIndex,o=[];return n.forEach(function(t,e){r.includes(t.id)&&o.push(e+1)}),I.z.checkFieldValueIsSelected(t,e)&&!o.includes(i+1)&&o.push(i+1),o.sort(function(t,e){return t-e}),o}function ze(t){var e,r=k.d.getState().project.screens,n=p.a(r);try{for(n.s();!(e=n.n()).done;)if(e.value.backgroundImage===t)return!0}catch(t){n.e(t)}finally{n.f()}return!1}function Me(t){return Array.from(h.g).some(function(e){return e[1].type===t})}function We(t){var e=[];return h.a.forEach(function(r){r.groupId===t&&e.push(r)}),e}function qe(t){return h.a.find(function(e){return(null==e?void 0:e.cdnUrl)===(null==t?void 0:t.cdnUrl)&&e.groupId===t.id})}function Be(t,e,r){return e+r.split(t)[1]}function Ve(t,e){var r=ae(e);return(null==r?void 0:r.groupId)===t}const Ge=_t},80520:(t,e,r)=>{r.r(e),r.d(e,{a:()=>l,default:()=>d});const n=r(21272),i=r(96540);var o,a,s=(a=(o=i)&&o.__esModule?function(){return o.default}:function(){return o},Object.defineProperty(a,"a",{enumerable:!0,get:a}),a);const c=r(62238),u=r(5204);var l;const d=l=i.memo(function(t){var e=i.useState([]),r=n.a(e,2),o=r[0],a=r[1],l=i.useState("0 0 1024 1024"),d=n.a(l,2),f=d[0],p=d[1],h=t.icon,_=void 0===h?u.c:h;return i.useEffect(function(){var t=c.a(_.id);if(t)return a(t.path),void p(t.viewBox);var e=(null==_?void 0:_.cdnUrl)||(null==_?void 0:_.source);e&&(e.startsWith("http")&&(e+="?_=".concat(Math.random())),fetch(e).then(function(t){return t.text()}).then(function(t){var e=(new DOMParser).parseFromString(t,"image/svg+xml"),r=[],n=e.querySelector("svg"),i=(null==n?void 0:n.getAttribute("viewBox"))||"0 0 1024 1024";e.querySelectorAll("path").forEach(function(t){r.push(t.getAttribute("d")||"")}),a(r),p(i),c.c(_.id,r,i)}))},[_]),s.a.createElement("svg",{viewBox:f,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},o.map(function(t){return s.a.createElement("path",{key:t,d:t})}))})},80875:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},81124:(t,e,r)=>{r.r(e),r.d(e,{a:()=>n,b:()=>s,c:()=>o,d:()=>i,default:()=>u,e:()=>c,f:()=>a});var n="SET_UI_CONFIG",i=function(t){return{payload:t,type:n}},o="UPDATE_UI_CONFIG",a=function(t){return{payload:t,type:o}},s="SET_UI_PREVENT_LEAVE_CONFIG",c=function(t){return{payload:t,type:s}};const u=n},81203:(t,e,r)=>{!function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}(e);var n=r(63771),i=function(){},o={start:function(t,e,r){n.d()&&(window.stepper.isStepCountingAvailable().then(function(t){t||e()}).catch(function(t){console.error("isStepCountingAvailable",t),e()}),window.stepper.requestPermission().then(function(e){e?window.stepper.startStepperUpdates({pedometerIsCountingText:"计步器正常计步",pedometerStepsToGoFormatText:"",pedometerYourProgressFormatText:"",pedometerGoalReachedFormatText:""},function(e){"object"==typeof e&&t(e.steps_today)},function(t){console.error("startStepper",t),3===t.code&&r()}):r()}).catch(function(t){console.error("requestPermission",t),r()}))},stop:function(){n.d()&&window.stepper.stopStepperUpdates().then(i).catch(function(t){return console.error("stopStepperUpdates",t)})},reset:function(t){n.d()&&window.stepper.destroy().then(t).catch(function(t){return console.error("destroy",t)})}};e.default=o},82966:(t,e,r)=>{r.r(e),r.d(e,{a:()=>i,b:()=>n,default:()=>o});var n=["#FF6A3A","#5B81FD","#FFEC3D","#73D13D","#F759AB","#FFA332","#3BA7FF","#F9CC37","#5AB45B","#FF85C0","#F9CC37","#BAE637","#FF4D4F","#36CFC9","#82778C"],i="#9C90A8";const o=i},84124:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FieldLabel=void 0;var n=r(31635),i=r(71519),o=r(99186),a=r(15261),s=r(82390),c=function(t){function e(e){var r=t.call(this,e.text)||this;return r.editable=!1,r.field_type="FieldLabel",r.size_=new o.Size(0,r.theme.renderer.SHADOW_FIELD_HEIGHT),r.class_=e.opt_class,r.set_value(e.text),r}return(0,n.__extends)(e,t),e.prototype.init=function(){if(!this.text_element){if(s.is.safari()||s.is.mobile()?this.text_element=(0,a.create_svg_element)("text",{class:"blocklyText","font-size":this.theme.font.SIZE,dy:".4em"}):this.text_element=(0,a.create_svg_element)("text",{class:"blocklyText","font-size":this.theme.font.SIZE,"dominant-baseline":"central"}),this.class_&&(0,a.add_class)(this.text_element,this.class_),this.visible_||(this.text_element.style.display="none"),null==this.source_block)throw new ReferenceError("Field should have source block when init.");if(null!=this.source_block){var t=this.source_block.get_svg_root();if(null==t)throw new ReferenceError("Field should have svg root when init.");t.appendChild(this.text_element)}this.source_block&&this.render_()}},e.prototype.layout=function(t,e){t[0]+=this.render_sep,this.text_element&&(this.text_element.setAttribute("transform","translate("+t[0]+","+(t[1]+e/2)+")"),t[0]+=this.size_.width)},(0,n.__decorate)([(0,i.injectable)()],e)}(r(35422).Field);e.FieldLabel=c},86082:t=>{function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}},88772:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.PROCEDURE_CONTEXT=e.PROCEDURE_BLOCK_FIELD_NAMES=e.PROCEDURE_BLOCK_INPUT_NAMES=e.PROCEDURE_BLOCK_TYPES=void 0,(r=e.PROCEDURE_BLOCK_TYPES||(e.PROCEDURE_BLOCK_TYPES={})).DEF="procedures_2_defnoreturn",r.RETURN="procedures_2_return_value",r.CALL_RETURN="procedures_2_callreturn",r.CALL_NORETURN="procedures_2_callnoreturn",r.PARAM_ON_BLOCK="procedures_2_stable_parameter",r.PARAM="procedures_2_parameter",function(t){t.DEF_MUTATOR="PROCEDURES_2_DEFNORETURN_MUTATOR",t.DEF_STATEMENT="STACK",t.RETURN_VALUE="VALUE",t.RETURN_MUTATOR="PROCEDURES_2_DEFRETURN_RETURN_MUTATOR",t.PARAM_PREFIX="PARAMS",t.ARG_PREFIX="ARG"}(e.PROCEDURE_BLOCK_INPUT_NAMES||(e.PROCEDURE_BLOCK_INPUT_NAMES={})),function(t){t.PROCEDURE_NAME="NAME",t.PARAM_NAME="param_name",t.PARAM_DEFAULT_VALUE="param_default_value"}(e.PROCEDURE_BLOCK_FIELD_NAMES||(e.PROCEDURE_BLOCK_FIELD_NAMES={})),e.PROCEDURE_CONTEXT="PROCEDURE_CONTEXT"},89595:(t,e,r)=>{var n=r(35612);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}},89843:(t,e,r)=>{r.r(e),r.d(e,{a:()=>a,default:()=>s});const n=r(69463),i=r(66622),o=r(58184);function a(t,e){return n.a(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,e)||i.a(t,e)||o.a()}const s=a},89849:(t,e,r)=>{r.r(e),r.d(e,{a:()=>T,b:()=>w,c:()=>q,d:()=>g,default:()=>ut,e:()=>P,f:()=>p,g:()=>d,h:()=>C,i:()=>rt,j:()=>A,k:()=>_,l:()=>R,m:()=>it,n:()=>tt,o:()=>J,p:()=>j,q:()=>at,r:()=>V,s:()=>Z,t:()=>Y,u:()=>K,v:()=>b,w:()=>M});const n=r(7452);var i,o,a=(o=(i=n)&&i.__esModule?function(){return i.default}:function(){return i},Object.defineProperty(o,"a",{enumerable:!0,get:o}),o);const s=r(21009),c=r(83315),u=r(3741);var l="".concat(c.a.serverHost,"/coconut");function d(t){return f.apply(this,arguments)}function f(){return(f=s.a(a.a.mark(function t(e){var r,n,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(l,"/webdb/admin/dict"),n={type:1},e&&(n.work_id=e),t.next=5,u.a.get(r,{params:n});case 5:if(i=t.sent,200!==(o=i.data).code){t.next=9;break}return t.abrupt("return",o.data);case 9:throw new Error(JSON.stringify({msg:o.msg,code:o.code}));case 10:case"end":return t.stop()}},t)}))).apply(this,arguments)}function p(t){return h.apply(this,arguments)}function h(){return(h=s.a(a.a.mark(function t(e){var r,n,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(l,"/webdb/admin/dict/").concat(e),t.next=3,u.a.get(r,{params:{offset:0,limit:1e3},headers:{env:1}});case 3:if(n=t.sent,200!==(i=n.data).code){t.next=7;break}return t.abrupt("return",i.data.items.map(function(t){return{id:t.id,key:t.key}}));case 7:throw new Error(i.msg);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function _(t,e){return v.apply(this,arguments)}function v(){return(v=s.a(a.a.mark(function t(e,r){var n,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(l,"/webdb/v2/admin/").concat(e,"/keys"),t.next=3,u.a.get(n,{params:{offset:0,limit:1e3,work_id:r},headers:{env:1}});case 3:if(i=t.sent,200!==(o=i.data).code){t.next=7;break}return t.abrupt("return",o.data.items.map(function(t){return{id:t.id,key:t.key}}));case 7:throw new Error(o.msg);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function g(t,e){return m.apply(this,arguments)}function m(){return(m=s.a(a.a.mark(function t(e,r){var n,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(l,"/webdb/v2/admin/reference"),t.next=3,u.a.post(n,{dict_ids:r},{params:{work_id:e}});case 3:if(i=t.sent,200!==(o=i.data).code){t.next=7;break}return t.abrupt("return",o);case 7:throw new Error(JSON.stringify({msg:o.msg,code:o.code}));case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function b(t,e){return y.apply(this,arguments)}function y(){return(y=s.a(a.a.mark(function t(e,r){var n,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(l,"/webdb/v2/admin/reference/batch"),t.next=3,u.a.delete(n,{params:{work_id:e,dict_ids:r.join(",")}});case 3:if(i=t.sent,200!==(o=i.data).code){t.next=7;break}return t.abrupt("return",o);case 7:throw new Error(JSON.stringify({msg:o.msg,code:o.code}));case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function w(t){return x.apply(this,arguments)}function x(){return(x=s.a(a.a.mark(function t(e){var r,n,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(l,"/webdb/v2/admin/dict/copyBatch"),t.next=3,u.a.post(r,{dict_ids:e});case 3:if(n=t.sent,200!==(i=n.data).code){t.next=7;break}return t.abrupt("return",i.data);case 7:throw new Error(JSON.stringify({msg:i.msg,code:i.code}));case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}const E=r(78698),k=r(48096),I=r(27759),O=r(85552);var S="".concat(c.a.serverHost,"/coconut"),T=405e5,N=k.a({40400100:"用户未授权",40400915:"当前用户无操作权限",40400916:"行为空或不存在",40400917:"列为空或不存在",40400919:"容量已达上限",40400926:"数据源不存在",40400927:"超过最大数据库数量",40400931:"存储的数据超出单元格限制(1k个字符)"},T,"存储的数据超出当前列数，溢出部分存储失败");function A(t){return F.apply(this,arguments)}function F(){return(F=s.a(a.a.mark(function t(e){var r,n,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(S,"/clouddb/user/list/detail"),n={type:1},e&&(n.work_id=e),t.next=5,u.a.get(r,{headers:{env:1},params:n});case 5:if(i=t.sent,200!==(o=i.data).code){t.next=9;break}return t.abrupt("return",o.data);case 9:throw new Error(JSON.stringify({msg:o.msg,code:o.code}));case 10:case"end":return t.stop()}},t)}))).apply(this,arguments)}function C(t){return L.apply(this,arguments)}function L(){return(L=s.a(a.a.mark(function t(e){var r,n,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(S,"/clouddb/").concat(e,"/data_list?offset=0&limit=500"),t.next=3,u.a.get(r,{headers:{env:1}});case 3:if(n=t.sent,200!==(i=n.data).code){t.next=7;break}return t.abrupt("return",null===(o=i.data)||void 0===o?void 0:o.records.map(function(t){return E.a({rowId:t.record_id},t.values)}));case 7:throw new Error(i.msg);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function R(t,e){return D.apply(this,arguments)}function D(){return(D=s.a(a.a.mark(function t(e,r){var n,i,o,s,c,l,d;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a("id=".concat(e));case 2:return n=t.sent,i=n.sign,o=n.timestamp,s="".concat(S,"/clouddb/v2/").concat(e,"/data_list?work_id=").concat(r,"&offset=0&limit=500"),t.next=8,u.a.get(s,{headers:{env:1,sign:i,timestamp:o}});case 8:if(c=t.sent,200!==(l=c.data).code){t.next=12;break}return t.abrupt("return",null===(d=l.data)||void 0===d?void 0:d.records.map(function(t){return E.a({rowId:t.record_id},t.values)}));case 12:throw new Error(l.msg);case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}function j(t){return U.apply(this,arguments)}function U(){return(U=s.a(a.a.mark(function t(e){var r,n,i,o,s,c,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a("id=".concat(e,"&limit=500&offset=0"));case 2:return r=t.sent,n=r.sign,i=r.timestamp,o="".concat(S,"/clouddb/runtime/").concat(e,"/list"),t.next=8,u.a.get(o,{params:{offset:0,limit:500},headers:E.a({env:1,sign:n,timestamp:i},O.a())});case 8:if(s=t.sent,200!==(c=s.data).code){t.next=12;break}return t.abrupt("return",null===(l=c.data)||void 0===l?void 0:l.records.map(function(t){return E.a({rowId:t.record_id},t.values)}));case 12:throw new Error(c.msg);case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}function P(t,e){return z.apply(this,arguments)}function z(){return(z=s.a(a.a.mark(function t(e,r){var n,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(S,"/clouddb/reference"),t.next=3,u.a.post(n,{db_ids:r},{params:{work_id:e}});case 3:if(i=t.sent,200!==(o=i.data).code){t.next=7;break}return t.abrupt("return",o);case 7:throw new Error(JSON.stringify({msg:o.msg,code:o.code}));case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function M(t,e){return W.apply(this,arguments)}function W(){return(W=s.a(a.a.mark(function t(e,r){var n,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(S,"/clouddb/reference/batch"),t.next=3,u.a.delete(n,{params:{work_id:e,db_ids:r.join(",")}});case 3:if(i=t.sent,200!==(o=i.data).code){t.next=7;break}return t.abrupt("return",o);case 7:throw new Error(JSON.stringify({msg:o.msg,code:o.code}));case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function q(t){return B.apply(this,arguments)}function B(){return(B=s.a(a.a.mark(function t(e){var r,n,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(S,"/clouddb/v2/copy"),t.next=3,u.a.post(r,{},{params:{db_ids:e.join(",")}});case 3:if(n=t.sent,200!==(i=n.data).code){t.next=7;break}return t.abrupt("return",i.data);case 7:throw new Error(JSON.stringify({msg:i.msg,code:i.code}));case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function V(t,e){return G.apply(this,arguments)}function G(){return(G=s.a(a.a.mark(function t(e,r){var n,i,o,s,c,l,d,f,p,h;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="".concat(S,"/clouddb/runtime/").concat(e,"/insert"),i={values:r},t.next=5,I.a("".concat(JSON.stringify(i)));case 5:return o=t.sent,s=o.sign,c=o.timestamp,t.next=10,u.a.post(n,i,{headers:E.a({env:1,sign:s,timestamp:c},O.a())});case 10:if(l=t.sent,200!==(d=l.data).code){t.next=20;break}if("插入数据与列属性不匹配"!==d.data){t.next=17;break}throw d.code=T,ct(d),new Error(JSON.stringify({msg:d.msg,code:d.code}));case 17:return t.abrupt("return",d.data);case 20:throw ct(d),new Error(JSON.stringify({msg:d.msg,code:d.code}));case 22:case 36:t.next=39;break;case 24:if(t.prev=24,t.t0=t.catch(0),console.error(t.t0),!(f=t.t0.response)){t.next=38;break}if(p=f.status,h=f.data,403!==p){t.next=35;break}throw new Error(JSON.stringify({msg:h.msg,code:h.code}));case 35:throw new Error(JSON.stringify({msg:"服务器错误",code:"E0"}));case 38:throw t.t0;case 39:case"end":return t.stop()}},t,null,[[0,24]])}))).apply(this,arguments)}function J(t,e,r,n){return H.apply(this,arguments)}function H(){return(H=s.a(a.a.mark(function t(e,r,n,i){var o,s,c,l,d,f,p,h,_,v;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o="".concat(S,"/clouddb/runtime/").concat(e,"/delete"),s={querys:{querys:[{column_id:r,op:n,value:i.toString()}]}},t.next=5,I.a("".concat(JSON.stringify(s)));case 5:return c=t.sent,l=c.sign,d=c.timestamp,t.next=10,u.a.put(o,s,{headers:E.a({env:1,sign:l,timestamp:d},O.a())});case 10:if(f=t.sent,200!==(p=f.data).code){t.next=16;break}return t.abrupt("return",p.data);case 16:throw new Error(JSON.stringify({msg:p.msg,code:p.code}));case 17:case 31:t.next=34;break;case 19:if(t.prev=19,t.t0=t.catch(0),console.error(t.t0),!(h=t.t0.response)){t.next=33;break}if(_=h.status,v=h.data,403!==_){t.next=30;break}throw new Error(JSON.stringify({msg:v.msg,code:v.code}));case 30:throw new Error(JSON.stringify({msg:"服务器错误",code:"E0"}));case 33:throw t.t0;case 34:case"end":return t.stop()}},t,null,[[0,19]])}))).apply(this,arguments)}function K(t,e,r,n,i,o){return X.apply(this,arguments)}function X(){return(X=s.a(a.a.mark(function t(e,r,n,i,o,s){var c,l,d,f,p,h,_,v,g,m;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c="".concat(S,"/clouddb/runtime/").concat(e,"/update"),l={querys:{querys:[{column_id:r,op:n,value:i.toString()}]},values:[{column_id:o,value:s.toString()}]},t.next=5,I.a("".concat(JSON.stringify(l)));case 5:return d=t.sent,f=d.sign,p=d.timestamp,t.next=10,u.a.put(c,l,{headers:E.a({env:1,sign:f,timestamp:p},O.a())});case 10:if(h=t.sent,200!==(_=h.data).code){t.next=16;break}return t.abrupt("return",_.data);case 16:throw new Error(JSON.stringify({msg:_.msg,code:_.code}));case 17:case 31:t.next=34;break;case 19:if(t.prev=19,t.t0=t.catch(0),console.error(t.t0),!(v=t.t0.response)){t.next=33;break}if(g=v.status,m=v.data,403!==g){t.next=30;break}throw new Error(JSON.stringify({msg:m.msg,code:m.code}));case 30:throw new Error(JSON.stringify({msg:"服务器错误",code:"E0"}));case 33:throw t.t0;case 34:case"end":return t.stop()}},t,null,[[0,19]])}))).apply(this,arguments)}function Z(t,e,r,n){return Q.apply(this,arguments)}function Q(){return(Q=s.a(a.a.mark(function t(e,r,n,i){var o,s,c,l,d,f,p,h,_,v;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o="".concat(S,"/clouddb/runtime/").concat(e,"/select"),s={querys:{querys:[{column_id:r,op:n,value:i.toString()}]}},t.next=5,I.a("".concat(JSON.stringify(s)));case 5:return c=t.sent,l=c.sign,d=c.timestamp,t.next=10,u.a.post(o,{querys:{querys:[{op:n,column_id:r,value:i}]}},{headers:E.a({env:1,sign:l,timestamp:d},O.a())});case 10:if(f=t.sent,200!==(p=f.data).code){t.next=16;break}return t.abrupt("return",p.data);case 16:throw ct(p),new Error(JSON.stringify({msg:p.msg,code:p.code}));case 18:case 32:t.next=35;break;case 20:if(t.prev=20,t.t0=t.catch(0),console.error(t.t0),!(h=t.t0.response)){t.next=34;break}if(_=h.status,v=h.data,403!==_){t.next=31;break}throw new Error(JSON.stringify({msg:v.msg,code:v.code}));case 31:throw new Error(JSON.stringify({msg:"服务器错误",code:"E0"}));case 34:throw t.t0;case 35:case"end":return t.stop()}},t,null,[[0,20]])}))).apply(this,arguments)}function Y(t,e){return $.apply(this,arguments)}function $(){return($=s.a(a.a.mark(function t(e,r){var n,i,o,s,c,l,d,f,p,h;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="row"===r?"RECORD":"COLUMN",t.next=3,I.a("id=".concat(e,"&type=").concat(n));case 3:return i=t.sent,o=i.sign,s=i.timestamp,t.prev=6,c="".concat(S,"/clouddb/runtime/").concat(e,"/count?type=").concat(n),t.next=10,u.a.get(c,{headers:E.a({env:1,sign:o,timestamp:s},O.a())});case 10:if(l=t.sent,200!==(d=l.data).code){t.next=16;break}return t.abrupt("return",d.data);case 16:throw ct(d),new Error(JSON.stringify({msg:d.msg,code:d.code}));case 18:case 32:t.next=35;break;case 20:if(t.prev=20,t.t0=t.catch(6),console.error(t.t0),!(f=t.t0.response)){t.next=34;break}if(p=f.status,h=f.data,403!==p){t.next=31;break}throw new Error(JSON.stringify({msg:h.msg,code:h.code}));case 31:throw new Error(JSON.stringify({msg:"服务器错误",code:"E0"}));case 34:throw t.t0;case 35:case"end":return t.stop()}},t,null,[[6,20]])}))).apply(this,arguments)}function tt(t){return et.apply(this,arguments)}function et(){return(et=s.a(a.a.mark(function t(e){var r,n,i,o,s,c,l,d,f;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a("id=".concat(e));case 3:return r=t.sent,n=r.sign,i=r.timestamp,o="".concat(S,"/clouddb/v2/runtime/").concat(e,"/clear"),t.next=9,u.a.put(o,{},{headers:E.a({sign:n,timestamp:i},O.a())});case 9:if(s=t.sent,200!==(c=s.data).code){t.next=15;break}return t.abrupt("return",c.data);case 15:throw ct(c),new Error(JSON.stringify({msg:c.msg,code:c.code}));case 17:case 31:t.next=34;break;case 19:if(t.prev=19,t.t0=t.catch(0),console.error(t.t0),!(l=t.t0.response)){t.next=33;break}if(d=l.status,f=l.data,403!==d){t.next=30;break}throw new Error(JSON.stringify({msg:f.msg,code:f.code}));case 30:throw new Error(JSON.stringify({msg:"服务器错误",code:"E0"}));case 33:throw t.t0;case 34:case"end":return t.stop()}},t,null,[[0,19]])}))).apply(this,arguments)}function rt(t){return nt.apply(this,arguments)}function nt(){return(nt=s.a(a.a.mark(function t(e){var r,n,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(S,"/clouddb/v2/").concat(e,"/detail"),t.next=3,u.a.get(r,{params:{offset:0,limit:1e3},headers:{env:1}});case 3:if(n=t.sent,200!==(i=n.data).code){t.next=9;break}return t.abrupt("return",i.data);case 9:ct(i);case 10:throw new Error(JSON.stringify({msg:i.msg,code:i.code}));case 11:case"end":return t.stop()}},t)}))).apply(this,arguments)}function it(t,e){return ot.apply(this,arguments)}function ot(){return(ot=s.a(a.a.mark(function t(e,r){var n,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(S,"/clouddb/v2/").concat(e,"/detail"),t.next=3,u.a.get(n,{params:{offset:0,limit:1e3,work_id:r},headers:{env:1}});case 3:if(i=t.sent,200!==(o=i.data).code){t.next=9;break}return t.abrupt("return",o.data);case 9:ct(o);case 10:throw new Error(o.msg);case 11:case"end":return t.stop()}},t)}))).apply(this,arguments)}function at(t){return st.apply(this,arguments)}function st(){return(st=s.a(a.a.mark(function t(e){var r,n,i,o,s,c,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={db_ids:e.join(",")},t.next=3,I.a("ids=[".concat(e.join(","),"]"));case 3:return n=t.sent,i=n.sign,o=n.timestamp,s="".concat(S,"/clouddb/v2/runtime/list"),t.next=9,u.a.get(s,{headers:E.a({env:1,sign:i,timestamp:o},O.a()),params:r});case 9:if(c=t.sent,200!==(l=c.data).code){t.next=15;break}return t.abrupt("return",l.data);case 15:ct(l);case 16:throw new Error(JSON.stringify({msg:l.msg,code:l.code}));case 17:case"end":return t.stop()}},t)}))).apply(this,arguments)}function ct(t){t.msg=N[t.code]||"network error"}const ut=T},91760:function(t,e,r){(function(t){function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e,r){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&i(o,r.prototype),o}).apply(null,arguments)}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return o(t,arguments,n(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i(a,t)})(t)}Object.defineProperty(e,"a",{get:function(){return O},enumerable:!0});var s=/%[sdj%]/g;function c(t){if(!t||!t.length)return null;var e={};return t.forEach(function(t){var r=t.field;e[r]=e[r]||[],e[r].push(t)}),e}function u(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=0,o=r.length;return"function"==typeof t?t.apply(null,r):"string"==typeof t?t.replace(s,function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(t){return"[Circular]"}default:return t}}):t}function l(t,e){return null==t||!("array"!==e||!Array.isArray(t)||t.length)||!(!function(t){return"string"===t||"url"===t||"hex"===t||"email"===t||"date"===t||"pattern"===t}(e)||"string"!=typeof t||t)}function d(t,e,r){var n=0,i=t.length;!function o(a){if(a&&a.length)r(a);else{var s=n;n+=1,s<i?e(t[s],o):r([])}}([])}void 0!==t&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0});var f=function(t){var e,r;function n(e,r){var n;return(n=t.call(this,"Async Validation Error")||this).errors=e,n.fields=r,n}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,i(e,r),n}(a(Error));function p(t,e){return function(r){var n,i;return n=t.fullFields?function(t,e){for(var r=t,n=0;n<e.length;n++){if(null==r)return r;r=r[e[n]]}return r}(e,t.fullFields):e[r.field||t.fullField],(i=r)&&void 0!==i.message?(r.field=r.field||t.fullField,r.fieldValue=n,r):{message:"function"==typeof r?r():r,fieldValue:n,field:r.field||t.fullField}}}function h(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];"object"==typeof i&&"object"==typeof t[n]?t[n]=r({},t[n],i):t[n]=i}return t}var _=function(t,e,r,n,i,o){!t.required||r.hasOwnProperty(t.field)&&!l(e,o||t.type)||n.push(u(i.messages.required,t.fullField))},v={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},g={integer:function(t){return g.number(t)&&parseInt(t,10)===t},float:function(t){return g.number(t)&&!g.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch(t){return!1}},date:function(t){return"function"==typeof t.getTime&&"function"==typeof t.getMonth&&"function"==typeof t.getYear&&!isNaN(t.getTime())},number:function(t){return!isNaN(t)&&"number"==typeof t},object:function(t){return"object"==typeof t&&!g.array(t)},method:function(t){return"function"==typeof t},email:function(t){return"string"==typeof t&&t.length<=320&&!!t.match(v.email)},url:function(t){return"string"==typeof t&&t.length<=2048&&!!t.match(v.url)},hex:function(t){return"string"==typeof t&&!!t.match(v.hex)}},m=_,b=function(t,e,r,n,i){if(t.required&&void 0===e)_(t,e,r,n,i);else{var o=t.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?g[o](e)||n.push(u(i.messages.types[o],t.fullField,t.type)):o&&typeof e!==t.type&&n.push(u(i.messages.types[o],t.fullField,t.type))}},y=function(t,e,r,n,i){var o="number"==typeof t.len,a="number"==typeof t.min,s="number"==typeof t.max,c=e,l=null,d="number"==typeof e,f="string"==typeof e,p=Array.isArray(e);if(d?l="number":f?l="string":p&&(l="array"),!l)return!1;p&&(c=e.length),f&&(c=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?c!==t.len&&n.push(u(i.messages[l].len,t.fullField,t.len)):a&&!s&&c<t.min?n.push(u(i.messages[l].min,t.fullField,t.min)):s&&!a&&c>t.max?n.push(u(i.messages[l].max,t.fullField,t.max)):a&&s&&(c<t.min||c>t.max)&&n.push(u(i.messages[l].range,t.fullField,t.min,t.max))},w=function(t,e,r,n,i){t.pattern&&(t.pattern instanceof RegExp?(t.pattern.lastIndex=0,t.pattern.test(e)||n.push(u(i.messages.pattern.mismatch,t.fullField,e,t.pattern))):"string"==typeof t.pattern&&(new RegExp(t.pattern).test(e)||n.push(u(i.messages.pattern.mismatch,t.fullField,e,t.pattern))))},x=function(t,e,r,n,i){var o=t.type,a=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e,o)&&!t.required)return r();m(t,e,n,a,i,o),l(e,o)||b(t,e,n,a,i)}r(a)},E={string:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e,"string")&&!t.required)return r();m(t,e,n,o,i,"string"),l(e,"string")||(b(t,e,n,o,i),y(t,e,0,o,i),w(t,e,0,o,i),!0===t.whitespace&&function(t,e,r,n,i){(/^\s+$/.test(e)||""===e)&&n.push(u(i.messages.whitespace,t.fullField))}(t,e,0,o,i))}r(o)},method:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e)&&!t.required)return r();m(t,e,n,o,i),void 0!==e&&b(t,e,n,o,i)}r(o)},number:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(""===e&&(e=void 0),l(e)&&!t.required)return r();m(t,e,n,o,i),void 0!==e&&(b(t,e,n,o,i),y(t,e,0,o,i))}r(o)},boolean:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e)&&!t.required)return r();m(t,e,n,o,i),void 0!==e&&b(t,e,n,o,i)}r(o)},regexp:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e)&&!t.required)return r();m(t,e,n,o,i),l(e)||b(t,e,n,o,i)}r(o)},integer:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e)&&!t.required)return r();m(t,e,n,o,i),void 0!==e&&(b(t,e,n,o,i),y(t,e,0,o,i))}r(o)},float:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e)&&!t.required)return r();m(t,e,n,o,i),void 0!==e&&(b(t,e,n,o,i),y(t,e,0,o,i))}r(o)},array:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(null==e&&!t.required)return r();m(t,e,n,o,i,"array"),null!=e&&(b(t,e,n,o,i),y(t,e,0,o,i))}r(o)},object:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e)&&!t.required)return r();m(t,e,n,o,i),void 0!==e&&b(t,e,n,o,i)}r(o)},enum:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e)&&!t.required)return r();m(t,e,n,o,i),void 0!==e&&function(t,e,r,n,i){t.enum=Array.isArray(t.enum)?t.enum:[],-1===t.enum.indexOf(e)&&n.push(u(i.messages.enum,t.fullField,t.enum.join(", ")))}(t,e,0,o,i)}r(o)},pattern:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e,"string")&&!t.required)return r();m(t,e,n,o,i),l(e,"string")||w(t,e,0,o,i)}r(o)},date:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e,"date")&&!t.required)return r();var a;m(t,e,n,o,i),l(e,"date")||(a=e instanceof Date?e:new Date(e),b(t,a,n,o,i),a&&y(t,a.getTime(),0,o,i))}r(o)},url:x,hex:x,email:x,required:function(t,e,r,n,i){var o=[],a=Array.isArray(e)?"array":typeof e;m(t,e,n,o,i,a),r(o)},any:function(t,e,r,n,i){var o=[];if(t.required||!t.required&&n.hasOwnProperty(t.field)){if(l(e)&&!t.required)return r();m(t,e,n,o,i)}r(o)}};function k(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var I=k(),O=function(){function t(t){this.rules=null,this._messages=I,this.define(t)}var e=t.prototype;return e.define=function(t){var e=this;if(!t)throw new Error("Cannot configure a schema with no rules");if("object"!=typeof t||Array.isArray(t))throw new Error("Rules must be an object");this.rules={},Object.keys(t).forEach(function(r){var n=t[r];e.rules[r]=Array.isArray(n)?n:[n]})},e.messages=function(t){return t&&(this._messages=h(k(),t)),this._messages},e.validate=function(e,n,i){var o=this;void 0===n&&(n={}),void 0===i&&(i=function(){});var a=e,s=n,l=i;if("function"==typeof s&&(l=s,s={}),!this.rules||0===Object.keys(this.rules).length)return l&&l(null,a),Promise.resolve(a);if(s.messages){var _=this.messages();_===I&&(_=k()),h(_,s.messages),s.messages=_}else s.messages=this.messages();var v={};(s.keys||Object.keys(this.rules)).forEach(function(t){var n=o.rules[t],i=a[t];n.forEach(function(n){var s=n;"function"==typeof s.transform&&(a===e&&(a=r({},a)),i=a[t]=s.transform(i)),(s="function"==typeof s?{validator:s}:r({},s)).validator=o.getValidationMethod(s),s.validator&&(s.field=t,s.fullField=s.fullField||t,s.type=o.getType(s),v[t]=v[t]||[],v[t].push({rule:s,value:i,source:a,field:t}))})});var g={};return function(t,e,r,n,i){if(e.first){var o=new Promise(function(e,o){d(function(t){var e=[];return Object.keys(t).forEach(function(r){e.push.apply(e,t[r]||[])}),e}(t),r,function(t){return n(t),t.length?o(new f(t,c(t))):e(i)})});return o.catch(function(t){return t}),o}var a=!0===e.firstFields?Object.keys(t):e.firstFields||[],s=Object.keys(t),u=s.length,l=0,p=[],h=new Promise(function(e,o){var h=function(t){if(p.push.apply(p,t),++l===u)return n(p),p.length?o(new f(p,c(p))):e(i)};s.length||(n(p),e(i)),s.forEach(function(e){var n=t[e];-1!==a.indexOf(e)?d(n,r,h):function(t,e,r){var n=[],i=0,o=t.length;function a(t){n.push.apply(n,t||[]),++i===o&&r(n)}t.forEach(function(t){e(t,a)})}(n,r,h)})});return h.catch(function(t){return t}),h}(v,s,function(e,n){var i,o=e.rule,c=!("object"!==o.type&&"array"!==o.type||"object"!=typeof o.fields&&"object"!=typeof o.defaultField);function l(t,e){return r({},e,{fullField:o.fullField+"."+t,fullFields:o.fullFields?[].concat(o.fullFields,[t]):[t]})}function d(i){void 0===i&&(i=[]);var d=Array.isArray(i)?i:[i];!s.suppressWarning&&d.length&&t.warning("async-validator:",d),d.length&&void 0!==o.message&&(d=[].concat(o.message));var f=d.map(p(o,a));if(s.first&&f.length)return g[o.field]=1,n(f);if(c){if(o.required&&!e.value)return void 0!==o.message?f=[].concat(o.message).map(p(o,a)):s.error&&(f=[s.error(o,u(s.messages.required,o.field))]),n(f);var h={};o.defaultField&&Object.keys(e.value).map(function(t){h[t]=o.defaultField}),h=r({},h,e.rule.fields);var _={};Object.keys(h).forEach(function(t){var e=h[t],r=Array.isArray(e)?e:[e];_[t]=r.map(l.bind(null,t))});var v=new t(_);v.messages(s.messages),e.rule.options&&(e.rule.options.messages=s.messages,e.rule.options.error=s.error),v.validate(e.value,e.rule.options||s,function(t){var e=[];f&&f.length&&e.push.apply(e,f),t&&t.length&&e.push.apply(e,t),n(e.length?e:null)})}else n(f)}c=c&&(o.required||!o.required&&e.value),o.field=e.field,o.asyncValidator?i=o.asyncValidator(o,e.value,d,e.source,s):o.validator&&(!0===(i=o.validator(o,e.value,d,e.source,s))?d():!1===i?d("function"==typeof o.message?o.message(o.fullField||o.field):o.message||(o.fullField||o.field)+" fails"):i instanceof Array?d(i):i instanceof Error&&d(i.message)),i&&i.then&&i.then(function(){return d()},function(t){return d(t)})},function(t){!function(t){var e=[],r={};function n(t){var r;Array.isArray(t)?e=(r=e).concat.apply(r,t):e.push(t)}for(var i=0;i<t.length;i++)n(t[i]);e.length?(r=c(e),l(e,r)):l(null,a)}(t)},a)},e.getType=function(t){if(void 0===t.type&&t.pattern instanceof RegExp&&(t.type="pattern"),"function"!=typeof t.validator&&t.type&&!E.hasOwnProperty(t.type))throw new Error(u("Unknown rule type %s",t.type));return t.type||"string"},e.getValidationMethod=function(t){if("function"==typeof t.validator)return t.validator;var e=Object.keys(t),r=e.indexOf("message");return-1!==r&&e.splice(r,1),1===e.length&&"required"===e[0]?E.required:E[this.getType(t)]||void 0},t}();O.register=function(t,e){if("function"!=typeof e)throw new Error("Cannot register a validator by type, validator is not a function");E[t]=e},O.warning=function(){},O.messages=I,O.validators=E}).call(this,r(15692))},94265:(t,e,r)=>{r.r(e),r.d(e,{a:()=>o,default:()=>a});const n=r(30275),i=r(19238);function o(t,e){return!e||"object"!==n.a(e)&&"function"!=typeof e?i.a(t):e}const a=o}}]);