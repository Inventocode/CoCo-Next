"use strict";(self.webpackChunkcoco_next=self.webpackChunkcoco_next||[]).push([[7826],{4903:(t,e,n)=>{n.r(e),n.d(e,{a:()=>A,b:()=>b,c:()=>S,d:()=>I,default:()=>T,e:()=>E,f:()=>x,g:()=>w});const r=n(78698),o=n(96540);var i,a,u=(a=(i=o)&&i.__esModule?function(){return i.default}:function(){return i},Object.defineProperty(a,"a",{enumerable:!0,get:a}),a),s=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return Object.defineProperty(e,"a",{enumerable:!0,get:e}),e}(n(11412));const c=n(73393),f=n(81324),_=n(3631),d=n(21272),l=n(7078),h=n(2536);n(17898);const p=n(79955),v=n(78819),y=n(74754);var m=function(t){var e=t.render,n=t.widgetId,r=t.widgetType,i=o.useState(),a=d.a(i,2),s=a[0],c=a[1],f=l.d(),m=l.e(function(t){return t.project.selectedWidgetId}),g=m===n,w=o.useCallback(function(t,e,r,o){f(h.Lg(n,t,e,r,o))},[f,n]),b="coco-widget-wrapper";r!==_.a&&r!==_.c||(b="");var A=p.qb(n);return(null==A?void 0:A.type)&&[_.x,_.A].includes(A.type)&&(b+=" coco-child-widget",r===_.v&&(b+=" coco-child-widget-full"),n===m&&(b+=" coco-child-widget-selected")),u.a.createElement("div",{className:b},s&&u.a.createElement(v.a,s),e(w,function(t,e,r){y.r(n)&&c({target:t,callback:e,options:r})},g))};const g=n(93895);var w=new Map,b=new Map,A=[];function x(t){var e=t.widget,n=t.forceRender,o=t.zIndex,i=void 0===o?0:o;if(n||!e.parentId){var a=y.Db(e.type);if(!a)return null;var f=a.component;if(c.q(e.type)&&!a.isInvisibleWidget){var d=new f(r.a(r.a({},e.attributes),{},{__widgetId:e.id,__widgetType:e.type,__width:e.size.width,__height:e.size.height}));return u.a.createElement(m,{key:e.id,widgetId:e.id,widgetType:e.type,render:function(){return u.a.createElement("div",{id:e.id,style:{position:"absolute",left:e.position.x,top:e.position.y,display:e.visible?"block":"none",width:e.size.width,height:e.size.height,opacity:a.isInvisibleWidget||void 0===e.opacity?void 0:e.opacity/100},className:s()(g.b),"data-role":_.M},u.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",zIndex:1e4}}),d.render())}})}return u.a.createElement(m,{key:e.id,widgetId:e.id,widgetType:e.type,render:function(t,n,r){return u.a.createElement(f,Object.assign({},e,{onChange:t,onEdit:n,zIndex:i,selected:r}))}})}}function S(t,e){var n=y.Cb(t);return n?x({widget:n,forceRender:!0,zIndex:e}):null}function I(t){var e=y.Cb(t);return e?x({widget:e,forceRender:!0}):null}function E(t,e,n,o){var i,a=y.Cb(t);if(!a)return null;var u=f.q(a),s=y.Cb(u.parentId||"");if(!s)return console.error("getParentWidget error"),null;var c=s;if(c.attributes.disabled&&u.type===_.H&&(["titleSlot"].includes(e)?u.attributes.color="#7C7C7C":u.attributes.color="#CACACA"),void 0===n)return x({widget:u,forceRender:!0});var d=null===(i=c.attributes.templateSlotMap[e])||void 0===i?void 0:i.dataBindings;if(o&&d){var l=o[d];u.type===_.H&&(u.attributes.content=l||""),u.type===_.v&&l&&y.Fb(l)&&(u.attributes.fileId=l)}return x({widget:r.a({},u),forceRender:!0})}const T=A},5123:t=>{t.exports={courseMinIcon:"styles_courseMinIcon__1xPhh",close:"styles_close__1sIAC"}},6417:(t,e,n)=>{var r=n(54578),o=n(80345);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var u=0;u<16;++u)e[i+u]=a[u];return e||o(a)}},15556:(t,e,n)=>{n.r(e),n.d(e,{a:()=>ft,default:()=>_t});var r={};Object.defineProperty(r,"notes",{get:function(){return et}}),Object.defineProperty(r,"instruments",{get:function(){return nt}}),Object.defineProperty(r,"set_instrument_by_id",{get:function(){return rt}}),Object.defineProperty(r,"beats_to_duration",{get:function(){return ot}}),Object.defineProperty(r,"duration_to_beats",{get:function(){return it}}),Object.defineProperty(r,"note_id_to_key",{get:function(){return at}}),Object.defineProperty(r,"note_key_to_id",{get:function(){return ut}}),Object.defineProperty(r,"play",{get:function(){return st}}),Object.defineProperty(r,"midi_stop",{get:function(){return ct}});var o,i={"sound_player/ios_webm_error":"该设备暂时不支持播放录音音频","sound_player/block_no_network":"无网络连接，作品中一些积木无法正常运行","voice_detection/not_found_error":"无录音设备，无法进行侦测","voice_detection/pc_permission_error":"未开启声音侦测权限，快去设置吧","voice_detection/no_supported_error":"你的浏览器不支持录音，建议下载最新的谷歌浏览器","voice_detection/ios_wechat_error":"微信端暂不支持声音侦测功能，可以在safari浏览器中运行作品","voice_detection/ios_permission_error":"未获取到录音权限","voice_detection/ios_version_error":"系统版本太低，无法使用声音侦测","voice_detection/android_permission_error":"未获取到录音权限，建议用微信扫一扫打开","record_error/pc_browser_not_support":"你的浏览器不支持录音，建议下载最新的谷歌浏览器","record_error/device_error":"你的电脑没有录音设备，无法录音","record_error/pc_permission_error":"需要开启浏览器录音设备","record_error/pc_other_case":"你的浏览器不支持录音","record_error/ios_permission_error":"未获得录音权限","record_error/ios_other_case":"你的设备不支持录音","record_error/android_permission_error":"未获取到录音权限，建议用微信扫一扫打开","record_error/android_other_case":"你的设备不支持录音","say/not_support":"该浏览器不支持说此类语言"};function a(t){return i[t]?i[t]:t}const u=n(2543);function s(){return!("pc"==(navigator.userAgent.indexOf("iPad")>=0||navigator.userAgent.indexOf("iPhone")>=0?"ios":navigator.userAgent.indexOf("Android")>=0?"android":"pc"))&&(screen.width<425||screen.height<425||navigator.userAgent.indexOf("iPhone")>=0||navigator.userAgent.indexOf("Android")>=0&&navigator.userAgent.indexOf("Mobile")>=0)&&navigator.userAgent.indexOf("iPhone")>=0}var c={audio_recording:!1};function f(){return window.AudioContext=window.AudioContext||window.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,window.URL=window.URL||window.webkitURL,AudioContext&&(navigator.getUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)&&URL&&(c.audio_recording=!0),c}function _(){return navigator.userAgent.indexOf("iPad")>=0||navigator.userAgent.indexOf("iPhone")>=0?"ios":navigator.userAgent.indexOf("Android")>=0?"android":"pc"}function d(){return"pc"===_()}function l(){return"ios"===_()}function h(){return"android"===_()}const p=n(47475);function v(){var t,e,n,r=0,o=[],i=this;function a(){for(var t=0;t<n;t++)o[t]=[]}function u(t,e){for(var n=new Float32Array(e),r=0,o=0;o<t.length;o++)n.set(t[o],r),r+=t[o].length;return n}function s(t,e,n){for(var r=0;r<n.length;r++)t.setUint8(e+r,n.charCodeAt(r))}i.onmessage=function(c){switch(c.data.command){case"init":f=c.data.config,__DEV__&&console.log("WAV Encoding worker init:",f),t=f.record_sample_rate,n=f.num_channels,e=f.target_sample_rate,a();break;case"record":!function(t){for(var e=0;e<n;e++)o[e].push(t[e]);r+=t[0].length}(c.data.buffer);break;case"exportWAV":!function(a){for(var c,f=[],_=0;_<n;_++)f.push(u(o[_],r));c=2===n?function(t,e){for(var n=t.length+e.length,r=new Float32Array(n),o=0,i=0;o<n;)r[o++]=t[i],r[o++]=e[i],i++;return r}(f[0],f[1]):f[0];var d=function(t){var r=new ArrayBuffer(44+2*t.length),o=new DataView(r);return s(o,0,"RIFF"),o.setUint32(4,36+2*t.length,!0),s(o,8,"WAVE"),s(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,n,!0),o.setUint32(24,e,!0),o.setUint32(28,4*e,!0),o.setUint16(32,2*n,!0),o.setUint16(34,16,!0),s(o,36,"data"),o.setUint32(40,2*t.length,!0),function(t,e,n){for(var r=0;r<n.length;r++,e+=2){var o=Math.max(-1,Math.min(1,n[r]));t.setInt16(e,o<0?32768*o:32767*o,!0)}}(o,44,t),o}(function(n){if(e==t)return n;if(e>t)throw new Error("downsampling rate show be smaller than original sample rate");for(var r=t/e,o=Math.round(n.length/r),i=new Float32Array(o),a=0,u=0;a<i.length;){for(var s=Math.round((a+1)*r),c=0,f=0,_=u;_<s&&_<n.length;_++)c+=n[_],f++;i[a]=c/f,a++,u=s}return i}(c)),l=new Blob([d],{type:a});i.postMessage({command:"exportWAV",data:l})}(c.data.mime_type);break;case"getBuffer":!function(){for(var t=[],e=0;e<n;e++)t.push(u(o[e],r));i.postMessage({command:"getBuffer",data:t})}();break;case"clear":r=0,o=[],a()}var f}}var y,m,g,w=function(){function t(t,e){var n=this;this.config={buffer_len:4096,num_channels:2,sample_rate:44100,mime_type:"audio/wav"},this._state="inactive",this.callbacks={getBuffer:[],exportWAV:[]},u.assign(this.config,e),this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,this.config.buffer_len,this.config.num_channels,this.config.num_channels),this.node.onaudioprocess=function(t){if("recording"===n._state){for(var e=[],r=0;r<n.config.num_channels;r++)e.push(t.inputBuffer.getChannelData(r));n.worker.postMessage({command:"record",buffer:e})}},t.connect(this.node),this.node.connect(this.context.destination),this.worker=new p(v,{}),this.worker.postMessage({command:"init",config:{record_sample_rate:this.context.sampleRate,num_channels:this.config.num_channels,target_sample_rate:this.config.sample_rate}}),this.worker.onmessage=function(t){__DEV__&&console.log("WAV Recorder onmessage:",t.data);var e=n.callbacks[t.data.command].pop();"function"==typeof e&&e(t.data.data)}}return Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.clear(),this._state="recording",this.record()},t.prototype.record=function(){this._state="recording"},t.prototype.stop=function(t){this._state="inactive",this.export_wav(t)},t.prototype.clear=function(){this.worker.postMessage({command:"clear"})},t.prototype.getBuffer=function(t){if(!(t=t||this.config.callback))throw new Error("Callback not set");this.callbacks.getBuffer.push(t),this.worker.postMessage({command:"getBuffer"})},t.prototype.export_wav=function(t,e){if(e=e||this.config.mime_type,!(t=t||this.config.callback))throw new Error("Callback not set");this.callbacks.exportWAV.push(t),this.worker.postMessage({command:"exportWAV",mime_type:e})},t}(),b=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},A=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};!function(){function t(t){this.stream=void 0,this.audio_context=void 0,this.on_stop=void 0,this.sample_rate=0,this.num_channels=0,this.blob_chunks=[],__DEV__&&console.log("Recorder Init:",t),u.assign(this,t),__DEV__&&console.log("Recorder Init with SampleRate:",this.sample_rate)}t.prototype.init=function(t){return b(this,void 0,void 0,function(){var e,n,r,o,i=this;return A(this,function(a){switch(a.label){case 0:if(e=f(),n={audio:t||!0},!e.audio_recording)throw d()?this.recorder_noticer("record_error/pc_browser_not_support"):h()?this.recorder_noticer("record_error/android_permission_error"):l()&&this.recorder_noticer("record_error/ios_permission_error"),new ReferenceError("Browser not supported.");if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(n)];case 2:return r=a.sent(),[2,this.create_recorder(r)];case 3:throw o=a.sent(),this.check_failed(o),o;case 4:return[3,6];case 5:return[2,new Promise(function(t,e){navigator.getUserMedia(n,function(e){t(i.create_recorder(e))},function(t){i.check_failed(t),e(t)})})];case 6:return[2]}})})},t.prototype.create_recorder=function(t,e){var n,r=this;if(this.stream=t,"undefined"==typeof MediaRecorder||this.sample_rate||this.num_channels)return __DEV__&&console.log("Use fallback recorder."),this.create_fallback_recorder(t);MediaRecorder.isTypeSupported("audio/webm")&&(n="audio/webm");var o=new MediaRecorder(t,{mimeType:n});return this.media_stream_recorder=o,this.media_stream_recorder.ondataavailable=function(t){r.blob_chunks.push(t.data)},this.media_stream_recorder.onstop=function(){if(!r.media_stream_recorder)throw new Error("Recorder not found!");if(r.media_stream_recorder instanceof MediaRecorder){if(r.on_stop){var t=new Blob(r.blob_chunks,{type:r.media_stream_recorder.mimeType});r.on_stop(t),r.blob_chunks.length=0}delete r.media_stream_recorder,r.dispose().then(function(){__DEV__&&console.log("Stop Recording: Disposed")}).catch(function(t){throw t})}},this.media_stream_recorder},t.prototype.create_fallback_recorder=function(t){var e=this;this.audio_context=new AudioContext;var n=this.audio_context.createMediaStreamSource(t),r={num_channels:this.num_channels,sample_rate:this.sample_rate,callback:function(t){e.on_stop&&(e.on_stop(t),e.media_stream_recorder instanceof w&&(e.media_stream_recorder.worker&&e.media_stream_recorder.worker.terminate(),e.stream&&e.stream.getTracks()[0].stop())),e.remove_recorder()}};return this.media_stream_recorder=new w(n,r),this.media_stream_recorder},t.prototype.start_recording=function(){return b(this,void 0,void 0,function(){return A(this,function(t){switch(t.label){case 0:return this.media_stream_recorder?[3,2]:[4,this.init()];case 1:t.sent(),t.label=2;case 2:return this.media_stream_recorder?(this.media_stream_recorder.start(),[2]):(console.warn("Recorder not prepared."),[2])}})})},t.prototype.stop_recording=function(){this.media_stream_recorder?this.media_stream_recorder.stop():console.warn("You are not recording.")},t.prototype.check_failed=function(t){switch(__DEV__&&console.warn(t.name),t.name){case"DevicesNotFoundError":case"NotFoundError":this.recorder_noticer("record_error/device_error");break;case"PermissionDeniedError":case"PermissionDismissedError":case"NotAllowedError":d()?this.recorder_noticer("record_error/pc_permission_error"):h()?this.recorder_noticer("record_error/android_permission_error"):l()&&this.recorder_noticer("record_error/ios_permission_error");break;default:d()?this.recorder_noticer("record_error/pc_other_case"):h()?this.recorder_noticer("record_error/android_other_case"):l()&&this.recorder_noticer("record_error/ios_other_case")}},t.prototype.recorder_noticer=function(t){a(t)},t.prototype.if_recorder_work=function(){return!!this.media_stream_recorder},t.prototype.is_recording=function(){if(this.media_stream_recorder)return"recording"===this.media_stream_recorder.state},t.prototype.dispose=function(){return b(this,void 0,void 0,function(){return A(this,function(t){switch(t.label){case 0:return this.audio_context?[4,this.audio_context.close()]:[3,2];case 1:t.sent(),delete this.audio_context,t.label=2;case 2:return this.stream&&(this.stream.getTracks()[0].stop(),delete this.stream),[2]}})})},t.prototype.remove_recorder=function(){delete this.media_stream_recorder,this.dispose().then(function(){__DEV__&&console.log("Stop Recording: Disposed")}).catch(function(t){throw t})}}();var x=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},S=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},I=!1,E=!1,T=void 0;function k(){return x(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return E=!1,I=!1,T&&T.getTracks()[0].stop(),m&&(g&&y&&g.disconnect(y.destination),m.disconnect(),m=void 0),y?[4,y.close()]:[3,2];case 1:t.sent(),t.label=2;case 2:return y=void 0,[2]}})})}const M=n(22949),O=n(36924);var z={},D={},B={};function q(t,e,n){void 0===n&&(n=!1);var r=new M.Howl({src:e,html5:!1,format:["mp3","wav"]});return n?D[t]=r:z[t]=r,r}function H(t,e,n,r){var o=O.v4();B[o]=o;var i=document.body,a=document.createElement("audio");a.autoplay=!0,a.src=t,a.style.display="none",a.setAttribute("id","audio"+o),i.appendChild(a),a.addEventListener("error",function(t){n&&n(t)}),a.addEventListener("ended",function(t){e&&e(t)}),a.addEventListener("pause",function(t){r&&r()})}function C(t){return t?D[t]?((e=D[t]).stop(),void e.unload()):void(z[t]?(e=z[t]).stop():console.warn("Howl not Found")):(u.forEach(z,function(t){t.stop()}),u.forEach(D,function(t){t.stop(),t.unload()}),u.forEach(B,function(t,e){var n=document.getElementById("audio"+e);n&&n.pause()}),void(B={}));var e}function R(t){2==t&&a("sound_player/block_no_network")}var L={},P={},j={};function U(t,e,n){void 0===n&&(n=!1);var r=new M.Howl({src:e,html5:!0,format:["mp3","wav"]});return n?P[t]=r:L[t]=r,r}function F(t,e,n,r,o){var i=U(r||O.v4(),t,!0);if(i){if("loaded"===i.state())return void i.play();i.once("load",function(){i.play()}),i.once("loaderror",function(t,e){console.error("Howl Error when Add Sound to Store:",e),G(e),n&&n()}),i.on("end",function(){e&&e(),i.unload()}),i.once("stop",function(){o&&o()})}}function V(t){return t?P[t]?((e=P[t]).stop(),void e.unload()):void(L[t]?(e=L[t]).stop():console.warn("Howl not Found")):(u.forEach(L,function(t){t.stop()}),u.forEach(P,function(t){t.stop(),t.unload()}),u.forEach(j,function(t,e){var n=document.getElementById("audio"+e);n&&n.pause()}),void(j={}));var e}function G(t){2==t&&a("sound_player/block_no_network")}var N={},W={},K={};function X(t,e,n){void 0===n&&(n=!1);var r=new M.Howl({src:e,html5:!1,format:["mp3","wav"]});return n?W[t]=r:N[t]=r,r}function $(t){if(t)if("url"!==t){var e=N[t]||W[t];e?(e.unload(),delete N[t],delete W[t]):console.warn("Howl not Found")}else u.forEach(W,function(t,e){t.unload(),delete W[e]});else console.warn("Sound id no found")}function Y(t){return t?W[t]?((e=W[t]).unload(),void e.stop()):void(N[t]?(e=N[t]).stop():console.warn("Howl not Found")):(u.forEach(N,function(t){t.stop()}),u.forEach(W,function(t){t.stop(),t.unload()}),u.forEach(K,function(t,e){var n=document.getElementById("audio"+e);n&&n.pause()}),void(K={}));var e}function Q(t){2==t&&a("sound_player/block_no_network")}function Z(t,e){return d()?function(t,e){var n=N[t];if(n)return n.rate(e);console.warn("Howl not Found")}(t,e):h()?function(t,e){var n=z[t];return n||console.warn("Howl not Found"),n.rate(e)}(t,e):l()?function(t,e){var n=L[t];return n||console.warn("Howl not Found"),n.rate(e)}(t,e):void 0}function J(t,e){return d()?function(t,e){var n=N[t];if(n)return n.volume(e);console.warn("Howl not Found")}(t,e):h()?function(t,e){var n=z[t];return n||console.warn("Howl not Found"),n.volume(e)}(t,e):l()?function(t,e){var n=L[t];return n||console.warn("Howl not Found"),n.volume(e)}(t,e):void 0}var tt={load:function(t,e,n){return void 0===n&&(n=!1),d()?X(t,e,n):h()?q(t,e,n):l()?U(t,e,n):void 0},unload:function(t){d()?$(t):h()?function(t){if(t){if("url"!==t){var e=z[t];e?(e.unload(),delete z[t]):console.warn("Howl not Found")}}else console.warn("Sound id no found")}(t):l()&&function(t){if(t){if("url"!==t){var e=L[t];e?(e.unload(),delete L[t]):console.warn("Howl not Found")}}else console.warn("Sound id no found")}(t)},play:function(t,e,n,r){d()?function(t,e,n,r){var o=N[t];if(o){"loaded"!==o.state()&&(console.warn("Howl load fail"),e&&e());var i=o.play();o.once("end",function(){e&&e()},i),o.once("loaderror",function(t,e){console.error("Howler Load Error:",e),Q(e),n&&n()}),o.once("stop",function(){r&&r()})}else console.warn("Howl not found")}(t,e,n,r):h()?function(t,e,n,r){var o=z[t];if(!o)return console.warn("Howl not found"),void H(o._src,e,n,r);if("loaded"!==o.state())return console.warn("Howl load fail"),void H(o._src,e,n,r);var i=o.play();o.once("end",function(){e&&e()},i),o.once("stop",function(){r&&r()}),o.once("loaderror",function(t){console.error("Howler Load Error:",t),R(t),n&&n(),H(o._src,e,n)})}(t,e,n,r):l()&&function(t,e,n,r){console.log("play");var o=L[t];if(!o)return F(o._src,e,n),void console.warn("Howl not found");"loaded"!==o.state()&&(console.warn("Howl load fail"),F(o._src,e,n,void 0,r));var i=o.play();o.once("end",function(){e&&e()},i),o.once("loaderror",function(t,i){G(i),n&&n(),F(o._src,e,n,void 0,r)}),o.once("stop",function(){r&&r()})}(t,e,n,r)},play_url:function(t,e,n,r,o){d()?function(t,e,n,r,o){var i=X(r||O.v4(),t,!0);"loaded"===i.state()&&i.play(),i.once("load",function(){i.play()}),i.once("end",function(){$(r),e&&e()}),i.once("stop",function(){o&&o()}),i.once("loaderror",function(t,e){console.error("Howler Load Error:",e),Q(e),n&&n()})}(t,e,n,r,o):h()?function(t,e,n,r,o){var i=q(r||O.v4(),t,!0);if(i){if("loaded"===i.state())return void i.play();i.once("load",function(){i.play()}),i.once("loaderror",function(t,e){console.error("Howl Error when Add Sound to Store:",e),R(e),n&&n()}),i.on("end",function(){e&&e(),i.unload()}),i.once("stop",function(){o&&o()})}}(t,e,n,r,o):l()&&F(t,e,n,r,o)},stop:function(t){d()?Y(t):h()?C(t):l()&&V(t)},is_playing:function(t){return d()?function(t){if(!t)return u.find(N,function(t){return t.playing()});if("url"===t)return u.find(W,function(t){return t.playing()});var e=N[t];if(e)return e.playing();console.warn("Howl not Found")}(t):h()?function(t){if(!t)return u.find(z,function(t){return t.playing()});if("url"!==t){var e=z[t];return e||console.warn("Howl not Found"),e.playing()}}(t):l()?function(t){if(!t)return u.find(L,function(t){return t.playing()});if("url"!==t){var e=L[t];return e||console.warn("Howl not Found"),e.playing()}}(t):void 0},set_rate:Z,set_volume:J,stop_all_audio:function(){d()?Y():h()?C():l()&&V(),k().catch(function(t){console.error(t)})},reset_sound:function(t){for(var e in t)J(t[e].id,t[e].volume),Z(t[e].id,t[e].playback_rate)},get_volume:function(t){return d()?function(t){return N[t].volume()}(t):h()?function(t){return z[t].volume()}(t):l()?function(t){return L[t].volume()}(t):0},get_rate:function(t){return d()?function(t){return N[t].rate()}(t):h()?function(t){return z[t].rate()}(t):l()?function(t){return L[t].rate()}(t):0},get_howl:function(t){return d()?function(t){if(null!=N[t])return N[t]}(t):h()?function(t){if(null!=z[t])return z[t]}(t):l()?function(t){if(null!=L[t])return L[t]}(t):void 0},check_sound:function(t){return d()?function(t){return void 0!==N[t]}(t):h()?function(t){return void 0!==z[t]}(t):l()?function(t){return void 0!==L[t]}(t):void 0}},et=["A0","Bb0","B0","C1","Db1","D1","Eb1","E1","F1","Gb1","G1","Ab1","A1","Bb1","B1","C2","Db2","D2","Eb2","E2","F2","Gb2","G2","Ab2","A2","Bb2","B2","C3","Db3","D3","Eb3","E3","F3","Gb3","G3","Ab3","A3","Bb3","B3","C4","Db4","D4","Eb4","E4","F4","Gb4","G4","Ab4","A4","Bb4","B4","C5","Db5","D5","Eb5","E5","F5","Gb5","G5","Ab5","A5","Bb5","B5","C6","Db6","D6","Eb6","E6","F6","Gb6","G6","Ab6","A6","Bb6","B6","C7","Db7","D7","Eb7","E7","F7","Gb7","G7","Ab7","A7","Bb7","B7","C8"],nt=["piano"];function rt(t){}function ot(t){return u.isNumber(t)?60*t/80:0}function it(t){return t/60*80}function at(t){return et[t]}function ut(t){return u.indexOf(et,t)}function st(t,e){var n=o+"/"+at(t)+".mp3",r=u.uniqueId("midi"),i=tt.load(r,n,!0);if(i){if("loaded"===i.state()){var a=i.play();if(e){var s=ot(e);i.fade(1,.01,s<.2?200:1e3*s,a)}return}i.once("load",function(){var t=i.play();if(e){var n=ot(e);i.fade(1,.01,n<.2?200:1e3*n,t)}}),i.once("loaderror",function(t,e){__DEV__&&console.error("Howl Error when Add Sound to Store:",e)})}return r}function ct(t){tt.stop(t)}var ft={AudioPlayer:tt,MidiPlayer:r,start_volume_measuring:function(t){return x(this,void 0,void 0,function(){var e;return S(this,function(n){return y||(y=new AudioContext),t?E?(__DEV__&&console.warn("Volume measurement is already running."),[2]):(E=!0,I?(__DEV__&&console.warn("Volume measurement is already initialized."),[2,y.resume()]):(e={video:!1,audio:!0},f().audio_recording?(y&&(g=(y.createScriptProcessor||y.createJavaScriptNode).call(y,1024,1,1)).connect(y.destination),navigator.mediaDevices.getUserMedia(e).then(function(e){if(y){m=y.createMediaStreamSource(e),T=e;var n=y.createAnalyser();n.fftSize=1024,n.smoothingTimeConstant=.5,g.onaudioprocess=function(){var e=new Uint8Array(n.frequencyBinCount);n.getByteFrequencyData(e),t&&t(u.round(u.mean(e)))},m.connect(g),m.connect(n),I=!0}}).catch(function(t){switch(t.name){case"PermissionDeniedError":case"NotAllowedError":d()?a("voice_detection/pc_permission_error"):h()?a("voice_detection/android_permission_error"):l()&&a("voice_detection/ios_permission_error");break;case"DevicesNotFoundError":case"NotFoundError":a("voice_detection/not_found_error");break;default:t.name}__DEV__&&console.log(t.name)}),[2]):(navigator.userAgent.indexOf("MicroMessenger")>=0?a("voice_detection/ios_wechat_error"):(s()||!s()&&navigator.userAgent.indexOf("iPad")>=0)&&Number(function(){var t=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);return t?t[1].split("_")[0]:0}())<11?a("voice_detection/ios_version_error"):a("voice_detection/no_supported_error"),__DEV__&&console.log("Browser not support getUserMedia."),[2]))):[2]})})},stop_volume_measuring:k};const _t=ft},17898:()=>{},22949:function(t,e,n){(function(n){var r;!function(){var o=function(){this.init()};o.prototype={init:function(){var t=this||i;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||i;if(t=parseFloat(t),e.ctx||l(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,i.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),o=0;o<r.length;o++){var a=e._howls[n]._soundById(r[o]);a&&a._node&&(a._node.volume=a._volume*t)}return e}return e._volume},mute:function(t){var e=this||i;e.ctx||l(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,i.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),o=0;o<r.length;o++){var a=e._howls[n]._soundById(r[o]);a&&a._node&&(a._node.muted=!!t||a._muted)}return e},stop:function(){for(var t=this||i,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||i,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,l()),t},codecs:function(t){return(this||i)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||i;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||i,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(o||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||i;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function e(n){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,t._releaseHtml5Audio(r)}catch(n){t.noAudio=!0;break}for(var o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var i=t._howls[o]._getSoundIds(),a=0;a<i.length;a++){var u=t._howls[o]._soundById(i[a]);u&&u._node&&!u._node._unlocked&&(u._node._unlocked=!0,u._node.load())}t._autoResume();var s=t.ctx.createBufferSource();s.buffer=t._scratchBuffer,s.connect(t.ctx.destination),void 0===s.start?s.noteOn(0):s.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),s.onended=function(){s.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0);for(var n=0;n<t._howls.length;n++)t._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),t}},_obtainHtml5Audio:function(){var t=this||i;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var e=this||i;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&i.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&i.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then(function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var i=new o,a=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var e=this;return i.ctx||l(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=i.usingWebAudio&&!e._html5,void 0!==i.ctx&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=null;if(i.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var n,r;if(this._format&&this._format[e])n=this._format[e];else{if("string"!=typeof(r=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&i.codecs(n)){t=this._src[e];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new u(this),this._webAudio&&c(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var o=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(o++,r=n._sounds[a]._id);1===o?t=null:r=null}}var u=r?n._soundById(r):n._inactiveSound();if(!u)return null;if(r&&!t&&(t=u._sprite||"__default"),"loaded"!==n._state){u._sprite=t,u._ended=!1;var s=u._id;return n._queue.push({event:"play",action:function(){n.play(s)}}),s}if(r&&!u._paused)return e||n._loadQueue("play"),u._id;n._webAudio&&i._autoResume();var c=Math.max(0,u._seek>0?u._seek:n._sprite[t][0]/1e3),f=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-c),_=1e3*f/Math.abs(u._rate),d=n._sprite[t][0]/1e3,l=(n._sprite[t][0]+n._sprite[t][1])/1e3;u._sprite=t,u._ended=!1;var h=function(){u._paused=!1,u._seek=c,u._start=d,u._stop=l,u._loop=!(!u._loop&&!n._sprite[t][2])};if(!(c>=l)){var p=u._node;if(n._webAudio){var v=function(){n._playLock=!1,h(),n._refreshBuffer(u);var t=u._muted||n._muted?0:u._volume;p.gain.setValueAtTime(t,i.ctx.currentTime),u._playStart=i.ctx.currentTime,void 0===p.bufferSource.start?u._loop?p.bufferSource.noteGrainOn(0,c,86400):p.bufferSource.noteGrainOn(0,c,f):u._loop?p.bufferSource.start(0,c,86400):p.bufferSource.start(0,c,f),_!==1/0&&(n._endTimers[u._id]=setTimeout(n._ended.bind(n,u),_)),e||setTimeout(function(){n._emit("play",u._id),n._loadQueue()},0)};"running"===i.state&&"interrupted"!==i.ctx.state?v():(n._playLock=!0,n.once("resume",v),n._clearTimer(u._id))}else{var y=function(){p.currentTime=c,p.muted=u._muted||n._muted||i._muted||p.muted,p.volume=u._volume*i.volume(),p.playbackRate=u._rate;try{var r=p.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,h(),r.then(function(){n._playLock=!1,p._unlocked=!0,e||(n._emit("play",u._id),n._loadQueue())}).catch(function(){n._playLock=!1,n._emit("playerror",u._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),u._ended=!0,u._paused=!0})):e||(n._playLock=!1,h(),n._emit("play",u._id),n._loadQueue()),p.playbackRate=u._rate,p.paused)return void n._emit("playerror",u._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||u._loop?n._endTimers[u._id]=setTimeout(n._ended.bind(n,u),_):(n._endTimers[u._id]=function(){n._ended(u),p.removeEventListener("ended",n._endTimers[u._id],!1)},p.addEventListener("ended",n._endTimers[u._id],!1))}catch(t){n._emit("playerror",u._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===p.src&&(p.src=n._src,p.load());var m=window&&window.ejecta||!p.readyState&&i._navigator.isCocoonJS;p.readyState>=3||m?y():(n._playLock=!0,p.addEventListener(i._canPlayEvent,function t(){y(),p.removeEventListener(i._canPlayEvent,t,!1)},!1),n._clearTimer(u._id))}return u._id}n._ended(u)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),r=0;r<n.length;r++){e._clearTimer(n[r]);var o=e._soundById(n[r]);if(o&&!o._paused&&(o._seek=e.seek(n[r]),o._rateSeek=0,o._paused=!0,e._stopFade(n[r]),o._node))if(e._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),e._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||e._emit("pause",o?o._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var r=n._getSoundIds(t),o=0;o<r.length;o++){n._clearTimer(r[o]);var i=n._soundById(r[o]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(r[o]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),e||n._emit("stop",i._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),o=0;o<r.length;o++){var a=n._soundById(r[o]);a&&(a._muted=t,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(t?0:a._volume,i.ctx.currentTime):a._node&&(a._node.muted=!!i._muted||t),n._emit("mute",a._id))}return n},volume:function(){var t,e,n,r=this,o=arguments;if(0===o.length)return r._volume;if(1===o.length||2===o.length&&void 0===o[1]?r._getSoundIds().indexOf(o[0])>=0?e=parseInt(o[0],10):t=parseFloat(o[0]):o.length>=2&&(t=parseFloat(o[0]),e=parseInt(o[1],10)),!(void 0!==t&&t>=0&&t<=1))return(n=e?r._soundById(e):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var a=0;a<e.length;a++)(n=r._soundById(e[a]))&&(n._volume=t,o[2]||r._stopFade(e[a]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,i.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*i.volume()),r._emit("volume",n._id));return r},fade:function(t,e,n,r){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(t,e,n,r)}}),o;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),n=parseFloat(n),o.volume(t,r);for(var a=o._getSoundIds(r),u=0;u<a.length;u++){var s=o._soundById(a[u]);if(s){if(r||o._stopFade(a[u]),o._webAudio&&!s._muted){var c=i.ctx.currentTime,f=c+n/1e3;s._volume=t,s._node.gain.setValueAtTime(t,c),s._node.gain.linearRampToValueAtTime(e,f)}o._startFadeInterval(s,t,e,n,a[u],void 0===r)}}return o},_startFadeInterval:function(t,e,n,r,o,i){var a=this,u=e,s=n-e,c=Math.abs(s/.01),f=Math.max(4,c>0?r/c:r),_=Date.now();t._fadeTo=n,t._interval=setInterval(function(){var o=(Date.now()-_)/r;_=Date.now(),u+=s*o,u=Math.round(100*u)/100,u=s<0?Math.max(n,u):Math.min(n,u),a._webAudio?t._volume=u:a.volume(u,t._id,!0),i&&(a._volume=u),(n<e&&u<=n||n>e&&u>=n)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(n,t._id),a._emit("fade",t._id))},f)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,n,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=r._soundById(parseInt(o[0],10)))&&n._loop;t=o[0],r._loop=t}else 2===o.length&&(t=o[0],e=parseInt(o[1],10));for(var i=r._getSoundIds(e),a=0;a<i.length;a++)(n=r._soundById(i[a]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var t,e,n,r=this,o=arguments;if(0===o.length?e=r._sounds[0]._id:1===o.length?r._getSoundIds().indexOf(o[0])>=0?e=parseInt(o[0],10):t=parseFloat(o[0]):2===o.length&&(t=parseFloat(o[0]),e=parseInt(o[1],10)),"number"!=typeof t)return(n=r._soundById(e))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,o)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var a=0;a<e.length;a++)if(n=r._soundById(e[a])){r.playing(e[a])&&(n._rateSeek=r.seek(e[a]),n._playStart=r._webAudio?i.ctx.currentTime:n._playStart),n._rate=t,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,i.ctx.currentTime):n._node&&(n._node.playbackRate=t);var u=r.seek(e[a]),s=1e3*((r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-u)/Math.abs(n._rate);!r._endTimers[e[a]]&&n._paused||(r._clearTimer(e[a]),r._endTimers[e[a]]=setTimeout(r._ended.bind(r,n),s)),r._emit("rate",n._id)}return r},seek:function(){var t,e,n=this,r=arguments;if(0===r.length?e=n._sounds[0]._id:1===r.length?n._getSoundIds().indexOf(r[0])>=0?e=parseInt(r[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(r[0])):2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10)),void 0===e)return n;if("number"==typeof t&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var o=n._soundById(e);if(o){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var a=n.playing(e)?i.ctx.currentTime-o._playStart:0,u=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(u+a*Math.abs(o._rate))}return o._node.currentTime}var s=n.playing(e);s&&n.pause(e,!0),o._seek=t,o._ended=!1,n._clearTimer(e),n._webAudio||!o._node||isNaN(o._node.duration)||(o._node.currentTime=t);var c=function(){n._emit("seek",e),s&&n.play(e,!0)};s&&!n._webAudio?setTimeout(function t(){n._playLock?setTimeout(t,0):c()},0):c()}return n},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this._duration,n=this._soundById(t);return n&&(e=this._sprite[n._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++)e[n]._paused||t.stop(e[n]._id),t._webAudio||(t._clearSound(e[n]._node),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(i._canPlayEvent,e[n]._loadFn,!1),e[n]._node.removeEventListener("ended",e[n]._endFn,!1),i._releaseHtml5Audio(e[n]._node)),delete e[n]._node,t._clearTimer(e[n]._id);var r=i._howls.indexOf(t);r>=0&&i._howls.splice(r,1);var o=!0;for(n=0;n<i._howls.length;n++)if(i._howls[n]._src===t._src||t._src.indexOf(i._howls[n]._src)>=0){o=!1;break}return s&&o&&delete s[t._src],i.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,r){var o=this["_on"+t];return"function"==typeof e&&o.push(r?{id:n,fn:e,once:r}:{id:n,fn:e}),this},off:function(t,e,n){var r=this["_on"+t],o=0;if("number"==typeof e&&(n=e,e=null),e||n)for(o=0;o<r.length;o++){var i=n===r[o].id;if(e===r[o].fn&&i||!e&&i){r.splice(o,1);break}}else if(t)this["_on"+t]=[];else{var a=Object.keys(this);for(o=0;o<a.length;o++)0===a[o].indexOf("_on")&&Array.isArray(this[a[o]])&&(this[a[o]]=[])}return this},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var r=this["_on"+t],o=r.length-1;o>=0;o--)r[o].id&&r[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(this,r[o].fn),0),r[o].once&&this.off(t,r[o].fn,r[o].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var n=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&n&&this.stop(t._id,!0).play(t._id),this._webAudio&&n){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=i.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),r)}return this._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),i._autoSuspend()),this._webAudio||n||this.stop(t._id,!0),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new u(this)},_drain:function(){var t=this._pool,e=0,n=0;if(!(this._sounds.length<t)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&e++;for(n=this._sounds.length-1;n>=0;n--){if(e<=t)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=i.ctx.createBufferSource(),t._node.bufferSource.buffer=s[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,i.ctx.currentTime),this},_cleanBuffer:function(t){var e=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=i._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var u=function(t){this._parent=t,this.init()};u.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++i._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=i._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),this._node.gain.setValueAtTime(e,i.ctx.currentTime),this._node.paused=!0,this._node.connect(i.masterGain)):i.noAudio||(this._node=i._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(i._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=t._src,this._node.preload=!0===t._preload?"auto":t._preload,this._node.volume=e*i.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++i._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(i._canPlayEvent,this._loadFn,!1)},_endListener:function(){var t=this._parent;t._duration===1/0&&(t._duration=Math.ceil(10*this._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var s={},c=function(t){var e=t._src;if(s[e])return t._duration=s[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);_(r.buffer,t)}else{var i=new XMLHttpRequest;i.open(t._xhr.method,e,!0),i.withCredentials=t._xhr.withCredentials,i.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(e){i.setRequestHeader(e,t._xhr.headers[e])}),i.onload=function(){var e=(i.status+"")[0];"0"===e||"2"===e||"3"===e?_(i.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete s[e],t.load())},f(i)}},f=function(t){try{t.send()}catch(e){t.onerror()}},_=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(s[e._src]=t,d(e,t)):n()};"undefined"!=typeof Promise&&1===i.ctx.decodeAudioData.length?i.ctx.decodeAudioData(t).then(r).catch(n):i.ctx.decodeAudioData(t,r,n)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},l=function(){if(i.usingWebAudio){try{"undefined"!=typeof AudioContext?i.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch(t){i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),e=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var r=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!r&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};void 0!==(r=function(){return{Howler:i,Howl:a}}.apply(e,[]))&&(t.exports=r),e.Howler=i,e.Howl=a,void 0!==n?(n.HowlerGlobal=o,n.Howler=i,n.Howl=a,n.Sound=u):"undefined"!=typeof window&&(window.HowlerGlobal=o,window.Howler=i,window.Howl=a,window.Sound=u)}(),function(){var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,n){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof t?this._pos:(this._pos=[t,e,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,n,r,o,i){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,o="number"!=typeof o?a[4]:o,i="number"!=typeof i?a[5]:i,"number"!=typeof t?a:(this._orientation=[t,e,n,r,o,i],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(t,e,n,r,o,i),this)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var i=r._getSoundIds(n),a=0;a<i.length;a++){var u=r._soundById(i[a]);if(u){if("number"!=typeof t)return u._stereo;u._stereo=t,u._pos=[t,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",u._panner&&u._panner.pan||e(u,o),"spatial"===o?void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(t,0,0):u._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",u._id)}}return r},Howl.prototype.pos=function(t,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(t,n,r,o)}}),i;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===o){if("number"!=typeof t)return i._pos;i._pos=[t,n,r]}for(var a=i._getSoundIds(o),u=0;u<a.length;u++){var s=i._soundById(a[u]);if(s){if("number"!=typeof t)return s._pos;s._pos=[t,n,r],s._node&&(s._panner&&!s._panner.pan||e(s,"spatial"),void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):s._panner.setPosition(t,n,r)),i._emit("pos",s._id)}}return i},Howl.prototype.orientation=function(t,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(t,n,r,o)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,r="number"!=typeof r?i._orientation[2]:r,void 0===o){if("number"!=typeof t)return i._orientation;i._orientation=[t,n,r]}for(var a=i._getSoundIds(o),u=0;u<a.length;u++){var s=i._soundById(a[u]);if(s){if("number"!=typeof t)return s._orientation;s._orientation=[t,n,r],s._node&&(s._panner||(s._pos||(s._pos=i._pos||[0,0,-.5]),e(s,"spatial")),void 0!==s._panner.orientationX?(s._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):s._panner.setOrientation(t,n,r)),i._emit("orientation",s._id)}}return i},Howl.prototype.pannerAttr=function(){var t,n,r,o=this,i=arguments;if(!o._webAudio)return o;if(0===i.length)return o._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(r=o._soundById(parseInt(i[0],10)))?r._pannerAttr:o._pannerAttr;t=i[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:o._panningModel})}else 2===i.length&&(t=i[0],n=parseInt(i[1],10));for(var a=o._getSoundIds(n),u=0;u<a.length;u++)if(r=o._soundById(a[u])){var s=r._pannerAttr;s={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:s.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:s.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:s.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:s.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:s.panningModel};var c=r._panner;c?(c.coneInnerAngle=s.coneInnerAngle,c.coneOuterAngle=s.coneOuterAngle,c.coneOuterGain=s.coneOuterGain,c.distanceModel=s.distanceModel,c.maxDistance=s.maxDistance,c.refDistance=s.refDistance,c.rolloffFactor=s.rolloffFactor,c.panningModel=s.panningModel):(r._pos||(r._pos=o._pos||[0,0,-.5]),e(r,"spatial"))}return o},Sound.prototype.init=function(t){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,n(69475))},28079:()=>{},33212:(t,e,n)=>{n.r(e),n.d(e,{a:()=>p,b:()=>l,default:()=>v});const r=n(96540);var o,i,a=(i=(o=r)&&o.__esModule?function(){return o.default}:function(){return o},Object.defineProperty(i,"a",{enumerable:!0,get:i}),i);const u=n(7078),s=n(56241),c=n(96591),f=n(64330),_=n(98497),d=n(2536);var l,h=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return Object.defineProperty(e,"a",{enumerable:!0,get:e}),e}(n(5123)),p="COURSE_ICON_NAME";l=r.memo(function(){var t=u.d(),e=c.a().formatMessage;return a.a.createElement(f.a,{placement:"left",title:e({id:"studyCourseVideo"}),trigger:["hover"]},a.a.createElement("div",{className:h.a.courseMinIcon,onClick:function(){s.a.show(),t(d.ii(p,!1))}},a.a.createElement(_.j,{type:"icon-video"}),a.a.createElement("div",{className:h.a.close,onClick:function(e){e.stopPropagation(),s.a.show(),s.a.close({closeAnimationPos:{x:150,y:30}}),t(d.Gh(p))}},a.a.createElement(_.j,{type:"icon-close"}))))});const v=p},36924:(t,e,n)=>{var r=n(51167),o=n(6417),i=o;i.v1=r,i.v4=o,t.exports=i},47475:function(t,e,n){(function(e){var n=!!(e===e.window&&e.URL&&e.Blob&&e.Worker);function r(t,r){var o,i=this;if(r=r||{},n)return o=t.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new e.Worker(e.URL.createObjectURL(new e.Blob([o],{type:"text/javascript"})));this.self=r,this.self.postMessage=function(t){setTimeout(function(){i.onmessage({data:t})},0)},setTimeout(t.bind(r,r),0)}r.prototype.postMessage=function(t){var e=this;setTimeout(function(){e.self.onmessage({data:t})},0)},t.exports=r}).call(this,n(69475))},51167:(t,e,n)=>{var r,o,i=n(54578),a=n(80345),u=0,s=0;t.exports=function(t,e,n){var c=e&&n||0,f=e||[],_=(t=t||{}).node||r,d=void 0!==t.clockseq?t.clockseq:o;if(null==_||null==d){var l=i();null==_&&(_=r=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==d&&(d=o=16383&(l[6]<<8|l[7]))}var h=void 0!==t.msecs?t.msecs:(new Date).getTime(),p=void 0!==t.nsecs?t.nsecs:s+1,v=h-u+(p-s)/1e4;if(v<0&&void 0===t.clockseq&&(d=d+1&16383),(v<0||h>u)&&void 0===t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=h,s=p,o=d;var y=(1e4*(268435455&(h+=122192928e5))+p)%4294967296;f[c++]=y>>>24&255,f[c++]=y>>>16&255,f[c++]=y>>>8&255,f[c++]=255&y;var m=h/4294967296*1e4&268435455;f[c++]=m>>>8&255,f[c++]=255&m,f[c++]=m>>>24&15|16,f[c++]=m>>>16&255,f[c++]=d>>>8|128,f[c++]=255&d;for(var g=0;g<6;++g)f[c+g]=_[g];return e||a(f)}},54578:t=>{var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var n=new Uint8Array(16);t.exports=function(){return e(n),n}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)3&e||(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},61669:(t,e,n)=>{var r,o,i;n.r(e),n.d(e,{a:()=>s,b:()=>d,c:()=>_,d:()=>l,default:()=>h});const a=n(48096),u=n(65708);var s="icon-widget-table-data",c=u.a("COLUMN"),f=u.a("COLUMN");r={},a.a(r,c,{field:"第1列"}),a.a(r,f,{field:"第2列"});var _=r,d=[(o={rowId:u.a("ROW")},a.a(o,c,""),a.a(o,f,""),o),(i={rowId:u.a("ROW")},a.a(i,c,""),a.a(i,f,""),i)];function l(){var t,e,n,r=u.a("COLUMN"),o=u.a("COLUMN");return{header:(t={},a.a(t,r,{field:"第1列",width:407}),a.a(t,o,{field:"第2列",width:407}),t),data:[(e={rowId:u.a("ROW")},a.a(e,r,""),a.a(e,o,""),e),(n={rowId:u.a("ROW")},a.a(n,r,""),a.a(n,o,""),n)]}}const h=s},78819:function(t,e,n){(function(t){var r,o,i=n(96540),a=(o=(r=i)&&r.__esModule?function(){return r.default}:function(){return r},Object.defineProperty(o,"a",{enumerable:!0,get:o}),o),u=n(43591);n(28079);var s=n(7078),c=n(3631),f=n(65708),_=n(81324);function d(t){return t instanceof HTMLInputElement?t.value:t.innerHTML||""}function l(t){return t.replace(/<div><br><\/div>/g,"\n").replace(/<div>|<br>/g,"\n").replace(/<\/div>/g,"")}function h(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.q.FIXED,r=arguments.length>3?arguments[3]:void 0,o=document.getElementById("COCO_APP_ZONE"),i=getComputedStyle(t);if(o){var a=t.getClientRects()[0],u=a.width,s=a.height,f=a.top,_=a.left,d=o.getClientRects()[0],l=d.top,h=d.left;n&c.q.AUTO_WIDTH?e.style.width="auto":e.style.width=u/r+"px",n&c.q.AUTO_HEIGHT?e.style.height="auto":e.style.height=s/r+"px",e.style.top=(f-l)/r+"px",e.style.left=(_-h)/r+"px",e.style.fontSize=i.fontSize,e.style.color=i.color,e.style.lineHeight=i.lineHeight,e.style.textAlign=i.textAlign,e.style.letterSpacing=i.letterSpacing,e.style.fontFamily=i.fontFamily,e.style.whiteSpace=i.whiteSpace,e.style.display=i.display,e.style.justifyContent=i.justifyContent,e.style.alignItems=i.alignItems,e.style.minWidth=i.minWidth,e.style.maxWidth=i.maxWidth,e.style.minHeight=i.minHeight,e.style.maxHeight=i.maxHeight}}function p(e){var n=e.target,r=e.callback,o=e.options,p=void 0===o?{}:o,v=p.sizeAdaptive,y=void 0===v?c.q.FIXED:v,m=p.maxLength,g=void 0===m?1/0:m,w=p.isMultipleRow,b=void 0===w||w,A=i.useRef(null),x=i.useRef(),S=s.e(function(t){return t.common.stageScale});return i.useEffect(function(){var e=A.current;e&&n&&(x.current=n,h(n,e,y,S),n.style.opacity="0",e.contentEditable="true",e.innerHTML=d(n),t(function(){f.b(e)}))},[r,y,S,n]),i.useEffect(function(){var t=A.current;if(b&&t){var e=_.p(function(t){r(t)},60),n=new u.default(function(){var n=l(t.innerHTML);e(n)});return n.observe(t),function(){n&&n.disconnect(),n=null}}},[r,g,b]),a.a.createElement("div",{className:"coco-widget-editor-div",ref:A,onBlur:function(){var t=A.current;t&&(x.current&&(x.current.style.opacity="1"),t.style.display="none")},onDoubleClick:function(){var t=A.current;t&&f.c(t)},onInput:function(t){var e=A.current;if(e){var n=l(e.innerHTML);n.length>=g&&(e.innerHTML=n.slice(0,g),f.b(e))}},onPaste:function(t){if((null==t?void 0:t.clipboardData)&&document.execCommand){t.preventDefault();var e=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,e)}}})}function v(e){var n=e.target,r=e.callback,o=e.options,u=(void 0===o?{}:o).sizeAdaptive,f=void 0===u?c.q.FIXED:u,_=i.useRef(null),l=i.useRef(),p=s.e(function(t){return t.common.stageScale});return i.useEffect(function(){var e=_.current;if(e&&n){var r=d(n);l.current=n,h(n,e,f,p),n.style.opacity="0",e.contentEditable="true",e.value=r,t(function(){e.selectionEnd=r.length,e.selectionStart=r.length,e.focus()})}},[r,f,p,n]),a.a.createElement("input",{onKeyDown:function(t){13===t.keyCode&&t.currentTarget.blur()},onDoubleClick:function(t){t.target.select()},type:"text",onBlur:function(t){var e=t.target;e&&(l.current&&(l.current.style.opacity="1"),e.style.display="none"),r(t.target.value)},ref:_,className:"coco-widget-editor-input"})}e.a=function(t){var e=t.options,n=(void 0===e?{}:e).isMultipleRow,r=void 0===n||n;return a.a.createElement("div",{className:"coco-widget-editor"},r?a.a.createElement(p,t):a.a.createElement(v,t))}}).call(this,n(1612).setImmediate)},80345:t=>{for(var e=[],n=0;n<256;++n)e[n]=(n+256).toString(16).substr(1);t.exports=function(t,n){var r=n||0,o=e;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}},90150:(t,e,n)=>{n.r(e),n.d(e,{a:()=>i,b:()=>o,default:()=>a});const r=n(13241);function o(t){switch(t){case r.a.CONTAIN:return"contain";case r.a.COVER:return"cover";case r.a.STRETCH:return"fill";default:return"cover"}}function i(t){switch(t){case r.a.CONTAIN:return"contain";case r.a.COVER:return"cover";case r.a.STRETCH:return"100% 100%";default:return"cover"}}const a=i},94584:(t,e)=>{var n={};function r(t){t&&(t.value=!0)}function o(){}function i(t){return void 0===t.size&&(t.size=t.__iterate(u)),t.size}function a(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?i(t)+e:e}function u(){return!0}function s(t,e,n){return(0===t&&!d(t)||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function c(t,e){return _(t,e,0)}function f(t,e){return _(t,e,e)}function _(t,e,n){return void 0===t?n:d(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function d(t){return t<0||0===t&&1/t==-1/0}function l(t){return Boolean(t&&t["@@__IMMUTABLE_ITERABLE__@@"])}function h(t){return Boolean(t&&t["@@__IMMUTABLE_KEYED__@@"])}function p(t){return Boolean(t&&t["@@__IMMUTABLE_INDEXED__@@"])}function v(t){return h(t)||p(t)}var y=function(t){return l(t)?t:R(t)},m=function(t){function e(t){return h(t)?t:L(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(y),g=function(t){function e(t){return p(t)?t:P(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(y),w=function(t){function e(t){return l(t)&&!v(t)?t:j(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(y);function b(t){return Boolean(t&&t["@@__IMMUTABLE_SEQ__@@"])}function A(t){return Boolean(t&&t["@@__IMMUTABLE_RECORD__@@"])}function x(t){return l(t)||A(t)}y.Keyed=m,y.Indexed=g,y.Set=w;var S="@@__IMMUTABLE_ORDERED__@@";function I(t){return Boolean(t&&t[S])}var E="function"==typeof Symbol&&Symbol.iterator,T=E||"@@iterator",k=function(t){this.next=t};function M(t,e,n,r){var o=0===t?e:1===t?n:[e,n];return r?r.value=o:r={value:o,done:!1},r}function O(){return{value:void 0,done:!0}}function z(t){return!!q(t)}function D(t){return t&&"function"==typeof t.next}function B(t){var e=q(t);return e&&e.call(t)}function q(t){var e=t&&(E&&t[E]||t["@@iterator"]);if("function"==typeof e)return e}k.prototype.toString=function(){return"[Iterator]"},k.KEYS=0,k.VALUES=1,k.ENTRIES=2,k.prototype.inspect=k.prototype.toSource=function(){return this.toString()},k.prototype[T]=function(){return this};var H=Object.prototype.hasOwnProperty;function C(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var R=function(t){function e(t){return null==t?N():x(t)?t.toSeq():function(t){var e=X(t);if(e)return e;if("object"==typeof t)return new V(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var n=this._cache;if(n){for(var r=n.length,o=0;o!==r;){var i=n[e?r-++o:o++];if(!1===t(i[1],i[0],this))break}return o}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var n=this._cache;if(n){var r=n.length,o=0;return new k(function(){if(o===r)return{value:void 0,done:!0};var i=n[e?r-++o:o++];return M(t,i[0],i[1])})}return this.__iteratorUncached(t,e)},e}(y),L=function(t){function e(t){return null==t?N().toKeyedSeq():l(t)?h(t)?t.toSeq():t.fromEntrySeq():A(t)?t.toSeq():W(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(R),P=function(t){function e(t){return null==t?N():l(t)?h(t)?t.entrySeq():t.toIndexedSeq():A(t)?t.toSeq().entrySeq():K(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(R),j=function(t){function e(t){return(l(t)&&!v(t)?t:P(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(R);R.isSeq=b,R.Keyed=L,R.Set=j,R.Indexed=P,R.prototype["@@__IMMUTABLE_SEQ__@@"]=!0;var U,F=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[a(this,t)]:e},e.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length,o=0;o!==r;){var i=e?r-++o:o++;if(!1===t(n[i],i,this))break}return o},e.prototype.__iterator=function(t,e){var n=this._array,r=n.length,o=0;return new k(function(){if(o===r)return{value:void 0,done:!0};var i=e?r-++o:o++;return M(t,i,n[i])})},e}(P),V=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return H.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,o=r.length,i=0;i!==o;){var a=r[e?o-++i:i++];if(!1===t(n[a],a,this))break}return i},e.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,o=r.length,i=0;return new k(function(){if(i===o)return{value:void 0,done:!0};var a=r[e?o-++i:i++];return M(t,a,n[a])})},e}(L);V.prototype[S]=!0;var G=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=B(this._collection),r=0;if(D(n))for(var o;!(o=n.next()).done&&!1!==t(o.value,r++,this););return r},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=B(this._collection);if(!D(n))return new k(O);var r=0;return new k(function(){var e=n.next();return e.done?e:M(t,r++,e.value)})},e}(P);function N(){return U||(U=new F([]))}function W(t){var e=Array.isArray(t)?new F(t):z(t)?new G(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new V(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function K(t){var e=X(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function X(t){return C(t)?new F(t):z(t)?new G(t):void 0}function $(t){return Boolean(t&&t["@@__IMMUTABLE_MAP__@@"])}function Y(t){return $(t)&&I(t)}function Q(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function Z(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(Q(t)&&Q(e)&&t.equals(e))}var J="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function tt(t){return t>>>1&1073741824|3221225471&t}var et=Object.prototype.valueOf;function nt(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)e^=t/=4294967295;return tt(e)}(t);case"string":return t.length>ft?function(t){var e=lt[t];return void 0===e&&(e=rt(t),dt===_t&&(dt=0,lt={}),dt++,lt[t]=e),e}(t):rt(t);case"object":case"function":return null===t?1108378658:"function"==typeof t.hashCode?tt(t.hashCode(t)):(t.valueOf!==et&&"function"==typeof t.valueOf&&(t=t.valueOf(t)),function(t){var e;if(ut&&void 0!==(e=ot.get(t)))return e;if(void 0!==(e=t[ct]))return e;if(!at){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[ct]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++st,1073741824&st&&(st=0),ut)ot.set(t,e);else{if(void 0!==it&&!1===it(t))throw new Error("Non-extensible objects are not allowed as keys.");if(at)Object.defineProperty(t,ct,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[ct]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[ct]=e}}return e}(t));case"undefined":return 1108378659;default:if("function"==typeof t.toString)return rt(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function rt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return tt(e)}var ot,it=Object.isExtensible,at=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),ut="function"==typeof WeakMap;ut&&(ot=new WeakMap);var st=0,ct="__immutablehash__";"function"==typeof Symbol&&(ct=Symbol(ct));var ft=16,_t=255,dt=0,lt={},ht=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=wt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var n=this,r=gt(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e,r){return t(e,r,n)},e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(L);ht.prototype[S]=!0;var pt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this,r=0;return e&&i(this),this._iter.__iterate(function(o){return t(o,e?n.size-++r:r++,n)},e)},e.prototype.__iterator=function(t,e){var n=this,r=this._iter.__iterator(1,e),o=0;return e&&i(this),new k(function(){var i=r.next();return i.done?i:M(t,e?n.size-++o:o++,i.value,i)})},e}(P),vt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new k(function(){var e=n.next();return e.done?e:M(t,e.value,e.value,e)})},e}(j),yt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Ot(e);var r=l(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new k(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Ot(r);var o=l(r);return M(t,o?r.get(0):r[0],o?r.get(1):r[1],e)}}})},e}(L);function mt(t){var e=Dt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Bt,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return!1!==e(n,t,r)},n)},e.__iteratorUncached=function(e,n){if(2===e){var r=t.__iterator(e,n);return new k(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(1===e?0:1,n)},e}function gt(t,e,r){var o=Dt(t);return o.size=t.size,o.has=function(e){return t.has(e)},o.get=function(o,i){var a=t.get(o,n);return a===n?i:e.call(r,a,o,t)},o.__iterateUncached=function(n,o){var i=this;return t.__iterate(function(t,o,a){return!1!==n(e.call(r,t,o,a),o,i)},o)},o.__iteratorUncached=function(n,o){var i=t.__iterator(2,o);return new k(function(){var o=i.next();if(o.done)return o;var a=o.value,u=a[0];return M(n,u,e.call(r,a[1],u,t),o)})},o}function wt(t,e){var n=this,r=Dt(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=mt(t);return e.reverse=function(){return t.flip()},e}),r.get=function(n,r){return t.get(e?n:-1-n,r)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(e){return t.includes(e)},r.cacheResult=Bt,r.__iterate=function(n,r){var o=this,a=0;return r&&i(t),t.__iterate(function(t,i){return n(t,e?i:r?o.size-++a:a++,o)},!r)},r.__iterator=function(r,o){var a=0;o&&i(t);var u=t.__iterator(2,!o);return new k(function(){var t=u.next();if(t.done)return t;var i=t.value;return M(r,e?i[0]:o?n.size-++a:a++,i[1],t)})},r}function bt(t,e,r,o){var i=Dt(t);return o&&(i.has=function(o){var i=t.get(o,n);return i!==n&&!!e.call(r,i,o,t)},i.get=function(o,i){var a=t.get(o,n);return a!==n&&e.call(r,a,o,t)?a:i}),i.__iterateUncached=function(n,i){var a=this,u=0;return t.__iterate(function(t,i,s){if(e.call(r,t,i,s))return u++,n(t,o?i:u-1,a)},i),u},i.__iteratorUncached=function(n,i){var a=t.__iterator(2,i),u=0;return new k(function(){for(;;){var i=a.next();if(i.done)return i;var s=i.value,c=s[0],f=s[1];if(e.call(r,f,c,t))return M(n,o?c:u++,f,i)}})},i}function At(t,e,n,r){var o=t.size;if(s(e,n,o))return t;var i,u=c(e,o),_=f(n,o);if(u!=u||_!=_)return At(t.toSeq().cacheResult(),e,n,r);var d=_-u;d==d&&(i=d<0?0:d);var l=Dt(t);return l.size=0===i?i:t.size&&i||void 0,!r&&b(t)&&i>=0&&(l.get=function(e,n){return(e=a(this,e))>=0&&e<i?t.get(e+u,n):n}),l.__iterateUncached=function(e,n){var o=this;if(0===i)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,s=!0,c=0;return t.__iterate(function(t,n){if(!s||!(s=a++<u))return c++,!1!==e(t,r?n:c-1,o)&&c!==i}),c},l.__iteratorUncached=function(e,n){if(0!==i&&n)return this.cacheResult().__iterator(e,n);if(0===i)return new k(O);var o=t.__iterator(e,n),a=0,s=0;return new k(function(){for(;a++<u;)o.next();if(++s>i)return{value:void 0,done:!0};var t=o.next();return r||1===e||t.done?t:M(e,s-1,0===e?void 0:t.value[1],t)})},l}function xt(t,e,n,r){var o=Dt(t);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var u=!0,s=0;return t.__iterate(function(t,i,c){if(!u||!(u=e.call(n,t,i,c)))return s++,o(t,r?i:s-1,a)}),s},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var u=t.__iterator(2,i),s=!0,c=0;return new k(function(){var t,i,f;do{if((t=u.next()).done)return r||1===o?t:M(o,c++,0===o?void 0:t.value[1],t);var _=t.value;i=_[0],f=_[1],s&&(s=e.call(n,f,i,a))}while(s);return 2===o?t:M(o,i,f,t)})},o}function St(t,e,n){var r=Dt(t);return r.__iterateUncached=function(o,i){if(i)return this.cacheResult().__iterate(o,i);var a=0,u=!1;return function t(s,c){s.__iterate(function(i,s){return(!e||c<e)&&l(i)?t(i,c+1):(a++,!1===o(i,n?s:a-1,r)&&(u=!0)),!u},i)}(t,0),a},r.__iteratorUncached=function(r,o){if(o)return this.cacheResult().__iterator(r,o);var i=t.__iterator(r,o),a=[],u=0;return new k(function(){for(;i;){var t=i.next();if(!1===t.done){var s=t.value;if(2===r&&(s=s[1]),e&&!(a.length<e)||!l(s))return n?t:M(r,u++,s,t);a.push(i),i=s.__iterator(r,o)}else i=a.pop()}return{value:void 0,done:!0}})},r}function It(t,e,n){e||(e=qt);var r=h(t),o=0,i=t.toSeq().map(function(e,r){return[r,e,o++,n?n(e,r,t):e]}).valueSeq().toArray();return i.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){i[e].length=2}:function(t,e){i[e]=t[1]}),r?L(i):p(t)?P(i):j(i)}function Et(t,e,n){if(e||(e=qt),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return Tt(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return Tt(e,t,n)?n:t})}function Tt(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function kt(t,e,n,r){var o=Dt(t),i=new F(n).map(function(t){return t.size});return o.size=r?i.max():i.min(),o.__iterate=function(t,e){for(var n,r=this.__iterator(1,e),o=0;!(n=r.next()).done&&!1!==t(n.value,o++,this););return o},o.__iteratorUncached=function(t,o){var i=n.map(function(t){return t=y(t),B(o?t.reverse():t)}),a=0,u=!1;return new k(function(){var n;return u||(n=i.map(function(t){return t.next()}),u=r?n.every(function(t){return t.done}):n.some(function(t){return t.done})),u?{value:void 0,done:!0}:M(t,a++,e.apply(null,n.map(function(t){return t.value})))})},o}function Mt(t,e){return t===e?t:b(t)?e:t.constructor(e)}function Ot(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function zt(t){return h(t)?m:p(t)?g:w}function Dt(t){return Object.create((h(t)?L:p(t)?P:j).prototype)}function Bt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):R.prototype.cacheResult.call(this)}function qt(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Ht(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),o=0;o<n;o++)r[o]=t[o+e];return r}function Ct(t,e){if(!t)throw new Error(e)}function Rt(t){Ct(t!==1/0,"Cannot perform this action with an infinite size.")}function Lt(t){if(C(t)&&"string"!=typeof t)return t;if(I(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function Pt(t){return t&&("function"!=typeof t.constructor||"Object"===t.constructor.name)}function jt(t){return"object"==typeof t&&(x(t)||Array.isArray(t)||Pt(t))}function Ut(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function Ft(t,e){return x(t)?t.has(e):jt(t)&&H.call(t,e)}function Vt(t,e,n){return x(t)?t.get(e,n):Ft(t,e)?"function"==typeof t.get?t.get(e):t[e]:n}function Gt(t){if(Array.isArray(t))return Ht(t);var e={};for(var n in t)H.call(t,n)&&(e[n]=t[n]);return e}function Nt(t,e){if(!jt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(x(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!H.call(t,e))return t;var n=Gt(t);return Array.isArray(n)?n.splice(e,1):delete n[e],n}function Wt(t,e,n){if(!jt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(x(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,n)}if(H.call(t,e)&&n===t[e])return t;var r=Gt(t);return r[e]=n,r}function Kt(t,e,r,o){o||(o=r,r=void 0);var i=function t(e,r,o,i,a,u){var s=r===n;if(i===o.length){var c=s?a:r,f=u(c);return f===c?r:f}if(!s&&!jt(r))throw new TypeError("Cannot update within non-data-structure value in path ["+o.slice(0,i).map(Ut)+"]: "+r);var _=o[i],d=s?n:Vt(r,_,n),l=t(d===n?e:x(d),d,o,i+1,a,u);return l===d?r:l===n?Nt(r,_):Wt(s?e?Ee():{}:r,_,l)}(x(t),t,Lt(e),0,r,o);return i===n?r:i}function Xt(t,e,r){return Kt(t,e,n,function(){return r})}function $t(t,e){return Xt(this,t,e)}function Yt(t,e){return Kt(t,e,function(){return n})}function Qt(t){return Yt(this,t)}function Zt(t,e,n,r){return Kt(t,[e],n,r)}function Jt(t,e,n){return 1===arguments.length?t(this):Zt(this,t,e,n)}function te(t,e,n){return Kt(this,t,e,n)}function ee(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return re(this,t)}function ne(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return re(this,e,t)}function re(t,e,r){for(var o=[],i=0;i<e.length;i++){var a=m(e[i]);0!==a.size&&o.push(a)}return 0===o.length?t:0!==t.toSeq().size||t.__ownerID||1!==o.length?t.withMutations(function(t){for(var e=r?function(e,o){Zt(t,o,n,function(t){return t===n?e:r(t,e,o)})}:function(e,n){t.set(n,e)},i=0;i<o.length;i++)o[i].forEach(e)}):t.constructor(o[0])}function oe(t,e,n){return ie(t,e,function(t){return function e(n,r,o){return jt(n)&&jt(r)?ie(n,[r],e):t?t(n,r,o):r}}(n))}function ie(t,e,n){if(!jt(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(x(t))return"function"==typeof n&&t.mergeWith?t.mergeWith.apply(t,[n].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var r=Array.isArray(t),o=t,i=r?g:m,a=r?function(e){o===t&&(o=Gt(o)),o.push(e)}:function(e,r){var i=H.call(o,r),a=i&&n?n(o[r],e,r):e;i&&a===o[r]||(o===t&&(o=Gt(o)),o[r]=a)},u=0;u<e.length;u++)i(e[u]).forEach(a);return o}function ae(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return oe(this,t)}function ue(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return oe(this,e,t)}function se(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Kt(this,t,Ee(),function(t){return ie(t,e)})}function ce(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Kt(this,t,Ee(),function(t){return oe(t,e)})}function fe(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function _e(){return this.__ownerID?this:this.__ensureOwner(new o)}function de(){return this.__ensureOwner()}function le(){return this.__altered}pt.prototype.cacheResult=ht.prototype.cacheResult=vt.prototype.cacheResult=yt.prototype.cacheResult=Bt;var he=function(t){function e(e){return null==e?Ee():$(e)&&!I(e)?e:Ee().withMutations(function(n){var r=t(e);Rt(r.size),r.forEach(function(t,e){return n.set(e,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ee().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return Te(this,t,e)},e.prototype.remove=function(t){return Te(this,t,n)},e.prototype.deleteAll=function(t){var e=y(t);return 0===e.size?this:this.withMutations(function(t){e.forEach(function(e){return t.remove(e)})})},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ee()},e.prototype.sort=function(t){return Qe(It(this,t))},e.prototype.sortBy=function(t,e){return Qe(It(this,e,t))},e.prototype.map=function(t,e){return this.withMutations(function(n){n.forEach(function(r,o){n.set(o,t.call(e,r,o,n))})})},e.prototype.__iterator=function(t,e){return new Ae(this,t,e)},e.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ie(this.size,this._root,t,this.__hash):0===this.size?Ee():(this.__ownerID=t,this.__altered=!1,this)},e}(m);he.isMap=$;var pe=he.prototype;pe["@@__IMMUTABLE_MAP__@@"]=!0,pe.delete=pe.remove,pe.removeAll=pe.deleteAll,pe.setIn=$t,pe.removeIn=pe.deleteIn=Qt,pe.update=Jt,pe.updateIn=te,pe.merge=pe.concat=ee,pe.mergeWith=ne,pe.mergeDeep=ae,pe.mergeDeepWith=ue,pe.mergeIn=se,pe.mergeDeepIn=ce,pe.withMutations=fe,pe.wasAltered=le,pe.asImmutable=de,pe["@@transducer/init"]=pe.asMutable=_e,pe["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},pe["@@transducer/result"]=function(t){return t.asImmutable()};var ve=function(t,e){this.ownerID=t,this.entries=e};ve.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(Z(n,o[i][0]))return o[i][1];return r},ve.prototype.update=function(t,e,i,a,u,s,c){for(var f=u===n,_=this.entries,d=0,l=_.length;d<l&&!Z(a,_[d][0]);d++);var h=d<l;if(h?_[d][1]===u:f)return this;if(r(c),!f&&h||r(s),!f||1!==_.length){if(!h&&!f&&_.length>=Be)return function(t,e,n,r){t||(t=new o);for(var i=new be(t,nt(n),[n,r]),a=0;a<e.length;a++){var u=e[a];i=i.update(t,0,void 0,u[0],u[1])}return i}(t,_,a,u);var p=t&&t===this.ownerID,v=p?_:Ht(_);return h?f?d===l-1?v.pop():v[d]=v.pop():v[d]=[a,u]:v.push([a,u]),p?(this.entries=v,this):new ve(t,v)}};var ye=function(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n};ye.prototype.get=function(t,e,n,r){void 0===e&&(e=nt(n));var o=1<<(31&(0===t?e:e>>>t)),i=this.bitmap;return 0===(i&o)?r:this.nodes[ze(i&o-1)].get(t+5,e,n,r)},ye.prototype.update=function(t,e,r,o,i,a,u){void 0===r&&(r=nt(o));var s=31&(0===e?r:r>>>e),c=1<<s,f=this.bitmap,_=0!==(f&c);if(!_&&i===n)return this;var d=ze(f&c-1),l=this.nodes,h=_?l[d]:void 0,p=ke(h,t,e+5,r,o,i,a,u);if(p===h)return this;if(!_&&p&&l.length>=qe)return function(t,e,n,r,o){for(var i=0,a=new Array(32),u=0;0!==n;u++,n>>>=1)a[u]=1&n?e[i++]:void 0;return a[r]=o,new me(t,i+1,a)}(t,l,f,s,p);if(_&&!p&&2===l.length&&Me(l[1^d]))return l[1^d];if(_&&p&&1===l.length&&Me(p))return p;var v=t&&t===this.ownerID,y=_?p?f:f^c:f|c,m=_?p?De(l,d,p,v):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var o=new Array(r),i=0,a=0;a<r;a++)a===e&&(i=1),o[a]=t[a+i];return o}(l,d,v):function(t,e,n,r){var o=t.length+1;if(r&&e+1===o)return t[e]=n,t;for(var i=new Array(o),a=0,u=0;u<o;u++)u===e?(i[u]=n,a=-1):i[u]=t[u+a];return i}(l,d,p,v);return v?(this.bitmap=y,this.nodes=m,this):new ye(t,y,m)};var me=function(t,e,n){this.ownerID=t,this.count=e,this.nodes=n};me.prototype.get=function(t,e,n,r){void 0===e&&(e=nt(n));var o=31&(0===t?e:e>>>t),i=this.nodes[o];return i?i.get(t+5,e,n,r):r},me.prototype.update=function(t,e,r,o,i,a,u){void 0===r&&(r=nt(o));var s=31&(0===e?r:r>>>e),c=i===n,f=this.nodes,_=f[s];if(c&&!_)return this;var d=ke(_,t,e+5,r,o,i,a,u);if(d===_)return this;var l=this.count;if(_){if(!d&&--l<He)return function(t,e,n,r){for(var o=0,i=0,a=new Array(n),u=0,s=1,c=e.length;u<c;u++,s<<=1){var f=e[u];void 0!==f&&u!==r&&(o|=s,a[i++]=f)}return new ye(t,o,a)}(t,f,l,s)}else l++;var h=t&&t===this.ownerID,p=De(f,s,d,h);return h?(this.count=l,this.nodes=p,this):new me(t,l,p)};var ge=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n};ge.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(Z(n,o[i][0]))return o[i][1];return r},ge.prototype.update=function(t,e,o,i,a,u,s){void 0===o&&(o=nt(i));var c=a===n;if(o!==this.keyHash)return c?this:(r(s),r(u),Oe(this,t,e,o,[i,a]));for(var f=this.entries,_=0,d=f.length;_<d&&!Z(i,f[_][0]);_++);var l=_<d;if(l?f[_][1]===a:c)return this;if(r(s),!c&&l||r(u),c&&2===d)return new be(t,this.keyHash,f[1^_]);var h=t&&t===this.ownerID,p=h?f:Ht(f);return l?c?_===d-1?p.pop():p[_]=p.pop():p[_]=[i,a]:p.push([i,a]),h?(this.entries=p,this):new ge(t,this.keyHash,p)};var we,be=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n};be.prototype.get=function(t,e,n,r){return Z(n,this.entry[0])?this.entry[1]:r},be.prototype.update=function(t,e,o,i,a,u,s){var c=a===n,f=Z(i,this.entry[0]);return(f?a===this.entry[1]:c)?this:(r(s),c?void r(u):f?t&&t===this.ownerID?(this.entry[1]=a,this):new be(t,this.keyHash,[i,a]):(r(u),Oe(this,t,e,nt(i),[i,a])))},ve.prototype.iterate=ge.prototype.iterate=function(t,e){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===t(n[e?o-r:r]))return!1},ye.prototype.iterate=me.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var i=n[e?o-r:r];if(i&&!1===i.iterate(t,e))return!1}},be.prototype.iterate=function(t,e){return t(this.entry)};var Ae=function(t){function e(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Se(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n=e.node,r=e.index++,o=void 0;if(n.entry){if(0===r)return xe(t,n.entry)}else if(n.entries){if(r<=(o=n.entries.length-1))return xe(t,n.entries[this._reverse?o-r:r])}else if(r<=(o=n.nodes.length-1)){var i=n.nodes[this._reverse?o-r:r];if(i){if(i.entry)return xe(t,i.entry);e=this._stack=Se(i,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(k);function xe(t,e){return M(t,e[0],e[1])}function Se(t,e){return{node:t,index:0,__prev:e}}function Ie(t,e,n,r){var o=Object.create(pe);return o.size=t,o._root=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Ee(){return we||(we=Ie(0))}function Te(t,e,r){var o,i;if(t._root){var a={value:!1},u={value:!1};if(o=ke(t._root,t.__ownerID,0,void 0,e,r,a,u),!u.value)return t;i=t.size+(a.value?r===n?-1:1:0)}else{if(r===n)return t;i=1,o=new ve(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=o,t.__hash=void 0,t.__altered=!0,t):o?Ie(i,o):Ee()}function ke(t,e,o,i,a,u,s,c){return t?t.update(e,o,i,a,u,s,c):u===n?t:(r(c),r(s),new be(e,i,[a,u]))}function Me(t){return t.constructor===be||t.constructor===ge}function Oe(t,e,n,r,o){if(t.keyHash===r)return new ge(e,r,[t.entry,o]);var i,a=31&(0===n?t.keyHash:t.keyHash>>>n),u=31&(0===n?r:r>>>n),s=a===u?[Oe(t,e,n+5,r,o)]:(i=new be(e,r,o),a<u?[t,i]:[i,t]);return new ye(e,1<<a|1<<u,s)}function ze(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function De(t,e,n,r){var o=r?t:Ht(t);return o[e]=n,o}var Be=8,qe=16,He=8;function Ce(t){return Boolean(t&&t["@@__IMMUTABLE_LIST__@@"])}var Re=function(t){function e(e){var n=Ne();if(null==e)return n;if(Ce(e))return e;var r=t(e),o=r.size;return 0===o?n:(Rt(o),o>0&&o<32?Ge(0,o,5,null,new je(r.toArray())):n.withMutations(function(t){t.setSize(o),r.forEach(function(e,n){return t.set(n,e)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=a(this,t))>=0&&t<this.size){var n=Xe(this,t+=this._origin);return n&&n.array[31&t]}return e},e.prototype.set=function(t,e){return function(t,e,n){if((e=a(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?$e(t,e).set(0,n):$e(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,o=t._root,i={value:!1};return e>=Ye(t._capacity)?r=We(r,t.__ownerID,0,e,n,i):o=We(o,t.__ownerID,t._level,e,n,i),i.value?t.__ownerID?(t._root=o,t._tail=r,t.__hash=void 0,t.__altered=!0,t):Ge(t._origin,t._capacity,t._level,o,r):t}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ne()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){$e(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},e.prototype.pop=function(){return $e(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){$e(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},e.prototype.shift=function(){return $e(this,1)},e.prototype.concat=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++){var o=e[r],i=t("string"!=typeof o&&z(o)?o:[o]);0!==i.size&&n.push(i)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations(function(t){n.forEach(function(e){return e.forEach(function(e){return t.push(e)})})}):this.constructor(n[0])},e.prototype.setSize=function(t){return $e(this,0,t)},e.prototype.map=function(t,e){var n=this;return this.withMutations(function(r){for(var o=0;o<n.size;o++)r.set(o,t.call(e,r.get(o),o,r))})},e.prototype.slice=function(t,e){var n=this.size;return s(t,e,n)?this:$e(this,c(t,n),f(e,n))},e.prototype.__iterator=function(t,e){var n=e?this.size:0,r=Ve(this,e);return new k(function(){var o=r();return o===Fe?{value:void 0,done:!0}:M(t,e?--n:n++,o)})},e.prototype.__iterate=function(t,e){for(var n,r=e?this.size:0,o=Ve(this,e);(n=o())!==Fe&&!1!==t(n,e?--r:r++,this););return r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ge(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?Ne():(this.__ownerID=t,this.__altered=!1,this)},e}(g);Re.isList=Ce;var Le=Re.prototype;Le["@@__IMMUTABLE_LIST__@@"]=!0,Le.delete=Le.remove,Le.merge=Le.concat,Le.setIn=$t,Le.deleteIn=Le.removeIn=Qt,Le.update=Jt,Le.updateIn=te,Le.mergeIn=se,Le.mergeDeepIn=ce,Le.withMutations=fe,Le.wasAltered=le,Le.asImmutable=de,Le["@@transducer/init"]=Le.asMutable=_e,Le["@@transducer/step"]=function(t,e){return t.push(e)},Le["@@transducer/result"]=function(t){return t.asImmutable()};var Pe,je=function(t,e){this.array=t,this.ownerID=e};je.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r,o=n>>>e&31;if(o>=this.array.length)return new je([],t);var i=0===o;if(e>0){var a=this.array[o];if((r=a&&a.removeBefore(t,e-5,n))===a&&i)return this}if(i&&!r)return this;var u=Ke(this,t);if(!i)for(var s=0;s<o;s++)u.array[s]=void 0;return r&&(u.array[o]=r),u},je.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,o=n-1>>>e&31;if(o>=this.array.length)return this;if(e>0){var i=this.array[o];if((r=i&&i.removeAfter(t,e-5,n))===i&&o===this.array.length-1)return this}var a=Ke(this,t);return a.array.splice(o+1),r&&(a.array[o]=r),a};var Ue,Fe={};function Ve(t,e){var n=t._origin,r=t._capacity,o=Ye(r),i=t._tail;return function t(a,u,s){return 0===u?function(t,a){var u=a===o?i&&i.array:t&&t.array,s=a>n?0:n-a,c=r-a;return c>32&&(c=32),function(){if(s===c)return Fe;var t=e?--c:s++;return u&&u[t]}}(a,s):function(o,i,a){var u,s=o&&o.array,c=a>n?0:n-a>>i,f=1+(r-a>>i);return f>32&&(f=32),function(){for(;;){if(u){var n=u();if(n!==Fe)return n;u=null}if(c===f)return Fe;var r=e?--f:c++;u=t(s&&s[r],i-5,a+(r<<i))}}}(a,u,s)}(t._root,t._level,0)}function Ge(t,e,n,r,o,i,a){var u=Object.create(Le);return u.size=e-t,u._origin=t,u._capacity=e,u._level=n,u._root=r,u._tail=o,u.__ownerID=i,u.__hash=a,u.__altered=!1,u}function Ne(){return Pe||(Pe=Ge(0,0,5))}function We(t,e,n,o,i,a){var u,s=o>>>n&31,c=t&&s<t.array.length;if(!c&&void 0===i)return t;if(n>0){var f=t&&t.array[s],_=We(f,e,n-5,o,i,a);return _===f?t:((u=Ke(t,e)).array[s]=_,u)}return c&&t.array[s]===i?t:(a&&r(a),u=Ke(t,e),void 0===i&&s===u.array.length-1?u.array.pop():u.array[s]=i,u)}function Ke(t,e){return e&&t&&e===t.ownerID?t:new je(t?t.array.slice():[],e)}function Xe(t,e){if(e>=Ye(t._capacity))return t._tail;if(e<1<<t._level+5){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&31],r-=5;return n}}function $e(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new o,i=t._origin,a=t._capacity,u=i+e,s=void 0===n?a:n<0?a+n:i+n;if(u===i&&s===a)return t;if(u>=s)return t.clear();for(var c=t._level,f=t._root,_=0;u+_<0;)f=new je(f&&f.array.length?[void 0,f]:[],r),_+=1<<(c+=5);_&&(u+=_,i+=_,s+=_,a+=_);for(var d=Ye(a),l=Ye(s);l>=1<<c+5;)f=new je(f&&f.array.length?[f]:[],r),c+=5;var h=t._tail,p=l<d?Xe(t,s-1):l>d?new je([],r):h;if(h&&l>d&&u<a&&h.array.length){for(var v=f=Ke(f,r),y=c;y>5;y-=5){var m=d>>>y&31;v=v.array[m]=Ke(v.array[m],r)}v.array[d>>>5&31]=h}if(s<a&&(p=p&&p.removeAfter(r,0,s)),u>=l)u-=l,s-=l,c=5,f=null,p=p&&p.removeBefore(r,0,u);else if(u>i||l<d){for(_=0;f;){var g=u>>>c&31;if(g!==l>>>c&31)break;g&&(_+=(1<<c)*g),c-=5,f=f.array[g]}f&&u>i&&(f=f.removeBefore(r,c,u-_)),f&&l<d&&(f=f.removeAfter(r,c,l-_)),_&&(u-=_,s-=_)}return t.__ownerID?(t.size=s-u,t._origin=u,t._capacity=s,t._level=c,t._root=f,t._tail=p,t.__hash=void 0,t.__altered=!0,t):Ge(u,s,c,f,p)}function Ye(t){return t<32?0:t-1>>>5<<5}var Qe=function(t){function e(t){return null==t?Je():Y(t)?t:Je().withMutations(function(e){var n=m(t);Rt(n.size),n.forEach(function(t,n){return e.set(n,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Je()},e.prototype.set=function(t,e){return tn(this,t,e)},e.prototype.remove=function(t){return tn(this,t,n)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Ze(e,n,t,this.__hash):0===this.size?Je():(this.__ownerID=t,this._map=e,this._list=n,this)},e}(he);function Ze(t,e,n,r){var o=Object.create(Qe.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=n,o.__hash=r,o}function Je(){return Ue||(Ue=Ze(Ee(),Ne()))}function tn(t,e,r){var o,i,a=t._map,u=t._list,s=a.get(e),c=void 0!==s;if(r===n){if(!c)return t;u.size>=32&&u.size>=2*a.size?(o=(i=u.filter(function(t,e){return void 0!==t&&s!==e})).toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(o.__ownerID=i.__ownerID=t.__ownerID)):(o=a.remove(e),i=s===u.size-1?u.pop():u.set(s,void 0))}else if(c){if(r===u.get(s)[1])return t;o=a,i=u.set(s,[e,r])}else o=a.set(e,u.size),i=u.set(u.size,[e,r]);return t.__ownerID?(t.size=o.size,t._map=o,t._list=i,t.__hash=void 0,t):Ze(o,i)}function en(t){return Boolean(t&&t["@@__IMMUTABLE_STACK__@@"])}Qe.isOrderedMap=Y,Qe.prototype[S]=!0,Qe.prototype.delete=Qe.prototype.remove;var nn,rn=function(t){function e(t){return null==t?un():en(t)?t:un().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var n=this._head;for(t=a(this,t);n&&t--;)n=n.next;return n?n.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:t[r],next:n};return this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):an(e,n)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&en(e))return e;Rt(e.size);var n=this.size,r=this._head;return e.__iterate(function(t){n++,r={value:t,next:r}},!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):an(n,r)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):un()},e.prototype.slice=function(e,n){if(s(e,n,this.size))return this;var r=c(e,this.size);if(f(n,this.size)!==this.size)return t.prototype.slice.call(this,e,n);for(var o=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):an(o,i)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?an(this.size,this._head,t,this.__hash):0===this.size?un():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var n=this;if(e)return new F(this.toArray()).__iterate(function(e,r){return t(e,r,n)},e);for(var r=0,o=this._head;o&&!1!==t(o.value,r++,this);)o=o.next;return r},e.prototype.__iterator=function(t,e){if(e)return new F(this.toArray()).__iterator(t,e);var n=0,r=this._head;return new k(function(){if(r){var e=r.value;return r=r.next,M(t,n++,e)}return{value:void 0,done:!0}})},e}(g);rn.isStack=en;var on=rn.prototype;function an(t,e,n,r){var o=Object.create(on);return o.size=t,o._head=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function un(){return nn||(nn=an(0))}function sn(t){return Boolean(t&&t["@@__IMMUTABLE_SET__@@"])}function cn(t){return sn(t)&&I(t)}function fn(t,e){if(t===e)return!0;if(!l(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||h(t)!==h(e)||p(t)!==p(e)||I(t)!==I(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!v(t);if(I(t)){var o=t.entries();return e.every(function(t,e){var n=o.next().value;return n&&Z(n[1],t)&&(r||Z(n[0],e))})&&o.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var a=t;t=e,e=a}var u=!0,s=e.__iterate(function(e,o){if(r?!t.has(e):i?!Z(e,t.get(o,n)):!Z(t.get(o,n),e))return u=!1,!1});return u&&t.size===s}function _n(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function dn(t){if(!t||"object"!=typeof t)return t;if(!l(t)){if(!jt(t))return t;t=R(t)}if(h(t)){var e={};return t.__iterate(function(t,n){e[n]=dn(t)}),e}var n=[];return t.__iterate(function(t){n.push(dn(t))}),n}on["@@__IMMUTABLE_STACK__@@"]=!0,on.shift=on.pop,on.unshift=on.push,on.unshiftAll=on.pushAll,on.withMutations=fe,on.wasAltered=le,on.asImmutable=de,on["@@transducer/init"]=on.asMutable=_e,on["@@transducer/step"]=function(t,e){return t.unshift(e)},on["@@transducer/result"]=function(t){return t.asImmutable()};var ln,hn=function(t){function e(e){return null==e?gn():sn(e)&&!I(e)?e:gn().withMutations(function(n){var r=t(e);Rt(r.size),r.forEach(function(t){return n.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(m(t).keySeq())},e.intersect=function(t){return(t=y(t).toArray()).length?vn.intersect.apply(e(t.pop()),t):gn()},e.union=function(t){return(t=y(t).toArray()).length?vn.union.apply(e(t.pop()),t):gn()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return yn(this,this._map.set(t,t))},e.prototype.remove=function(t){return yn(this,this._map.remove(t))},e.prototype.clear=function(){return yn(this,this._map.clear())},e.prototype.map=function(t,e){var n=this,r=[],o=[];return this.forEach(function(i){var a=t.call(e,i,i,n);a!==i&&(r.push(i),o.push(a))}),this.withMutations(function(t){r.forEach(function(e){return t.remove(e)}),o.forEach(function(e){return t.add(e)})})},e.prototype.union=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return 0===(e=e.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(n){for(var r=0;r<e.length;r++)t(e[r]).forEach(function(t){return n.add(t)})}):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.every(function(e){return e.includes(t)})||r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.subtract=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.some(function(e){return e.includes(t)})&&r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.sort=function(t){return Rn(It(this,t))},e.prototype.sortBy=function(t,e){return Rn(It(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(w);hn.isSet=sn;var pn,vn=hn.prototype;function yn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function mn(t,e){var n=Object.create(vn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function gn(){return ln||(ln=mn(Ee()))}vn["@@__IMMUTABLE_SET__@@"]=!0,vn.delete=vn.remove,vn.merge=vn.concat=vn.union,vn.withMutations=fe,vn.asImmutable=de,vn["@@transducer/init"]=vn.asMutable=_e,vn["@@transducer/step"]=function(t,e){return t.add(e)},vn["@@transducer/result"]=function(t){return t.asImmutable()},vn.__empty=gn,vn.__make=mn;var wn=function(t){function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);if(Ct(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<t&&(r=-r),this._start=t,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-t)/r-1)+1),0===this.size){if(pn)return pn;pn=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+a(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,n){return s(t,n,this.size)?this:(t=c(t,this.size),(n=f(n,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var n=this.size,r=this._step,o=e?this._start+(n-1)*r:this._start,i=0;i!==n&&!1!==t(o,e?n-++i:i++,this);)o+=e?-r:r;return i},e.prototype.__iterator=function(t,e){var n=this.size,r=this._step,o=e?this._start+(n-1)*r:this._start,i=0;return new k(function(){if(i===n)return{value:void 0,done:!0};var a=o;return o+=e?-r:r,M(t,e?n-++i:i++,a)})},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:fn(this,t)},e}(P);function bn(t,e,r){for(var o=Lt(e),i=0;i!==o.length;)if((t=Vt(t,o[i++],n))===n)return r;return t}function An(t,e){return bn(this,t,e)}function xn(t,e){return bn(t,e,n)!==n}function Sn(){Rt(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t}y.isIterable=l,y.isKeyed=h,y.isIndexed=p,y.isAssociative=v,y.isOrdered=I,y.Iterator=k,_n(y,{toArray:function(){Rt(this.size);var t=new Array(this.size||0),e=h(this),n=0;return this.__iterate(function(r,o){t[n++]=e?[o,r]:r}),t},toIndexedSeq:function(){return new pt(this)},toJS:function(){return dn(this)},toKeyedSeq:function(){return new ht(this,!0)},toMap:function(){return he(this.toKeyedSeq())},toObject:Sn,toOrderedMap:function(){return Qe(this.toKeyedSeq())},toOrderedSet:function(){return Rn(h(this)?this.valueSeq():this)},toSet:function(){return hn(h(this)?this.valueSeq():this)},toSetSeq:function(){return new vt(this)},toSeq:function(){return p(this)?this.toIndexedSeq():h(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return rn(h(this)?this.valueSeq():this)},toList:function(){return Re(h(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Mt(this,function(t,e){var n=h(t),r=[t].concat(e).map(function(t){return l(t)?n&&(t=m(t)):t=n?W(t):K(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var o=r[0];if(o===t||n&&h(o)||p(t)&&p(o))return o}var i=new F(r);return n?i=i.toKeyedSeq():p(t)||(i=i.toSetSeq()),(i=i.flatten(!0)).size=r.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),i}(this,t))},includes:function(t){return this.some(function(e){return Z(e,t)})},entries:function(){return this.__iterator(2)},every:function(t,e){Rt(this.size);var n=!0;return this.__iterate(function(r,o,i){if(!t.call(e,r,o,i))return n=!1,!1}),n},filter:function(t,e){return Mt(this,bt(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return Rt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Rt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""}),e},keys:function(){return this.__iterator(0)},map:function(t,e){return Mt(this,gt(this,t,e))},reduce:function(t,e,n){return kn(this,t,e,n,arguments.length<2,!1)},reduceRight:function(t,e,n){return kn(this,t,e,n,arguments.length<2,!0)},reverse:function(){return Mt(this,wt(this,!0))},slice:function(t,e){return Mt(this,At(this,t,e,!0))},some:function(t,e){return!this.every(zn(t),e)},sort:function(t){return Mt(this,It(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return i(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=he().asMutable();return t.__iterate(function(o,i){r.update(e.call(n,o,i,t),0,function(t){return t+1})}),r.asImmutable()}(this,t,e)},equals:function(t){return fn(this,t)},entrySeq:function(){var t=this;if(t._cache)return new F(t._cache);var e=t.toSeq().map(On).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(zn(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,o,i){if(t.call(e,n,o,i))return r=[o,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(u,null,t)},flatMap:function(t,e){return Mt(this,function(t,e,n){var r=zt(t);return t.toSeq().map(function(o,i){return r(e.call(n,o,i,t))}).flatten(!0)}(this,t,e))},flatten:function(t){return Mt(this,St(this,t,!0))},fromEntrySeq:function(){return new yt(this)},get:function(t,e){return this.find(function(e,n){return Z(n,t)},void 0,e)},getIn:An,groupBy:function(t,e){return function(t,e,n){var r=h(t),o=(I(t)?Qe():he()).asMutable();t.__iterate(function(i,a){o.update(e.call(n,i,a,t),function(t){return(t=t||[]).push(r?[a,i]:i),t})});var i=zt(t);return o.map(function(e){return Mt(t,i(e))}).asImmutable()}(this,t,e)},has:function(t){return this.get(t,n)!==n},hasIn:function(t){return xn(this,t)},isSubset:function(t){return t="function"==typeof t.includes?t:y(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:y(t)).isSubset(this)},keyOf:function(t){return this.findKey(function(e){return Z(e,t)})},keySeq:function(){return this.toSeq().map(Mn).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Et(this,t)},maxBy:function(t,e){return Et(this,e,t)},min:function(t){return Et(this,t?Dn(t):qn)},minBy:function(t,e){return Et(this,e?Dn(e):qn,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Mt(this,xt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(zn(t),e)},sortBy:function(t,e){return Mt(this,It(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Mt(this,function(t,e,n){var r=Dt(t);return r.__iterateUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterate(r,o);var a=0;return t.__iterate(function(t,o,u){return e.call(n,t,o,u)&&++a&&r(t,o,i)}),a},r.__iteratorUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterator(r,o);var a=t.__iterator(2,o),u=!0;return new k(function(){if(!u)return{value:void 0,done:!0};var t=a.next();if(t.done)return t;var o=t.value,s=o[0],c=o[1];return e.call(n,c,s,i)?2===r?t:M(r,s,c,t):(u=!1,{value:void 0,done:!0})})},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(zn(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=I(t),n=h(t),r=e?1:0;return function(t,e){return e=J(e,3432918353),e=J(e<<15|e>>>-15,461845907),e=J(e<<13|e>>>-13,5),e=J((e=(e+3864292196|0)^t)^e>>>16,2246822507),tt((e=J(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+Hn(nt(t),nt(e))|0}:function(t,e){r=r+Hn(nt(t),nt(e))|0}:e?function(t){r=31*r+nt(t)|0}:function(t){r=r+nt(t)|0}),r)}(this))}});var In=y.prototype;In["@@__IMMUTABLE_ITERABLE__@@"]=!0,In[T]=In.values,In.toJSON=In.toArray,In.__toStringMapper=Ut,In.inspect=In.toSource=function(){return this.toString()},In.chain=In.flatMap,In.contains=In.includes,_n(m,{flip:function(){return Mt(this,mt(this))},mapEntries:function(t,e){var n=this,r=0;return Mt(this,this.toSeq().map(function(o,i){return t.call(e,[i,o],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Mt(this,this.toSeq().flip().map(function(r,o){return t.call(e,r,o,n)}).flip())}});var En=m.prototype;En["@@__IMMUTABLE_KEYED__@@"]=!0,En[T]=In.entries,En.toJSON=Sn,En.__toStringMapper=function(t,e){return Ut(e)+": "+Ut(t)},_n(g,{toKeyedSeq:function(){return new ht(this,!1)},filter:function(t,e){return Mt(this,bt(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Mt(this,wt(this,!1))},slice:function(t,e){return Mt(this,At(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(e||0,0),0===n||2===n&&!e)return this;t=c(t,t<0?this.count():this.size);var r=this.slice(0,t);return Mt(this,1===n?r:r.concat(Ht(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Mt(this,St(this,t,!1))},get:function(t,e){return(t=a(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return(t=a(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Mt(this,function(t,e){var n=Dt(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var o=this,i=0;return t.__iterate(function(t){return(!i||!1!==n(e,i++,o))&&!1!==n(t,i++,o)},r),i},n.__iteratorUncached=function(n,r){var o,i=t.__iterator(1,r),a=0;return new k(function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?M(n,a++,e):M(n,a++,o.value,o)})},n}(this,t))},interleave:function(){var t=[this].concat(Ht(arguments)),e=kt(this.toSeq(),P.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Mt(this,n)},keySeq:function(){return wn(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return Mt(this,xt(this,t,e,!1))},zip:function(){return Mt(this,kt(this,Bn,[this].concat(Ht(arguments))))},zipAll:function(){return Mt(this,kt(this,Bn,[this].concat(Ht(arguments)),!0))},zipWith:function(t){var e=Ht(arguments);return e[0]=this,Mt(this,kt(this,t,e))}});var Tn=g.prototype;function kn(t,e,n,r,o,i){return Rt(t.size),t.__iterate(function(t,i,a){o?(o=!1,n=t):n=e.call(r,n,t,i,a)},i),n}function Mn(t,e){return e}function On(t,e){return[e,t]}function zn(t){return function(){return!t.apply(this,arguments)}}function Dn(t){return function(){return-t.apply(this,arguments)}}function Bn(){return Ht(arguments)}function qn(t,e){return t<e?1:t>e?-1:0}function Hn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}Tn["@@__IMMUTABLE_INDEXED__@@"]=!0,Tn[S]=!0,_n(w,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),w.prototype.has=In.includes,w.prototype.contains=w.prototype.includes,_n(L,m.prototype),_n(P,g.prototype),_n(j,w.prototype);var Cn,Rn=function(t){function e(t){return null==t?jn():cn(t)?t:jn().withMutations(function(e){var n=w(t);Rt(n.size),n.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(m(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(hn);Rn.isOrderedSet=cn;var Ln=Rn.prototype;function Pn(t,e){var n=Object.create(Ln);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function jn(){return Cn||(Cn=Pn(Je()))}Ln[S]=!0,Ln.zip=Tn.zip,Ln.zipWith=Tn.zipWith,Ln.__empty=jn,Ln.__make=Pn;var Un,Fn=function(t,e){var n,r=function(i){var a=this;if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var u=Object.keys(t),s=o._indices={};o._name=e,o._keys=u,o._defaultValues=t;for(var c=0;c<u.length;c++){var f=u[c];s[f]=c,o[f]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+Nn(this)+' with property "'+f+'" since that property name is part of the Record API.'):Kn(o,f)}}this.__ownerID=void 0,this._values=Re().withMutations(function(t){t.setSize(a._keys.length),m(i).forEach(function(e,n){t.set(a._indices[n],e===a._defaultValues[n]?void 0:e)})})},o=r.prototype=Object.create(Vn);return o.constructor=r,e&&(r.displayName=e),r};Fn.prototype.toString=function(){for(var t,e=Nn(this)+" { ",n=this._keys,r=0,o=n.length;r!==o;r++)e+=(r?", ":"")+(t=n[r])+": "+Ut(this.get(t));return e+" }"},Fn.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&Wn(this).equals(Wn(t))},Fn.prototype.hashCode=function(){return Wn(this).hashCode()},Fn.prototype.has=function(t){return this._indices.hasOwnProperty(t)},Fn.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._indices[t],r=this._values.get(n);return void 0===r?this._defaultValues[t]:r},Fn.prototype.set=function(t,e){if(this.has(t)){var n=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(n!==this._values&&!this.__ownerID)return Gn(this,n)}return this},Fn.prototype.remove=function(t){return this.set(t)},Fn.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Gn(this,t)},Fn.prototype.wasAltered=function(){return this._values.wasAltered()},Fn.prototype.toSeq=function(){return Wn(this)},Fn.prototype.toJS=function(){return dn(this)},Fn.prototype.entries=function(){return this.__iterator(2)},Fn.prototype.__iterator=function(t,e){return Wn(this).__iterator(t,e)},Fn.prototype.__iterate=function(t,e){return Wn(this).__iterate(t,e)},Fn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?Gn(this,e,t):(this.__ownerID=t,this._values=e,this)},Fn.isRecord=A,Fn.getDescriptiveName=Nn;var Vn=Fn.prototype;function Gn(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._values=e,r.__ownerID=n,r}function Nn(t){return t.constructor.displayName||t.constructor.name||"Record"}function Wn(t){return W(t._keys.map(function(e){return[e,t.get(e)]}))}function Kn(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Ct(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}function Xn(t,e){return h(e)?e.toMap():e.toList()}Vn["@@__IMMUTABLE_RECORD__@@"]=!0,Vn.delete=Vn.remove,Vn.deleteIn=Vn.removeIn=Qt,Vn.getIn=An,Vn.hasIn=In.hasIn,Vn.merge=ee,Vn.mergeWith=ne,Vn.mergeIn=se,Vn.mergeDeep=ae,Vn.mergeDeepWith=ue,Vn.mergeDeepIn=ce,Vn.setIn=$t,Vn.update=Jt,Vn.updateIn=te,Vn.withMutations=fe,Vn.asMutable=_e,Vn.asImmutable=de,Vn[T]=Vn.entries,Vn.toJSON=Vn.toObject=In.toObject,Vn.inspect=Vn.toSource=function(){return this.toString()};var $n={version:"4.0.0-rc.11",Collection:y,Iterable:y,Seq:R,Map:he,OrderedMap:Qe,List:Re,Stack:rn,Set:hn,OrderedSet:Rn,Record:Fn,Range:wn,Repeat:function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);if(this._value=t,this.size=void 0===n?1/0:Math.max(0,n),0===this.size){if(Un)return Un;Un=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return Z(this._value,t)},e.prototype.slice=function(t,n){var r=this.size;return s(t,n,r)?this:new e(this._value,f(n,r)-c(t,r))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return Z(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return Z(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var n=this.size,r=0;r!==n&&!1!==t(this._value,e?n-++r:r++,this););return r},e.prototype.__iterator=function(t,e){var n=this,r=this.size,o=0;return new k(function(){return o===r?{value:void 0,done:!0}:M(t,e?r-++o:o++,n._value)})},e.prototype.equals=function(t){return t instanceof e?Z(this._value,t._value):fn(t)},e}(P),is:Z,fromJS:function(t,e){return function t(e,n,r,o,i,a){var u=Array.isArray(r)?P:Pt(r)?L:null;if(u){if(~e.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");e.push(r),i&&""!==o&&i.push(o);var s=n.call(a,o,u(r).map(function(o,a){return t(e,n,o,a,i,r)}),i&&i.slice());return e.pop(),i&&i.pop(),s}return r}([],e||Xn,t,"",e&&e.length>2?[]:void 0,{"":t})},hash:nt,isImmutable:x,isCollection:l,isKeyed:h,isIndexed:p,isAssociative:v,isOrdered:I,isValueObject:Q,isSeq:b,isList:Ce,isMap:$,isOrderedMap:Y,isStack:en,isSet:sn,isOrderedSet:cn,isRecord:A,get:Vt,getIn:bn,has:Ft,hasIn:xn,merge:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return ie(t,e)},mergeDeep:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return oe(t,e)},mergeWith:function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return ie(e,n,t)},mergeDeepWith:function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return oe(e,n,t)},remove:Nt,removeIn:Yt,set:Wt,setIn:Xt,update:Zt,updateIn:Kt};e.a=$n}}]);