"use strict";(self.webpackChunkcoco_next=self.webpackChunkcoco_next||[]).push([[7899],{518:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ControllerType=void 0;var n,i=r(31635);(n=t.ControllerType||(t.ControllerType={})).SLIDER="SLIDER",n.ANGLE_SCALE="ANGLE_SCALE",n.COLOR_PICKER="COLOR_PICKER",(0,i.__exportStar)(r(40602),t),(0,i.__exportStar)(r(99967),t),(0,i.__exportStar)(r(41968),t)},1145:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2243:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2413:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.init_shadows=void 0;var n=r(24860);t.init_shadows=function(e){var t=[{type:"logic_empty",message0:"%1",args0:[{type:"field_label",name:"BOOL",text:""}],output:"Boolean",colour:(0,n.i18n)("ORANGE_3"),tooltip:(0,n.i18n)("LOGIC_BOOLEAN_TOOLTIP")},{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",colour:(0,n.i18n)("ORANGE_3"),tooltip:(0,n.i18n)("MATH_NUMBER_TOOLTIP"),extensions:["parent_tooltip_when_inline"]},{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",colour:(0,n.i18n)("ORANGE_3"),tooltip:(0,n.i18n)("TEXT_TEXT_TOOLTIP"),extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"multiline_text",message0:"%1",args0:[{type:"field_multiline_input",name:"TEXT",text:"",max_width:264}],output:"String",colour:(0,n.i18n)("ORANGE_3"),tooltip:(0,n.i18n)("TEXT_TEXT_TOOLTIP"),extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"default_value",message0:"%1",args0:[{type:"field_default_value",name:"TEXT",default_value:"0"}],output:"String",colour:(0,n.i18n)("TEXTS_HUE"),tooltip:(0,n.i18n)("TEXT_TEXT_TOOLTIP"),extensions:["parent_tooltip_when_inline"]}];e.define_blocks_with_json_array(t),e.Blocks.SHADOW=e.Blocks.SHADOW||{},Object.assign(e.Blocks.SHADOW,{logic:'<empty type="logic_empty"><field name="BOOL"></field></empty>',text:'<shadow type="text"><field name="TEXT"></field></shadow>',math:'<shadow type="math_number"><field name="NUM">0</field></shadow>',multiline_text:'<shadow type="multiline_text"><field name="TEXT"></field></shadow>',default_value:'<shadow type="default_value"><field name="TEXT"></field></shadow>'})}},6516:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9137:(e,t,r)=>{r.r(t),r.d(t,{a:()=>f,default:()=>p});const n=r(78698),i=r(66905),o=r(99666),a=r(94193),l=r(27516),s=r(5197),u=r(48635),_=r(8599),c=r(79955),d=r(15171);var f=function(e){a.a(r,e);var t=l.a(r);function r(e){var n;return i.a(this,r),(n=t.call(this,{menu_generator:e.options,opt_onchange:e.optOnchange,selected_index:e.selectedIndex,opt_validator:e.optValidator,menu_generator_advanced:e.advancedOptions})).MAX_BLOCK_HEIGHT=40,n.SVG_WIDTH=2,n}return o.a(r,[{key:"show_editor",value:function(){var e,t=this,r=this.get_advanced_options()||this.get_options(),i=[];if("SCREEN_ID"===this.name)for(var o in r){var a,l,u,f=r[o],p=n.a(n.a({},f),{},{icon:{width:(null===(a=f.snapshot)||void 0===a?void 0:a.width)||40,height:(null===(l=f.snapshot)||void 0===l?void 0:l.height)||40,src:(null===(u=f.snapshot)||void 0===u?void 0:u.src)||""}});i.push(p)}var h=this.source_block,v=(null===(e=this.source_block)||void 0===e?void 0:e.is_shadow())&&this.source_block.parent_block||this.source_block;if(!h||!v)throw Error("field is not attached to any block.");var E=v.get_field_value("WIDGET_ID");if("DOC_KEYS"===this.name&&E===c.h){d.c().dispatchAction({payload:void 0,type:"ASYNC_OPEN_TOAST_ON_NOT_SELECT_DOCUMENT"})}else{var g,O,T,m,b,y,C=v.workspace.get_scale(),A=(s.Blink.theme.renderer.STATEMENT_ROW_PADDING_Y_TO_FIELD+1)*C+1;if(h.is_shadow()){var N=h.svg_group;T=s.BU.dom.get_page_offset(N);var I=h.get_height_width();m=I.width*C,b=I.height*C+2*A,y=T[1]+h.height*C+A}else{T=this.get_absolute_xy();var S=this.get_scaled_bbox();m=S.width,b=S.height+2*A,y=T[1]+S.height+A}this.change_editor_style(!0);var R={payload:{type:_.a.DYNAMIC_DROPDOWN,value:this.get_value(),setValue:function(e){t.set_value(e)},showCurrentScreenIndex:!1,position:{left:T[0],top:y},options:"[]"===JSON.stringify(i)?r:i,blockInfo:{scale:C<1?1:C,fieldWidth:m,blockHeight:b,sourceBlockId:(null===(g=this.source_block)||void 0===g?void 0:g.id)||"",fieldName:this.name||"",emptyImageVisible:"image_set_file_id"===(null===(O=h.parent_block)||void 0===O?void 0:O.type)},onHide:function(){t.source_block&&(t.focus(!1),t.change_editor_style(!1))}},type:"SHOW_BLOCKS_DROPDOWN"};"BROADCAST"!==this.name&&"VAR"!==this.name&&"ARRAY"!==this.name&&"OBJECT"!==this.name||(R.payload.showCurrentScreenIndex=!0),"IMAGE_FILE_ID"===this.name?R.payload.type=_.a.IMAGE_DROPDOWN:"ICON_FILE_ID"===this.name?R.payload.type=_.a.ICON_DROPDOWN:"ACTOR_ACTION_ID"===this.name||"ACTOR_STYLE_ID"===this.name?R.payload.type=_.a.ACTOR_STYLE_DROPDOWN:"SCREEN_ID"===this.name?R.payload.type=_.a.SCREEN_DROPDOWN:"SOUND_FILE_ID"===this.name&&(R.payload.type=_.a.SOUND_DROPDOWN),d.c().dispatchAction(R)}}},{key:"get_display_text",value:function(){var e=this.text_;if(!e)return" ";for(var t="",r=0,n=0;n<e.length;n++){if(e.charCodeAt(n)>127?r+=2:r+=1,r>14){t+="…";break}t+=e[n]}return t.replace(/\s/g," ")}}]),r}(u.FieldDropdown);f.field_type="field_coco_dropdown";const p=f},9643:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(31635);r(90988),(0,n.__exportStar)(r(75511),t),(0,n.__exportStar)(r(43154),t),(0,n.__exportStar)(r(45625),t),(0,n.__exportStar)(r(67468),t),(0,n.__exportStar)(r(96683),t),(0,n.__exportStar)(r(70733),t),(0,n.__exportStar)(r(14390),t),(0,n.__exportStar)(r(33131),t),(0,n.__exportStar)(r(9804),t),(0,n.__exportStar)(r(90988),t),(0,n.__exportStar)(r(92401),t),(0,n.__exportStar)(r(90666),t)},9804:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},11935:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},11948:(e,t,r)=>{r.r(t),r.d(t,{a:()=>o,default:()=>a});var n=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function i(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!((i=e[r])===(o=t[r])||n(i)&&n(o)))return!1;var i,o;return!0}function o(e,t){void 0===t&&(t=i);var r=null;function n(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var o=e.apply(this,n);return r={lastResult:o,lastArgs:n,lastThis:this},o}return n.clear=function(){r=null},n}const a=o},12502:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},12981:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},13505:(e,t,r)=>{function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}r.r(t),r.d(t,{a:()=>i,default:()=>o});const o=i},13711:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},14289:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ICON=t.VISIBILITY_CLASSNAME=t.NEED_COLLAPSE_CHILDREN_BLOCKS=t.SPECIAL_CONNECTION_INPUT_NAME=t.COLLAPSED_INPUT_NAME=t.HTML_NS=t.SVG_NS=void 0,t.SVG_NS="http://www.w3.org/2000/svg",t.HTML_NS="http://www.w3.org/1999/xhtml",t.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",t.SPECIAL_CONNECTION_INPUT_NAME=["DO","STACK"],t.NEED_COLLAPSE_CHILDREN_BLOCKS=["start_on_click","self_on_tap","on_running_group_activated","on_phone_shake","on_phone_tilt","on_swipe"],t.VISIBILITY_CLASSNAME={TRANSLUCENT:"blocklyBlockTranslucent",HIDDEN:"blocklyBlockHidden",UNOPERATABLE:"blocklyBlockUnOperable"},t.ICON={LEFT_QUOTA:"M8.192,0.624 L8.192,1.616 C7.744,1.76 7.392,2.016 7.104,2.384 C6.816,2.736 6.688,3.104 6.704,3.488 C6.784,3.44 6.912,3.424 7.088,3.424 C7.408,3.424 7.696,3.536 7.92,3.76 C8.144,3.984 8.256,4.272 8.256,4.624 C8.256,4.976 8.128,5.264 7.904,5.488 C7.664,5.712 7.36,5.824 6.992,5.824 C6.56,5.824 6.208,5.648 5.952,5.296 C5.68,4.96 5.552,4.528 5.552,4 C5.552,3.168 5.792,2.464 6.272,1.856 C6.736,1.248 7.376,0.832 8.192,0.624 Z M4.464,0.624 L4.464,1.616 C4.032,1.76 3.68,2.016 3.408,2.384 C3.12,2.736 2.976,3.104 2.992,3.488 C3.056,3.44 3.184,3.424 3.376,3.424 C3.696,3.424 3.968,3.536 4.192,3.76 C4.416,3.984 4.544,4.272 4.544,4.624 C4.544,4.976 4.416,5.264 4.192,5.488 C3.952,5.712 3.648,5.824 3.28,5.824 C2.848,5.824 2.512,5.648 2.256,5.296 C1.968,4.96 1.84,4.528 1.84,4 C1.84,3.168 2.064,2.464 2.544,1.856 C3.024,1.248 3.664,0.832 4.464,0.624 Z",RIGHT_QUOTA:"M6.224,0.608 C6.64,0.608 6.976,0.768 7.248,1.12 C7.504,1.456 7.648,1.904 7.648,2.448 C7.648,3.248 7.408,3.968 6.944,4.576 C6.464,5.184 5.824,5.584 5.024,5.808 L5.024,4.816 C5.44,4.672 5.808,4.416 6.096,4.064 C6.368,3.696 6.496,3.328 6.496,2.944 C6.416,2.976 6.288,3.008 6.112,3.008 C5.792,3.008 5.504,2.88 5.28,2.656 C5.056,2.432 4.944,2.16 4.944,1.808 C4.944,1.456 5.056,1.168 5.312,0.944 C5.536,0.72 5.84,0.608 6.224,0.608 Z M2.496,0.608 C2.912,0.608 3.264,0.768 3.52,1.12 C3.792,1.456 3.936,1.904 3.936,2.448 C3.936,3.248 3.696,3.968 3.216,4.576 C2.736,5.184 2.096,5.584 1.296,5.808 L1.296,4.816 C1.728,4.672 2.08,4.416 2.368,4.064 C2.656,3.696 2.784,3.328 2.784,2.944 C2.704,2.976 2.576,3.008 2.4,3.008 C2.08,3.008 1.808,2.88 1.584,2.656 C1.344,2.432 1.232,2.16 1.232,1.808 C1.232,1.456 1.344,1.168 1.568,0.944 C1.808,0.72 2.112,0.608 2.496,0.608 Z",DROPDOWN_ARRAY:"M5.99695526,7.90416306 L9.03751442,4.8636039 C9.38898628,4.51213203 9.95883476,4.51213203 10.3103066,4.8636039 C10.6617785,5.21507576 10.6617785,5.78492424 10.3103066,6.1363961 L6.63335137,9.81335137 C6.2818795,10.1648232 5.71203102,10.1648232 5.36055916,9.81335137 L1.6836039,6.1363961 C1.33213203,5.78492424 1.33213203,5.21507576 1.6836039,4.8636039 C2.03507576,4.51213203 2.60492424,4.51213203 2.9563961,4.8636039 L5.99695526,7.90416306 Z"}},14390:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},15261:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get_num_g=t.reset_all_block_id=t.insert_before=t.insert_after=t.clone_node=t.get_size_attr=t.get_translate=t.update_visibility_class=t.add_class_if_necessary=t.remove_class_if_necessary=t.is_in_same_shadow=t.is_inside_shadow=t.is_parent=t.xmlstr_to_dom=t.contains=t.has_class=t.get_owner_document=t.get_viewport_bbox=t.get_viewport_size=t.get_document_scroll=t.remove_children=t.create_dom=t.get_page_offset=t.parse_to_SVG=t.parse_to_DOM=t.remove_class=t.add_class=t.create_font_icon=t.create_div_element=t.create_svg_element=t.set_css_transform=t.remove_attribute=t.remove_node=t.XLINK_NS=t.SVG_NS=void 0;var n=r(31635),i=r(77276),o=r(32791),a=r(14289),l=(0,n.__importStar)(r(72137)),s=(0,n.__importStar)(r(99186)),u=(0,n.__importStar)(r(24042)),_=r(82390);function c(e,r,n){void 0===r&&(r={});var i=document.createElementNS(t.SVG_NS,e);for(var o in r)if(0===o.indexOf("xlink:")){var a=o.slice(6);i.setAttributeNS(t.XLINK_NS,a,r[o])}else i.setAttribute(o,r[o]);return n&&n.appendChild(i),i}function d(e,t,r){e&&r.appendChild(u.is_string(e)?t.createTextNode(e):e)}function f(e){if(e&&"number"==typeof e.length){if(u.is_object(e))return"function"==typeof e.item||"string"==typeof e.item;if(u.is_func(e))return"function"==typeof e.item}return!1}function p(){var e=window.document.body;return new s.Size(e.clientWidth,e.clientHeight)}function h(e,t){for(var r=t;r;){if(e===r)return!0;r=r.parentElement}return!1}function v(e,t){e.classList.contains(t)&&e.classList.remove(t)}function E(e,t){e.classList.contains(t)||e.classList.add(t)}t.SVG_NS="http://www.w3.org/2000/svg",t.XLINK_NS="http://www.w3.org/1999/xlink",t.remove_node=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},t.remove_attribute=function(e,t){_.is.ie(">=10")?e.setAttribute(t,void 0):e.removeAttribute(t)},t.set_css_transform=function(e,t){e.style.transform=t,e.style.webkitTransform=t},t.create_svg_element=c,t.create_div_element=function(e){var t=document.createElement("div");return e&&e.appendChild(t),t},t.create_font_icon=function(e,t){var r=c("svg",{fill:"currentColor"},t);return c("use",{"xlink:href":"#"+e},r),r},t.add_class=function(e,t){var r=e.getAttribute("class")||"";return-1==(" "+r+" ").indexOf(" "+t+" ")&&(r&&(r+=" "),e.setAttribute("class",r+t),!0)},t.remove_class=function(e,t){if(!e||!t)return!1;var r=e.getAttribute("class");if(null==r||-1==(" "+r+" ").indexOf(" "+t+" "))return!1;for(var n=r.split(/\s+/),i=0;i<n.length;i++)n[i]&&n[i]!=t||(n.splice(i,1),i--);return n.length?e.setAttribute("class",n.join(" ")):e.removeAttribute("class"),!0},t.parse_to_DOM=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild},t.parse_to_SVG=function(e){var r=document.createElementNS(t.SVG_NS,"div");r.innerHTML="<svg xmlns="+t.SVG_NS+">"+e+"</svg>";for(var n=document.createDocumentFragment();r.firstChild&&r.firstChild.firstChild;)n.appendChild(r.firstChild.firstChild);return n},t.get_page_offset=function(e){var t=e.getBoundingClientRect();return i.vec2.fromValues(t.left,t.top)},t.create_dom=function(e,t,r){e=String(e);var n=t,i=document.createElement(e);return n&&(u.is_string(n)?i.className=n:u.is_array(n)?i.className=n.join(" "):function(e,t){u.obj_for_each(t,function(t,r){t&&t.implementsGoogStringTypedString&&(t=t.getTypedStringValue()),"style"==r?e.style.cssText=t:"class"==r?e.className=t:e.setAttribute(r,t)})}(i,n)),r&&function(e,t,r){for(var n=2;n<r.length;n++){var i=r[n];if(!u.is_array_like(i)||(l=i,u.is_object(l)&&l.nodeType>0))d(i,e,t);else for(var o=f(i)?Array.from(i):i,a=0;a<o.length;++a)d(o[a],e,t)}var l}(document,i,[e,t,r]),i},t.remove_children=function(e){for(var t=e.firstChild;null!=t;)e.removeChild(t),t=e.firstChild},t.get_document_scroll=function(){var e=function(e){return e.scrollingElement?e.scrollingElement:e.body||e.documentElement}(document),t=document.defaultView;return i.vec2.fromValues(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},t.get_viewport_size=p,t.get_viewport_bbox=function(){var e=p(),t=l.get_viewport_page_offset(document);return{right:e.width+t[0],bottom:e.height+t[1],top:t[1],left:t[0]}},t.get_owner_document=function(e){if(!e)throw new Error("Node cannot be undefined or undefined.");return e instanceof Node?e.nodeType==o.NodeType.DOCUMENT?document:e.ownerDocument:e instanceof Window?e.document:document},t.has_class=function(e,t){return-1!=(" "+e.getAttribute("class")+" ").indexOf(" "+t+" ")},t.contains=function(e,t){if(!e||!t)return!1;if(e.contains&&t.nodeType==o.NodeType.ELEMENT)return e==t||e.contains(t);if(void 0!==e.compareDocumentPosition)return e==t||Boolean(16&e.compareDocumentPosition(t));for(;t&&e!=t;)t=t.parentNode;return t==e},t.xmlstr_to_dom=function(e){return(new DOMParser).parseFromString(e,"text/xml").firstChild},t.is_parent=h,t.is_inside_shadow=function(e){for(var t=null==e?void 0:e.parentElement;t;){if(t.classList.contains("blocklyShadow"))return!0;t=t.parentElement}return!1},t.is_in_same_shadow=function(e,t){for(var r=e.parentElement;r;){if(!r)return!1;if(r.classList.contains("blocklyShadow"))break;r=r.parentElement}return h(r,t)},t.remove_class_if_necessary=v,t.add_class_if_necessary=E,t.update_visibility_class=function(e,t){switch(t){case o.BlockVisibility.VISIBLE:v(e,a.VISIBILITY_CLASSNAME.HIDDEN),v(e,a.VISIBILITY_CLASSNAME.TRANSLUCENT);break;case o.BlockVisibility.TRANSLUCENT:v(e,a.VISIBILITY_CLASSNAME.HIDDEN),E(e,a.VISIBILITY_CLASSNAME.TRANSLUCENT);break;case o.BlockVisibility.HIDDEN:v(e,a.VISIBILITY_CLASSNAME.TRANSLUCENT),E(e,a.VISIBILITY_CLASSNAME.HIDDEN)}},t.get_translate=function(e){var t=e.style.transform||e.style.webkitTransform||e.getAttribute("transform");if(!t)return{x:0,y:0};var r=t.match(/translate\(([+-]?\d+)[^,]*,[\s]*([+-]?\d+)[^,]*\)/);if(!r)return{x:0,y:0};var n=r[1],i=r[2];return{x:Number(n)||0,y:Number(i)||0}},t.get_size_attr=function(e){return{width:parseFloat(e.getAttribute("width")||"0")||0,height:parseFloat(e.getAttribute("height")||"0")||0}},t.clone_node=function(e,t){return e.cloneNode(t)},t.insert_after=function(e,t){var r=t.nextSibling,n=t.parentNode;if(!n)throw new ReferenceError("Reference node has no parent.");r?n.insertBefore(e,r):n.appendChild(e)},t.insert_before=function(e,t){var r=t.parentNode;if(null==r)throw new ReferenceError("Reference node has no parent.");r.insertBefore(e,t)},t.reset_all_block_id=function(e){var t={},r={};return Array.isArray(e)?(e.forEach(n),e.forEach(i)):(n(e),i(e)),e;function n(e){if(e.attributes){var i=e.getAttribute("id");for(var o in i&&(t[i]=!0,r[i]=s.gen_uid()),e.childNodes)"object"==typeof e.childNodes[o]&&n(e.childNodes[o])}}function i(e){if(e.attributes){var t=e.getAttribute("id");t&&(e.id=r[t],e.setAttribute("id",r[t]));var n=e.getAttribute("def_id");for(var o in n&&r[n]&&e.setAttribute("def_id",r[n]),e.childNodes)"object"==typeof e.childNodes[o]&&i(e.childNodes[o])}}},t.get_num_g=function(e){var t=c("g",{"data-item-index":e,height:18,width:4+8*e.toString().length+4});return t.classList.add("svg_num"),c("text",{"font-weight":"900","font-size":"12pt","font-family":"NotoSansCJKsc-Black,NotoSansCJKsc","dominant-baseline":"central",transform:"translate(2, 9)"},t).textContent=e+".",t}},15806:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){return t===r||null!==t&&null!==r&&"object"==typeof t&&"object"==typeof r&&(Array.isArray(t)?function(t,r){if(!Array.isArray(r))return!1;if(t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}(t,r):function(t,r){if(Array.isArray(r))return!1;for(var n in t)if(!e(t[n],r[n]))return!1;for(var i in r)if(void 0===t[i])return!1;return!0}(t,r))}},17921:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},17967:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},19220:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},19238:(e,t,r)=>{function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.r(t),r.d(t,{a:()=>n,default:()=>i});const i=n},21999:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.THEME_COLOR_MAP=void 0;var n=r(58698);t.THEME_COLOR_MAP={RED:new n.Color("#FF604B"),BLUE:new n.Color("#3882FF"),GREEN:new n.Color("#26E32D"),YELLOW:new n.Color("#FFD34E")}},22988:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},23118:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},24042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.merge_deep=t.debounce=t.throttle=t.is_workspace=t.is_old_dropdown_option=t.is_comment_theme=t.is_field_mutation=t.is_field_dropdown=t.is_field_default_value=t.is_field_text_input=t.is_field_number=t.is_workspace_comment=t.is_block_group=t.is_block_svg=t.is_valid_color=t.parse_attr_deep=t.clone_deep=t.obj_for_each=t.unique_id=t.is_array_like=t.is_number=t.is_nil=t.is_array=t.is_object=t.is_func=t.is_string=t.BrowserFeature=void 0;var n=(0,r(31635).__importStar)(r(67193)),i=r(32791);function o(e){return e&&"[object Function]"==={}.toString.call(e)}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function l(e){return Array.isArray(e)}t.BrowserFeature={TOUCH_ENABLED:"ontouchstart"in window||!!(document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!navigator||!navigator.maxTouchPoints&&!navigator.msMaxTouchPoints)},t.is_string=function(e){return"string"==typeof e||e instanceof String},t.is_func=o,t.is_object=a,t.is_array=l,t.is_nil=function(e){return null==e},t.is_number=function(e){return"number"==typeof e},t.is_array_like=function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Number.MAX_SAFE_INTEGER}(e.length)&&!o(e)};var s=0;function u(e){return n.default?n.default(e):n(e)}t.unique_id=function(e){var t=++s;return e.toString()+t},t.obj_for_each=function(e,t){if(!a(e))throw new Error("param is not a Object");for(var r=Object.keys(e),n=0;n<r.length;n++){var i=r[n];t(e[i],i)}},t.clone_deep=u,t.parse_attr_deep=function e(t,r){if(!r)return t;var n=u(t);for(var i in n){var s=r[i];if(null!=s){var _=t[i];!a(_)||l(_)||o(_)?n[i]=s:n[i]=e(_,s)}}return n},t.is_valid_color=function(e){var t=document.createElement("span");return t.style.color=e,""!==t.style.color},t.is_block_svg=function(e){return!!e&&typeof e.type&&("block"===e.element_type||"block_group"==e.element_type||"param"===e.element_type||"param_color"===e.element_type)},t.is_block_group=function(e){return!!e&&typeof e.type&&"block_group"==e.element_type},t.is_workspace_comment=function(e){return!!e&&"comment"===e.element_type},t.is_field_number=function(e){return"FieldNumber"===(null==e?void 0:e.field_type)},t.is_field_text_input=function(e){return"FieldTextInput"===e.field_type},t.is_field_default_value=function(e){return"FieldDefaultValue"===e.field_type},t.is_field_dropdown=function(e){return"FieldDropdown"===(null==e?void 0:e.field_type)},t.is_field_mutation=function(e){return"FieldMutation"===(null==e?void 0:e.field_type)},t.is_comment_theme=function(e){return e&&Object.keys(i.THEME_COLOR_MAP).includes(e)},t.is_old_dropdown_option=function(e){return!!e&&!e.type},t.is_workspace=function(e){return!!e.add_flyout},t.throttle=function(e,t){var r=Date.now();return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=Date.now();o-r>=t&&(e.apply(void 0,n),r=o)}},t.debounce=function(e,t){var r;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];void 0!==r&&clearTimeout(r),r=window.setTimeout(function(){e.apply(void 0,n)},t)}},t.merge_deep=function e(t,r){var n=u(t);for(var i in r)null!=r[i]&&a(r[i])?n[i]=e(n[i]||Object.create(null),r[i]):n[i]=r[i];return n}},24860:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logic_value=t.logic_shadow=t.number_value=t.number_shadow=t.text_value=t.text_shadow=t.create_head_icon=t.i18n=void 0,t.i18n=function(e){return"%{BKY_"+e+"}"},t.create_head_icon=function(e){return{type:"field_icon",is_head:!0,src:e,width:38,height:38,alt:"*"}},t.text_shadow=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),'<shadow type="text" id="'+t+'"><field name="TEXT">'+e+"</field></shadow>"},t.text_value=function(e,r){return void 0===r&&(r=""),'<value name="'+e+'">'+(0,t.text_shadow)(r)+"</value>"},t.number_shadow=function(e,t){return void 0===e&&(e="0"),t?'<shadow type="math_number"><field name="NUM" constraints="'+t+'">'+e+"</field></shadow>":'<shadow type="math_number"><field name="NUM">'+e+"</field></shadow>"},t.number_value=function(e,r,n){return void 0===r&&(r="0"),'<value name="'+e+'">'+(0,t.number_shadow)(r,n)+"</value>"},t.logic_shadow=function(){return'<empty type="logic_empty"></empty>'},t.logic_value=function(e){return'<value name="'+e+'">'+(0,t.logic_shadow)()+"</value>"}},27578:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uniSlice=t.dlen=t.eachOp=void 0;var n=r(48854),i=function(e){if(!Array.isArray(e))throw Error("Op must be an array of components");for(var r=null,n=0;n<e.length;n++){var i=e[n];switch(typeof i){case"object":if("number"!=typeof i.d&&"string"!=typeof i.d)throw Error("Delete must be number or string");if(t.dlen(i.d)<=0)throw Error("Deletes must not be empty");break;case"string":if(!(i.length>0))throw Error("Inserts cannot be empty");break;case"number":if(!(i>0))throw Error("Skip components must be >0");if("number"==typeof r)throw Error("Adjacent skip components should be combined")}r=i}if("number"==typeof r)throw Error("Op has a trailing skip")};function o(e,r){for(var i=0,o=0,a=0;a<e.length;a++){var l=e[a];switch(r(l,i,o),typeof l){case"object":i+=t.dlen(l.d);break;case"string":o+=n.strPosToUni(l);break;case"number":i+=l,o+=l}}}function a(e,t){var r=[],n=u(r);return o(e,function(e,r,i){n(t(e,r,i))}),f(r)}t.eachOp=o;var l=function(e){return e},s=function(e){return a(e,l)};t.dlen=function(e){return"number"==typeof e?e:n.strPosToUni(e)};var u=function(e){return function(r){if(r&&0!==r.d&&""!==r.d)if(0===e.length)e.push(r);else if(typeof r==typeof e[e.length-1])if("object"==typeof r){var n=e[e.length-1];n.d="string"==typeof n.d&&"string"==typeof r.d?n.d+r.d:t.dlen(n.d)+t.dlen(r.d)}else e[e.length-1]+=r;else e.push(r)}},_=function(e){return"number"==typeof e?e:"string"==typeof e?n.strPosToUni(e):"number"==typeof e.d?e.d:n.strPosToUni(e.d)};t.uniSlice=function(e,t,r){var i=n.uniToStrPos(e,t),o=null==r?1/0:n.uniToStrPos(e,r);return e.slice(i,o)};var c=function(e,r,n){return"number"==typeof e?null==n?e-r:Math.min(e,n)-r:t.uniSlice(e,r,n)},d=function(e){var r=0,i=0;return{take:function(o,a){if(r===e.length)return-1===o?null:o;var l,s=e[r];if("number"==typeof s)return-1===o||s-i<=o?(l=s-i,++r,i=0,l):(i+=o,o);if("string"==typeof s){if(-1===o||"i"===a||n.strPosToUni(s.slice(i))<=o)return l=s.slice(i),++r,i=0,l;var u=i+n.uniToStrPos(s.slice(i),o);return l=s.slice(i,u),i=u,l}if(-1===o||"d"===a||t.dlen(s.d)-i<=o)return l={d:c(s.d,i)},++r,i=0,l;var _=c(s.d,i,i+o);return i+=o,{d:_}},peek:function(){return e[r]}}},f=function(e){return e.length>0&&"number"==typeof e[e.length-1]&&e.pop(),e};function p(e,r,o){if("left"!==o&&"right"!==o)throw Error("side ("+o+") must be 'left' or 'right'");i(e),i(r);for(var a,l=[],s=u(l),c=d(e),p=c.take,h=c.peek,v=0;v<r.length;v++){var E=r[v],g=void 0,O=void 0;switch(typeof E){case"number":for(g=E;g>0;)s(O=p(g,"i")),"string"!=typeof O&&(g-=_(O));break;case"string":"left"===o&&"string"==typeof h()&&s(p(-1)),s(n.strPosToUni(E));break;case"object":for(g=t.dlen(E.d);g>0;)switch(typeof(O=p(g,"i"))){case"number":g-=O;break;case"string":s(O);break;case"object":g-=t.dlen(O.d)}}}for(;a=p(-1);)s(a);return f(l)}function h(e,r){i(e),i(r);for(var o,a=[],l=u(a),s=d(e).take,p=0;p<r.length;p++){var h=r[p],v=void 0,E=void 0;switch(typeof h){case"number":for(v=h;v>0;)l(E=s(v,"d")),"object"!=typeof E&&(v-=_(E));break;case"string":l(h);break;case"object":v=t.dlen(h.d);for(var g=0;g<v;)switch(typeof(E=s(v-g,"d"))){case"number":l({d:c(h.d,g,g+E)}),g+=E;break;case"string":g+=n.strPosToUni(E);break;case"object":l(E)}}}for(;o=s(-1);)l(o);return f(a)}var v=function(e,r){for(var i=0,o=0;o<r.length&&e>i;o++){var a=r[o];switch(typeof a){case"number":i+=a;break;case"string":var l=n.strPosToUni(a);i+=l,e+=l;break;case"object":e-=Math.min(t.dlen(a.d),e-i)}}return e},E=function(e,t){return"number"==typeof e?v(e,t):e.map(function(e){return v(e,t)})};function g(e,t,r){return a(e,function(e,n){return"object"==typeof e&&"number"==typeof e.d?{d:r.slice(t,n,n+e.d)}:e})}function O(e){return a(e,function(e){switch(typeof e){case"object":if("number"==typeof e.d)throw Error("Cannot invert text op: Deleted characters missing from operation. makeInvertible must be called first.");return e.d;case"string":return{d:e};case"number":return e}})}function T(e){return a(e,function(e){return"object"==typeof e&&"string"==typeof e.d?{d:n.strPosToUni(e.d)}:e})}function m(e){var t=!0;return o(e,function(e){"object"==typeof e&&"number"==typeof e.d&&(t=!1)}),t}t.default=function(e){return{name:"text-unicode",uri:"http://sharejs.org/types/text-unicode",trim:f,normalize:s,checkOp:i,create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof t)throw Error("Initial data must be a string");return e.create(t)},apply:function(r,n){i(n);for(var o=e.builder(r),a=0;a<n.length;a++){var l=n[a];switch(typeof l){case"number":o.skip(l);break;case"string":o.append(l);break;case"object":o.del(t.dlen(l.d))}}return o.build()},transform:p,compose:h,transformPosition:v,transformSelection:E,isInvertible:m,makeInvertible:function(t,r){return g(t,r,e)},stripInvertible:T,invert:O,invertWithDoc:function(t,r){return O(g(t,r,e))},isNoop:function(e){return 0===e.length}}}},29436:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},30275:(e,t,r)=>{function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t),r.d(t,{a:()=>n,default:()=>i});const i=n},30671:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},31089:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},31161:e=>{var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var o,a,l=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var u in o=Object(arguments[s]))r.call(o,u)&&(l[u]=o[u]);if(t){a=t(o);for(var _=0;_<a.length;_++)n.call(o,a[_])&&(l[a[_]]=o[a[_]])}}return l}},32672:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},32791:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(31635);(0,n.__exportStar)(r(9643),t),(0,n.__exportStar)(r(72956),t),(0,n.__exportStar)(r(46033),t),(0,n.__exportStar)(r(80834),t),(0,n.__exportStar)(r(75766),t),(0,n.__exportStar)(r(35090),t),(0,n.__exportStar)(r(96856),t),(0,n.__exportStar)(r(91428),t),(0,n.__exportStar)(r(2243),t),(0,n.__exportStar)(r(88482),t),(0,n.__exportStar)(r(56521),t)},33131:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},33470:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},35090:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(31635);(0,n.__exportStar)(r(88778),t),(0,n.__exportStar)(r(31089),t),(0,n.__exportStar)(r(32672),t),(0,n.__exportStar)(r(13711),t),(0,n.__exportStar)(r(12502),t),(0,n.__exportStar)(r(51949),t)},35162:(e,t,r)=>{var n,i,o,a,l,s,u;r.r(t),r.d(t,{a:()=>u,b:()=>s,c:()=>i,d:()=>n,default:()=>d,e:()=>o,f:()=>l});const _=r(47168);var c;(c=n||(n={})).Actor="actor",c.Scene="scene",c.Background="background",c.ActorDialog="actor_dialog",function(e){e.ActorWrapper="actor_wrapper"}(i||(i={})),function(e){e[e.ALL=0]="ALL",e[e.LEFT_RIGHT=1]="LEFT_RIGHT",e[e.NONE=2]="NONE"}(o||(o={})),function(e){e[e.UP=_.DIRECTION_UP]="UP",e[e.DOWN=_.DIRECTION_DOWN]="DOWN",e[e.LEFT=_.DIRECTION_LEFT]="LEFT",e[e.RIGHT=_.DIRECTION_RIGHT]="RIGHT"}(a||(a={})),function(e){e.TO="to",e.FROM="from",e.FROM_TO="from_to"}(l||(l={})),function(e){e[e.RIGHT=8]="RIGHT",e[e.LEFT=4]="LEFT",e[e.TOP=2]="TOP",e[e.BOTTOM=1]="BOTTOM"}(s||(s={})),function(e){e.CONTAIN="contain",e.COVER="cover",e.STRETCH="stretch"}(u||(u={}));const d=u},35394:(e,t,r)=>{r.r(t),r.d(t,{a:()=>h,b:()=>p,c:()=>c,d:()=>a,default:()=>g,e:()=>d,f:()=>v,g:()=>f,h:()=>o,i:()=>i,j:()=>_,k:()=>u,l:()=>s,m:()=>l,n:()=>E});const n=r(3631);var i="icon-widget-list-viewer",o=360,a=500,l=200,s=100,u=428,_=926,c="#F7F7F7",d="tiled",f=n.o.IMAGE_AND_TITLE_DESC,p="https://static.codemao.cn/crc-uploader/2021/12/9b6f23a1ed343087b5f7b2a5b1a447b6.png",h="https://static.codemao.cn/crc-uploader/2021/12/97ff281423822cdac3fec80dfaed9b44.png",v="https://static.codemao.cn/crc-uploader/2021/12/fb398b664f503453c8bef12cd33febc3.png",E={ONLY_TITLE:{titleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.title",contentMessageId:"ListViewerWidget.title",attributes:{color:"#333",fontSize:16,lineClamp:1}}},TITLE_AND_SUBTITLE:{subTitleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.subTitle",contentMessageId:"ListViewerWidget.subTitle",attributes:{color:"#666",fontSize:12}},titleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.title",contentMessageId:"ListViewerWidget.title",attributes:{color:"#333",fontSize:16,lineClamp:1}}},IMAGE_TITLE_AND_SUBTITLE:{subTitleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.subTitle",contentMessageId:"ListViewerWidget.subTitle",attributes:{color:"#666",fontSize:12}},titleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.title",contentMessageId:"ListViewerWidget.title",attributes:{color:"#333",fontSize:16,lineClamp:1}},imageSlot:{widgetType:n.v,titleMessageId:"ListViewerWidget.image",attributes:{fileId:v}}},AVATAR_AND_TITLE_SUBTITLE:{subTitleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.subTitle",contentMessageId:"ListViewerWidget.subTitle",attributes:{color:"#999",fontSize:12,lineClamp:1}},titleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.title",contentMessageId:"ListViewerWidget.title",attributes:{color:"#333",fontSize:16,lineClamp:1}},avatarSlot:{widgetType:n.v,titleMessageId:"ListViewerWidget.avatar",attributes:{fileId:h,borderRadius:"50%",resizeMode:"cover"}}},IMAGE_AND_TITLE_DESC:{descSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.tips",contentMessageId:"ListViewerWidget.tips",attributes:{color:"#999",fontSize:12,lineClamp:1}},titleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.title",contentMessageId:"ListViewerWidget.longTitle",attributes:{color:"#333",fontSize:14,lineClamp:2}},imageSlot:{widgetType:n.v,titleMessageId:"ListViewerWidget.image",attributes:{fileId:v}}},AVATAR_TITLE_SUBTITLE_AND_IMAGE_DESC:{descSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.desc",contentMessageId:"ListViewerWidget.longDesc",attributes:{color:"#333",fontSize:14,lineClamp:2}},bannerSlot:{widgetType:n.v,titleMessageId:"ListViewerWidget.banner",attributes:{fileId:p}},subTitleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.subTitle",contentMessageId:"ListViewerWidget.subTitle",attributes:{color:"#999",fontSize:12,lineClamp:1}},titleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.title",contentMessageId:"ListViewerWidget.title",attributes:{color:"#333",fontSize:16,lineClamp:1}},avatarSlot:{widgetType:n.v,titleMessageId:"ListViewerWidget.avatar",attributes:{fileId:h,borderRadius:"50%",resizeMode:"cover"}}},IMAGE_AND_AVATAR_TITLE_SUBTITLE_AND_DESC:{descSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.desc",contentMessageId:"ListViewerWidget.longDesc",attributes:{color:"#333",fontSize:14,lineClamp:2}},subTitleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.subTitle",contentMessageId:"ListViewerWidget.subTitle",attributes:{color:"#999",fontSize:12,lineClamp:1}},titleSlot:{widgetType:n.H,titleMessageId:"ListViewerWidget.title",contentMessageId:"ListViewerWidget.title",attributes:{color:"#333",fontSize:16,lineClamp:1}},avatarSlot:{widgetType:n.v,titleMessageId:"ListViewerWidget.avatar",attributes:{fileId:h,borderRadius:"50%",resizeMode:"cover"}},bannerSlot:{widgetType:n.v,titleMessageId:"ListViewerWidget.banner",attributes:{fileId:p}}}};const g=h},36211:(e,t,r)=>{var n=r(41460),i=r(96540),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},a=r(5958),l=function(e,t){return i.createElement(a.a,n.a(n.a({},e),{},{ref:t,icon:o}))};l.displayName="CloseCircleFilled",t.a=i.forwardRef(l)},36971:(e,t,r)=>{r.r(t),r.d(t,{a:()=>u,b:()=>s,c:()=>n,d:()=>a,default:()=>c,e:()=>l,f:()=>i,g:()=>o,h:()=>_});var n="icon-widget-audio",i=100,o=0,a=400,l=50,s=!0,u=!1,_="audio/aac, audio/ogg, audio/mpeg, audio/wave, audio/wav, audio/x-wav, audio/webm";const c=u},38781:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},40602:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},40605:(e,t,r)=>{r.r(t),r.d(t,{a:()=>h,b:()=>O,c:()=>y,d:()=>u,default:()=>A,e:()=>n,f:()=>l,g:()=>o,h:()=>c,i:()=>m,j:()=>f,k:()=>E,l:()=>v,m:()=>T,n:()=>C,o:()=>_,p:()=>i,q:()=>s,r:()=>a,s:()=>d,t:()=>b,u:()=>p,v:()=>g});var n="SET_EDIT_COOPERATION_INVITATION_URL",i=function(e){return{type:n,payload:{url:e}}},o="SET_READONLY_COOPERATION_INVITATION_URL",a=function(e){return{type:o,payload:{url:e}}},l="SET_IS_AUTHOR",s=function(e){return{type:l,payload:{isAuthor:e}}},u="SET_COLL_WORK_ID",_=function(e){return{type:u,payload:{id:e}}},c="UPDATE_COOPERATION_USER_LIST",d=function(e){return{payload:{list:e},type:c}},f="UPDATE_ONLINE_COOPERATION_USER_LIST",p=function(e){return{payload:{list:e},type:f}},h="ASYNC_UPDATE_ONLINE_COOPERATION_USER_LIST",v=function(e){return{payload:{list:e},type:h}},E="UPDATE_USER_FOCUS_OT_INFO_LIST",g=function(e){return{type:E,payload:{list:e}}},O="ASYNC_UPDATE_USER_FOCUS_OT_INFO",T=function(e){return{type:O,payload:{info:e}}},m="UPDATE_ONLINE_COOPERATION_USER_COLOR_RECORD",b=function(e){return{type:m,payload:{colors:e}}},y="INITIAL_OT_STATE",C=function(){return{type:y,payload:void 0}};const A=h},40960:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BlockVisibility=void 0,(r=t.BlockVisibility||(t.BlockVisibility={})).VISIBLE="visible",r.HIDDEN="hidden",r.TRANSLUCENT="translucent"},41020:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},41347:(e,t,r)=>{function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.r(t),r.d(t,{a:()=>n,default:()=>i});const i=n},41968:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.EColorFormat=t.EColorControllerFormat=void 0,(r=t.EColorControllerFormat||(t.EColorControllerFormat={})).RGBA="RGBA",r.HSVA="HSVA",function(e){e[e.ColorPalette=1]="ColorPalette",e[e.HSVA=2]="HSVA",e[e.RGBA=3]="RGBA",e[e.ColorString=4]="ColorString"}(t.EColorFormat||(t.EColorFormat={}))},42756:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},43154:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},44502:(e,t,r)=>{function n(){if(!n.quiet){for(var e=r(28787).inspect,t=Array(n.prefix).fill("  ").join(""),i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];console.log(t+o.map(function(t){return"string"==typeof t?t:e(t,{depth:10,colors:!0})}).join(" "))}}t.A=n,n.quiet=!0,n.prefix=0},45555:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BlockGroupType=t.LAST_NEXT_XML_TAG=t.BLOCK_GROUP_STOPPED_XML_TAG=t.BLOCK_GROUP_ID_XML_TAG=t.BLOCK_GROUP_NAME_XML_TAG=t.BLOCK_GROUP_NAME_FIELD_NAME=t.BLOCK_GROUP_TAG_FIELD_NAME=void 0,t.BLOCK_GROUP_TAG_FIELD_NAME="group_tag",t.BLOCK_GROUP_NAME_FIELD_NAME="group_name",t.BLOCK_GROUP_NAME_XML_TAG="block_group_name",t.BLOCK_GROUP_ID_XML_TAG="block_group_id",t.BLOCK_GROUP_STOPPED_XML_TAG="block_group_stopped",t.LAST_NEXT_XML_TAG="last_next_in_stack",(r=t.BlockGroupType||(t.BlockGroupType={}))[r.START=0]="START",r[r.EXECUTION=1]="EXECUTION",r[r.OUTPUT=2]="OUTPUT"},45625:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},45653:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},46033:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(31635);(0,n.__exportStar)(r(93766),t),(0,n.__exportStar)(r(50365),t),(0,n.__exportStar)(r(41020),t)},47380:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.remove=t.insert=void 0;var l=r(48854),s=o(r(27578)),u=a(r(79384)),_={create:function(e){return e},toString:function(e){return e},builder:function(e){if("string"!=typeof e)throw Error("Invalid document snapshot: "+e);var t=[];return{skip:function(r){var n=l.uniToStrPos(e,r);if(n>e.length)throw Error("The op is too long for this document");t.push(e.slice(0,n)),e=e.slice(n)},append:function(e){t.push(e)},del:function(t){e=e.slice(l.uniToStrPos(e,t))},build:function(){return t.join("")+e}}},slice:s.uniSlice},c=s.default(_),d=Object.assign(Object.assign({},c),{api:u.default});t.type=d,t.insert=function(e,t){return 0===t.length?[]:0===e?[t]:[e,t]},t.remove=function(e,t){return 0===s.dlen(t)?[]:0===e?[{d:t}]:[e,{d:t}]};var f=r(27578);Object.defineProperty(t,"makeType",{enumerable:!0,get:function(){return f.default}})},47395:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},47602:(e,t,r)=>{e.exports=r(11767)},48096:(e,t,r)=>{function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,{a:()=>n,default:()=>i});const i=n},48428:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is_connection_json=t.is_comment_json=t.is_block_json=void 0,t.is_block_json=function(e){return"input"!==e.type&&"next"!==e.type&&void 0!==e.type},t.is_comment_json=function(e){return void 0!==e.color_theme},t.is_connection_json=function(e){return"input"===e.type||"next"===e.type}},48635:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FieldDropdown=void 0;var n=r(31635),i=r(71519),o=r(53307),a=r(32791),l=r(15261),s=r(82390),u=r(24042),_=r(18978),c=r(72137),d=r(99186),f=r(35422),p=r(32533),h=function(e){function t(t){var r=e.call(this,void 0,t.opt_validator)||this;r.field_type="FieldDropdown",r.value_="?",r.prefix_field=void 0,r.suffix_field=void 0,r.generate_customized_dropdown=void 0,r.menu_generator=t.menu_generator,r.menu_generator_advanced=t.menu_generator_advanced;for(var n=r.get_advanced_options()?r.get_expanded_advanced_options():r.get_basic_options(),i=(0,u.is_func)(t.selected_index)?t.selected_index():t.selected_index||0;n[i]&&(!r.get_option_value(n[i])||r.get_option_callback(n[i]));)i++;var o=n[i]&&r.get_option_value(n[i])||"?";return r.trim_options(),r.set_value(o),r.onchange=t.opt_onchange,r}return(0,n.__extends)(t,e),t.prototype.init=function(){this.source_block&&(this.arrow_=(0,p.draw_arrow)(this.source_block.workspace.options.dropdown.arrow_type),e.prototype.init.call(this),this.source_block.is_shadow()&&this.source_block.get_svg_root().classList.add("blocklyShadowDropdown"),this.field_group&&this.field_group.classList.add("blocklyFieldDropdown"))},t.prototype.bind_field_click_event=function(){if(this.source_block)if(this.source_block.is_shadow()){var t=this.source_block.get_svg_root();this.mouse_down_wrapper=this.events.bind_event_with_checks(t,"mouseup",this,this.on_mouse_down)}else e.prototype.bind_field_click_event.call(this)},t.prototype.render_=function(){var e,t;if(this.visible_&&this.source_block){if(this.field_group&&this.arrow_){(0,l.remove_children)(this.field_group);var r=this.source_block.workspace.options.dropdown.padding,n=this.source_block.workspace.options.dropdown.padding+6;this.size_.width=this.border_rect?r:n,this.update_height(),this.render_border(),this.render_image_element(),this.render_text_element(),this.field_group.appendChild(this.arrow_),this.size_.width+=r;var i=this.border_rect?this.size_.width:this.size_.width-2,o=this.size_.height/2-7;this.arrow_.setAttribute("transform","translate("+i+", "+o+")"),this.size_.width+=12+r,this.change_editor_style(!1),this.source_block.is_shadow()?this.render_shadow_style():this.render_not_shadow_style(),null!==(e=this.border_rect)&&void 0!==e&&e.setAttribute("height",String(this.size_.height)),null!==(t=this.border_rect)&&void 0!==t&&t.setAttribute("width",String(this.size_.width))}}else this.size_.width=0},t.prototype.render_border=function(){this.field_group&&this.border_rect&&this.field_group.appendChild(this.border_rect)},t.prototype.render_not_shadow_style=function(){this.source_block&&this.arrow_&&(this.arrow_.style.fill=this.source_block.get_colour().toString())},t.prototype.render_shadow_style=function(){var e=this,t=function(){var t=e.source_block&&e.source_block.get_parent();t&&e.arrow_&&(e.arrow_.style.fill=t.get_colour().toString())};this.events.is_record_undo()?t():window.setTimeout(t)},t.prototype.render_text_element=function(){var e=this.get_display_text();if(e.trim()){var t;s.is.safari()||s.is.mobile()?this.text_element=(0,l.create_svg_element)("text",{class:"blocklyText",dy:".4em","font-size":this.theme.font.SIZE},this.field_group):this.text_element=(0,l.create_svg_element)("text",{class:"blocklyText","dominant-baseline":"central","font-size":this.theme.font.SIZE},this.field_group);var r=document.createTextNode(e);this.text_element.appendChild(r),this.text_element.setAttribute("text-anchor","start"),this.text_element.setAttribute("y",String(this.size_.height/2));var n=this.border_rect?this.size_.width:this.size_.width-2;return this.text_element.setAttribute("x",String(n)),t=this.utils.get_cached_width(this.text_element),t=this.update_min_width(t),this.size_.width+=t,t}},t.prototype.update_min_width=function(e){if(!this.text_element)return 20;if(e>=20)return e;var t=this.text_element.getAttribute("x"),r=(20-e)/2;return this.text_element.setAttribute("x",String(Number(t)+r)),20},t.prototype.render_image_element=function(){var e;if((0,_.assert)(this.field_group),this.image_json&&!(null===(e=this.image_json)||void 0===e?void 0:e.is_hide)){this.image_element=this.create_image(this.image_json),this.field_group.appendChild(this.image_element),this.image_element.setAttribute("x",""+this.size_.width),this.image_element.setAttribute("y",""+(this.size_.height-Number(this.image_element.getAttribute("height")))/2);var t="number"==typeof this.image_json.margin_right?this.image_json.margin_right:2;this.size_.width+=Number(this.image_element.getAttribute("width"))+t}},t.prototype.get_value=function(){return this.value_},t.prototype.show_editor=function(){var e,t=this;this.source_block&&(this.source_block.show_editor?this.source_block.show_editor(function(e){t.set_value(e)},this.value_):this.show_editor_extend(this)||(this.change_editor_style(!0),this.generate_customized_dropdown?e=this.generate_customized_dropdown():(e=this.create_dropdown_element(this.get_advanced_options()||this.get_basic_options(),this.name),this.update_widget_div_position(e))))},t.prototype.create_image=function(e){var t="string"==typeof e.src?(0,l.create_svg_element)("image",{"xlink:href":e.src,width:"100%",height:"100%"}):"number"==typeof e.src?(0,l.get_num_g)(e.src):(0,l.clone_node)(e.src,!0),r=e.width||t.getAttribute("width")||16,n=e.height||Number(t.getAttribute("height"))||16,i=(0,l.create_svg_element)("svg",{width:r,height:n});return i.appendChild(t),i},t.prototype.create_menu_item_div=function(e,t,r,n,i,o,a){var s=this;void 0===o&&(o=!0);var u=(0,l.create_div_element)();if(r){var _=this.create_image(r),c="number"==typeof r.margin_right?r.margin_right:2;_.style.marginRight=c+"px",u.appendChild(_)}var d=document.createElement("span");return d.innerText=e,u.appendChild(d),u.classList.add("menu-item"),o||u.classList.add("menu_item_disable"),n&&u.classList.add("menu_button"),u.dataset.value=t,t===this.value_&&(u.classList.add("menu_item_selected"),null!=i&&i.classList.add("menu_item_selected")),a&&(u.tooltip=a,this.tooltip.bind_mouse_event(u)),u.addEventListener("click",function(e){o&&(e.stopImmediatePropagation(),e.preventDefault(),n?n.call(s.set_value.bind(s)):void 0!==t&&s.set_value(t),s.widget_div.hide_if_owner(s),s.tooltip.hide(),s.events.set_group(!1))}),(n||void 0!==t&&o)&&(u.addEventListener("touchstart",function(){u.classList.add("menu_touch_effect")}),u.addEventListener("touchend",function(){u.classList.remove("menu_touch_effect")})),u},t.prototype.create_menu_item=function(e,t){var r=this;if(!(0,u.is_old_dropdown_option)(e)&&"basic"===e.type)return this.create_menu_item_div(e.text,e.value,e.icon,e.callback,t,e.enabled,e.tooltip);if(!(0,u.is_old_dropdown_option)(e)&&"group"===e.type){var n=this.create_menu_item_div(e.name,void 0,void 0,void 0,t);n.classList.add("menu_group"),n.dataset.group_key=e.value||(0,d.gen_uid)();var i=this.create_dropdown_element(e.options,void 0,n);i.classList.add("menu_group_children"),i.dataset.group_key=n.dataset.group_key,n.addEventListener("mouseover",function(e){e.stopPropagation(),r.update_group_children_div_position(i,n),n.classList.add("menu_group_expanded")});var o=function(e){e.stopPropagation(),e.relatedTarget&&((0,l.is_parent)(i,e.relatedTarget)||(0,l.is_parent)(n,e.relatedTarget))||((0,l.remove_node)(i),n.classList.remove("menu_group_expanded"))};return n.addEventListener("mouseout",o),i.addEventListener("mouseout",o),n}if(!(0,u.is_old_dropdown_option)(e)&&"image_plus"===e.type){var s=void 0===e.index?void 0:"number"==typeof e.index?{src:e.index}:e.index,_=this.create_menu_item_div(e.text||"",e.value,s,e.callback,t,e.enabled,e.tooltip);_.classList.add("menu_item_image_plus");var c=this.create_image(e.image_plus),f=document.createElement("div");return f.classList.add("image_plus"),f.appendChild(c),_.lastElementChild&&(0,l.insert_before)(f,_.lastElementChild),_}if(!(0,u.is_old_dropdown_option)(e)&&"line"===e.type){var p=document.createElement("div");return p.classList.add("dropdown_divider"),p}return this.create_menu_item_div(e[a.OptionTypes.TEXT],e[a.OptionTypes.VALUE],e[a.OptionTypes.ICON],e[a.OptionTypes.TRIGGER_EVENT],t)},t.prototype.create_dropdown_element=function(e,t,r){var n=document.createElement("div");n.classList.add("blocklyDropdownMenu"),n.classList.add("menu-wrapper"),this.source_block&&n.classList.add(this.source_block.type),t&&n.classList.add(t);for(var i=0;i<e.length;i++)n.appendChild(this.create_menu_item(e[i],r));return n},t.prototype.update_group_children_div_position=function(e,t){document.body.appendChild(e);var r=(0,c.get_size)(e),n=(0,c.get_size)(t),i=t.getBoundingClientRect(),o=i.left,a=i.top,l=parseFloat((0,c.get_computed_style)(e,"padding-top"))||0,s=parseFloat((0,c.get_computed_style)(e,"padding-bottom"))||0;if(a+r.height-l>=window.innerHeight){var u=e.lastElementChild&&(0,c.get_size)(e.lastElementChild).height||0;a-=r.height,a+=s,a+=u}else a-=l;o+n.width+r.width>=window.innerWidth?o-=r.width:o+=n.width,e.style.left=o+"px",e.style.top=a+"px"},t.prototype.update_widget_div_position=function(e){var t=this;this.widget_div.show(this,function(){t.focus(!1),t.change_editor_style(!1),Array.from(document.querySelectorAll(".menu_group_children")).forEach(function(e){return(0,l.remove_node)(e)})});var r=this.widget_div.DIV;null!=r&&r.appendChild(e);var n=(0,p.position_dropdown)(e,this);this.widget_div.position(n[0],n[1])},t.prototype.show_editor_extend=function(e){return!1},t.prototype.change_editor_style=function(e){if(this.source_block){if(e)return!this.source_block.is_shadow()&&this.field_group&&this.field_group.setAttribute("data-showing","true"),void(this.source_block.is_shadow()&&this.source_block.svg_group.setAttribute("data-showing","true"));this.field_group&&this.field_group.removeAttribute("data-showing"),this.source_block.is_shadow()&&this.source_block.svg_group.removeAttribute("data-showing")}},t.prototype.set_value=function(e){if(this.get_advanced_options()||this.get_basic_options())if(null!=e){var t=this.get_option(e),r=t&&this.get_option_text(t)||"";if(e!==this.value_||r!==this.text_){var n,i=this.events.get_group();if(this.source_block&&(this.events.is_enabled()&&(i||this.events.set_group(!0),n=this.change_event_factory("field",{block:this.source_block,old_value:this.value_,new_value:e,name:this.name})),this.onchange&&this.onchange(e)),this.value_=e,t){var o=this.get_option_icon(t);return o===this.image_json&&r===this.text_||(this.image_json=o,this.text_=r,this.force_rerender()),void(this.events.is_enabled()&&n&&(this.events.fire(n),this.events.set_group(i)))}this.value_="?",this.image_json=void 0,this.set_text("?"),this.events.is_enabled()&&n&&(this.events.fire(n),this.events.set_group(i))}else this.change_editor_style(!1)}else this.change_editor_style(!1)},t.prototype.set_text=function(e,t){(e!==this.text_||t&&t!==this.image_json)&&(this.text_=e,t&&(this.image_json=t),this.force_rerender())},t.prototype.trim_options=function(){if(this.prefix_field=void 0,this.suffix_field=void 0,!this.is_dynamic()){for(var e=this.get_options(),t=!1,r=0;r<e.length;r++){var n=e[r][0];"string"==typeof n?e[r][0]=this.utils.replace_message_references(n):(n&&null!=n.alt&&(n.alt=this.utils.replace_message_references(n.alt)),t=!0)}if(!(t||e.length<2)){var i=[];for(r=0;r<e.length;r++)i.push(e[r][0]);var o=this.utils.common_word_prefix(i),a=this.utils.common_word_suffix(i);if(o||a){o&&(this.prefix_field=i[0].substring(0,o-1)),a&&(this.suffix_field=i[0].substr(1-a));var l=[];for(r=0;r<e.length;r++){var s=e[r][0],u=e[r][1];s=s.substring(o,s.length-a),l[r]=[s,u,void 0,void 0,void 0]}this.menu_generator=l}}}},t.prototype.get_basic_options=function(){return(0,u.is_func)(this.menu_generator)?this.menu_generator.call(this):this.menu_generator},t.prototype.get_advanced_options=function(){if(this.menu_generator_advanced)return(0,u.is_func)(this.menu_generator_advanced)?this.menu_generator_advanced.call(this):this.menu_generator_advanced},t.prototype.get_options=function(){var e=this.get_advanced_options();if(!e)return this.get_basic_options();var t=[];return e.forEach(function e(r){(0,u.is_old_dropdown_option)(r)?t.push(r):"group"===r.type&&r.options.forEach(e)}),t},t.prototype.get_expanded_advanced_options=function(){var e=this.get_advanced_options();if(!e)return[];var t=[];return e.forEach(function e(r){(0,u.is_old_dropdown_option)(r)||"group"!==r.type?t.push(r):r.options.forEach(e)}),t},t.prototype.get_option=function(e){var t=this;return function r(n){for(var i=0;i<n.length;i++){var o=n[i];if((0,u.is_old_dropdown_option)(o)||"group"!==o.type){if(t.get_option_value(o)===e)return o}else{var a=r(o.options);if(a)return a}}}(this.get_advanced_options()||this.get_basic_options())},t.prototype.get_option_value=function(e){if((0,u.is_old_dropdown_option)(e))return e[a.OptionTypes.VALUE];switch(e.type){case"image_plus":case"basic":return e.value;default:return}},t.prototype.get_option_text=function(e){if((0,u.is_old_dropdown_option)(e))return e[a.OptionTypes.TEXT];switch(e.type){case"group":return e.name;case"image_plus":case"basic":return e.text;default:return}},t.prototype.get_option_icon=function(e){if((0,u.is_old_dropdown_option)(e))return e[a.OptionTypes.ICON];switch(e.type){case"image_plus":return void 0===e.index?void 0:"number"==typeof e.index?{src:e.index}:e.index;case"basic":return e.icon;default:return}},t.prototype.get_option_callback=function(e){if((0,u.is_old_dropdown_option)(e))return e[a.OptionTypes.TRIGGER_EVENT];switch(e.type){case"basic":case"image_plus":return e.callback;default:return}},t.prototype.update_btn_style=function(){},t.prototype.register_dropdown=function(e){this.generate_customized_dropdown=e},t.prototype.is_dynamic=function(){return this.menu_generator_advanced?(0,u.is_func)(this.menu_generator_advanced):(0,u.is_func)(this.menu_generator)},(0,n.__decorate)([(0,o.lazy_inject)(o.BINDING.widget_div)],t.prototype,"widget_div",void 0),(0,n.__decorate)([(0,i.injectable)()],t)}(f.Field);t.FieldDropdown=h},48854:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uniToStrPos=t.strPosToUni=void 0,t.strPosToUni=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,r=0,n=0;n<t;n++){var i=e.charCodeAt(n);i>=55296&&i<=57343&&(r++,n++)}if(n!==t)throw Error("Invalid offset - splits unicode bytes");return n-r},t.uniToStrPos=function(e,t){for(var r=0;t>0;t--){var n=e.charCodeAt(r);r+=n>=55296&&n<=57343?2:1}return r}},50365:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},51065:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(31635);(0,n.__exportStar)(r(72235),t),(0,n.__exportStar)(r(58501),t)},51949:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TOOLBOX_POSITION=t.DeleteArea=void 0,(r=t.DeleteArea||(t.DeleteArea={}))[r.DELETE_AREA_NONE=0]="DELETE_AREA_NONE",r[r.DELETE_AREA_TOOLBOX=2]="DELETE_AREA_TOOLBOX",function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(t.TOOLBOX_POSITION||(t.TOOLBOX_POSITION={}))},52130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(31635);(0,n.__exportStar)(r(51065),t),(0,n.__exportStar)(r(45555),t),(0,n.__exportStar)(r(33470),t),(0,n.__exportStar)(r(45653),t),(0,n.__exportStar)(r(88192),t),(0,n.__exportStar)(r(69231),t)},52570:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TokenizationState=void 0,(r=t.TokenizationState||(t.TokenizationState={}))[r.BaseCase=0]="BaseCase",r[r.PercentFound=1]="PercentFound",r[r.DigitFound=2]="DigitFound",r[r.MsgRefFound=3]="MsgRefFound"},53049:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},53406:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},53571:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},53604:(e,t,r)=>{r.r(t),r.d(t,{a:()=>s,default:()=>u});var n=function(e){return+setTimeout(e,16)},i=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(n=function(e){return window.requestAnimationFrame(e)},i=function(e){return window.cancelAnimationFrame(e)});var o=0,a=new Map;function l(e){a.delete(e)}function s(e){var t=o+=1;return function r(i){if(0===i)l(t),e();else{var o=n(function(){r(i-1)});a.set(t,o)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t}s.cancel=function(e){var t=a.get(e);return l(t),i(t)};const u=s},53936:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},54216:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},55631:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DARK_THEME_CONFIG=t.DEFAULT_THEME_CONFIG=t.RendererParams=t.Theme=void 0;var n=r(31635),i=r(71519),o=r(53307),a=r(24042),l=r(58698),s=function(){function e(){this.current_theme="",this.theme_list={},this.register(d,f),this.register(p,h),this._apply(d)}return e.prototype.get_color=function(e){var t=e.match(/^%\{(BKY_)?([^}]+)\}$/);return e=(null==t?void 0:t[2])||e,this.block_color[e]},e.prototype.register=function(e,t){var r=(0,a.merge_deep)(f,t);this.normalize_config(r),this.theme_list[e]&&console.warn("Theme "+e+" already exists and would be replaced."),this.theme_list[e]=r},e.prototype.apply=function(e){if(this._apply(e),this.Blink.mainWorkspace){this.Blink.events.disable();var t=this.Blink.xml.workspace_to_dom(this.Blink.mainWorkspace);this.Blink.mainWorkspace.clear(),this.Blink.xml.dom_to_workspace(t,this.Blink.mainWorkspace),this.Blink.events.enable();var r=this.Blink.mainWorkspace.get_toolbox();r&&(r.flyout.hide(),r.flyout.clear_cached_blocks())}},e.prototype._apply=function(e){if(this.current_theme!==e){var t=this.theme_list[e];t?(this.current_theme=e,Object.assign(this,t)):console.error("Theme "+e+" not found.")}},e.prototype.normalize_config=function(e){for(var t in e.font.SIZE.match(/^\d*\.?\d+\s*[Pp][Tt]$/)||(console.warn("Font size "+e.font.SIZE+" replaced by default"),e.font.SIZE=f.font.SIZE),e.flyout.BACKGROUND_COLOR=new l.Color(e.flyout.BACKGROUND_COLOR,f.flyout.BACKGROUND_COLOR,"Flyout background color "+e.flyout.BACKGROUND_COLOR+" replaced by default"),e.insertion_marker.COLOR=new l.Color(e.insertion_marker.COLOR,f.insertion_marker.COLOR,"Insertion marker color "+e.insertion_marker.COLOR+" replaced by default"),(e.insertion_marker.OPACITY<0||e.insertion_marker.OPACITY>1)&&(console.warn("Insertion marker opacity "+e.insertion_marker.OPACITY+" replaced by default"),e.insertion_marker.OPACITY=f.insertion_marker.OPACITY),e.shadow_style.SHADOW_COLOR=new l.Color(e.shadow_style.SHADOW_COLOR,f.shadow_style.SHADOW_COLOR,"Shadow color "+e.shadow_style.SHADOW_COLOR+" replaced by default"),e.shadow_style.EMPTY_COLOR=new l.Color(e.shadow_style.EMPTY_COLOR,f.shadow_style.EMPTY_COLOR,"Invalid empty shadow color "+e.shadow_style.EMPTY_COLOR+" replaced by default"),e.shadow_style.BORDER.match(/^\d*\.?\d+\s*[Pp][Xx]$/)||(console.warn("Invalid shadow border "+e.shadow_style.BORDER+" replaced by default"),e.shadow_style.BORDER=f.shadow_style.BORDER),"0"!==e.shadow_style.NO_BORDER&&(console.warn("Invalid shadow no_border "+e.shadow_style.NO_BORDER+" replaced by default"),e.shadow_style.NO_BORDER=f.shadow_style.NO_BORDER),e.block_group_color){var r=t;e.block_group_color[r]=new l.Color(e.block_group_color[r],f.block_group_color[r],"Block group "+t+" replaced by default")}for(var n in e.block_color){var i=new l.Color,o=new l.Color;i.set(e.block_color[n].fill)&&o.set(e.block_color[n].border)?(e.block_color[n].fill=i,e.block_color[n].border=o,e.block_color[n].layer&&((new l.Color).set(e.block_color[n].layer)||(console.warn("Illegal layer color "+e.block_color[n].layer+" of "+n+" deleted."),delete e.block_color[n].layer))):(console.warn("Block color "+n+" and all its related colors deleted."),delete e.block_color[n])}e.disabled_color.fill=new l.Color(e.disabled_color.fill,f.disabled_color.fill,"Block disabled fill color "+e.disabled_color.fill+" replaced by default"),e.disabled_color.border=new l.Color(e.disabled_color.border,f.disabled_color.border,"Block disabled border color "+e.disabled_color.border+" replaced by default")},(0,n.__decorate)([(0,o.lazy_inject)(o.BINDING.Blink)],e.prototype,"Blink",void 0),(0,n.__decorate)([(0,i.injectable)()],e)}();t.Theme=s;var u=function(){this.BLOCK_LEFT_TOP=[0,0],this.MIN_WIDTH=110,this.MIN_WIDTH_OUTPUT=40,this.MIN_WIDTH_SHADOW=this.MIN_WIDTH_OUTPUT,this.MIN_WIDTH_SHADOW_HEXAGONAL=54,this.BLOCK_EDGE_WIDTH=20,this.BLOCK_EDGE_WIDTH_OUTPUT=18,this.BLOCK_EDGE_WIDTH_OUTPUT_HEXAGONAL=12,this.BLOCK_EDGE_WIDTH_SHADOW=15,this.BLOCK_EDGE_WIDTH_SHADOW_ROUND=15,this.BLOCK_EDGE_WIDTH_SHADOW_HEXAGONAL=9,this.MIN_HEIGHT=40,this.MIN_HEIGHT_OUTPUT=36,this.MIN_HEIGHT_SHADOW=30,this.HEAD_ICON_WRAP_WIDTH=48,this.HEAD_ICON_WIDTH=38,this.SEP_SPACE_X=8,this.CORNER_RADIUS=2,this.C_BLOCK_INNER_CORNOR_RADIUS=2,this.CORNER_RADIUS_END_BLOCK_WITHOUD_NOTCH=12,this.HEX_TOP_BOTTOM_CORNER_RADIUS=3,this.HEX_CENTER_CORNER_RADIUS=2,this.CORNER_OFFSET_X=2,this.CORNER_OFFSET_Y=1,this.CENTER_CORNER_OFFSET=2,this.C_BLOCK_INNER_CORNOR_LEFT_TOP="a "+this.C_BLOCK_INNER_CORNOR_RADIUS+" "+this.C_BLOCK_INNER_CORNOR_RADIUS+" 0 0 0 -"+this.C_BLOCK_INNER_CORNOR_RADIUS+" "+this.C_BLOCK_INNER_CORNOR_RADIUS,this.C_BLOCK_INNER_CORNOR_LEFT_BOTTOM="a "+this.C_BLOCK_INNER_CORNOR_RADIUS+" "+this.C_BLOCK_INNER_CORNOR_RADIUS+" 0 0 0 "+this.C_BLOCK_INNER_CORNOR_RADIUS+" "+this.C_BLOCK_INNER_CORNOR_RADIUS,this.COMMENT_PADDING_RIGHT=8,this.NTOCH_START_PADDING=13,this.NOTCH_HEIGHT=4,this.NOTCH_WIDTH=20,this.NOTCH_WIDTH_SHORT=6,this.NOTCH_CORNOR_RADIUS=3,this.NOTCH_WIDTH_SIDE=(this.NOTCH_WIDTH-this.NOTCH_WIDTH_SHORT-2*this.NOTCH_CORNOR_RADIUS)/2,this.NOTCH_OFFSET_BETWEEN_PADDING_AND_ROUND_CORNER=2,this.offset=this.NOTCH_OFFSET_BETWEEN_PADDING_AND_ROUND_CORNER,this.NOTCH_CORNOR_LEFT_TOP_1="a "+this.NOTCH_CORNOR_RADIUS+","+this.NOTCH_CORNOR_RADIUS+" 0 0 1 "+this.offset+",1",this.NOTCH_CORNOR_LEFT_BOTTOM_1="a "+this.NOTCH_CORNOR_RADIUS+","+this.NOTCH_CORNOR_RADIUS+" 0 0 0 "+this.offset+",1",this.NOTCH_CORNOR_RIGHT_TOP_1="a "+this.NOTCH_CORNOR_RADIUS+","+this.NOTCH_CORNOR_RADIUS+" 0 0 1 "+this.offset+",-1",this.NOTCH_CORNOR_RIGHT_BOTTOM_1="a "+this.NOTCH_CORNOR_RADIUS+","+this.NOTCH_CORNOR_RADIUS+" 0 0 0 "+this.offset+",-1",this.NOTCH_PATH_LEFT=this.NOTCH_CORNOR_LEFT_TOP_1+" l "+this.NOTCH_WIDTH_SIDE+","+this.NOTCH_HEIGHT+" "+this.NOTCH_CORNOR_LEFT_BOTTOM_1+" h "+this.NOTCH_WIDTH_SHORT+" "+this.NOTCH_CORNOR_RIGHT_BOTTOM_1+" l "+this.NOTCH_WIDTH_SIDE+",-"+this.NOTCH_HEIGHT+" "+this.NOTCH_CORNOR_RIGHT_TOP_1,this.NOTCH_CORNOR_LEFT_TOP_2="a "+this.NOTCH_CORNOR_RADIUS+","+this.NOTCH_CORNOR_RADIUS+" 0 0 0 -"+this.offset+",-1",this.NOTCH_CORNOR_LEFT_BOTTOM_2="a "+this.NOTCH_CORNOR_RADIUS+","+this.NOTCH_CORNOR_RADIUS+" 0 0 1 -"+this.offset+",-1",this.NOTCH_CORNOR_RIGHT_TOP_2="a "+this.NOTCH_CORNOR_RADIUS+","+this.NOTCH_CORNOR_RADIUS+" 0 0 0 -"+this.offset+",1",this.NOTCH_CORNOR_RIGHT_BOTTOM_2="a "+this.NOTCH_CORNOR_RADIUS+","+this.NOTCH_CORNOR_RADIUS+" 0 0 1 -"+this.offset+",1",this.NOTCH_PATH_RIGHT=this.NOTCH_CORNOR_RIGHT_TOP_2+" l -"+this.NOTCH_WIDTH_SIDE+","+this.NOTCH_HEIGHT+" "+this.NOTCH_CORNOR_RIGHT_BOTTOM_2+" h -"+this.NOTCH_WIDTH_SHORT+" "+this.NOTCH_CORNOR_LEFT_BOTTOM_2+" l -"+this.NOTCH_WIDTH_SIDE+",-"+this.NOTCH_HEIGHT+" "+this.NOTCH_CORNOR_LEFT_TOP_2,this.ROW_PADDING=16,this.ROW_PADDING_OUTPUT=this.BLOCK_EDGE_WIDTH_OUTPUT,this.ROW_PADDING_OUTPUT_WITH_INPUT=16,this.ROW_PADDING_OUTPUT_WITH_TEXT=16,this.ROW_PADDING_OUTPUT_NON_TEXT=0,this.ROW_PADDING_SHADOW=this.BLOCK_EDGE_WIDTH_SHADOW,this.ROW_PADDING_HEAD=this.HEAD_ICON_WIDTH/2,this.STATEMENT_ROW_PADDING_Y_TO_FIELD=5,this.STATEMENT_ROW_PADDING_Y_TO_VALUE_BLOCK=4,this.STATEMENT_ROW_PADDING_Y_TO_STATEMENT_BLOCK=0,this.OUTPUT_ROW_PADDING_Y_TO_FIELD=3,this.OUTPUT_ROW_PADDING_Y_TO_VALUE_BLOCK=2,this.SHADOW_ROW_PADDING_Y_TO_FIELD=0,this.FIELD_HEIGHT=30,this.SHADOW_FIELD_HEIGHT=17.5,this.INPUT_MIN_HEIGHT_STATEMENT=20,this.INPUT_EXTRA_ROW_WIDTH=86,this.INPUT_EXTRA_ROW_HEIGHT=20,this.VALUE_SHAPE_WIDTH=54,this.VALUE_SHAPE_EDGE_WIDTH=this.BLOCK_EDGE_WIDTH_SHADOW,this.VALUE_SHAPE_HEIGHT=30,this.INPUT_SHAPE_ROUND_WIDTH=36,this.INPUT_SHAPE_HEXAGONAL_WIDTH=54,this.INPUT_SHAPE_HEIGHT=28,this.INLINE_PADDING_Y=2,this.VALUE_SHAPE_HEXAGONAL="M "+this.VALUE_SHAPE_EDGE_WIDTH+",0  H "+(this.VALUE_SHAPE_WIDTH-this.VALUE_SHAPE_EDGE_WIDTH)+" L "+this.VALUE_SHAPE_WIDTH+","+4*this.VALUE_SHAPE_HEIGHT/2+" l "+-this.VALUE_SHAPE_EDGE_WIDTH+","+4*this.VALUE_SHAPE_HEIGHT/2+" H "+this.VALUE_SHAPE_EDGE_WIDTH+" L NaN"+this.VALUE_SHAPE_HEIGHT/2+" L "+this.VALUE_SHAPE_EDGE_WIDTH+",0 z",this.VALUE_SHAPE_ROUND="M "+this.VALUE_SHAPE_EDGE_WIDTH+",0 H "+(this.VALUE_SHAPE_WIDTH-this.VALUE_SHAPE_EDGE_WIDTH)+" a "+this.VALUE_SHAPE_EDGE_WIDTH+" "+this.VALUE_SHAPE_HEIGHT/2+" 0 0 1 0 "+this.VALUE_SHAPE_HEIGHT+" H "+this.VALUE_SHAPE_EDGE_WIDTH+" a "+this.VALUE_SHAPE_EDGE_WIDTH+" "+this.VALUE_SHAPE_HEIGHT/2+" 0 0 1 0 -"+this.VALUE_SHAPE_HEIGHT+" z",this.STATEMENT_FIRST_ROW_MIN_WIDTH=110,this.STATEMENT_OTHER_ROW_MIN_WIDTH=86,this.STATEMENT_MIN_WIDTH=16,this.FLYOUT_CORNER_RADIUS=0,this.COLLAPSED_PATH="l 8,0 0,4 8,4 -16,8 8,4",this.COLLAPSED_HEIGHT=20,this.GROUP_RIGHT_EXTENDED_WIDTH=16,this.GROUP_RIGHT_EDGE_WIDTH=this.GROUP_RIGHT_EXTENDED_WIDTH+8,this.OUTPUT_GROUP_DECORATION_PADDING=14,this.OUTPUT_GROUP_DECORATION_OFFSET=6,this.EXECUTION_GROUP_DECORATION_WIDTH=124,this.EXECUTION_GROUP_DECORATION_RIGHT_MARGIN=8,this.GROUP_TOP_RIGHT_PATH="a 4 4 0 0 1 3.7 5.5",this.GROUP_BOTTOM_RIGHT_PATH="a 4 4 0 0 1 -3.7 3.5",this.GROUP_EXTRA_ROW_RIGHT="\n    h "+(96-this.STATEMENT_MIN_WIDTH-12-7)+"\n    a 4 4 0 0 1 3.5 1.7\n    l 7 12\n    a 4 4 0 0 1 -3.5 6.3\n  ",this.TEXT_PADDING_IN_FIELD=8,this.TEXT_MIN_WIDTH_IN_FIELD=20};t.RendererParams=u;var _=function(){this.DRAG_RADIUS=5,this.FLYOUT_DRAG_RADIUS=10,this.SNAP_RADIUS=48,this.CONNECTING_SNAP_RADIUS=68,this.CURRENT_CONNECTION_PREFERENCE=20,this.BUMP_DELAY=250,this.COLLAPSE_CHARS=30,this.LONGPRESS=750,this.SOUND_LIMIT=100},c={INCOMPATIBLE_HUE:{fill:"#c7c7c7",border:"#c7c7c7"},EVENTS_HUE:{fill:"#608FEE",border:"#496EB8"},CONTROL_HUE:{fill:"#68CDFF",border:"#53A2C9"},ACTIONS_HUE:{fill:"#F46767",border:"#BF5050"},APPEARANCE_HUE:{fill:"#E76CEA",border:"#B353B5"},SOUND_HUE:{fill:"#A073FF",border:"#7E5BC9"},PEN_HUE:{fill:"#2BC9A7",border:"#1F947B"},SENSING_HUE:{fill:"#77D657",border:"#5AA142",layer:"#61BA41"},LOGIC_HUE:{fill:"#FEAE8A",border:"#C98A6D",layer:"#EDA380"},MATH_HUE:{fill:"#FEAE8A",border:"#C98A6D"},TEXTS_HUE:{fill:"#FEAE8A",border:"#C98A6D"},VARIABLES_HUE:{fill:"#FFBB55",border:"#C99342"},LISTS_HUE:{fill:"#F9CC37",border:"#C4A12B",layer:"#DEB738"},PROCEDURES_HUE:{fill:"#F88767",border:"#C26A51"},PROCEDURES_PARAM_HUE:{fill:"#FF7E2E",border:"#C26A51"},PHYSICS_HUE:{fill:"#E04852",border:"#AB373E"},CAMERA_HUE:{fill:"#C769FF",border:"#9E53C9"},CAMERA_QRCODE_HUE:{fill:"#C769FF",border:"#9E53C9"},VIDEO_HUE:{fill:"#A073FF",border:"#7E5BC9"},CLOUD_HUE:{fill:"#FFBB55",border:"#C99342"},CLOUD_LIST_HUE:{fill:"#F9CC37",border:"#C4A12B"},AI_HUE:{fill:"#5574F8",border:"#4259C2"},AI_GAME_HUE:{fill:"#8647F3",border:"#6837BD"},AI_COGNITIVE_HUE:{fill:"#C769FF",border:"#9E53C9"},ADVANCED_HUE:{fill:"#14B390",border:"#0E7D65"},HARDWARE_HUE:{fill:"#007E8C",border:"#007E8C"}},d="default",f={font:{SIZE:"12pt"},flyout:{BACKGROUND_COLOR:"rgba(255, 255, 255, 1)"},insertion_marker:{COLOR:"#c7c7c7",OPACITY:.2},shadow_style:{SHADOW_COLOR:"#FFF",EMPTY_COLOR:"rgba(0, 0, 0, 0.1)",BORDER:"1px",NO_BORDER:"0"},block_group_color:{OUTPUT_GROUP_FILL_COLOUR:"#5C559A",OUTPUT_GROUP_STROKE_COLOUR:"#423B82",EXECUTION_GROUP_FILL_COLOUR:"#5C559A",EXECUTION_GROUP_STROKE_COLOUR:"#423B82"},block_color:(0,n.__assign)((0,n.__assign)({DEFAULT:{fill:"#CCCCCC",border:"rgba(0, 0, 0, 0.15)"}},c),{BLUE_1:{fill:"#68CDFF",layer:"#60BEED",border:"#53A2C9"},BLUE_2:{fill:"#64B5F6",border:"#4E8CBF"},BLUE_3:{fill:"#608FEE",border:"#496EB8"},BLUE_4:{fill:"#5574F8",border:"#4259C2"},BLUE_5:{fill:"#3FA1EF",border:"#307CBA"},BLUE_6:{fill:"#00AFC3",border:"#007E8C"},PURPLE_1:{fill:"#E76CEA",layer:"#D858D8",border:"#B353B5"},PURPLE_2:{fill:"#C769FF",border:"#9E53C9"},PURPLE_3:{fill:"#A073FF",border:"#7E5BC9"},PURPLE_4:{fill:"#7D68F1",border:"#6151BD"},PURPLE_5:{fill:"#8647F3",border:"#6837BD"},PURPLE_6:{fill:"#9D47E0",border:"#7937AB"},RED_1:{fill:"#FF895F",border:"#C96C4B"},RED_2:{fill:"#F46767",border:"#BF5050"},RED_3:{fill:"#E65D2D",border:"#B04923"},RED_4:{fill:"#E04852",border:"#AB373E"},RED_5:{fill:"#E94585",border:"#B33665"},RED_6:{fill:"#FF6795",border:"#C95175"},ORANGE_1:{fill:"#F9CC37",layer:"#EDBE24",border:"#E2B51F"},ORANGE_2:{fill:"#FFBB55",border:"#C99342"},ORANGE_3:{fill:"#FEAE8A",layer:"#EC9972",border:"#E58B63"},ORANGE_4:{fill:"#F88767",layer:"#FF7E2E",border:"#C26A51"},ORANGE_5:{fill:"#FC942C",border:"#C77422"},ORANGE_6:{fill:"#EE8F13",border:"#B86E0F"},ORANGE_7:{fill:"#FF7E2E",border:"#C26A51"},GREEN_1:{fill:"#C9D926",border:"#98A31D"},GREEN_2:{fill:"#A3DE2B",border:"#7BA820"},GREEN_3:{fill:"#77D657",layer:"#54BE2F",border:"#51AD2F"},GREEN_4:{fill:"#57B937",border:"#3F8528"},GREEN_5:{fill:"#14B390",border:"#0E7D65"},GREEN_6:{fill:"#2BC9A7",border:"#1F947B"},BLACK_1:{fill:"#999999",border:"#636363"},BLACK_2:{fill:"#4A4A4A",border:"#141414"}}),disabled_color:{fill:"#ABAFB6",border:"#9399A4"},renderer:new u,blink_params:new _},p="dark",h={font:{SIZE:"12pt"},flyout:{BACKGROUND_COLOR:"rgba(255, 255, 255, 1)"},insertion_marker:{COLOR:"#c7c7c7",OPACITY:.2},shadow_style:{SHADOW_COLOR:"#FFF",EMPTY_COLOR:"rgba(0, 0, 0, 0.1)",BORDER:"1px",NO_BORDER:"0"},block_group_color:{OUTPUT_GROUP_FILL_COLOUR:"#5C559A",OUTPUT_GROUP_STROKE_COLOUR:"#423B82",EXECUTION_GROUP_FILL_COLOUR:"#5C559A",EXECUTION_GROUP_STROKE_COLOUR:"#423B82"},block_color:(0,n.__assign)((0,n.__assign)({DEFAULT:{fill:"#CCCCCC",border:"rgba(0, 0, 0, 0.15)"}},c),{BLUE_1:{fill:"#2DB3E3",layer:"#29A6D4",border:"#348DAD"},BLUE_2:{fill:"#3290E6",border:"#3876B0"},BLUE_3:{fill:"#3567E6",border:"#284FB0"},BLUE_4:{fill:"#384CE8",border:"#2B3BB3"},BLUE_5:{fill:"#1E97D1",border:"#16719C"},BLUE_6:{fill:"#00A9BD",border:"#007A87"},PURPLE_1:{fill:"#D158D0",layer:"#BD43BC",border:"#9C419C"},PURPLE_2:{fill:"#BB62F0",border:"#924CBA"},PURPLE_3:{fill:"#893BE3",border:"#692DAD"},PURPLE_4:{fill:"#624AE8",border:"#4B39B3"},PURPLE_5:{fill:"#6924E3",border:"#511CAD"},PURPLE_6:{fill:"#872AD1",border:"#661F9C"},RED_1:{fill:"#FA865D",border:"#C46A49"},RED_2:{fill:"#E64545",border:"#B04646"},RED_3:{fill:"#E6521E",border:"#B04017"},RED_4:{fill:"#C23D3A",border:"#8C2C2A"},RED_5:{fill:"#E34382",border:"#AD3463"},RED_6:{fill:"#FA6592",border:"#C44F72"},ORANGE_1:{fill:"#E8C552",layer:"#D9B337",border:"#B3973E"},ORANGE_2:{fill:"#EDB157",border:"#B88944"},ORANGE_3:{fill:"#F09972",layer:"#E6875D",border:"#BA7859"},ORANGE_4:{fill:"#F28465",layer:"#FF7824",border:"#BD674F"},ORANGE_5:{fill:"#F7912B",border:"#C27121"},ORANGE_6:{fill:"#E08103",border:"#AB6202"},ORANGE_7:{fill:"#FF7824",border:"#BD674F"},GREEN_1:{fill:"#B0C200",border:"#8D990C"},GREEN_2:{fill:"#8CC714",border:"#739E1E"},GREEN_3:{fill:"#63C243",border:"#488C31"},GREEN_4:{fill:"#53B034",border:"#3A7A25"},GREEN_5:{fill:"#13AD8B",border:"#0C6E59"},GREEN_6:{fill:"#28BA9B",border:"#1C856E"},BLACK_1:{fill:"#9A9A9A",border:"#636363"},BLACK_2:{fill:"#4A4A4A",border:"#141414"}}),disabled_color:{fill:"#ACADAE",border:"#818388"},renderer:new u,blink_params:new _};t.DEFAULT_THEME_CONFIG=(0,a.clone_deep)(f),t.DARK_THEME_CONFIG=(0,a.clone_deep)(h)},56215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},56521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},58501:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.InputType=void 0,(r=t.InputType||(t.InputType={}))[r.VALUE=1]="VALUE",r[r.STATEMENT=3]="STATEMENT",r[r.DUMMY=5]="DUMMY"},58546:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionTypes=void 0,(r=t.OptionTypes||(t.OptionTypes={}))[r.TEXT=0]="TEXT",r[r.VALUE=1]="VALUE",r[r.ICON=2]="ICON",r[r.TRIGGER_EVENT=3]="TRIGGER_EVENT"},58698:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hsva_to_rgba=t.rgba_to_hex=t.hsv_to_rgb=t.rgb_to_hsv=t.darken=t.Color=void 0;var n=r(99186),i=function(){function e(e,t,r){this.r=0,this.g=0,this.b=0,this.a=1,!this.set(e)&&t&&(console.warn(r||"Cannot init Color with "+e+", using "+t+". "),this.set(t))}return e.prototype.set=function(e){return void 0!==e&&("string"==typeof e?this._set(e):(this.copy(e),!0))},e.prototype._set=function(e){var t=(e=String(e).toLowerCase().trim()).match(/^(?:rgb|rgba)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*(\d*\.?\d+)\s*)?\)$/);if(t){var r=Math.round(Number(t[1])),n=Math.round(Number(t[2])),i=Math.round(Number(t[3])),o=void 0===t[5]?1:Number(t[5]);return!(r<0||r>255||n<0||n>255||i<0||i>255||o<0||o>1||(this.r=r,this.g=n,this.b=i,this.a=o,0))}var a=this.normalize_hexa(e);return!(!a||(r=parseInt(a.substr(1,2),16),n=parseInt(a.substr(3,2),16),i=parseInt(a.substr(5,2),16),o=parseInt(a.substr(7,2),16)/255,r<0||r>255||n<0||n>255||i<0||i>255||o<0||o>1||(this.r=r,this.g=n,this.b=i,this.a=o,0)))},e.prototype.normalize_hexa=function(e){if(e="0x"==e.substring(0,2)?"#"+e.substring(2):e,/^#(?:[0-9a-f]{3}){1,2}$/i.test(e)||/^#(?:[0-9a-f]{4}){1,2}$/i.test(e))return 5===e.length&&(e=e.replace(/#(.)(.)(.)(.)/,"#$1$1$2$2$3$3$4$4")),4===e.length&&(e=e.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3ff")),7===e.length&&(e+="ff"),e.toLowerCase()},e.prototype.toString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},e.prototype.clone=function(){var t=new e;return t.r=this.r,t.g=this.g,t.b=this.b,t.a=this.a,t},e.prototype.copy=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this},e.prototype.blend=function(e){var t=1-(1-this.a)*(1-e.a);return this.r=Math.round(e.r*e.a/t+this.r*this.a*(1-e.a)/t),this.g=Math.round(e.g*e.a/t+this.g*this.a*(1-e.a)/t),this.b=Math.round(e.b*e.a/t+this.b*this.a*(1-e.a)/t),this.a=t,this},e.prototype.equals=function(t){return t&&"string"!=typeof t||(t=new e(t)),this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a},e}();t.Color=i;var o=new i("#000");t.darken=function(e,t,r){return o.a=(0,n.clamp)(t,0,1),((null==r?void 0:r.copy(e))||e.clone()).blend(o)},t.rgb_to_hsv=function(e,t,r){var n=e/255,i=t/255,o=r/255,a=Math.max(n,i,o),l=Math.min(n,i,o),s=a-l,u=0===a?0:s/a,_=a,c=a;if(a===l)c=0;else{switch(a){case n:c=(i-o)/s+(i<o?6:0);break;case i:c=(o-n)/s+2;break;case o:c=(n-i)/s+4}c/=6}return{h:Math.round(360*c),s:Math.round(1e3*u/10),v:Math.round(1e3*_/10)}},t.hsv_to_rgb=function(e){var t=e.h/360,r=e.s/100,n=e.v/100,i=0,o=0,a=0,l=Math.floor(6*t),s=6*t-l,u=n*(1-r),_=n*(1-s*r),c=n*(1-(1-s)*r);switch(l%6){case 0:i=n,o=c,a=u;break;case 1:i=_,o=n,a=u;break;case 2:i=u,o=n,a=c;break;case 3:i=u,o=_,a=n;break;case 4:i=c,o=u,a=n;break;case 5:i=n,o=u,a=_}return[Math.round(255*i),Math.round(255*o),Math.round(255*a)]},t.rgba_to_hex=function(e){var t=(256|e.r).toString(16).slice(1)+(256|e.g).toString(16).slice(1)+(256|e.b).toString(16).slice(1);return 1===e.a?"#"+t:"#"+(t+=(255*e.a|256).toString(16).slice(1))},t.hsva_to_rgba=function(e){var t=e.h/360,r=e.s/100,n=e.v/100,i=0,o=0,a=0,l=Math.floor(6*t),s=6*t-l,u=n*(1-r),_=n*(1-s*r),c=n*(1-(1-s)*r);switch(l%6){case 0:i=n,o=c,a=u;break;case 1:i=_,o=n,a=u;break;case 2:i=u,o=n,a=c;break;case 3:i=u,o=_,a=n;break;case 4:i=c,o=u,a=n;break;case 5:i=n,o=u,a=_}return{r:Math.round(255*i),g:Math.round(255*o),b:Math.round(255*a),a:e.a}}},58907:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},59603:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},59712:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},60631:function(e,t,r){(function(t){var n=r(31161);function i(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function o(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var a=r(28787),l=Object.prototype.hasOwnProperty,s=Array.prototype.slice,u="foo"===function(){}.name;function _(e){return Object.prototype.toString.call(e)}function c(e){return!o(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var d=e.exports=g,f=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(a.isFunction(e)){if(u)return e.name;var t=e.toString().match(f);return t&&t[1]}}function h(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function v(e){if(u||!a.isFunction(e))return a.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function E(e,t,r,n,i){throw new d.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function g(e,t){e||E(e,!0,t,"==",d.ok)}function O(e,t,r,n){if(e===t)return!0;if(o(e)&&o(t))return 0===i(e,t);if(a.isDate(e)&&a.isDate(t))return e.getTime()===t.getTime();if(a.isRegExp(e)&&a.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(c(e)&&c(t)&&_(e)===_(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;var l=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==l&&l===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(a.isPrimitive(e)||a.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i,o,l=T(e),u=T(t);if(l&&!u||!l&&u)return!1;if(l)return O(e=s.call(e),t=s.call(t),r);var _=y(e),c=y(t);if(_.length!==c.length)return!1;for(_.sort(),c.sort(),o=_.length-1;o>=0;o--)if(_[o]!==c[o])return!1;for(o=_.length-1;o>=0;o--)if(!O(e[i=_[o]],t[i],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function T(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function m(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function b(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&E(i,r,"Missing expected exception"+n);var o="string"==typeof n,l=!e&&i&&!r;if((!e&&a.isError(i)&&o&&m(i,r)||l)&&E(i,r,"Got unwanted exception"+n),e&&i&&r&&!m(i,r)||!e&&i)throw i}d.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return h(v(e.actual),128)+" "+e.operator+" "+h(v(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||E;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=p(t),o=n.indexOf("\n"+i);if(o>=0){var a=n.indexOf("\n",o+1);n=n.substring(a+1)}this.stack=n}}},a.inherits(d.AssertionError,Error),d.fail=E,d.ok=g,d.equal=function(e,t,r){e!=t&&E(e,t,r,"==",d.equal)},d.notEqual=function(e,t,r){e==t&&E(e,t,r,"!=",d.notEqual)},d.deepEqual=function(e,t,r){O(e,t,!1)||E(e,t,r,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(e,t,r){O(e,t,!0)||E(e,t,r,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(e,t,r){O(e,t,!1)&&E(e,t,r,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=function e(t,r,n){O(t,r,!0)&&E(t,r,n,"notDeepStrictEqual",e)},d.strictEqual=function(e,t,r){e!==t&&E(e,t,r,"===",d.strictEqual)},d.notStrictEqual=function(e,t,r){e===t&&E(e,t,r,"!==",d.notStrictEqual)},d.throws=function(e,t,r){b(!0,e,t,r)},d.doesNotThrow=function(e,t,r){b(!1,e,t,r)},d.ifError=function(e){if(e)throw e},d.strict=n(function e(t,r){t||E(t,!0,r,"==",e)},d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual}),d.strict.strict=d.strict;var y=Object.keys||function(e){var t=[];for(var r in e)l.call(e,r)&&t.push(r);return t}}).call(this,r(69475))},60803:(e,t,r)=>{r.r(t),r.d(t,{a:()=>i,default:()=>o});const n=r(88309);function i(e,t){if(e){if("string"==typeof e)return n.a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n.a(e,t):void 0}}const o=i},61017:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},61657:(e,t,r)=>{r.r(t),r.d(t,{a:()=>n,b:()=>i,default:()=>o});var n="transparent",i=[n,"#FFFCF5FF","#FFFEF0FF","#EDFFEDFF","#F2FFFCFF","#F7FAFFFF","#FAF8FFFF","#FFF5F9FF","#FFF6F5FF","#FFFFFFFF","#FFF7E8FF","#FFFCDCFF","#E2FFE2FF","#DDFFF7FF","#E8F2FFFF","#EFEBF7FF","#FCEEF3FF","#FFF3F2FF","#F5F5F7FF","#FBE2BBFF","#FFF6B9FF","#B9FFBFFF","#C9F6ECFF","#B7DDFBFF","#D4C7EEFF","#F4B8CCFF","#F1B9BAFF","#CACACAFF","#FFB445FF","#FFEE53FF","#83EC8CFF","#46EED0FF","#72BFFFFF","#B6A3FFFF","#FA8CBCFF","#FF8B8BFF","#7C7C7CFF","#FC8C04FF","#FADB14FF","#37E547FF","#11D5B1FF","#2699FFFF","#9179EAFF","#F6669BFF","#FD6060FF","#383838FF","#D36913FF","#FFBE25FF","#1BC514FF","#1EAC91FF","#196FF2FF","#7659E5FF","#D7487DFF","#F14952FF"];const o=n},62987:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},67468:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},68680:(e,t,r)=>{r.r(t),r.d(t,{a:()=>i,b:()=>a,default:()=>l});const n=r(78698);function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.a({isFold:!0,screenId:"GLOBAL",isWatching:!0,selected:!0},r),o=n.a(n.a({type:e},i),t);return o.isWatching?o.selected=!0:o.selected=!1,o}var o={PRIMITIVE:{class:"icon-watch-variable",color:"rgb(255, 187, 85)",text:"variable",fontSize:"20px",foldIcon:"",unfoldIcon:""},LIST:{class:"icon-watch-list",color:"rgb(255, 201, 21)",text:"list",fontSize:"20px",foldIcon:"icon-open",unfoldIcon:"icon-fold-datawatch"},DICT:{class:"icon-watch-dict",color:"rgb(160, 115, 255)",text:"object",fontSize:"20px",foldIcon:"icon-open",unfoldIcon:"icon-fold-datawatch"},TABLE_DATA_WIDGET:{class:"icon-watch-tabledata",color:"#775af4",text:"ListViewerWidget.tableData",fontSize:"20px",foldIcon:"icon-openview",unfoldIcon:"icon-openview"},LOCAL_STORAGE_WIDGET:{class:"icon-watch-database",color:"#775af4",text:"LocalStorageWidget.widgetName",fontSize:"20px",foldIcon:"icon-open",unfoldIcon:"icon-fold-datawatch"},NEW_LOCAL_STORAGE_WIDGET:{class:"icon-watch-database",color:"#775af4",text:"LocalStorageWidget.widgetName",fontSize:"20px",foldIcon:"icon-open",unfoldIcon:"icon-fold-datawatch"},DEFAULT:{class:"icon-watch-variable",color:"rgb(255, 187, 85)",text:"PRIMITIVE",fontSize:"20px",foldIcon:"icon-open",unfoldIcon:"icon-fold-datawatch"}};function a(e){return o[e]?o[e]:o.DEFAULT}const l=i},69231:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.InputRowType=void 0,(r=t.InputRowType||(t.InputRowType={}))[r.INLINE=-1]="INLINE",r[r.STATEMENT=3]="STATEMENT"},69658:(e,t,r)=>{r.r(t),r.d(t,{a:()=>i,b:()=>_,c:()=>d,d:()=>f,default:()=>E,e:()=>p,f:()=>c,g:()=>o,h:()=>l,i:()=>s,j:()=>v,k:()=>h,l:()=>a,m:()=>u});const n=r(61657);var i="icon-widget-image",o=n.a,a=274,l=160,s="https://static.codemao.cn/coco/image/image_widget_default_image_v2.svg",u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",_="defaultImageWidgetTitle",c="image/jpeg, image/png, image/svg+xml, image/gif, image/bmp",d="image/svg+xml",f="image/jpeg, image/png, image/bmp",p="image/jpeg, image/png, image/bmp",h=!1,v=!1;const E=i},70733:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},71023:(e,t,r)=>{var n,i,o;r.r(t),r.d(t,{a:()=>f,b:()=>p,c:()=>u,d:()=>v,default:()=>m,e:()=>_,f:()=>h,g:()=>d,h:()=>c,i:()=>O,j:()=>g,k:()=>E,l:()=>T});const a=r(48096),l=r(3631),s=r(36451);var u="#5DC5FBFF",_="icon-widget-switch",c=!1,d=!1,f="https://creation.codemao.cn/884/l4zc62tv.png",p="https://creation.codemao.cn/884/l4zc62wn.png",h=54,v=30,E=h/v,g=26,O=14;o={},a.a(o,s.c.DEFAULT,(n={},a.a(n,l.s.SMALL,{width:26,height:14}),a.a(n,l.s.MEDIUM,{width:36,height:20}),a.a(n,l.s.LARGE,{width:46,height:26}),n)),a.a(o,s.c.PRIMARY,(i={},a.a(i,l.s.SMALL,{width:32,height:18}),a.a(i,l.s.MEDIUM,{width:46,height:26}),a.a(i,l.s.LARGE,{width:60,height:34}),i));var T=o;const m=f},71328:(e,t,r)=>{r.r(t),r.d(t,{a:()=>O,default:()=>T});const n=r(64740),i=r(16229),o=r(19238),a=r(13505),l=r(77071),s=r(96540),u=r(83193),_=r(91743),c=r(53604);var d,f=0,p={};function h(e){var t=f++,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return p[t]=c.a(function n(){(r-=1)<=0?(e(),delete p[t]):p[t]=c.a(n)}),t}h.cancel=function(e){void 0!==e&&(c.a.cancel(p[e]),delete p[e])},h.ids=p;const v=r(47898),E=r(9296);function g(e){return!e||null===e.offsetParent||e.hidden}var O=function(e){a.a(r,e);var t=l.a(r);function r(){var e;return n.a(this,r),(e=t.apply(this,arguments)).containerRef=s.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,r){var n,i,a=e.props,l=a.insertExtraNode;if(!(a.disabled||!t||g(t)||t.className.indexOf("-leave")>=0)){e.extraNode=document.createElement("div");var s=o.a(e).extraNode,_=e.context.getPrefixCls;s.className="".concat(_(""),"-click-animating-node");var c=e.getAttributeName();if(t.setAttribute(c,"true"),r&&"#ffffff"!==r&&"rgb(255, 255, 255)"!==r&&function(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}(r)&&!/rgba\((?:\d*, ){3}0\)/.test(r)&&"transparent"!==r){s.style.borderColor=r;var f=(null===(n=t.getRootNode)||void 0===n?void 0:n.call(t))||t.ownerDocument,p=f instanceof Document?f.body:null!==(i=f.firstChild)&&void 0!==i?i:f;d=u.a("\n      [".concat(_(""),"-click-animating-without-extra-node='true']::after, .").concat(_(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(r,";\n      }"),"antd-wave",{csp:e.csp,attachTo:p})}l&&t.appendChild(s),["transition","animation"].forEach(function(r){t.addEventListener("".concat(r,"start"),e.onTransitionStart),t.addEventListener("".concat(r,"end"),e.onTransitionEnd)})}},e.onTransitionStart=function(t){if(!e.destroyed){var r=e.containerRef.current;t&&t.target===r&&!e.animationStart&&e.resetEffect(r)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var r=function(r){if("INPUT"!==r.target.tagName&&!g(r.target)){e.resetEffect(t);var n=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout(function(){return e.onClick(t,n)},0),h.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=h(function(){e.animationStart=!1},10)}};return t.addEventListener("click",r,!0),{cancel:function(){t.removeEventListener("click",r,!0)}}}},e.renderWave=function(t){var r=t.csp,n=e.props.children;if(e.csp=r,!s.isValidElement(n))return n;var i=e.containerRef;return _.c(n)&&(i=_.a(n.ref,e.containerRef)),E.a(n,{ref:i})},e}return i.a(r,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var r=this.props.insertExtraNode,n=this.getAttributeName();e.setAttribute(n,"false"),d&&(d.innerHTML=""),r&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach(function(r){e.removeEventListener("".concat(r,"start"),t.onTransitionStart),e.removeEventListener("".concat(r,"end"),t.onTransitionEnd)})}}},{key:"render",value:function(){return s.createElement(v.a,null,this.renderWave)}}]),r}(s.Component);O.contextType=v.b;const T=O},72137:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.adjust_bboxes_for_rtl=t.get_computed_style=t.get_style=t.get_size=t.get_viewport_page_offset=void 0;var n=r(77276),i=r(15261),o=r(82390);function a(e){var t=e.offsetWidth,r=e.offsetHeight,n=o.is.webkit()&&!t&&!r;if((null!=t||n)&&e.getBoundingClientRect){var i=e.getBoundingClientRect();return{width:i.right-i.left,height:i.bottom-i.top}}return{width:t,height:r}}function l(e,t){return s(e,t)||function(e,t){return e.currentStyle?e.currentStyle[t]:void 0}(e,t)||e.style&&e.style[Number(t)]}function s(e,t){var r=(0,i.get_owner_document)(e);if(r.defaultView&&r.defaultView.getComputedStyle){var n=r.defaultView.getComputedStyle(e,void 0);if(n)return n[Number(t)]||n.getPropertyValue(t)||""}return""}t.get_viewport_page_offset=function(e){var t=e.body,r=e.documentElement,i=t.scrollLeft||r.scrollLeft,o=t.scrollTop||r.scrollTop;return n.vec2.fromValues(i,o)},t.get_size=function(e){return function(e,t){if("none"!=l(t,"display"))return e(t);var r=t.style,n=r.display,i=r.visibility,o=r.position;r.visibility="hidden",r.position="absolute",r.display="inline";var a=e(t);return r.display=n,r.position=o,r.visibility=i,a}(a,e)},t.get_style=l,t.get_computed_style=s,t.adjust_bboxes_for_rtl=function(e,t,r){t.left+=r.width,t.right+=r.width,e.left+=r.width,e.right+=r.width}},72235:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(31635);(0,n.__exportStar)(r(54216),t),(0,n.__exportStar)(r(56215),t),(0,n.__exportStar)(r(58546),t),(0,n.__exportStar)(r(61017),t),(0,n.__exportStar)(r(19220),t),(0,n.__exportStar)(r(72307),t),(0,n.__exportStar)(r(82462),t),(0,n.__exportStar)(r(12981),t),(0,n.__exportStar)(r(88768),t),(0,n.__exportStar)(r(30671),t),(0,n.__exportStar)(r(47395),t),(0,n.__exportStar)(r(84996),t),(0,n.__exportStar)(r(95909),t),(0,n.__exportStar)(r(23118),t)},72307:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},72956:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(31635);(0,n.__exportStar)(r(1145),t),(0,n.__exportStar)(r(22988),t)},73060:(e,t,r)=>{function n(e){if(Array.isArray(e))return e}r.r(t),r.d(t,{a:()=>n,default:()=>i});const i=n},74892:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75211:(e,t,r)=>{var n=r(4264),i=r(96540),o=r(64330),a=r(47898),l=function(e){return e?"function"==typeof e?e():e:null},s=r(33684),u=i.forwardRef(function(e,t){var r=e.prefixCls,u=e.title,_=e.content,c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["prefixCls","title","content"]),d=i.useContext(a.b).getPrefixCls,f=d("popover",r),p=d();return i.createElement(o.a,n.a({},c,{prefixCls:f,ref:t,overlay:function(e){return i.createElement(i.Fragment,null,u&&i.createElement("div",{className:"".concat(e,"-title")},l(u)),i.createElement("div",{className:"".concat(e,"-inner-content")},l(_)))}(f),transitionName:s.b(p,"zoom-big",c.transitionName)}))});u.displayName="Popover",u.defaultProps={placement:"top",trigger:"hover",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{}},t.a=u},75511:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75766:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(31635);(0,n.__exportStar)(r(62987),t),(0,n.__exportStar)(r(74892),t),(0,n.__exportStar)(r(53049),t)},77521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},79384:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(27578),i=r(48854);function o(e,t){return{get:e,getLength:function(){return e().length},insert:function(r,n,o){var a=i.strPosToUni(e(),r);return t([a,n],o)},remove:function(r,n,o){var a=i.strPosToUni(e(),r);return t([a,{d:n}],o)},_onOp:function(e){var t=this;n.eachOp(e,function(e,r,i){switch(typeof e){case"string":t.onInsert&&t.onInsert(i,e);break;case"object":var o=n.dlen(e.d);t.onRemove&&t.onRemove(i,o)}})},onInsert:null,onRemove:null}}t.default=o,o.provides={text:!0}},80834:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(31635);(0,n.__exportStar)(r(59603),t),(0,n.__exportStar)(r(6516),t),(0,n.__exportStar)(r(83925),t),(0,n.__exportStar)(r(53406),t),(0,n.__exportStar)(r(17967),t),(0,n.__exportStar)(r(59712),t),(0,n.__exportStar)(r(29436),t),(0,n.__exportStar)(r(48428),t),(0,n.__exportStar)(r(58907),t),(0,n.__exportStar)(r(82182),t),(0,n.__exportStar)(r(38781),t),(0,n.__exportStar)(r(53936),t),(0,n.__exportStar)(r(11935),t),(0,n.__exportStar)(r(52570),t),(0,n.__exportStar)(r(17921),t),(0,n.__exportStar)(r(42756),t),(0,n.__exportStar)(r(53571),t),(0,n.__exportStar)(r(518),t),(0,n.__exportStar)(r(77521),t)},82182:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},82390:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is=void 0;var r=function(){function e(){this.userAgent=(navigator&&navigator.userAgent||"").toLowerCase(),this.platform=(navigator&&navigator.platform||"").toLowerCase(),this.comparator={"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t}}}return e.prototype.compare_version=function(e,t){var r=String(t),n=+(r.match(/\d+/)||NaN),i=r.match(/^[<>]=?|/)[0];return this.comparator[i]?this.comparator[i](e,n):e==n||n!=n},e.prototype.iphone=function(e){var t=this.ipad()?null:this.userAgent.match(/iphone(?:.+?os (\d+))?/);return null!==t&&this.compare_version(Number(t[1]||1),e)},e.prototype.ipad=function(e){var t=this.userAgent.match(/ipad.+?os (\d+)/);return null!==t&&this.compare_version(Number(t[1]),e)},e.prototype.ios=function(){return this.ipad()||this.iphone()},e.prototype.android=function(e){if(!e)return/android/.test(this.userAgent);var t=this.userAgent.match(/android.+?(\d+)/);try{return null!==t&&this.compare_version(Number(t[1]),e)}catch(e){return console.warn("cc android",e),!1}},e.prototype.ie=function(e){var t=this.userAgent.match(/(?:msie |trident.+?; rv:)(\d+)/);return null!==t&&this.compare_version(Number(t[1]),e)},e.prototype.webkit=function(){return/webkit\/([\d.]+)/.test(this.userAgent)},e.prototype.JavaFX=function(){return/JavaFX/i.test(this.userAgent)},e.prototype.firefox=function(){return/Firefox\/([\d.]+)/.test(this.userAgent)},e.prototype.safari=function(e){var t=this.userAgent.match(/version\/(\d+).+?safari/);return null!==t&&this.compare_version(Number(t[1]),e)},e.prototype.android_phone=function(){return/android/.test(this.userAgent)&&/mobile/.test(this.userAgent)},e.prototype.mobile=function(){return this.iphone()||this.android_phone()},e.prototype.Gecko=function(){return/Gecko/i.test(this.userAgent)},e.prototype.edge=function(e){var t=this.userAgent.match(/edge\/(\d+)/);return null!==t&&this.compare_version(Number(t[1]),e)},e.prototype.mac=function(){return/mac/.test(this.platform)},e}();t.is=new r},82462:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},83193:(e,t,r)=>{r.r(t),r.d(t,{a:()=>l,default:()=>s});const n=r(68130);function i(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function o(e){var t,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n.a())return null;var a=document.createElement("style");(null===(t=o.csp)||void 0===t?void 0:t.nonce)&&(a.nonce=null===(r=o.csp)||void 0===r?void 0:r.nonce),a.innerHTML=e;var l=i(o),s=l.firstChild;return o.prepend&&l.prepend?l.prepend(a):o.prepend&&s?l.insertBefore(a,s):l.appendChild(a),a}var a=new Map;function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i(r);if(!a.has(n)){var l=o("",r),s=l.parentNode;a.set(n,s),s.removeChild(l)}var u,_,c,d=Array.from(a.get(n).children).find(function(e){return"STYLE"===e.tagName&&e["rc-util-key"]===t});if(d)return(null===(u=r.csp)||void 0===u?void 0:u.nonce)&&d.nonce!==(null===(_=r.csp)||void 0===_?void 0:_.nonce)&&(d.nonce=null===(c=r.csp)||void 0===c?void 0:c.nonce),d.innerHTML!==e&&(d.innerHTML=e),d;var f=o(e,r);return f["rc-util-key"]=t,f}const s=l},83925:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BlockOptionType=t.WorkspaceOptionType=void 0,(r=t.WorkspaceOptionType||(t.WorkspaceOptionType={}))[r.PASTE=0]="PASTE",r[r.CLEAN_UP=1]="CLEAN_UP",r[r.DELETE_ALL=2]="DELETE_ALL",r[r.COPY_ALL=3]="COPY_ALL",r[r.GLOBAL_COMMENT=4]="GLOBAL_COMMENT",function(e){e[e.COPY_AND_PASTE=0]="COPY_AND_PASTE",e[e.COPY=1]="COPY",e[e.ADD_COMMENT=2]="ADD_COMMENT",e[e.COLLAPSE=3]="COLLAPSE",e[e.DELETE=4]="DELETE",e[e.SET_GROUP=5]="SET_GROUP",e[e.VISIBILITY_CHANGE=6]="VISIBILITY_CHANGE"}(t.BlockOptionType||(t.BlockOptionType={}))},84996:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},86684:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){if(null===t)return null;if(Array.isArray(t))return t.map(e);if("object"==typeof t){var r={};for(var n in t)r[n]=e(t[n]);return r}return t}},88192:(e,t)=>{var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.OPPOSITE_TYPE=t.CONNECTABLE_TYPE=t.CONNECTION_TYPE=t.OutputShape=void 0,(n=t.OutputShape||(t.OutputShape={}))[n.ROUND=0]="ROUND",n[n.HEXAGONAL=1]="HEXAGONAL",function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"}(r=t.CONNECTION_TYPE||(t.CONNECTION_TYPE={})),function(e){e[e.CAN_CONNECT=0]="CAN_CONNECT",e[e.REASON_SELF_CONNECTION=1]="REASON_SELF_CONNECTION",e[e.REASON_WRONG_TYPE=2]="REASON_WRONG_TYPE",e[e.REASON_TARGET_NULL=3]="REASON_TARGET_NULL",e[e.REASON_CHECKS_FAILED=4]="REASON_CHECKS_FAILED",e[e.REASON_DIFFERENT_WORKSPACES=5]="REASON_DIFFERENT_WORKSPACES",e[e.REASON_SHADOW_PARENT=6]="REASON_SHADOW_PARENT"}(t.CONNECTABLE_TYPE||(t.CONNECTABLE_TYPE={})),t.OPPOSITE_TYPE=[],t.OPPOSITE_TYPE[r.INPUT_VALUE]=r.OUTPUT_VALUE,t.OPPOSITE_TYPE[r.OUTPUT_VALUE]=r.INPUT_VALUE,t.OPPOSITE_TYPE[r.NEXT_STATEMENT]=r.PREVIOUS_STATEMENT,t.OPPOSITE_TYPE[r.PREVIOUS_STATEMENT]=r.NEXT_STATEMENT},88482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},88768:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},88778:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},89989:function(e,t,r){var n=r(79231),i=r(98245),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.editOp=t.replaceOp=t.insertOp=t.moveOp=t.removeOp=t.type=void 0;var a=o(r(15806)),l=o(r(86684)),s=r(32414),u=r(28245),_=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).JSON1_RELEASE_MODE,c=_?function(){}:r(44502).A;function d(e,t){if(_){if(!e)throw new Error(t)}else r(60631)(e,t)}var f=!1;t.type={name:"json1",uri:"http://sharejs.org/types/JSONv1",readCursor:s.readCursor,writeCursor:s.writeCursor,create:function(e){return e},isNoop:function(e){return null==e},setDebug:function(e){f=e,c.quiet=!e},registerSubtype:A,checkValidOp:L,normalize:F,apply:function(e,t){if(c.quiet=!f,_||(c("apply"),c("snapshot",e),c("op",t),c("repro: apply(".concat(JSON.stringify(e),", ").concat(JSON.stringify(t),")"))),L(t),null===t)return e;var r=[];return e=function e(t,n){for(var i=[],o=0;o<n.length;o++){var a=n[o];if(Array.isArray(a))break;"object"!=typeof a&&(i.push(t),t=y(t,a))}for(var l=n.length-1;l>=o;l--)t=e(t,n[l]);for(--o;o>=0;o--){var s=n[o];if("object"!=typeof s){var u=i.pop();t=t===y(u,s)?u:void 0===t?O(u,s):m(u,s,t)}else E(s)&&(d(void 0!==t,"Cannot pick up or remove undefined"),null!=s.p&&(r[s.p]=t),t=void 0)}return t}(e,t),c("--- after pick phase ---"),c("held",r,"snapshot",e),e=function e(t,n){var i=t,o=0,a={root:t},l=0,s=a,u="root";function _(){for(;l<o;l++){var e=n[l];"object"!=typeof e&&(d(b(s,u)),s=s[u]=v(s[u]),u=e)}}for(;o<n.length;o++){var c=n[o];if(Array.isArray(c)){var f=e(i,c);f!==i&&void 0!==f&&(_(),i=s[u]=f)}else if("object"==typeof c){null!=c.d?(_(),i=T(s,u,r[c.d])):void 0!==c.i&&(_(),i=T(s,u,c.i));var p=S(c);if(p)_(),i=s[u]=p.apply(i,R(c));else if(void 0!==c.e)throw Error("Subtype "+c.et+" undefined")}else i=y(i,c)}return a.root}(e,t),c("-> apply returning snapshot",e),e},transformPosition:function(e,t){c("transformPosition",e,t),k(),e=e.slice(),L(t);for(var r,n,i=s.readCursor(t),o=!1,a=[],l=function(t){var l=e[t],u=i.getComponent();if(c("pick phase",t,":",l,u),u&&(void 0!==u.r?o=!0:null!=u.p&&(o=!1,r=u.p,n=t)),t>=e.length)return"break";var _=0,d=s.advancer(i,void 0,function(e,t){E(t)&&_++});a.unshift(d);var f=d(l);return"number"==typeof l&&(e[t]-=_),f?void 0:"break"},u=0;"break"!==l(u);u++);if(a.forEach(function(e){return e.end()}),M(),c("after pick phase. Remove",o,"pi",n,"pas",r,"po",e),o)return c("item removed. Bailing!"),null;var d=function(){k();var t=0;if(null!=r){var o=i.getPath();t=o.length,_||c("path",e,"pi",n,"r",o),e=o.concat(e.slice(n))}_||c("handleDrop at path",e,"read cursor",i.getPath());for(var a=function(){var r=e[t],n=p(i),o=S(n);if(o){var a=R(n);return c("Embedded edit",a,o),o.transformPosition&&(e[t]=o.transformPosition(e[t],a)),"break"}var l=0,u=s.advancer(i,function(e,t){return g(t)?~(e-l):e-l},function(e,t){g(t)&&l++})(r);if("number"==typeof r&&(e[t]+=l),!u)return"break"};t<e.length&&"break"!==a();t++);M()};return null!=r?i.eachDrop(null,function(e){e===r&&d()}):d(),c("-> transformPosition returning",e),e},compose:U,tryTransform:G,transform:function(e,t,r){var n=G(e,t,r);if(n.ok)return n.result;j(n.conflict)},makeInvertible:B,invert:H,invertWithDoc:function(e,t){return H(B(e,t))},RM_UNEXPECTED_CONTENT:u.ConflictType.RM_UNEXPECTED_CONTENT,DROP_COLLISION:u.ConflictType.DROP_COLLISION,BLACKHOLE:u.ConflictType.BLACKHOLE,transformNoConflict:function(e,t,r){return Y(function(){return!0},e,t,r)},typeAllowingConflictsPred:function(e){return Object.assign(Object.assign({},t.type),{transform:function(t,r,n){return Y(e,t,r,n)}})}};var p=function(e){return e?e.getComponent():null};function h(e){return e&&"object"==typeof e&&!Array.isArray(e)}var v=function(e){return Array.isArray(e)?e.slice():null!==e&&"object"==typeof e?Object.assign({},e):e},E=function(e){return e&&(null!=e.p||void 0!==e.r)},g=function(e){return e&&(null!=e.d||void 0!==e.i)};function O(e,t){return d(null!=e),"number"==typeof t?(d(Array.isArray(e),"Invalid key - child is not an array"),(e=e.slice()).splice(t,1)):(d(h(e),"Invalid key - child is not an object"),delete(e=Object.assign({},e))[t]),e}function T(e,t,r){return"number"==typeof t?(d(null!=e,"Container is missing for key"),d(Array.isArray(e),"Cannot use numerical key for object container"),d(e.length>=t,"Cannot insert into out of bounds index"),e.splice(t,0,r)):(d(h(e),"Cannot insert into missing item"),d(void 0===e[t],"Trying to overwrite value at key. Your op needs to remove it first"),e[t]=r),r}t.removeOp=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return s.writeCursor().writeAtPath(e,"r",t).get()},t.moveOp=function(e,t){return s.writeCursor().writeMove(e,t).get()},t.insertOp=function(e,t){return s.writeCursor().writeAtPath(e,"i",t).get()},t.replaceOp=function(e,t,r){return s.writeCursor().at(e,function(e){e.write("r",t),e.write("i",r)}).get()},t.editOp=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return s.writeCursor().at(e,function(e){return P(e,t,r,n)}).get()};var m=function(e,t,r){return(e=v(e))[t]=r,e},b=function(e,t){return null!=e&&("number"==typeof t?Array.isArray(e):"object"==typeof e)},y=function(e,t){return b(e,t)?e[t]:void 0},C={};function A(e){var t=e.type?e.type:e;t.name&&(C[t.name]=t),t.uri&&(C[t.uri]=t)}var N=function(e){var t=C[e];if(t)return t;throw Error("Missing type: "+e)};A(r(47380));var I=function(e,t){return e+t};A({name:"number",apply:I,compose:I,invert:function(e){return-e},transform:function(e){return e}});var S=function(e){return null==e?null:e.et?N(e.et):e.es?C["text-unicode"]:null!=e.ena?C.number:null},R=function(e){return e.es?e.es:null!=e.ena?e.ena:e.e},P=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o="string"==typeof t?[N(t),t]:[t,t.name],a=i(o,2),l=a[0],s=a[1];!n&&l.isNoop&&l.isNoop(r)||("number"===s?e.write("ena",r):"text-unicode"===s?e.write("es",r):(e.write("et",s),e.write("e",r)))};function w(e){d("number"==typeof e),d(e>=0),d(e===(0|e))}function D(e){"number"==typeof e?w(e):d("string"==typeof e)}function L(e){if(null!==e){var t=new Set,r=new Set,n=function(e){var n=!0,i=!1;for(var o in e){var a=e[o];if(n=!1,d("p"===o||"r"===o||"d"===o||"i"===o||"e"===o||"es"===o||"ena"===o||"et"===o,"Invalid component item '"+o+"'"),"p"===o)w(a),d(!t.has(a)),t.add(a),d(void 0===e.r);else if("d"===o)w(a),d(!r.has(a)),r.add(a),d(void 0===e.i);else if("e"===o||"es"===o||"ena"===o){d(!i),i=!0;var l=S(e);d(l,"Missing type in edit"),l.checkValidOp&&l.checkValidOp(R(e))}}d(!n)};!function e(t,r,i){if(!Array.isArray(t))throw Error("Op must be null or a list");if(0===t.length)throw Error("Empty descent");r||D(t[0]);for(var o=1,a=0,l=0,u=0;u<t.length;u++){var _=t[u];if(d(null!=_),Array.isArray(_)){var c=e(_,!1,i);if(a){var f=typeof l,p=typeof c;f===p?d(l<c,"descent keys are not in order"):d("number"===f&&"string"===p)}l=c,a++,o=3}else"object"==typeof _?(d(1===o,"Prev not scalar - instead ".concat(o)),n(_),o=2):(d(3!==o),D(_),d(s.isValidPathItem(_),"Invalid path key"),o=1)}return d(1!==a,"Operation makes multiple descents. Remove some []"),d(2===o||3===o),t[0]}(e,!0,!1),d(t.size===r.size,"Mismatched picks and drops in op");for(var i=0;i<t.size;i++)d(t.has(i)),d(r.has(i))}}function F(e){var t=0,r=[],n=s.writeCursor();return n.mergeTree(e,function(e,n){var i,o=S(e);if(o){var a=R(e);P(n,o,o.normalize?o.normalize(a):a)}for(var l=0,s=["r","p","i","d"];l<s.length;l++){var u=s[l];if(void 0!==e[u]){var _="p"===u||"d"===u?(i=e[u],null==r[i]&&(r[i]=t++),r[i]):e[u];n.write(u,_)}}}),n.get()}var k=function(){_||c.prefix++},M=function(){_||c.prefix--};function U(e,t){if(f&&!_&&(c("composing:"),c("  op1:",e),c("  op2:",t)),L(e),L(t),null==e)return t;if(null==t)return e;var r=0,n=s.readCursor(e),i=s.readCursor(t),o=s.writeCursor(),a=[],l=[],u=[],h=[],v=[],O=[],T=new Set,m={},b=function(e,t){if(null!=t){null==m[e]&&(m[e]=new Set);var r=t.getPath().map(function(e,t){return"".concat(t,":").concat(e)}).join(".");if(m[e].has(r))throw Error("non-unique descent: ".concat(e," ").concat(r));m[e].add(r)}};n.traverse(null,function(e){null!=e.p&&(u[e.p]=n.clone())}),i.traverse(null,function(e){null!=e.d&&(h[e.d]=i.clone())});var y=s.writeCursor();!function e(t,n,i,o,f,m,y,C){d(n||i),_||c("xfBoundary",f,!!t&&t.getPath(),!!n&&n.getPath(),!!i&&i.getPath(),!!o&&o.getPath(),"lit:",f,"rmParent:",m),k();var A=p(n),N=p(i),I=!!N&&void 0!==N.r,w=!!A&&void 0!==A.i,D=A?A.d:null,L=N?N.p:null;c("pick2Slot",L,"drop1Slot",D);var F,U=(m||I)&&null==L;if(null!=L)c("teleporting via c2 pick2Slot",L),o=h[L],_||c("r2Drop",o&&o.getPath()),y=l[L]=new s.WriteCursor;else if(N&&void 0!==N.r)o=null;else{var H=p(o);H&&null!=H.d&&(o=null)}var B=p(o);if(null!=D)if(c("teleporting via c1 drop1Slot",D),t=u[D],C=a[D]=new s.WriteCursor,U)c("Cancelling op1 move",D,"rmParent",m,"rmHere",I),m&&!I&&C.write("r",!0);else{var x=v[D]=r++;c("assigning slot",x,"to op1 slot",D),y.write("d",x)}else if(A&&void 0!==A.i)t=null;else{var G=p(t);G&&null!=G.p&&(t=null)}_||(b("r1Pick",t),b("r1Drop",n),b("r2Pick",i),b("r2Drop",o)),w?(d(void 0===f),F=A.i):F=f,void 0!==F&&c("litOut",F);var j=(null==L?!w||m||I:void 0===F)?null:y.getComponent();if(c(j?"insComponent":"no insComponent - this insert will be discarded",w&&!m&&!I&&null==L,null!=L&&void 0!==F),null!=L)if(void 0!==f||w);else{var W=null!=D?v[D]:r++;O[L]=W,c("assigning slot",W,"to op2 slot",D),C.write("p",W)}else I&&(w||void 0!==f||(c("keeping write here r=",N.r),C.write("r",N.r)));var V=U?null:S(A),K=S(B);if(c("components",A,B),(V||K)&&c("types",V&&V.name,K&&K.name),V&&K){d(V===K);var X=R(A),Y=R(B),z=V.compose(X,Y);c("compose ->",z),P(y,V,z),T.add(B)}else V?(c("copying edit type1",A),P(y,V,R(A))):K&&(c("copying edit type2",B),P(y,K,R(B)),T.add(B));var q="object"==typeof F&&null!=F,$=!1,Z=0,J=0,Q=0,ee=0,te=0,re=s.advancer(o,function(e,t){return g(t)?ee-e-1:e-ee},function(e,t){g(t)&&ee++}),ne=s.advancer(t,function(e,t){return E(t)?Z-e-1:e-Z},function(e,t){E(t)&&Z++});if(s.eachChildOf(n,i,function(t,r,n){var i,o,a=t,l=t,s=t;if("number"==typeof t){var u=t+Q;o=re(u),l=u+ee;var _=t+J;i=ne(_),g(p(o))&&(i=null),a=_+Z,s=t+te,c("p1PickOff",Z,"p1DropOff",J,"p2PickOff",Q,"p2DropOff",ee,"litOff",te),c("inKey",t,"-> p1 mid",_,"-> p1 final",a),c("inKey",t,"-> p2 mid",u,"-> p2 final",l),d(a>=0,"p1PickKey is negative"),d(l>=0,"p2DropKey is negative");var f=g(p(r)),h=E(p(n));(f||h&&!U)&&te--,f&&J--,h&&Q--}else i=ne(t),o=re(t);c("->","p1pick",a,"inkey",t,"p2drop",l,"litKey",s),C.descend(a),y.descend(l);var v,O,T,m=q&&!g(p(r))?F[s]:void 0;c("_lit",m,F,s);var b=e(i,r,n,o,m,U,y,C);q&&!U?(c("_litResult",b),m!==b&&($||(F=Array.isArray(F)?F.slice():Object.assign({},F),$=!0),v=F,T=b,"number"==typeof(O=s)?(d(Array.isArray(v)),d(O<v.length)):(d(!Array.isArray(v)),d(void 0!==v[O])),void 0===T?"number"==typeof O?v.splice(O,1):delete v[O]:v[O]=T,c("litOut ->",F))):d(void 0===b),y.ascend(),C.ascend()}),ne.end(),re.end(),M(),null!=j)j.i=F;else if(!m&&!I&&null==L)return F}(n,n.clone(),i,i.clone(),void 0,!1,o,y),o.reset(),o.mergeTree(y.get()),o.reset(),c("intermediate op",o.get()),c("heldPickWrites",a.map(function(e){return e.get()})),c("heldDropWrites",l.map(function(e){return e.get()})),n.traverse(o,function(e,t){var r=e.p;if(null!=r){var n=v[r];null!=n&&(c("writing pick slot",n),t.write("p",n));var i=a[r];i&&c("merge pick write",i.get()),i&&t.mergeTree(i.get())}else void 0!==e.r&&t.write("r",e.r)}),o.reset(),c("intermediate op with picks",o.get()),i.traverse(o,function(e,t){var r=e.d;if(null!=r){var n=O[r];null!=n&&t.write("d",n);var i=l[r];i&&t.mergeTree(i.get())}else void 0!==e.i&&t.write("i",e.i);var o=S(e);o&&!T.has(e)&&P(t,o,R(e))});var C=o.get();return c("-> compose returning",C),_||L(C),C}function H(e){if(null==e)return null;var t,r=new s.ReadCursor(e),i=new s.WriteCursor,o=[],a=[];c("inverting",e),function e(r,i,a){var l;_||c("invertSimple",r.getPath(),a),k();var s,u=r.getComponent(),d=!1;if(u){null!=u.p&&(i.write("d",u.p),o[u.p]=r.clone()),void 0!==u.r&&i.write("i",u.r),null!=u.d&&(i.write("p",u.d),a=void 0),void 0!==u.i&&(a=l=u.i);var f=S(u);f&&(c("found edit",u,a),void 0===a?(t||(t=new Set),t.add(u)):(c("baking edit into subDoc",a,R(u)),a=f.apply(a,R(u)),d=!0))}var p=0,h=n(r);try{for(h.s();!(s=h.n()).done;){var E=s.value;i.descend(E);var O="number"==typeof E?E-p:E,T=y(a,O);g(r.getComponent())&&p++;var m=e(r,i,T);if(c("key",E,"raw",O,T,m,"subdoc",a),void 0!==a&&void 0!==m){if(d||(d=!0,a=v(a)),!b(a,O))throw Error("Cannot modify child - invalid operation");a[O]=m}i.ascend()}}catch(e){h.e(e)}finally{h.f()}if(M(),void 0===l)return d?a:void 0;i.write("r",a)}(r,i,void 0),_||c("invert after pass 1",i.get()),t&&(i.reset(),function e(r,i,l){_||c("invXE",null==r?void 0:r.getPath(),i.getPath(),l.getPath()),k();var u,d=i.getComponent();if(d){var f=d.d;if(null!=f&&(c("teleporting to drop slot",f),r=o[f],l=a[f]=s.writeCursor()),t.has(d)){var p=S(d);if(!p.invert)throw Error("Cannot invert subtype ".concat(p.name));_||c("inverting subtype",p.name,R(d)),P(l,p,p.invert(R(d)))}}var h=0,v=0,O=s.advancer(r,function(e,t){return E(t)?h-e-1:e-h},function(e,t){E(t)&&h++}),T=n(i);try{for(T.s();!(u=T.n()).done;){var m=u.value;if("number"==typeof m){var b=m-v,y=O(b),C=b+h;c("descend",m,b,C,"dropOff",v,"pickOff",h),l.descend(C),e(y,i,l),g(i.getComponent())&&v++,l.ascend()}else l.descend(m),e(O(m),i,l),l.ascend()}}catch(e){T.e(e)}finally{T.f()}O.end(),M()}(r.clone(),r,i),a.length&&(_||c("Merging held writes",a.map(function(e){return e.get()})),i.reset(),r.traverse(i,function(e,t){c("traverse",e);var r=e.p;if(null!=r){c("merging slot",r);var n=a[r];n&&c("merge",n.get()),n&&t.mergeTree(n.get())}})));var l=i.get();return c("-> invert returning:",l),_||L(l),l}function B(e,t){if(c("makeInvertible",e,t),null==e||!function e(t,r){return t.some(function(t){return"object"==typeof t&&(Array.isArray(t)?e(t,r):r(t))})}(e,function(e){var t;return void 0!==e.r||null!=(null===(t=S(e))||void 0===t?void 0:t.makeInvertible)}))return e;var r=new s.ReadCursor(e),i=new s.WriteCursor,o=!1,a=[],u=[];!function e(t,r,i){_||c("traversePick",t.getPath(),i),k();var s,f=t.getComponent(),p=!1;if(f){null!=f.d&&r.write("d",f.d),void 0!==f.i&&r.write("i",f.i);var h=f.p;if(null!=h&&(a[h]=t.clone(),d(void 0!==i,"Operation picks up at an invalid key"),u[h]=i,r.write("p",f.p)),void 0!==f.r&&void 0===i)throw Error("Invalid doc / op in makeInvertible: removed item missing from doc");var E=S(f);E&&(E.makeInvertible?o=!0:P(r,E,R(f),!0))}var g=0,T=n(t);try{for(T.s();!(s=T.n()).done;){var m=s.value;r.descend(m);var b="number"==typeof m?m-g:m,C=y(i,b),A=e(t,r,C);C!==A&&(c("childOut != childIn",C,A,m,b),p||(p=!0,i=v(i)),void 0===A?(i=O(i,b),"number"==typeof m&&g++):i[b]=A,c("subDoc ->",i)),r.ascend()}}catch(e){T.e(e)}finally{T.f()}return f&&(void 0!==f.r?(c("write r",i),r.write("r",l.default(i)),i=void 0):null!=f.p&&(i=void 0)),c("tp returning",i),M(),i}(r,i,t),c("after traversePick",i.get()),o&&(i.reset(),function e(t,r,i,o,l){_||c("traverseDrop",null==t?void 0:t.getPath(),r.getPath(),i.getPath(),o),k();var d,f=r.getComponent();if(f){void 0!==f.i?(o=f.i,l=!0,c("using inserted subdoc",o)):null!=f.d&&(o=u[f.d],t=a[f.d],l=!1,c("teleporting to pick",f.d,o));var p=S(f);if(p&&p.makeInvertible){var h=R(f);c("makeInvertible on child",h,o),P(i,p,p.makeInvertible(h,o),!0)}}var v=0,O=0,T=s.advancer(t,function(e,t){return E(t)?v-e-1:e-v},function(e,t){E(t)&&v++}),m=n(r);try{for(m.s();!(d=m.n()).done;){var b=d.value;if("number"==typeof b){var C=b-O,A=T(C),N=C+v;c("key",b,"mid",C,"raw",N,"isLiteral",l);var I=y(o,l?C:N);i.descend(b),e(A,r,i,I,l),g(r.getComponent())&&O++,i.ascend()}else{var w=y(o,b);i.descend(b),e(T(b),r,i,w,l),i.ascend()}}}catch(e){m.e(e)}finally{m.f()}T.end(),M()}(r.clone(),r,i,t,!1));var f=i.get();return c("-> makeInvertible returning",f),_||L(f),f}var x=function e(t){if(null==t)return null;for(var r=t.slice(),n=0;n<t.length;n++){var i=r[n];Array.isArray(i)&&(r[n]=e(i))}return r};function G(e,r,i){d("left"===i||"right"===i,"Direction must be left or right");var o="left"===i?0:1;if(c.quiet=!f,c.prefix=0,null==r)return{ok:!0,result:e};!_&&f&&(c("transforming "+i+":"),c("op1",e),c("op2",r),c("repro: transform(".concat([e,r,i].map(function(e){return JSON.stringify(e)}).join(", "),")"))),L(e),L(r);var h={},v=function(e,t){if(null!=t){null==h[e]&&(h[e]=new Set);var r=t.getPath().map(function(e,t){return"".concat(t,":").concat(e)}).join(".");if(h[e].has(r))throw Error("non-unique descent: ".concat(e," ").concat(r));h[e].add(r)}},O=null,T=[],m=[],b=[],y=[],C=[],A=[],N=[],I=[],w=[],D=[],F=[],U=[],H=[],B=[],G=[],j=0,W=s.readCursor(e),V=s.readCursor(r),K=s.writeCursor();if(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;_||c("scanOp2Pick","r1Pick",r&&r.getPath(),"r2Pick",t.getPath(),"removed1:",i&&i.getPath()),k();var o,a=p(r);a&&(void 0!==a.r?i=r.clone():null!=a.p&&(i=null,A[a.p]=t.clone()));var l,u=t.getComponent();u&&null!=(o=u.p)&&(c("c2",u,"rm",!!i),C[o]=r?r.clone():null,b[o]=t.clone(),i&&(D[o]=!0,w[o]=i,c("Cancelled op2 slot",o)),a&&null!=a.p&&(B[o]=a.p));var d=s.advancer(r),f=n(t);try{for(f.s();!(l=f.n()).done;){var h=l.value;c("->",h),e(t,d(h),i)}}catch(e){f.e(e)}finally{f.f()}d.end(),M()}(V,W,null),_||(c("op1PickAtOp2Pick",B),c("cancelledOp2",D),c("held op2 pick",A.map(function(e){return!!e}))),function e(r,i,a,l,d){var f;_||c("scanOp2Drop","r1Pick",r&&r.getPath(),i&&i.getPath(),"r2Drop",a.getPath(),"pickSlot1",l,"removed:",d&&d.getPath()),k();var h=a.getComponent(),v=!1;h&&(null!=(f=h.d)?(y[f]=a.clone(),null!=l&&(null==G[l]&&(G[l]=[]),G[l].push(f)),c("tele r2Pick to op2 slot2",f,!!D[f]),r=C[f]||null,i=b[f]||null,D[f]?(d&&(F[f]=!0),d=w[f]||null):!d||1!==o&&null!=B[f]||(c("conflicting op2 move because drop destination removed",f),_||c("path",a.getPath(),i.getPath()),null==O&&(O={type:u.ConflictType.RM_UNEXPECTED_CONTENT,op1:t.removeOp(d.getPath()),op2:t.moveOp(i.getPath(),a.getPath())})),v=!0):void 0!==h.i&&(r=i=null,v=!0,d&&(c("Conflicting op2 drop because op1 remove"),null==O&&(O={type:u.ConflictType.RM_UNEXPECTED_CONTENT,op1:t.removeOp(d.getPath()),op2:t.insertOp(a.getPath(),h.i)}))));var g=p(r);g&&(void 0!==g.r?d=r.clone():null!=g.p&&(c("Marking pickSlot1",g.p),l=g.p,d=null));var T,m=S(h);m&&d&&(c("rm / edit conflict"),null==O&&(O={type:u.ConflictType.RM_UNEXPECTED_CONTENT,op1:t.removeOp(d.getPath()),op2:t.editOp(a.getPath(),m,R(h),!0)}));var A=0,N=0,I=s.advancer(i,function(e,t){return E(t)?A-e-1:e-A},function(e,t){E(t)&&A++}),P=s.advancer(r),L=n(a);try{for(L.s();!(T=L.n()).done;){var U=T.value;if(c("key ->",U),"number"==typeof U){var H=U-N;c("p2Mid",H);var x=I(H),j=H+A;c("raw",j);var W=P(j);c("key",U,"p2DropOff",N,"p2PickOff",A),c("-> p2drop",U,"p2Mid",H,!!x,"raw",j,!!W),N+=+e(W,x,a,l,d)}else{c("-> k",U);var V=I(U);e(P(U),V,a,l,d)}}}catch(e){L.e(e)}finally{L.f()}return I.end(),P.end(),M(),v}(W,V,V.clone(),null,null),c("held op2 drop",y.map(function(e){return e&&e.get()})),O)return c("returning conflict 4",O),{ok:!1,conflict:O};c("discarded op2 drop",F.map(function(e){return!!e})),c("op1PicksOp2DropSlots",G);var X=[],Y=null;c("---- pick ----"),function e(t,r,i,a,l){_||c("writeOp1Pick","r1Pick",t.getPath(),"r2Pick",r&&r.getPath(),"r2Drop",i&&i.getPath(),"w",a.getPath(),"removed2",l&&l.getPath()),k();var u=!1,f=p(r);if(E(f)){var h=f.p;null!=h?(_||c("teleporting via op2 slot2",h,"to",y[h].getPath()),i=y[h],a=U[h]=s.writeCursor(),u=!0,l=null):(i=null,l=r.clone())}else g(p(i))&&(i=null);_||(v("op1pick r1Pick",t),v("op1pick r2Pick",r),v("op1pick r2Drop",i));var O=t.getComponent();if(O){var m=O.p;null!=m?(l&&(I[m]=l),c("considering slot",m,"removed2",!!l,"iAmMoved",u),l||1===o&&u?(c("cancelling p1 move",m),X[m]=null):(c("holding pick component"),X[m]=a.getComponent()),T[m]=t.clone(),i&&(N[m]=i.clone())):void 0!==O.r&&(l||(c("copying remove"),a.write("r",!0)),(l||u)&&(c("Cancelling remove",O,!!l,u),null==Y&&(Y=new Set),Y.add(O)))}var b=0,C=0,A=s.advancer(r,void 0,function(e,t){E(t)&&(b++,c("r2Pick++",b,e,t))}),S=s.advancer(i,function(e,t){return g(t)?~(e-C):e-C},function(e,t){g(t)&&(C++,c("r2Drop++",C,e,t))});if(c("children","2p",!!r,"2d",!!i),t){var R,P=n(t);try{for(P.s();!(R=P.n()).done;){var w=R.value;if(c("-> k",w),"string"==typeof w){var D=A(w),L=S(w);a.descend(w),e(t,D,L,a,l),a.ascend()}else{var F=A(w),H=w-b,B=E(p(F))?null:S(H),x=H+C;c("k"+w+" -> m"+H+" -> f"+x),d(x>=0),a.descend(x),e(t,F,B,a,l),a.ascend()}}}catch(e){P.e(e)}finally{P.f()}}A.end(),S.end(),M()}(W,V,V.clone(),K,null),K.reset(),_||(c("intermediate result",K.get()),c("held picks",T.map(function(e){return e.getComponent()||!!e})),c("held op2 drops by op1",N.map(function(e){return e.getComponent()||!!e})),c("held pick writes",U.map(function(e){return e.get()})),c("pc",X));var z=[];if(c("----- drop -----"),function e(r,f,h,C,w,L){d(f);var F=f.getComponent();_||c("drop",r&&r.getPath(),f.getPath(),h&&h.getPath(),C&&C.getPath(),"c:",F,"r:",!!L),k();var U=p(C),x=!1,G=function(e,r,n){return e?t.moveOp(e.getPath(),r.getPath()):t.insertOp(r.getPath(),n.i)};if(g(F)){var W,V=F.d;null!=V&&(m[V]=f.clone());var K=null!=V?X[V]:null,q=!1;if(void 0!==F.i||null!=V&&K)c("looking to write",F,U,D),U&&(void 0!==U.i||null!=(W=U.d)&&!D[W])&&((q=null!=W?null!=V&&V===B[W]:a.default(U.i,F.i))||null!=W&&1!==o&&null!=B[W]||(c("Overlapping drop conflict!"),null==O&&(O={type:u.ConflictType.DROP_COLLISION,op1:G(null!=V?T[V]:null,f,F),op2:G(null!=W?b[W]:null,C,U)}))),c("write","identical",q,"removed2",!!L),q||(L?(c("Drop into remove conflict!"),null==O&&(O={type:u.ConflictType.RM_UNEXPECTED_CONTENT,op1:G(null!=V?T[V]:null,f,F),op2:t.removeOp(L.getPath())})):(null!=V?(c("copying the drop",V,"using new slot",j),z[j]=V,w.write("d",K.p=j++)):(c("copying insert"),w.write("i",l.default(F.i))),x=!0));else if(null!=V&&!K){var $=I[V];$&&(L=$.clone())}null!=V?(c("teleporting p1Pick and op2Pick via op1 slot",V),r=T[V],h=A[V],C=N[V],_||c("p1Pick",r&&r.getPath(),"p2Pick",h&&h.getPath(),"p2Drop",C&&C.getPath())):void 0!==F.i&&(r=h=null,q||(C=null))}else E(p(r))&&(r=h=C=null);_||(v("op1drop op2Pick",h),v("op1drop op1Pick",r),v("op1drop op1Drop",f));var Z=p(r),J=p(h);if(E(J)){var Q=J.p;void 0!==J.r&&(!Z||void 0===Z.r)||D[Q]?(c("flagging remove"),C=null,L=h.clone()):null!=Q&&(c("teleporting p2Drop via c2 slot2",Q),C=y[Q],_||c("p2Drop",C&&C.getPath()),1!==o&&null!=B[Q]||(c("teleporting write"),(w=H[Q])||(w=H[Q]=s.writeCursor()),w.reset(),L=null))}else!g(F)&&g(U)&&(C=null);_||v("op1drop op2Drop",C),U=null!=C?C.getComponent():null;var ee=S(F);if(ee){c("edit:",!!L,F,U);var te=R(F);if(L)null==O&&(O={type:u.ConflictType.RM_UNEXPECTED_CONTENT,op1:t.editOp(f.getPath(),ee,te,!0),op2:t.removeOp(L.getPath())});else{var re,ne=S(U);if(ne){if(ee!==ne)throw Error("Transforming incompatible types");var ie=R(U);re=ee.transform(te,ie,i)}else re=l.default(te);c("write edit",re),P(w,ee,re)}}var oe,ae=0,le=0,se=0,ue=0,_e=0,ce=0,de=null!=r&&r.descendFirst(),fe=de,pe=s.advancer(h,void 0,function(e,t){E(t)&&(se++,c("p2Pick++",se,e,t))}),he=null!=C&&C.descendFirst(),ve=he;c("children.","1p:",!!r,"1d:",!!f,"2p:",!!h);var Ee=n(f);try{for(Ee.s();!(oe=Ee.n()).done;){var ge=oe.value;if(c("-> p1Drop looking at child",ge),"number"==typeof ge){var Oe=void 0;c("p1DropEachChild k:",ge,"p1d:",le,"p1p:",ae,"raw: -","p2p:",se,"p2d:",ue,"op:",_e,"od:",ce);var Te=g(f.getComponent()),me=ge-le,be=void 0;for(c("Looking for p2 Pick at k1Mid",me),k();de&&"number"==typeof(be=r.getKey());){be+=ae;var ye=r.getComponent(),Ce=E(ye);if(c("p1k",be,"k1mid",me,"hp",Ce),be>me||be===me&&(!Ce||0===o&&Te))break;if(Ce){c("p1PickOff--"),ae--;var Ae=ye.p;c("considering outPickOff--",ye,Y,X[Ae],B.includes(Ae)),c(null!=ye.d,p(H[ye.d]),E(p(H[ye.d]))),(void 0===ye.r||Y&&Y.has(ye))&&(null==Ae||!X[Ae]||1!==o&&B.includes(Ae))||(c("outPickOff-- from pickup"),_e--)}de=r.nextSibling()}Oe=de&&be===me?r:null,M(),c("_p1Pick",!!Oe);var Ne=me-ae;c("ap2p",Ne);var Ie=pe(Ne);c("_p2Pick",!!Ie,"p2PickOff",se);var Se=Ne-se,Re=null,Pe=void 0,we=void 0;for(c("Looking for p2 Drop at p2mid",Se),k();he&&"number"==typeof(Pe=C.getKey());){we=Pe-ue;var De=C.getComponent(),Le=g(De);if(c("p2d looking at child",Pe,De,"at op2mid",we,"target",Se,"  / raw",Ne,ue,Le,Te),we>Se)break;if(we===Se){if(!Le){Re=C;break}if(0===o&&Te){Re=C;break}var Fe=Ie&&E(Ie.getComponent());if(0===o&&Fe)break}if(Le){var ke=De.d;c("considering p2Drop",De,ke,D[ke],B[ke]),void 0===De.i&&(D[ke]||null!=B[ke]&&1!==o)?(D[ke]||null!=B[ke]&&0===o)&&(c("skipped because the drop was cancelled"),ue++,ce--):(c("p2DropOff++ from drop"),ue++)}he=C.nextSibling()}M(),c("_p2Drop",!!Re);var Me=Se+ue;c("->DropEachChild k:",ge,"p1d:",le,"p1p:",ae,"raw:",Ne,"p2p:",se,"p2d:",ue,"op:",_e,"od:",ce);var Ue=Me+_e+ce;c("k: "+ge+" -> mid "+me+" -> raw "+Ne+" -> k2Mid "+Se+" -> k2Final "+Me+" -> descend "+Ue),d(Ue>=0,"trying to descend to a negative index"),w.descend(Ue),Te&&(Oe=Ie=Re=null,c("omg p1dropoff",le),le++),e(Oe,f,Ie,Re,w,L)&&ce++,w.ascend()}else{for(var He=void 0;de&&("string"!=typeof(He=r.getKey())||!(He>ge||He===ge));)de=r.nextSibling();for(var Be=de&&He===ge?r:null,xe=pe(ge),Ge=void 0;he&&("string"!=typeof(Ge=C.getKey())||!(Ge>ge||Ge===ge));)he=C.nextSibling();var je=he&&Ge===ge?C:null;w.descend(ge),e(Be,f,xe,je,w,L),w.ascend()}}}catch(e){Ee.e(e)}finally{Ee.f()}return pe.end(),fe&&r.ascend(),ve&&C.ascend(),M(),x}(W,W.clone(),V,V.clone(),K,null),O)return c("returning conflict 3",O),{ok:!1,conflict:O};K.reset(),_||(c("output slot map",z),c("merging picks into partial output",K.get()),c("held pick writes",U.map(function(e){return e.get()})));var q=function(e,t,r){return e.traverse(t,function(t,n){null!=t.d&&r(t.d,e,n)})};(D.length||U.length)&&(c("merging"),q(V,K,function(e,t,r){D[e]&&!F[e]&&(c("removing at held drop2",e),r.write("r",!0)),U[e]&&r.mergeTree(U[e].get())}),K.reset(),_||c("after merge",K.get()));var $=[],Z=[];if((H.length||D.length)&&!O){c("------ write held picks and drops -----"),_||c("held drop writes",H.map(function(e){return e.get()}));var J=s.readCursor(x(K.get()));if(q(J,null,function(e,t){$[e]=t.clone()}),H.forEach(function(e){e&&q(s.readCursor(e.get()),null,function(e,t){$[e]=t.clone()})}),_||(c("merging writes into",J.get()),c("heldOutDropRead",$.map(function(e){return e&&e.getPath()}))),function e(t,r,i,o,a,l){_||c("writeHeldOp2Drop","p2Drop",t.getPath(),"outPick",r&&r.getPath(),"outDrop",i&&i.getPath(),"pc",a,"rm out",l),c.prefix++;var u,d=p(r);if(d&&E(d)){if(null!=d.p){a=d;var f=d.p;c("teleporting writes to output slot",f,$[f].getPath()),i=$[f],o=Z[f]=s.writeCursor()}else void 0!==d.r&&(i=null,l=!0);c("coutp",d)}else g(p(i))&&(i=null);var h,O=t.getComponent();if(O&&null!=(u=O.d)){c("c2 drop slot",u);var T=H[u];T&&(c("merge tree",T.get()),o.mergeTree(T.get()),i=s.readCursor(T.get()))}_||(v("outDrop p2Drop",t),v("outDrop outPick",r));var m=0,b=0,y=s.advancer(r,void 0,function(e,t){E(t)&&(m--,c("outPickOff++"))}),C=s.advancer(i,function(e,t){return g(t)?-(e-b)-1:e-b},function(e,t){g(t)&&(b++,c("outDropOff++"))}),A=n(t);try{for(A.s();!(h=A.n()).done;){var N=h.value;if("number"==typeof N){var I=y(N),S=N+m,R=C(S),P=S+b;c("->",N,"outPickOff",m,"-> rmid",S,"dropOff",b,"final",P),o.descend(P),e(t,I,R,o,a,l),o.ascend()}else c("->",N),o.descend(N),e(t,y(N),C(N),o,a,l),o.ascend()}}catch(e){A.e(e)}finally{A.f()}M(),y.end(),C.end()}(V,J,J.clone(),K,null,!1),K.reset(),O)return c("-> xf returning conflict 2",O),{ok:!1,conflict:O};if(c("-- after writeHeldOp2Drop",K.get()),_||c("held output writes",Z.map(function(e){return e.get()})),Z.length){var Q=Z.map(function(e){return e?e.get():null}),ee=s.readCursor(x(K.get()));if(q(ee,K,function(e,t,r){var n=Q[e];n&&(r.mergeTree(n),Q[e]=null)}),Q.find(function(e){return e})){c("BLACKHOLE");var te=s.writeCursor(),re=s.writeCursor(),ne=0,ie=0;Q.forEach(function(e,t){null!=e&&q(s.readCursor(e),null,function(e){var t=z[e];te.writeMove(T[t].getPath(),m[t].getPath(),ne++),c("blackhole slot1",t);var r=G[t];r&&r.forEach(function(e){D[e]||1!==o&&null!=B[e]||re.writeMove(b[e].getPath(),y[e].getPath(),ie++)})})}),O={type:u.ConflictType.BLACKHOLE,op1:te.get(),op2:re.get()}}}}if(O)return c("-> xf returning conflict 5",O),c(),{ok:!1,conflict:O};var oe=K.get();return c("-> xf returning",oe),c(),_||L(oe),{ok:!0,result:oe}}var j=function(e){var t=new Error("Transform detected write conflict");throw t.conflict=e,t.type=t.name="writeConflict",t},W=function(e){var t=s.writeCursor();return s.readCursor(e).traverse(t,function(e,t){(g(e)||S(e))&&t.write("r",!0)}),t.get()},V=function(e,t){var r=e.type,n=e.op1,i=e.op2;switch(c("resolving conflict of type",r),r){case u.ConflictType.DROP_COLLISION:return"left"===t?[null,W(i)]:[W(n),null];case u.ConflictType.RM_UNEXPECTED_CONTENT:var o=!1;return s.readCursor(n).traverse(null,function(e){void 0!==e.r&&(o=!0)}),o?[null,W(i)]:[W(n),null];case u.ConflictType.BLACKHOLE:return[W(n),W(i)];default:throw Error("Unrecognised conflict: "+r)}},K=function(e){var t=e.type,r=e.op1;return{type:t,op1:e.op2,op2:r}},X=function(e){var t=e.type,r=e.op1,n=e.op2;return{type:t,op1:F(r),op2:F(n)}};function Y(e,t,r,n){for(var o=null;;){var l=G(t,r,n);if(l.ok)return U(o,l.result);var s=l.conflict;if(c("detected conflict",s),e(s)||j(s),!_&&s.type===u.ConflictType.BLACKHOLE){var f=G(r,t,"left"===n?"right":"left");d(!f.ok);try{d(a.default(X(f.conflict),X(K(s))))}catch(e){throw c.debug=!0,c("Inverted transform conflict",t,r,s,f.conflict),e}}var p=V(s,n),h=i(p,2),v=h[0],E=h[1];c("Resolve ops",v,E),t=U(F(t),v),r=U(F(r),E),o=U(o,E),c("recover from conflict",s),c("op1 ->",t),c("op2 ->",r)}}},90666:(e,t)=>{var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.AllUIEvents=t.UIEventType=void 0,(n=r=t.UIEventType||(t.UIEventType={})).SELECTED="selected",n.COMMENT_OPEN="commentOpen",n.CLICK="click",n.STACK_CLICK="stackclick",n.H_SCROLLBAR_SET="horizontalScrollbarSet",n.V_SCROLLBAR_SET="verticalScrollbarSet",n.WARNING_OPEN="warningOpen",n.SCALE="scale",n.FLYOUT_SHOW="flyoutShow",n.CATEGORY_WILL_CHANGE="categoryWillChange",n.CATEGORY="category",n.SIMPLIFIED_COMMENT_EDIT="simplifiedCommentEdit",n.SIMPLIFIED_COMMENT_DELETE="simplifiedCommentDelete",n.SIMPLIFIED_COMMENT_SELECT="simplifiedCommentSelect",n.FIELD_FOCUS_CHANGE="FieldFocusChange",n.CONTEXT_MENU_OPEN="contextMenuOpen",t.AllUIEvents=Object.keys(r).map(function(e){return r[e]})},90988:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DragArea=t.BlockEventType=void 0,(r=t.BlockEventType||(t.BlockEventType={})).CREATE="create",r.DELETE="delete",r.CHANGE="change",r.MOVE="move",r.DRAG_AREA_CHANGE="drag_area_change",r.END_DRAG="end_drag",r.START_DRAG="start_drag",r.UI="ui",r.CONTEXT_MENU_OPTION="context_menu_option",function(e){e.DELETE_AREA="delete_area",e.INJECTION_DIV="injection_div",e.WORKSPACE="workspace"}(t.DragArea||(t.DragArea={}))},91428:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.NodeType=void 0,(r=t.NodeType||(t.NodeType={}))[r.ELEMENT=1]="ELEMENT",r[r.ATTRIBUTE=2]="ATTRIBUTE",r[r.TEXT=3]="TEXT",r[r.CDATA_SECTION=4]="CDATA_SECTION",r[r.ENTITY_REFERENCE=5]="ENTITY_REFERENCE",r[r.ENTITY=6]="ENTITY",r[r.PROCESSING_INSTRUCTION=7]="PROCESSING_INSTRUCTION",r[r.COMMENT=8]="COMMENT",r[r.DOCUMENT=9]="DOCUMENT",r[r.DOCUMENT_TYPE=10]="DOCUMENT_TYPE",r[r.DOCUMENT_FRAGMENT=11]="DOCUMENT_FRAGMENT",r[r.NOTATION=12]="NOTATION"},91743:(e,t,r)=>{r.r(t),r.d(t,{a:()=>a,b:()=>o,c:()=>l,default:()=>s});const n=r(30275),i=r(3167);function o(e,t){"function"==typeof e?e(t):"object"===n.a(e)&&e&&"current"in e&&(e.current=t)}function a(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){t.forEach(function(t){o(t,e)})}}function l(e){var t,r,n=i.isMemo(e)?e.type.type:e.type;return!("function"==typeof n&&!(null===(t=n.prototype)||void 0===t?void 0:t.render)||"function"==typeof e&&!(null===(r=e.prototype)||void 0===r?void 0:r.render))}const s=a},92401:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.GroupEventType=void 0,(r=t.GroupEventType||(t.GroupEventType={})).GroupStart="GROUP_START",r.GroupEnd="GROUP_END",r.GroupCancel="GROUP_CANCEL"},93766:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},95909:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},96361:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.find_caller_blocks=t.add_procedure_and_generate_rename_map=t.get_legal_procedure_name=void 0;var n=r(88772);function i(e){if(e.length>15){var t=parseInt(e.substring(0,15),10),r=parseInt(e.substring(15,e.length),10)+1,n=r.toString();return r>Math.pow(e.length-15,10)-1&&(t+=1,n=n.substring(1,n.length)),t+n}return parseInt(e,10)+1}function o(e,t){for(;t.includes(e);){var r=e.match(/^(.*?)(\d+)$/);r?e=r[1]+i(r[2]):e+="1"}return e}t.get_legal_procedure_name=o,t.add_procedure_and_generate_rename_map=function(e){var t=e.procedure_manager,r=e.procedure_to_add,n=e.callers_to_add,i={};return Object.keys(r).forEach(function(e){var a=t.get_procedures(),l=t.get_callers(),s=t.get_procedure_by_def(r[e].def_id);if(s)r[e].callers_id.forEach(function(e){t.add_caller(s.name,e,n[e].call_type)});else if(r[e].def_id){if(!a[e])return a[e]=r[e],void a[e].callers_id.forEach(function(e){l[e]=n[e]});var u=o(e,t.get_occupied_procedure_names());i[e]=u;var _=r[e];_.name=u,_.base_name=u,_.callers_id.forEach(function(e){var t=n[e];t.proc_name=u,l[e]=t}),a[u]=_}else r[e].callers_id.forEach(function(r){t.add_caller(e,r,n[r].call_type)})}),i},t.find_caller_blocks=function(e,t){var r=Object.keys(e.blocks),i=[];return r.forEach(function(r){var o=e.blocks[r];o.type!==n.PROCEDURE_BLOCK_TYPES.CALL_RETURN&&o.type!==n.PROCEDURE_BLOCK_TYPES.CALL_NORETURN||o.fields[n.PROCEDURE_BLOCK_FIELD_NAMES.PROCEDURE_NAME]!==t||i.push(e.blocks[r])}),i}},96683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},96856:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(31635);(0,n.__exportStar)(r(52130),t),(0,n.__exportStar)(r(21999),t),(0,n.__exportStar)(r(40960),t)},99186:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is_valid_number=t.lerp=t.to_radians=t.clamp=t.gen_uid=t.contains=t.Rect=t.Size=void 0,t.Size=function(e,t){this.width=e,this.height=t};var r=function(){function e(e,t,r,n){this.left=e,this.top=t,this.width=r,this.height=n}return e.prototype.contains=function(e){return e[0]>=this.left&&e[0]<=this.left+this.width&&e[1]>=this.top&&e[1]<=this.top+this.height},e}();t.Rect=r,t.contains=function(e,t){return e.left<t[0]&&e.right>t[0]&&e.top<t[1]&&e.bottom>t[1]},t.gen_uid=function(){for(var e=[],t=0;t<20;t++)e[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(62*Math.random());return e.join("")},t.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},t.to_radians=function(e){return e*Math.PI/180},t.lerp=function(e,t,r){return e+r*(t-e)},t.is_valid_number=function(e){return/^[+-]?Infinity$/.test(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?$/.test(e)}},99967:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})}}]);