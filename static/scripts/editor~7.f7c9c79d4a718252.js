"use strict";(self.webpackChunkcoco_next=self.webpackChunkcoco_next||[]).push([["262"],{41037(e,t,n){function r(){var e=Error.call(this,"ServiceWorker is not supported.");return Object.setPrototypeOf(e,r.prototype),e}n.d(t,{v:()=>i}),n(41594),n(75206),n(19040),n(87973),r.prototype=Object.create(Error.prototype);var i="https://creation.codemao.cn/coconut/web/1.22.0-0/main.sw.js"},80108(e,t,n){n.d(t,{B:()=>d,G:()=>b,H:()=>w}),n(7452),n(28335),n(43964),n(19779),n(50687),n(5762);var r,i,a=n(451);n(22827),n(95644),n(46942),n(37298);var o=n(13244),s=n(28413),l=n(28950),c=n(36243);(i=r||(r={}))[i.COMMON=0]="COMMON",i[i.GREEN=1]="GREEN";var u="--primary-color",d={t10:"".concat("--light-text-color"),t7:"".concat("--dark-text-color","-t7"),t5:"".concat("--dark-text-color","-t5"),t3:"".concat("--dark-text-color","-t3"),t1:"".concat("--dark-text-color","-t1"),t:"".concat("--dark-text-color","-t"),m2:"".concat(u,"-m2"),m1:"".concat(u,"-m1"),0:"".concat(u,"-0"),1:"".concat(u,"-1"),2:"".concat(u,"-2"),3:"".concat(u,"-3"),4:"".concat(u,"-4"),5:"".concat(u,"-5"),6:"".concat(u,"-6"),7:"".concat(u,"-7"),8:"".concat(u,"-8"),9:"".concat(u,"-9"),c:"".concat("--contrast-color"),"c-h":"".concat("--contrast-hover-color"),"c-p":"".concat("--contrast-press-color"),n1:"".concat("--secondary-color"),"n1-h":"".concat("--secondary-hover-color"),"n1-p":"".concat("--secondary-press-color"),n2:"".concat("--tertiary-color"),"n2-h":"".concat("--tertiary-hover-color"),"n2-p":"".concat("--tertiary-press-color")},f=[37,90,100],p=[30,90,100],g=[336,56,100],h=[214,80,100],m=[204,84,100],v=[134,69,84];function b(e){var t,n,i,a,o,s,c,u=(t=e.primaryColor,n={},n=e.rule===r.COMMON?{t:{s:15-(i=t[1]),b:15-(a=t[2])},t7:{s:15-i,b:35-a},t5:{s:15-i,b:55-a},t3:{s:15-i,b:75-a},t1:{s:7-i,b:87-a},m2:{s:10*i/84,b:-10},m1:{s:5*i/84,b:-5},0:{},1:{s:-(12*i)/84},2:{s:-(24*i)/84},3:{s:-(36*i)/84},4:{s:-(48*i)/84},5:{s:-(60*i)/84},6:{s:-(65*i)/84},7:{s:-(70*i)/84},8:{s:-(75*i)/84},9:{s:-(80*i)/84}}:{t:{s:15-(o=t[1]),b:15-(s=t[2])},t7:{s:15-o,b:35-s},t5:{s:15-o,b:55-s},t3:{s:15-o,b:75-s},t1:{s:7-o,b:87-s},m2:{s:10,b:-10},m1:{s:5,b:-5},0:{},1:{s:-4,b:6},2:{s:-8,b:12},3:{s:-40,b:14},4:{s:-47,b:16},5:{s:-54,b:18},6:{s:-61,b:20},7:{s:-68,b:22},8:{s:-75,b:24},9:{s:-82,b:26}},c={},Object.keys(n).forEach(function(e){var r=n[e];c[e]=E(t,r)}),c),d=y(e.extraColor);return l.a(l.a(l.a(l.a({},u),d),e.lightThemeColors),{},{t10:"#ffffff"})}function E(e,t){var n=s.a(e);if(t){var r=t.h,i=t.s,a=t.b;r&&(n[0]+=r),i&&(n[1]+=i),a&&(n[2]+=a)}return c.A.hsv(n).hex()}var y=function(e){var t={};return Object.keys(e).forEach(function(n){var r,i=e[n],s=a.a(i,3),l=s[0],c=s[1],u=s[2];t=Object.assign(t,(r={},o.a(r,n,E(i)),o.a(r,"".concat(n,"-h"),E([l,c+5,u-5])),o.a(r,"".concat(n,"-p"),E([l,c+10,u-10])),r))}),t},w={YELLOW:{primaryColor:[50,84,100],lightThemeColors:{a1:"#E0E0E0",s1:"#A66100",s2:"#D97E00",m1:"#FFCE1C",m2:"#FFBF0F",7:"#F0F0F0",8:"#F5F5F5",9:"#FAFAFA",10:"#BF7000"},extraColor:{c:m,n1:p,n2:[246,59,100]},rule:r.COMMON},BLUE:{primaryColor:[216,84,100],extraColor:{c:p,n1:m,n2:v},rule:r.COMMON},GREEN:{primaryColor:[150,84,72],extraColor:{c:g,n1:h,n2:f},rule:r.GREEN},ORANGE:{primaryColor:[22,82,100],extraColor:{c:h,n1:f,n2:[360,82,100]},rule:r.COMMON},PURPLE:{primaryColor:[270,84,100],extraColor:{c:f,n1:[292,72,100],n2:m},rule:r.COMMON},RED:{primaryColor:[340,84,100],extraColor:{c:v,n1:g,n2:p},rule:r.COMMON}}},79622(e,t,n){n.d(t,{dn:()=>f,fn:()=>g,pn:()=>p});var r=n(45574),i=n(51877),a=n(95644),o=n(451),s=n(19040),l=n(41594),c=n.n(l),u=n(11478),d=n.n(u),f=(0,l.memo)(function(e){var t=a.a().formatMessage,n=e.visible,o=e.onClose,l=e.save,u=(0,s.useDispatch)();return c().createElement(r.cn,{className:d().container,networkErrorVisible:n,onRetry:l,onCancelRetry:o},c().createElement("h3",null,t({id:"saveProject.failDialogTitle"})),c().createElement("ul",null,c().createElement("li",null,c().createElement("span",null,t({id:"saveProject.failDialogTips1"}))),c().createElement("li",null,c().createElement("span",null,t({id:"saveProject.failDialogTips2"}),c().createElement("button",{type:"button",className:d().saveBtn,onClick:function(){u(i.Of()),o()}},t({id:"saveProject.failDialogSaveLocalTips"})),t({id:"saveProject.failDialogTips3"})))))}),p=(0,l.memo)(function(e){var t=(0,s.useDispatch)(),n=a.a().formatMessage,u=(0,s.useSelector)(function(e){return e.project}),d=u.packageProgress,f=u.packageTaskLabel,p=u.isPackaging,g=(0,l.useState)(!1),h=o.a(g,2),m=h[0],v=h[1];return(0,l.useEffect)(function(){v(!(!f||-1!==d||p))},[p,d,f]),c().createElement(r.cn,{networkErrorVisible:m,onRetry:function(){v(!1),t(i.Ki(0)),i.Nf(t,i.jg()),t(i.Li(!0))},onCancelRetry:function(){v(!1)}},c().createElement("h3",null,n({id:"package.buildFailedTitle"})),c().createElement("ul",null,c().createElement("li",null,c().createElement("span",null,n({id:"package.buildFailedTips1"}))),c().createElement("li",null,c().createElement("span",null,n({id:"package.buildFailedTips2"}))),c().createElement("li",null,c().createElement("span",null,n({id:"package.buildFailedTips3"}))),c().createElement("li",null,c().createElement("span",null,n({id:"package.buildFailedTips41"}),c().createElement("a",{href:"https://ozbws9i1yf.feishu.cn/share/base/form/shrcn5xCRSVjUiO4YnIrNRRdUDd",target:"_blank",rel:"noopener noreferrer"},n({id:"feedback"})),n({id:"package.buildFailedTips42"})))))}),g=(0,l.memo)(function(e){var t=a.a().formatMessage,n=e.visible,o=e.onClose,l=e.save,u=(0,s.useDispatch)();return c().createElement(r.cn,{className:d().container,networkErrorVisible:n,onRetry:l,onCancelRetry:o},c().createElement("h3",null,t({id:"package.networkErrorTitle"})),c().createElement("ul",null,c().createElement("li",null,c().createElement("span",null,t({id:"package.networkErrorTips1"}))),c().createElement("li",null,c().createElement("span",null,t({id:"package.networkErrorTips2"}),c().createElement("button",{type:"button",className:d().saveBtn,onClick:function(){u(i.Of())}},t({id:"saveProject.failDialogSaveLocalTips"})),t({id:"package.networkErrorTips3"})))))})},72036(e,t,n){n.d(t,{dL:()=>y,pL:()=>w});var r=n(35859),i=n(26427),a=n(75195),o=n(65649),s=n(19042),l=n(51877),c=n(33007),u=n(46942),d=n.n(u),f=n(95644),p=n(22827),g=n(451),h=n(19040),m=n(41594),v=n.n(m),b=n(76948),E=n.n(b),y=v().memo(function(){var e=f.a().formatMessage,t=(0,h.useDispatch)(),n=(0,m.useState)(!0),a=g.a(n,2),o=a[0],s=a[1],u=(0,h.useSelector)(function(e){return e.project.playing}),p=(0,h.useSelector)(function(e){return e.project.screens});return(0,m.useEffect)(function(){1===p.size&&s(!0)},[p]),v().createElement("div",{className:E().playBox},v().createElement("button",{className:d()(E().playButton,p.size>1&&E().borderLeft),onClick:function(){u?(t(l.Dj()),t(l.Wh())):l.Nf(t,l.kg(o))}},u?v().createElement(v().Fragment,null,v().createElement(c.j,{type:"icon-stop"})," ",e({id:"stop"})):v().createElement(v().Fragment,null,v().createElement(c.j,{type:o?"icon-start":"icon-start-first-screen"}),e({id:"play"}))),p.size>1&&v().createElement(r.XM,{overlayClassName:E().playMenu,placement:"bottomLeft",overlay:v().createElement(i.cL,{onClick:function(e){switch(e.key){case"START_FIRST_SCREEN":s(!1);break;case"START_CURRENT_SCREEN":s(!0)}}},v().createElement(i.cL.Item,{key:"START_CURRENT_SCREEN"},v().createElement(c.j,{type:"icon-start",className:E().menuIcon}),v().createElement("span",{className:E().menuText},e({id:"playCurrentScreen"}))),v().createElement(i.cL.Item,{key:"START_FIRST_SCREEN"},v().createElement(c.j,{type:"icon-start-first-screen",className:E().menuIcon}),v().createElement("span",{className:E().menuText},e({id:"playFirstScreen"}))))},v().createElement("div",{className:E().playType},v().createElement(c.j,{type:"icon-dropdown-down"}))))}),w=(0,m.memo)(function(e){var t=(0,h.useSelector)(function(e){return e.project.id}),n=(0,h.useSelector)(function(e){return e.project.title}),r=(0,h.useSelector)(function(e){return e.oTState.isAuthor}),i=(0,m.useRef)(null),u=f.a().formatMessage,d=(0,h.useDispatch)(),b=(0,m.useState)(!1),E=g.a(b,2),y=E[0],w=E[1],x=(0,m.useState)(n),S=g.a(x,2),_=S[0],C=S[1];return v().createElement(p.a,{placement:"bottomLeft",title:y?_:n,trigger:["hover","click"]},v().createElement("div",{className:o.A.projectTitleWrapper},v().createElement(c.k,{defaultValue:n,dependency:n,disabled:!r||e.readonly,isTrimmed:!0,className:o.A.projectTitle,placeholder:u({id:"projectTitlePlaceholder"}),rules:[{rule:a.y}],maxLength:20,onChange:function(e){w(!0),C(e)},onBlur:function(e,r){e?(0,h.batch)(function(){d(l.Bf(e)),n!==e&&s.a("EditWorkName",{workId:t,workName:e})}):d(l.mj({message:u({id:"isEmptyProjectTitle"}),showCloseIcon:!1})),r.target.value=e||n,w(!1)},onFocus:function(e){e.target.selectionStart=e.target.selectionEnd=e.target.value.length,e.target.select()},ref:i,after:v().createElement("span",{onClick:function(){(null==i?void 0:i.current)&&i.current.focus()}},v().createElement(c.j,{type:"icon-edit",className:o.A.editIcon}))})))})},82851(e,t,n){n.d(t,{bL:()=>g});var r=n(33007),i=n(95644),a=n(451),o=n(41594),s=n.n(o),l=n(34260),c=n.n(l),u=n(28067),d=n.n(u),f=n(65668),p=n.n(f),g=(0,o.memo)(function(){var e,t=i.a().formatMessage,n=(0,o.useState)(!((e=navigator.userAgent.toLowerCase()).includes("chrome")&&!e.includes("qqbrowser")&&!e.includes("opr")&&!e.includes("se")&&!e.includes("metasr")&&/Google Inc/.test(navigator.vendor))),l=a.a(n,2),u=l[0],f=l[1];return u?s().createElement("div",{className:c().container},s().createElement("div",{className:c().wrapper},s().createElement("img",{src:d(),className:c().codemaoImg,alt:"codemao"}),s().createElement("span",{className:c().compatibility},t({id:"ChromeTips.compatibility"})),s().createElement("img",{src:p(),className:c().chromeImg,alt:"chrome"}),s().createElement("a",{href:"https://shequ.codemao.cn/download",target:"_blank",rel:"noopener noreferrer",className:"coco-button coco-button-primary"},t({id:"ChromeTips.download"})),s().createElement("span",{className:c().close,onClick:function(){return f(!1)}},s().createElement(r.j,{type:"icon-close-btn"})))):null})},28494(e,t,n){n.d(t,{wL:()=>d});var r=n(88963),i=n(56577),a=n(19040),o=n(41594),s=n.n(o),l={header:{logo:r.j.Show,file:{newProject:r.j.Show,openMyProject:r.j.Show,saveAs:r.j.Hide,showHistory:r.j.Hide,openLocalFile:r.j.Show,exportLocalFile:r.j.Hide},tutorial:{tutorial:r.j.Show,feedback:r.j.Show,releaseInfo:r.j.Show,about:r.j.Show},help:{ruler:r.j.Show,stage:r.j.Show},projectName:r.j.ReadOnly,coll:r.j.Show,save:r.j.Hide,cloudDBManager:r.j.Hide,cloudSpaceManager:r.j.Show,cutLine:r.j.Show,package:r.j.Hide,userInfo:r.j.Show,preventLeave:r.j.Show},widgetPanel:r.j.ReadOnly,stage:r.j.ReadOnly,widgetEditor:r.j.ReadOnly,workspace:r.j.ReadOnly,screenPanel:r.j.ReadOnly,resourceLibrary:r.j.ReadOnly},c={header:{logo:r.j.Show,file:{newProject:r.j.Show,openMyProject:r.j.Show,saveAs:r.j.Show,showHistory:r.j.Show,openLocalFile:r.j.Show,exportLocalFile:r.j.Show},tutorial:{tutorial:r.j.Show,feedback:r.j.Show,releaseInfo:r.j.Show,about:r.j.Show},help:{ruler:r.j.Show,stage:r.j.Show},projectName:r.j.Show,coll:r.j.Show,save:r.j.Show,cloudDBManager:r.j.Hide,cloudSpaceManager:r.j.Show,cutLine:r.j.Show,package:r.j.Show,userInfo:r.j.Show,preventLeave:r.j.Show},widgetPanel:r.j.Show,stage:r.j.Show,widgetEditor:r.j.Show,workspace:r.j.Show,screenPanel:r.j.Show,resourceLibrary:r.j.Show},u={header:{logo:r.j.Hide,file:{newProject:r.j.Hide,openMyProject:r.j.Hide,saveAs:r.j.Hide,showHistory:r.j.Hide,openLocalFile:r.j.Hide,exportLocalFile:r.j.Hide},tutorial:{tutorial:r.j.Hide,feedback:r.j.Hide,releaseInfo:r.j.Hide,about:r.j.Hide},help:{ruler:r.j.Hide,stage:r.j.Hide},projectName:r.j.Hide,coll:r.j.Hide,save:r.j.Hide,cloudDBManager:r.j.Hide,cloudSpaceManager:r.j.Hide,cutLine:r.j.Hide,package:r.j.Hide,userInfo:r.j.Hide,preventLeave:r.j.Hide},widgetPanel:r.j.ReadOnly,stage:r.j.ReadOnly,widgetEditor:r.j.ReadOnly,workspace:r.j.ReadOnly,screenPanel:r.j.ReadOnly,resourceLibrary:r.j.ReadOnly},d=function(){var e=(0,a.useSelector)(function(e){return e.common.editPermission}),t=(0,a.useDispatch)();return(0,o.useLayoutEffect)(function(){var n,a="readonly"===(n=function(e){switch(e){case r.c.ReadOnly:return"readonly";case r.c.Preview:return"preview";default:return"normal"}}(e))?l:"preview"===n?u:c;t(i.d(a))},[e,t]),s().createElement(s().Fragment,null)}},23525(e,t,n){n.d(t,{AL:()=>y});var r=n(14816),i=n(25744),a=n(90612),o=n(1725),s=n(51877),l=n(33007),c=n(46942),u=n.n(c),d=n(95644),f=n(22827),p=n(451),g=n(19040),h=n(41594),m=n.n(h),v=n(90851),b=n.n(v),E=m().memo(function(e){var t,n=(0,h.useState)(!1),r=p.a(n,2),i=r[0],o=r[1],c=(0,g.useDispatch)(),v=d.a().formatMessage;return m().createElement("div",{className:b().item},m().createElement("div",{onClick:function(){o(!i)},className:b().date},m().createElement("div",{className:b().text}," ",e.item.date),m().createElement("div",{className:u()(b().icon,i&&b().fold)},m().createElement(l.j,{type:"icon-dropdown-down"}))),!i&&(t=e.item.data,m().createElement("ul",null,t.map(function(t){return m().createElement("li",{className:u()(b().data,e.selectedId===t.id&&b().selected),key:t.id},m().createElement("div",{className:b().icon},m().createElement("div",{className:b().dot_area},m().createElement("div",{className:b().dot})),m().createElement("div",{className:b().line_area},m().createElement("div",{className:u()(b().line,e.selectedId===t.id&&b().selected)}))),m().createElement("div",{className:b().details},m().createElement("div",{className:u()(b().time,e.selectedId===t.id&&b().selected)},t.time),m().createElement("div",{className:b().type},t.saveInfo.saveType===a.b.ByUser?m().createElement(m().Fragment,null,m().createElement("img",{src:t.saveInfo.avatarUrl,className:b().avatar,alt:""}),m().createElement("div",{className:u()(b().text,b().name)},t.saveInfo.name),m().createElement("div",{className:u()(b().save_text,b().save_type)},v({id:"History.save"}))):m().createElement("div",{className:u()(b().save_text,b().save_type)},v({id:"History.autoSave"})))),m().createElement("div",{className:b().button_area},m().createElement(f.a,{placement:"bottom",title:v({id:"History.fallback"}),trigger:["hover","click"]},m().createElement("div",{onClick:function(){var n;n=t.id,e.setSelected(""),c(s.si(n))},className:b().button},m().createElement(l.j,{type:"icon-btn-fallback",className:b().icon}))),m().createElement(f.a,{placement:"bottom",title:v({id:"History.overview"}),trigger:["hover","click"]},m().createElement("div",{className:u()(b().button,t.id===e.selectedId&&b().selected),onClick:function(){e.setSelected(t.id)}},m().createElement(l.j,{type:"icon-btn-overview",className:b().icon})))))}))))}),y=m().memo(function(){var e,t,n=(0,h.useState)(""),l=p.a(n,2),c=l[0],f=l[1],v=(0,g.useSelector)(function(e){return e.common.historyDialogVisible}),y=(0,g.useSelector)(function(e){return e.project.id}),w=(0,h.useState)([]),x=p.a(w,2),S=x[0],_=x[1],C=(0,h.useState)([]),T=p.a(C,2),N=T[0],D=T[1],M=(0,g.useDispatch)(),k=d.a().formatMessage,I=(0,h.useState)(void 0),O=p.a(I,2),R=O[0],P=O[1],B=(0,h.useState)(!1),z=p.a(B,2),A=z[0],G=z[1],L=function(e){f(e)},j=(0,h.useCallback)(function(){f(""),M(s.tj(!1))},[M]),F=function(e){return e<10?"0".concat(e):String(e)},W=(0,h.useCallback)(function(e){var t=new Date(e);return{date:"".concat(t.getFullYear(),"年").concat(t.getMonth()+1,"月").concat(t.getDate(),"日"),time:"".concat(F(t.getHours()),":").concat(F(t.getMinutes()),":").concat(F(t.getSeconds()))}},[]);(0,h.useEffect)(function(){y!==R&&(_([]),D([]),f(""),P(y),j())},[y,R,j]),(0,h.useEffect)(function(){G(!1)},[c]),(0,h.useEffect)(function(){if(R&&v){if(R.includes(a.v))return _([]),D([]),void f("");o.f(R).then(function(e){if(0===e.length)return _([]),D([]),void f("");_(e);var t={};e.forEach(function(e){var n=W(e.create_time),r=n.date,i=n.time;t[r]||(t[r]=[]),t[r].push({id:e.id,time:i,saveInfo:{name:e.nickname,avatarUrl:e.avatar_url,saveType:e.save_type}})}),D(Object.keys(t).map(function(e){return{date:e,data:t[e]}}))}).catch(function(){_([]),D([]),f(""),M(s.mj({message:k({id:"History.fetchError"}).toString(),type:"error"}))})}},[v,R,W,M,k]);var H=function(){return m().createElement("div",{className:u()(b().historyBar,""===c&&b().fixedBar)},m().createElement("div",{className:b().header},k({id:"History.historyVersion"}),m().createElement("div",{onClick:j},m().createElement(i.a,{className:b().icon,type:"icon-close"}))),m().createElement("div",{className:b().content},0===N.length?m().createElement("div",{className:b().empty},m().createElement(r.we,{type:"image-text",text:k({id:"History.noVersion"})})):m().createElement("ul",null,N.map(function(e){return m().createElement(E,{key:e.date,item:e,selectedId:c,setSelected:L})}))))};return v?""!==c?(e=origin+"/editor"+"?archiveId=".concat(c),m().createElement("div",{className:b().historyDialog},m().createElement("div",{className:b().historyPreview},m().createElement("div",{className:b().previewDialog},A&&m().createElement(m().Fragment,null,m().createElement("div",{className:b().previewHeader},m().createElement("p",{className:b().projectName},(null==(t=S.find(function(e){return e.id===c}))?void 0:t.work_name)||""),m().createElement("p",{className:b().projectTime},function(){var e,t=null==(e=S.find(function(e){return e.id===c}))?void 0:e.create_time;if(!t)return"";var n=W(t);return"版本：".concat(n.date," ").concat(n.time)}())),m().createElement("div",{onClick:function(){return f("")},className:b().close},m().createElement(i.a,{type:"icon-close",className:b().icon}))),m().createElement("div",{className:b().previewIframe},m().createElement("iframe",{title:"previewAppCraft",height:"100%",width:"100%",allow:"geolocation, microphone, camera",src:e,onLoad:function(){return G(!0)}})))),H())):H():null})},87800(e,t,n){n.d(t,{kL:()=>S});var r=n(96724),i=n(32919),a=n(51877),o=n(33007),s=n(28413),l=n(46942),c=n.n(l),u=n(95644),d=n(22827),f=n(451),p=n(34221),g=n(7452),h=n.n(g),m=n(19040),v=n(41594),b=n.n(v),E=n(10918),y=n.n(E),w=n(6949),x=n.n(w),S=(0,v.memo)(function(){var e,t,n,l=(0,m.useSelector)(function(e){return e.common.widgetMallVisible}),g=u.a().formatMessage,E=(0,m.useDispatch)(),w=(0,v.useState)(!1),S=f.a(w,2),_=S[0],C=S[1],T=(0,v.useState)([]),N=f.a(T,2),D=N[0],M=N[1],k=(0,v.useState)(void 0),I=f.a(k,2),O=I[0],R=I[1],P=(0,v.useState)([]),B=f.a(P,2),z=B[0],A=B[1],G=(0,v.useState)([]),L=f.a(G,2),j=L[0],F=L[1],W=(0,v.useRef)(1),H=(0,v.useRef)(1),Y=(0,v.useRef)(!1),X=(0,v.useCallback)(p.a(h().mark(function e(){var t,n,a,o;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.d();case 3:return t=e.sent,e.next=6,r.e(W.current,100);case 6:a=(n=e.sent).items,H.current=n.total,t&&a&&(t.sort(function(e,t){return t.sort-e.sort}),t.unshift({id:-1,name:"全部",sort:0}),M(t),R(-1),a.sort(function(e,t){return t.sort-e.sort}),A(a),C(!1),o=a.map(function(e){return e.widget_code}),r.f(o.concat(i.Q()))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),C(!0);case 15:case"end":return e.stop()}},e,null,[[0,12]])})),[]);(0,v.useEffect)(function(){l?(W.current=1,X()):(F([]),C(!1))},[X,l]);var U=function(){E(a.gj(!1))},V=(e=p.a(h().mark(function e(t){var n,i;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R(t),W.current=1,e.prev=2,e.next=5,r.e(W.current,100,-1===t?void 0:t);case 5:i=(n=e.sent).items,H.current=n.total,i&&(i.sort(function(e,t){return e.sort-t.sort}),A(i)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),C(!0);case 14:case"end":return e.stop()}},e,null,[[2,11]])})),function(t){return e.apply(this,arguments)}),q=function(e){var t=j.indexOf(e);if(t<0)F([].concat(s.a(j),[e]));else{var n=s.a(j);n.splice(t,1),F(n)}},K=(t=p.a(h().mark(function e(){var t;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.b(j);case 3:e.sent&&(E(a.mj({message:g({id:"WidgetMall.addSuccess"}),type:"success"})),t=[],j.forEach(function(e){var n=z.find(function(t){return t.id===e});n&&t.push({id:n.id,type:n.widget_code,widgetName:n.widget_name,icon:n.icon,cdnUrl:n.resource_url,isInvisibleWidget:2===n.widget_type})}),E(a.ef(t.reverse())),U()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),E(a.mj({message:g({id:"WidgetMall.addFailure"}),type:"error"}));case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return t.apply(this,arguments)}),Z=b().createElement("div",null,b().createElement(o.d,{type:"default",onClick:function(){F([])}},g({id:"WidgetMall.clear"})),b().createElement(o.d,{type:"primary",onClick:K},g({id:"WidgetMall.add"}),"(",j.length,")")),$=(0,v.useCallback)((n=p.a(h().mark(function e(t){var n;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y.current){e.next=2;break}return e.abrupt("return");case 2:if(!(t.length>=H.current)){e.next=4;break}return e.abrupt("return",t);case 4:return Y.current=!0,W.current=W.current+1,e.prev=6,e.next=9,r.e(W.current,100,-1===O?void 0:O);case 9:H.current=(n=e.sent).total,Y.current=!1,A([].concat(s.a(t),s.a(n.items))),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),Y.current=!1,C(!0);case 19:case"end":return e.stop()}},e,null,[[6,15]])})),function(e){return n.apply(this,arguments)}),[O]);return b().createElement(o.f,{withPortal:!0,visible:l,title:g({id:"Widget.widgetMall"}),footer:Z,onClose:U,className:c()(x().widgetMallDialog,0!==j.length&&x().DialogFooter)},_&&b().createElement("div",{className:x().networkError},b().createElement("img",{src:y(),alt:"networkError"}),b().createElement("h3",null,g({id:"WidgetMall.networkError"})),b().createElement(o.d,{onClick:function(){X()},type:"primary"},g({id:"WidgetMall.retry"}))),!_&&D.map(function(e){return b().createElement("div",{key:e.id,className:c()(x().widgetLabel,O===e.id&&x().active),onClick:V.bind(null,e.id)},e.name)}),!_&&b().createElement("div",{className:x().cardContainer,onScroll:function(e){var t=e.currentTarget;t.scrollTop+t.clientHeight>t.scrollHeight-220&&$(z)}},z.map(function(e){return b().createElement("div",{key:e.id,className:c()(x().widgetCard,j.indexOf(e.id)>=0&&x().selectedWidgetCard)},2===e.widget_type?b().createElement("div",{className:x().invisibleWidget},b().createElement("div",{className:x().invisibleWidgetHeader},b().createElement("img",{src:e.icon,alt:"icon",className:x().widgetIcon}),b().createElement("div",{className:x().widgetInfo},b().createElement("p",{className:x().widgetName},e.widget_name),b().createElement("p",{className:x().authorName},e.author_name))),b().createElement("div",{className:x().widgetIntroContainer},b().createElement("p",{className:x().widgetIntro},e.intro))):b().createElement("div",{className:x().visibleWidget},b().createElement("div",{className:x().widgetImgContainer,style:{backgroundImage:'url("'.concat(e.icon,'")')}})),b().createElement("div",{className:x().widgetCardFooter},1===e.widget_type?b().createElement("div",{className:x().widgetInfo},b().createElement("p",{className:x().widgetName},e.widget_name),b().createElement("p",{className:x().authorName},e.author_name)):b().createElement("div",null),1===e.if_have?b().createElement("div",{className:x().added},b().createElement("span",null,g({id:"WidgetMall.added"}))):j.includes(e.id)?b().createElement("div",{onClick:q.bind(null,e.id),className:c()(x().icon,x().selectedIcon)},b().createElement(o.j,{type:"icon-selected"})):b().createElement(d.a,{placement:"bottom",trigger:["hover","click"],title:g({id:"WidgetMall.add"})},b().createElement("div",{onClick:q.bind(null,e.id),className:c()(x().icon,x().addIcon)},b().createElement(o.j,{type:"icon-add"})))))})))})},49701(e,t,n){n.d(t,{ZL:()=>I});var r=n(11293),i=n(2127),a=n(33383),o=n(51877),s=n(33007),l=n(95644),c=n(34221),u=n(7452),d=n.n(u),f=n(19040),p=n(41594),g=n.n(p),h=n(37933),m=n.n(h),v=(0,p.memo)(function(e){var t,n=(0,f.useDispatch)(),r=l.a().formatMessage,i=(t=c.a(d().mark(function t(i){var s,l;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i&&0!==i.length){t.next=2;break}return t.abrupt("return");case 2:s=i[0],l=function(){var t=c.a(d().mark(function t(i){var s,l,c;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(Number(i.size)>5242880)){t.next=4;break}return n(o.mj({message:r({id:"cloudGrid.FileSizeLimit"})})),t.abrupt("return",!1);case 4:return t.prev=4,t.next=7,a.fb(i);case 7:if(!(s=t.sent)){t.next=23;break}if(!((l=Object.keys(s.header)).length>10)){t.next=13;break}return n(o.mj({message:r({id:"cloudGrid.FileColumnSizeLimit"})})),t.abrupt("return");case 13:if(new Set(c=l.map(function(e){return s.header[e].field})).size===c.length){t.next=17;break}return n(o.mj({message:r({id:"cloudGrid.FileColumnNameRepeat"})})),t.abrupt("return");case 17:if(s.data=s.data.filter(function(e){return Object.keys(e).length>1}),!(s.data.length>500)){t.next=21;break}return n(o.mj({message:r({id:"cloudGrid.FileRowSizeLimit"})})),t.abrupt("return");case 21:e.handleSetGridInfo(s.data,s.header),n(o.mj({message:r({id:"cloudGrid.fileImportSuccess"})}));case 23:t.next=29;break;case 25:t.prev=25,t.t0=t.catch(4),console.info(t.t0),"cell length larger than 1000"===t.t0.error&&n(o.mj({message:r({id:"cloudGrid.FileCellSizeLimit"})}));case 29:case"end":return t.stop()}},t,null,[[4,25]])}));return function(e){return t.apply(this,arguments)}}(),0===e.getColumnInfo().length?l(s):n(o.zh({onConfirm:function(){l(s)},allowText:r({id:"confirm"}),title:r({id:"cloudGrid.importCoverTitle"}),content:r({id:"cloudGrid.importCoverTitleContent"})}));case 5:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)});return g().createElement(s.B,{onChange:i,accept:".xlsx, .xls, .csv",className:m().uploadButton},g().createElement(s.j,{type:"icon-add"}),g().createElement("span",null,r({id:"cloudGrid.FileImport"})))}),b=n(27690),E=n(71691),y=n(32919),w=n(52301),x=n(28413),S=n(46942),_=n.n(S),C=n(451),T=n(3790),N=n.n(T),D=void 0;function M(e,t){D?(clearTimeout(D),D=setTimeout(function(){E.d.dispatch(o.mj({message:t,type:"info"})),clearTimeout(D),D=void 0},400)):D=setTimeout(function(){E.d.dispatch(o.mj({message:e,type:"info"})),clearTimeout(D),D=void 0},400)}var k=r.py.Option,I=(0,p.memo)(function(){var e,t,n,a=(0,f.useSelector)(function(e){return e.common.cloudDBGridDialogInfo}),u=a.visible,h=a.widgetName,E=a.cloudDBId,S=a.isProd,T=a.callback,D=l.a().formatMessage,I=(0,p.useState)(),O=C.a(I,2),R=O[0],P=O[1],B=(0,p.useState)({}),z=C.a(B,2),A=z[0],G=z[1],L=(0,p.useState)([]),j=C.a(L,2),F=j[0],W=j[1],H=(0,p.useState)({}),Y=C.a(H,2),X=Y[0],U=Y[1],V=(0,p.useState)(""),q=C.a(V,2),K=q[0],Z=q[1],$=(0,p.useState)([]),Q=C.a($,2),J=Q[0],ee=Q[1],et=(0,p.useState)(!1),en=C.a(et,2),er=en[0],ei=en[1],ea=(0,p.useState)(!1),eo=C.a(ea,2),es=eo[0],el=eo[1],ec=(0,p.useState)(!1),eu=C.a(ec,2),ed=eu[0],ef=eu[1],ep=(0,p.useState)(!1),eg=C.a(ep,2),eh=eg[0],em=eg[1],ev=(0,p.useState)(!0),eb=C.a(ev,2),eE=eb[0],ey=eb[1],ew=(0,p.useState)(!1),ex=C.a(ew,2),eS=ex[0],e_=ex[1],eC=(0,p.useState)(!1),eT=C.a(eC,2),eN=eT[0],eD=eT[1],eM=(0,p.useRef)(""),ek=(0,p.useRef)(!1),eI=(0,f.useDispatch)();(0,p.useEffect)(function(){u||(ee([]),Z(""),G({}),W([]),em(!1),e_(!1))},[u]),(0,p.useEffect)(function(){E&&(ey(!0),Promise.all([b.e(E,S?"prod":"dev"),b.f(E,S?"prod":"dev",0,500)]).then(function(e){var t=C.a(e,2),n=t[0],r=t[1];if(ey(!1),n&&r&&!ek.current){var i={};n.columns.forEach(function(e){i[e.id]={field:e.name,type:e.type}});var a=r.map(function(e){var t={};return t.rowId=e.record_id,Object.keys(e.values).forEach(function(n){t[n]=e.values[n]}),t});G(i),W(a),ee(n.columns),setTimeout(function(){Z(n.primary_column||""),eM.current=n.primary_column||""},500)}}))},[E,S]),(0,p.useEffect)(function(){K&&!J.find(function(e){return e.id===K})&&(Z(""),eM.current="")},[J,K]),(0,p.useEffect)(function(){ef(!(!er&&!es))},[er,es]),(0,p.useEffect)(function(){return function(){ek.current=!0}},[]);var eO=function(e,t){W(e),G(t),em(!0),Z(""),el(!1),ei(!1),eI(o.pi({}))},eR=function(){null!=R&&R.stopEditing(),T&&T(),eI(o.pi({})),eI(o.ij("",!1,"",!1,function(){}));var e=y.Y().find(function(e){return e.attributes.cloudDbId===E});e&&eI(o.Xh(e.id))},eP=function(e){ei(e)},eB=function(e){var t=e.node.id,n=e.colDef.colId,r=e.api.getColumnDefs(),i=e.api.getModel();t&&!X[t]&&(X[t]=!0,U(X)),e_(!0);var a=e.value;if(a){var o=r.find(function(e){return e.colId===n});if(o&&n){var s=o.type;if("boolean"===s&&"true"!==a&&"false"!==a&&t){var l=e.api.getRowNode(t);null!=l&&l.setDataValue(n,""),M(D({id:"cloudGrid.booleanCheckNotice"}),D({id:"cloudGrid.commonCheckNotice"}))}if("number"===s){var c=parseFloat(a);if(isNaN(c)){if(t){var u=e.api.getRowNode(t);null!=u&&u.setDataValue(n,""),M(D({id:"cloudGrid.numberCheckNotice"}),D({id:"cloudGrid.commonCheckNotice"}))}}else if(String(c)!==a&&t){var d=e.api.getRowNode(t);null!=d&&d.setDataValue(n,String(c))}}}}(eM.current===n||"".concat("COLUMN_").concat(eM.current)===n)&&n&&r&&i&&eH(n,r,i)},ez=function(e){var t=e.api.getColumnDefs(),n=e.api.getModel();e_(!0),eM.current&&t&&n&&eH(eM.current,t,n)},eA=function(e){P(e)},eG=(e=c.a(d().mark(function e(t,n){var r,i,a,s,l,c,u,f;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!eN&&E){e.next=2;break}return e.abrupt("return");case 2:if(eD(!0),r={},i=new RegExp("".concat("COLUMN_","(.*)")),a=[],null==n||n.forEach(function(e){var t,n=e.name;n&&((null==(t=e.id)?void 0:t.match(i))?(r[n]=e.id||"",a.push({name:n,type:e.type||"string"})):(r[n]=e.id||"",a.push({id:e.id,name:n,type:e.type||"string"})))}),!S){e.next=11;break}e.t0=a,e.next=14;break;case 11:return e.next=13,b.q(E,a,"dev");case 13:e.t0=e.sent;case 14:if(s=e.t0,e.prev=15,l=K||"",Object.keys(r).length>0&&(c=Object.keys(r).find(function(e){return r[e]===K||r[e]==="".concat("COLUMN_").concat(K)})||"",l=(null==(u=s.find(function(e){return e.name===c}))?void 0:u.id)||""),!s){e.next=32;break}if(!eh){e.next=25;break}return e.next=22,eL(t,s,r,l);case 22:e.t1=e.sent,e.next=28;break;case 25:return e.next=27,ej(t,s,r,l);case 27:e.t1=e.sent;case 28:if(!(f=e.t1)){e.next=32;break}return eI(o.zh({allowText:D({id:"cloudGrid.confirm"}),title:"错误",content:"错误原因 ".concat(f),cancelBtnVisible:!0})),e.abrupt("return");case 32:S||eI(o.zg(E,s)),eR(),eD(!1),e.next=40;break;case 37:e.prev=37,e.t2=e.catch(15),console.error(e.t2);case 40:case"end":return e.stop()}},e,null,[[15,37]])})),function(t,n){return e.apply(this,arguments)}),eL=(t=c.a(d().mark(function e(t,n,r,i){var a,o;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.forEach(function(e){var t=[];n.forEach(function(n){(e["".concat(n.id)]||e[r[n.name]])&&t.push({column_id:n.id||"",value:e["".concat(n.id)]||e[r[n.name]]})}),a.push({values:t})}),e.next=4,b.i(E,a,S?"prod":"dev",i);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}},e)})),function(e,n,r,i){return t.apply(this,arguments)}),ej=(n=c.a(d().mark(function e(t,n,r,i){var a,o,s,l,c,u,f,p,g;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a={add:[],update:[],delete:[]},o=0,s=0,l=function(){var e=F[o],i=t[s];if(e.rowId===i.rowId){var l=e.rowId;if(X[l]){var c=n.map(function(e){return{column_id:e.id||"",value:i["".concat(e.id)]||i[r[e.name]]||""}});a.update.push({record_id:l,values:c})}s++,o++}else{var u=e.rowId;a.delete.push(u),o++}};o<F.length&&s<t.length;)l();if(o<F.length)for(c=o;c<F.length;c++)u=F[c].rowId,a.delete.push(u);if(s<t.length)for(f=function(e){var i=t[e],o=[];n.forEach(function(e){(i["".concat(e.id)]||i[r[e.name]])&&o.push({column_id:e.id||"",value:i["".concat(e.id)]||i[r[e.name]]})}),a.add.push({values:o})},p=s;p<t.length;p++)f(p);return e.next=9,b.r(E,a,S?"prod":"dev",i);case 9:return g=e.sent,e.abrupt("return",g);case 11:case"end":return e.stop()}},e)})),function(e,t,r,i){return n.apply(this,arguments)}),eF=g().createElement("div",null,g().createElement(s.d,{type:"default",onClick:eR},D({id:"cloudGrid.cancel"})),g().createElement(s.d,{type:"primary",disabled:ed,onClick:function(){var e=[],t=!1;null!=R&&R.getModel().forEachNode(function(n){K&&!(n.data[K]||n.data["".concat("COLUMN_").concat(K)])&&(t=!0),e.push(n.data)});var n=[],r=!1;null!=R&&R.getColumnDefs().forEach(function(e){var t=e.colId,i=e.headerName,a=e.type;i?n.push({id:t,name:i,type:"string"==typeof a?a:"string"}):"addColumn"!==t&&"indexColumn"!==t&&(r=!0)}),t?eI(o.zh({allowText:D({id:"cloudGrid.confirm"}),title:D({id:"cloudGrid.uniqueColumnEmptyTitle"}),content:D({id:"cloudGrid.uniqueColumnEmptyContent"}),cancelBtnVisible:!1})):r?eI(o.zh({onCancel:function(){eG(e,n)},cancelText:D({id:"cloudGrid.continueSave"}),allowText:D({id:"cloudGrid.returnEdit"}),title:D({id:"cloudGrid.EmptyColumnTitle"}),content:D({id:"cloudGrid.EmptyColumnContent"})})):eG(e,n)}},D({id:"cloudGrid.save"}))),eW=function(e){var t=null==R?void 0:R.getColumnDefs(),n=null==R?void 0:R.getModel();t&&n&&eH(e,t,n),e_(!0),Z(e),eM.current=e},eH=function(e,t,n){var r={};if(e){var i=null==t?void 0:t.find(function(t){return t.colId==="".concat("COLUMN_").concat(e)||t.colId===e}),a=null==i?void 0:i.colId;if(a){var s={},l=[];n.forEachNode(function(e){var t=e.data,n=t[a];n&&(s[n]?(s[n].push(t.rowId),l.push.apply(l,x.a(s[n]))):s[n]=[t.rowId])}),l.length>0&&(r[a]=Array.from(l))}}0===Object.keys(r).length?el(!1):(eI(o.mj({message:D({id:"cloudGrid.uniqueColumnError"}),type:"error"})),el(!0)),eI(o.pi(r))},eY=function(e){var t=[];e.forEach(function(e){if(e.headerName){var n=e.colId||"",r=new RegExp("".concat("COLUMN_","(.*)")),i=null==n?void 0:n.match(r),a=e.type;t.push({name:e.headerName,id:i?i[1]:n,type:"string"==typeof a?a:"string"})}}),ee(t)},eX=function(e){var t=J.find(function(t){return t.id===e});return t?t.name:void 0},eU=function(){return J};return g().createElement(s.f,{visible:u,className:m().dataViewerGrid,title:g().createElement("div",{className:m().titleArea},g().createElement("div",{className:m().title},h),g().createElement("div",{className:_()(m().titleBtn,S?m().prod:m().dev)},D(S?{id:"cloudGrid.prodData"}:{id:"cloudGrid.testData"}))),onClose:function(){null!=R&&R.stopEditing(),eS?eI(o.zh({onConfirm:function(){eR()},allowText:D({id:"cloudGrid.confirm"}),title:D({id:"cloudGrid.tips"}),content:D({id:"cloudGrid.unSaveNotice"})})):eR()},footer:eF},eE?g().createElement("div",{className:m().loadingArea},g().createElement("img",{src:N(),alt:"loading"}),g().createElement("span",null,D({id:"cloudGrid.loading"}))):function(){if(u)return g().createElement(g().Fragment,null,g().createElement("div",{className:m().gridInfo},g().createElement("span",{className:m().uniqueText},g().createElement("span",null,D({id:"cloudGrid.uniqueColumn"})),g().createElement(w.a,{content:g().createElement("div",{className:m().btnContent},g().createElement("div",null,D({id:"cloudGrid.uniqueColumnTipsContent"}))),placement:"rightTop",trigger:"click"},g().createElement("div",{className:m().btn},"?"))),g().createElement("span",{className:m().uniqueSelect},g().createElement(r.py,{disabled:S,allowClear:!0,placeholder:D({id:"cloudGrid.selectPlaceholder"}),onChange:eW,value:eX(K),listHeight:160,style:{width:"148px",height:"32px"}},J.map(function(e){return g().createElement(k,{value:e.id||"",key:e.id},e.name)}))),!S&&g().createElement(g().Fragment,null,g().createElement("span",{className:m().importFile},g().createElement(v,{getColumnInfo:eU,handleSetGridInfo:eO})),g().createElement("span",{className:m().importFileBtn},g().createElement(w.a,{content:g().createElement("div",{className:m().importContent},g().createElement("div",null,D({id:"cloudGrid.importTipsContent1"})),g().createElement("div",null,D({id:"cloudGrid.importTipsContent2"})),g().createElement("div",null,D({id:"cloudGrid.importTipsContent3"}))),placement:"leftTop",trigger:"click"},g().createElement("div",{className:m().btn},"?"))))),g().createElement("div",{className:m().grid},g().createElement(i.DI,{id:E,header:A,data:F,onGridReady:eA,allowEditHeader:!S,resizeColumnNumber:12,columnUseType:!0,visible:u,handleCellChangeEvent:eB,handleGridColumnChange:eY,handleRowDataUpdate:ez,setSaveDisabled:eP})))}())})},84637(e,t,n){n.d(t,{gn:()=>d});var r=n(51877),i=n(33007),a=n(95644),o=n(19040),s=n(41594),l=n.n(s),c=n(81991),u=n.n(c),d=(0,s.memo)(function(){var e=a.a().formatMessage,t=(0,o.useDispatch)(),n=(0,o.useSelector)(function(e){return e.common.projectSaveProgressDialog}),s=n.visible,c=n.progress;return l().createElement(i.f,{visible:s,className:u().container,onClose:function(){t(r.Qi(!1))}},l().createElement("div",{className:u().main},l().createElement("div",{className:u().progress},l().createElement("div",{className:u().progressText,style:{width:"".concat(c,"%")}},"".concat(c,"%")),l().createElement("div",{className:u().progressBg},l().createElement("div",{className:u().progressInner,style:{width:"".concat(c,"%")}}))),l().createElement("div",null,l().createElement("p",{className:u().text},e({id:"ProjectSaveProgressDialog.content"}))),l().createElement("div",{className:u().footer},l().createElement(i.d,{type:"primary",className:u().cancelBtn,onClick:function(){t(r.yf())}},e({id:"ProjectSaveProgressDialog.cancelSave"})))))})},56271(e,t,n){n.d(t,{aP:()=>I});var r=n(14816),i=n(10032),a=n(50813),o=n(56063),s=n(52301),l=n(33007),c=n(46942),u=n.n(c),d=n(95644),f=n(451),p=n(41594),g=n.n(p),h=n(40465),m=n.n(h),v=(0,p.memo)(function(e){var t=(0,p.useState)(!1),n=f.a(t,2),r=n[0],i=n[1],a=d.a().formatMessage;(0,p.useEffect)(function(){var e=function e(){i(!1),document.removeEventListener("click",e,!0),document.removeEventListener("contextmenu",e,!0)};r&&(document.addEventListener("click",e,!0),document.addEventListener("contextmenu",e,!0))},[r]);var o=function(t){e.handleDelete(e.id,e.workIds),t.stopPropagation()};return g().createElement(g().Fragment,null,g().createElement(s.a,{placement:"bottomLeft",trigger:"hover",onVisibleChange:function(e){e&&i(!1)},visible:r,overlayInnerStyle:{position:"absolute",left:50,top:20},content:function(){return g().createElement("div",{className:m().popoverWrapper,onContextMenu:function(e){return e.preventDefault()}},g().createElement("div",{className:u()(m().menuItem,m().delete),onMouseDown:o},a({id:"cloudDBManager.delete"})))}}),g().createElement("div",{className:u()(m().item,e.isSelected&&m().selected),onClick:function(t){e.handleClick(e.id),t.stopPropagation()},onContextMenu:function(e){e.preventDefault(),i(!0)}},g().createElement("span",null,e.name),e.canImport&&g().createElement("span",{onClick:function(t){e.handleImport(e.id),t.stopPropagation()},className:m().import},a({id:"cloudDBManager.import"})),!e.canImport&&g().createElement("span",{className:m().hasImport},a({id:"cloudDBManager.hasImport"}))))}),b=(0,p.memo)(function(e){var t,n=d.a().formatMessage,i=e.renderColumns,a=e.renderRows;return g().createElement("div",{className:m().list},g().createElement("div",{className:m().header},g().createElement("div",{className:m().name},e.name),g().createElement("div",{className:m().description},g().createElement("span",{style:{marginRight:"8px"}},n({id:"cloudDBManager.usedCapacity"}),":"),g().createElement("span",{style:{marginRight:"8px"}},e.usedCapacity),"/",g().createElement("span",{style:{marginLeft:"8px"}},5e3)),!(!e.devMode&&e.isNoData)&&g().createElement("div",{className:m().edit,onClick:function(){e.handleEdit(e.id)}},g().createElement(l.j,{className:m().icon,type:"icon-edit"}),n({id:"cloudDBManager.editData"}))),e.isNoData?(t=n(e.devMode?{id:"cloudDBManager.noDataDev"}:{id:"cloudDBManager.noDataProd"}),g().createElement("div",{className:m().container},g().createElement(r.we,{text:t}))):g().createElement("div",{className:m().itemWrapper},i&&i.length>0&&g().createElement(o.a,{width:i.length>=7?100*i.length:"100%",height:36*(a.length>=11?12:a.length+1),itemCount:a.length+1,renderItem:function(e){var t=e.index,n=e.style,r=a[t-1];return 0===t?g().createElement("div",{className:m().listItem,key:t,style:n},i.map(function(e,t){return g().createElement("div",{className:m().column,key:"".concat(e.id)},g().createElement("div",{className:m().columnArea},function(e){switch(e){case"boolean":return g().createElement(l.j,{type:"icon-grid-boolean",className:m().columnIcon});case"string":return g().createElement(l.j,{type:"icon-grid-string",className:m().columnIcon});case"number":return g().createElement(l.j,{type:"icon-grid-number",className:m().columnIcon});default:return}}(e.type),g().createElement("span",{className:m().text},e.name)))})):g().createElement("div",{className:m().listItem,key:t,style:n},r.value.map(function(e,t){return g().createElement("div",{className:m().row,key:"".concat(r.id,"-").concat(e,"-").concat(t)},g().createElement("span",{title:String(e)},e))}))},itemSize:36,stickyIndices:[0],className:"VirtualList"})))}),E=n(27690),y=n(94220),w=n(32919),x=n(51877),S=n(73615),_=n(34221),C=n(7452),T=n.n(C),N=n(19040),D=n(54247),M=n.n(D),k={total:1e5,dev:100,prod:200},I=(0,p.memo)(function(){var e,t=(0,N.useSelector)(function(e){return e.common.cloudDBManagerDialogVisible}),n=(0,N.useDispatch)(),o=(0,p.useState)(!0),s=f.a(o,2),c=s[0],h=s[1],C=(0,p.useState)(k),D=f.a(C,2),I=D[0],O=D[1],R=(0,p.useState)([]),P=f.a(R,2),B=P[0],z=P[1],A=(0,p.useState)(),G=f.a(A,2),L=G[0],j=G[1],F=(0,p.useState)(),W=f.a(F,2),H=W[0],Y=W[1],X=(0,p.useState)(),U=f.a(X,2),V=U[0],q=U[1],K=(0,p.useState)([]),Z=f.a(K,2),$=Z[0],Q=Z[1],J=(0,p.useState)([]),ee=f.a(J,2),et=ee[0],en=ee[1],er=(0,p.useState)(0),ei=f.a(er,2),ea=ei[0],eo=ei[1],es=(0,p.useState)(!0),el=f.a(es,2),ec=el[0],eu=el[1],ed=(0,p.useState)(!0),ef=f.a(ed,2),ep=ef[0],eg=ef[1],eh=(0,p.useState)(!0),em=f.a(eh,2),ev=em[0],eb=em[1],eE=(0,p.useState)(0),ey=f.a(eE,2),ew=ey[0],ex=ey[1],eS=d.a().formatMessage,e_=(0,p.useRef)(""),eC=(0,N.useSelector)(function(e){var t;return null==(t=e.common.userInfo)?void 0:t.id}),eT=(0,N.useSelector)(function(e){return e.common.isProjectFinishedOpen}),eN=function(){n(x.jj(!1))},eD=w.Y().map(function(e){return e.attributes.cloudDbId});(0,p.useEffect)(function(){if(t){var e=e_.current;E.h().then(function(t){if(t&&0!==t.length){eu(!1);var n=0,r=0,i=t.map(function(e){return n+=e.dev_capacity,r+=e.prod_capacity,{id:e.id,name:e.name,workIds:e.work_list}}).reverse();if(z(i),O({dev:n,prod:r,total:1e5}),i.length>0){var a=i.find(function(t){return t.id===e}),o=a?a.id:i[0].id,s=i.find(function(e){return e.id===o});s&&(j(s.id),e_.current=s.id,Y(s.name),s.id===e&&ex(performance.now()))}}else eu(!0)})}},[ea,t]),(0,p.useEffect)(function(){L&&(eg(!0),Promise.all([E.e(L,c?"dev":"prod"),E.f(L,c?"dev":"prod",0,500),new Promise(function(e){setTimeout(e,300)})]).then(function(e){var t=f.a(e,3),n=t[0],r=t[1];if(t[2],eg(!1),q(c?n.dev_capacity:n.prod_capacity),Y(n.name),0!==n.columns.length){var i=r?r.map(function(e){var t=[];return n.columns.forEach(function(n){var r=n.id;e.values[r]?t.push(e.values[r]):t.push("")}),{id:e.record_id,value:t}}):[];eb(!1),en(i),Q(n.columns)}else eb(!0)}))},[L,c,ew]),(0,p.useEffect)(function(){var e,t=(e=_.a(T().mark(function e(t){return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{eC&&eT&&n(S.B(!0))}catch(e){console.error(e)}case 1:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)});return window.addEventListener("focus",t),function(){window.removeEventListener("focus",t)}},[n,eC,eT]);var eM=function(e,t){return Math.max(5,Math.floor(e/t*100))},ek=function(e){j(e),e_.current=e},eI=function(e){E.e(e,"dev").then(function(t){n(x.hg("",y.h,{x:0,y:0},{cloudDbId:e,name:t.name,columns:t.columns,primaryKey:t.primary_column})),eN()})},eO=function(e,t){if(eD.includes(e))n(x.zh({title:eS({id:"cloudDBManager.deleteTitle"}),content:eS({id:"cloudDBManager.deleteImportContent"}),cancelBtnVisible:!1,confirmBtnVisible:!0}));else{var r=function(){_.a(T().mark(function t(){return T().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.c(e);case 3:eo(ea+1),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.info(t.t0);case 9:case"end":return t.stop()}},t,null,[[0,6]])}))()};t.length>0?n(x.zh({onConfirm:function(){r()},isDangerous:!0,title:eS({id:"cloudDBManager.deleteTitle"}),content:eS({id:"cloudDBManager.deleteContent"})})):r()}},eR=function(e){h(e)},eP={type:"CloudDBManagerDialog",url:null==(e=i.Bm["0"])?void 0:e.url,label:"云数据表"};return g().createElement(l.f,{visible:t,className:m().cloudDBManager,title:g().createElement("div",{className:m().managerTitle},g().createElement("div",{className:m().titleText},eS({id:"cloudDBManager.title"})),g().createElement(a._C,{onChange:function(){return 1},getValue:function(){return 1},suffix:!1,widgetId:"unUse-fields",formConfig:eP})),onClose:eN},g().createElement("div",{className:m().container},ec?g().createElement("div",{className:m().emptyContainer},g().createElement(r.we,{text:eS({id:"cloudDBManager.noCloudDB"})})):g().createElement(g().Fragment,null,g().createElement("div",{className:m().left},g().createElement("div",{className:m().capacity},g().createElement("div",{className:m().header},g().createElement("span",{className:m().text1},eS({id:"cloudDBManager.capacity"})),g().createElement("span",{className:m().text2},"".concat(I.dev+I.prod,"/").concat(I.total))),g().createElement("div",{className:m().data},I.dev>0&&g().createElement("div",{className:m().dataDev,style:{width:"".concat(eM(I.dev,I.total),"%")}}),I.prod>0&&g().createElement("div",{className:m().dataProd,style:{width:"".concat(eM(I.prod,I.total),"%")}})),g().createElement("div",{className:m().description},g().createElement("div",{className:u()(m().point,m().dev)}),g().createElement("span",{className:m().text},eS({id:"cloudDBManager.testData"})),g().createElement("div",{className:u()(m().point,m().prod)}),g().createElement("span",{className:m().text},eS({id:"cloudDBManager.prodData"}))),g().createElement("div",{className:m().line})),g().createElement("div",{className:m().DBData},B.map(function(e){return g().createElement(v,{key:e.id,id:e.id,name:e.name,workIds:e.workIds,isSelected:e.id===L,canImport:!eD.includes(e.id),handleClick:ek,handleImport:eI,handleDelete:eO})}))),g().createElement("div",{className:m().right},g().createElement("div",{className:m().tabs},g().createElement("div",{onClick:function(){return eR(!0)},className:u()(m().tab,c&&m().selected_dev)},eS({id:"cloudDBManager.testData"})),g().createElement("div",{onClick:function(){return eR(!1)},className:u()(m().tab,!c&&m().selected_prod)},eS({id:"cloudDBManager.prodData"}))),g().createElement("div",{className:m().gridArea},ep?g().createElement("div",{className:u()(m().container,m().loading)},g().createElement("img",{src:M(),alt:"loading"}),g().createElement("span",{className:m().text},eS({id:"cloudDBWidget.loading"}))):g().createElement(b,{id:L||"",name:H||"",usedCapacity:V||0,renderColumns:$,renderRows:et,isNoData:ev,devMode:c,handleEdit:function(e){var t=function(){ex(performance.now())},r=function(){n(x.ij(H||"",!0,e,!c,t))};c?r():n(x.zh({onConfirm:function(){r()},title:eS({id:"cloudDBManager.editTitle"}),content:eS({id:"cloudDBManager.editNotice"}),allowText:eS({id:"cloudDBManager.editBtn"})}))}}))))))})},87838(e,t,n){n.d(t,{_P:()=>_});var r,i,a=n(51877),o=n(33007),s=n(46942),l=n.n(s),c=n(95644),u=n(451),d=n(19040),f=n(41594),p=n.n(f),g=n(21230),h=n.n(g),m=n(77038),v=n.n(m),b=n(91896),E=n.n(b),y=n(82345),w=n.n(y),x=n(79618),S=n.n(x);(r=i||(i={}))[r.STEP0=0]="STEP0",r[r.STEP1=1]="STEP1",r[r.STEP2=2]="STEP2",r[r.STEP3=3]="STEP3";var _=(0,f.memo)(function(){var e=(0,f.useState)(i.STEP0),t=u.a(e,2),n=t[0],r=t[1],s=(0,d.useSelector)(function(e){return e.common.cloudDBPublishDialogInfo}),g=s.visible,m=s.type,b=s.callback,y="share"===m?"分享":"打包",x=c.a().formatMessage,_=(0,d.useDispatch)();(0,f.useEffect)(function(){g&&localStorage.setItem("cloudDBPublishGuide","true")},[g]);var C=function(){r(i.STEP0),_(a.kj(!1,"",function(){}))};return p().createElement(o.f,{visible:g,className:h().cloudDBPublishDialog,onClose:C},p().createElement("div",{className:h().container},n!==i.STEP0&&p().createElement("div",{className:h().jump,onClick:function(){b&&b(),C()}},x({id:"cloudDBPublishDialog.jump"})),p().createElement("div",{className:h().imgArea},function(){switch(n){case i.STEP0:return p().createElement("img",{src:v(),alt:""});case i.STEP1:return p().createElement("img",{src:E(),alt:""});case i.STEP2:return p().createElement("img",{src:w(),alt:""});case i.STEP3:return p().createElement("img",{src:S(),alt:""});default:return p().createElement("img",{src:v(),alt:""})}}()),p().createElement("div",{className:h().orderArea},function(){if(n!==i.STEP0)return p().createElement(p().Fragment,null,p().createElement("div",{className:l()(h().round,n===i.STEP1&&h().selected)}),p().createElement("div",{className:l()(h().round,n===i.STEP2&&h().selected)}),p().createElement("div",{className:l()(h().round,n===i.STEP3&&h().selected)}))}()),p().createElement("div",{className:h().textArea},function(){switch(n){case i.STEP0:return p().createElement("span",null,"恭喜你第一次",y,"了使用云数据库的作品，有一些小知识需要了解下");case i.STEP1:return p().createElement(p().Fragment,null,p().createElement("span",null,"之前编辑器内使用的数据是"),p().createElement("span",{className:h().yellow},"【测试数据】"));case i.STEP2:return p().createElement(p().Fragment,null,p().createElement("div",null,y,"后会自动生成一套新的数据库，"),p().createElement("div",null,"其他小伙伴使用应用时产生的数据将存储在",p().createElement("span",{className:h().blue},"【正式数据】"),"中"));case i.STEP3:return p().createElement(p().Fragment,null,p().createElement("span",null,"两套数据互不干扰，你可以在"),p().createElement("span",{className:h().purple},"\xa0导航栏>数据管理\xa0"),p().createElement("span",null,"中管理和修改所有数据"));default:return p().createElement("span",null)}}()),p().createElement("div",{className:h().btn},p().createElement(o.d,{type:"primary",onClick:function(){if(n!==i.STEP0)if(n!==i.STEP1){if(n!==i.STEP2)return n===i.STEP3?(b(),void C()):void 0;r(i.STEP3)}else r(i.STEP2);else r(i.STEP1)}},function(){switch(n){case i.STEP0:return p().createElement("span",null,x({id:"cloudDBPublishDialog.know"}));case i.STEP1:case i.STEP2:return p().createElement("span",null,x({id:"cloudDBPublishDialog.then"}));case i.STEP3:return p().createElement("span",null,"去",y);default:return p().createElement("span",null)}}()))))})},54196(e,t,n){n.d(t,{kP:()=>k});var r,i,a,o=n(33383),s=n(25576),l=n.n(s),c=n(50983);function u(e){try{return e.getFormat()}catch(e){return console.error(e),{}}}var d=["sans-serif","zhanKuKuaiLeTi","zhanKuWenYiTi","zhanKuKuHeiTi","zhanKuXiaoWeiLogo","zhanKuHuangYouTi","ruiZiZhenYanTi","yangRenDongZhuShiTi","baoTuXiaoBaiTi","muYaoSuiXinShouXieTi","shouShuTi","keAiDeKeAi"],f=["title1","title2","title3","content1","content2","content3"],p=function(e,t,n){var r=e.querySelector(".ql-".concat(t,".ql-picker"));r&&(r.style.setProperty("--current-color",n),r.dataset.color=n)},g=function(e,t,n){var r=e.querySelector(".ql-".concat(t,".ql-picker  .ql-picker-label"));r&&(r.dataset.value=n)};function h(e){return Array.isArray(e)?e[0]:e}var m=o.p(function(e,t){if(null===t.querySelector(".ql-expanded")&&(null==(n=t.querySelector(".ql-tooltip"))?void 0:n.classList.contains("ql-hidden"))&&(null==(r=t.querySelector(".ql-container"))?void 0:r.contains(document.activeElement))&&!(null==(i=document.querySelector(".coco-palette"))?void 0:i.clientWidth)){var n,r,i,a=u(e);p(t,"color",h(a.color||"#000")),p(t,"background",h(a.background||"transparent")),a.font||g(t,"font",d[0]),a.size||g(t,"size",f[3])}},200);(r=l().import("formats/font")).whitelist=d,l().register(r,!0),(i=l().import("formats/size")).whitelist=f,l().register(i,!0),(a=l().import("ui/icons")).bold='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M18.159 15.341c.469.087.933.233 1.393.44.46.206.87.494 1.23.865.36.37.653.835.88 1.394.225.56.338 1.227.338 2.002 0 1.566-.46 2.784-1.38 3.654-.921.87-2.269 1.304-4.043 1.304h-5.221c-.452 0-.791-.12-1.017-.362-.226-.24-.339-.507-.339-.8V8.162c0-.293.117-.56.351-.8.235-.241.57-.362 1.005-.362h4.569c1.037 0 1.908.125 2.61.374.703.25 1.268.577 1.695.982.427.404.728.874.904 1.407.176.534.263 1.085.263 1.653 0 .603-.083 1.128-.25 1.575a3.502 3.502 0 0 1-.69 1.15 3.56 3.56 0 0 1-1.03.774c-.394.198-.816.34-1.268.426zm-4.895-1.42h2.585c.854 0 1.452-.194 1.795-.581.343-.387.515-.874.515-1.46 0-.257-.042-.503-.126-.735a1.756 1.756 0 0 0-.401-.633 1.95 1.95 0 0 0-.716-.452c-.293-.112-.648-.168-1.067-.168h-2.585v4.03zm0 8.187h2.46c.954 0 1.703-.198 2.247-.594.544-.396.807-1.033.79-1.911 0-.534-.075-.969-.225-1.305a1.866 1.866 0 0 0-.666-.8 2.786 2.786 0 0 0-1.08-.413 8.289 8.289 0 0 0-1.468-.117h-2.058v5.14z"/></g></svg>',a.italic='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M21.97 7.668a1 1 0 0 1 .117 1.993l-.116.007h-3.904l-2.505 12.664h3.943a1 1 0 0 1 .117 1.993l-.117.007H9.852a1 1 0 0 1-.117-1.993l.117-.007h3.67l2.506-12.664h-3.711a1 1 0 0 1-.117-1.993l.117-.007h9.654z"/></g></svg>',a.underline='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M25 23v1.838H8V23h17zM10 8.656c0-.25.079-.455.236-.616.157-.161.4-.242.732-.242.33 0 .578.08.744.242a.824.824 0 0 1 .248.616v6.118c0 .748.058 1.434.174 2.057.115.623.343 1.155.682 1.595.339.44.806.781 1.402 1.023.595.242 1.372.363 2.332.363 1.554 0 2.696-.352 3.423-1.056.728-.704 1.092-1.701 1.092-2.992V8.656a.87.87 0 0 1 .223-.616c.149-.161.397-.242.744-.242.331 0 .575.08.732.242a.846.846 0 0 1 .236.616v7.658c0 .792-.165 1.503-.496 2.134a4.795 4.795 0 0 1-1.365 1.606c-.579.44-1.265.777-2.059 1.012a8.975 8.975 0 0 1-2.555.352c-.91 0-1.762-.117-2.556-.352-.793-.235-1.484-.572-2.071-1.012a4.87 4.87 0 0 1-1.39-1.606c-.338-.63-.508-1.342-.508-2.134V8.656z"/></g></svg>',a.strike='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M23 19.82c0 .737-.177 1.42-.531 2.048a5.08 5.08 0 0 1-1.495 1.634c-.642.46-1.412.821-2.309 1.08-.896.26-1.876.399-2.939.416a11.575 11.575 0 0 1-2.475-.214 14.557 14.557 0 0 1-2.175-.59c-.952-.37-1.572-.755-1.86-1.157-.288-.402-.288-.754 0-1.056a1.1 1.1 0 0 1 .847-.327c.32.017.67.118 1.046.302.664.335 1.39.624 2.176.867a8.68 8.68 0 0 0 2.574.365c.576 0 1.135-.084 1.677-.252a5.403 5.403 0 0 0 1.445-.678c.42-.285.758-.629 1.013-1.03a2.4 2.4 0 0 0 .382-1.308c0-.47-.122-.892-.365-1.27a3.497 3.497 0 0 0-.202-.28h2.957c.156.43.234.913.234 1.45zm3-3.677v1.8H7v-1.8h19zM16.29 7c.842 0 1.661.088 2.459.264.797.176 1.478.394 2.042.653.565.26.969.553 1.213.88.243.327.243.65 0 .968-.2.251-.499.373-.897.364a2.324 2.324 0 0 1-1.096-.289 13.543 13.543 0 0 0-1.661-.716 5.56 5.56 0 0 0-2.06-.34c-1.129 0-2.031.244-2.706.73-.676.486-1.013 1.106-1.013 1.86 0 .469.144.871.431 1.206.288.335.665.629 1.13.88.465.251 1.002.486 1.61.704.61.218 1.235.436 1.877.653.842.285 1.595.579 2.259.88l.016.008h-5.68a34.805 34.805 0 0 1-.514-.184 9.952 9.952 0 0 1-2.01-.98c-.564-.369-1.002-.809-1.312-1.32-.31-.51-.465-1.135-.465-1.872 0-.67.178-1.278.532-1.823a4.66 4.66 0 0 1 1.411-1.382 6.791 6.791 0 0 1 2.027-.855A9.81 9.81 0 0 1 16.29 7z"/></g></svg>',a.color='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 33 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M13.937 17.33l-.902 2.53a26.25 26.25 0 0 1-.22.594c-.073.19-.158.367-.253.528-.095.161-.205.29-.33.385a.687.687 0 0 1-.429.143c-.293 0-.52-.092-.682-.275-.161-.183-.161-.524 0-1.023l4.62-13.442c.073-.235.202-.422.385-.561.183-.14.422-.209.715-.209.308 0 .557.07.748.209.19.14.323.326.396.561l4.642 13.486c.117.352.125.649.022.891-.103.242-.345.363-.726.363-.25.015-.451-.055-.605-.209a1.392 1.392 0 0 1-.341-.605l-1.21-3.366h-5.83zm5.434-1.54l-2.508-7.546-2.508 7.546h5.016z"/></g></svg>',a.background='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M22.357 7.252a2.8 2.8 0 0 1 1.025 3.825l-3.586 6.21a.8.8 0 0 1-.21.24l-2.208 1.664a2.798 2.798 0 0 1-1.736.565l-.577 1.017H11.16l1.475-2.63a2.8 2.8 0 0 1-.53-1.771l.138-3.02a.8.8 0 0 1 .106-.364l3.586-6.21a2.8 2.8 0 0 1 3.825-1.026zm-4.7 9.724l-3.877-2.238-.078 1.707a1.2 1.2 0 0 0 .386.937l.101.084.112.073.79.456a1.2 1.2 0 0 0 1.323-.08l1.244-.939zm3.9-8.338l-2.598-1.5a1.2 1.2 0 0 0-1.64.44l-3.21 5.56c.06.01.117.026.174.05l.09.045 4.438 2.562 3.185-5.518a1.2 1.2 0 0 0-.242-1.497l-.094-.075-.103-.067z"/></g></svg>',a.script.super='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="#9A84F8" d="M26 13.427c0 .382-.129.573-.387.573h-4.166c-.121 0-.23-.077-.324-.232a.901.901 0 0 1-.12-.55c.008-.105.029-.212.063-.32a.902.902 0 0 1 .176-.312c.046-.06.158-.156.336-.292.178-.135.385-.293.62-.474.236-.181.484-.386.746-.613.262-.227.5-.465.717-.712.216-.247.396-.5.54-.756.145-.257.217-.514.217-.771a.782.782 0 0 0-.24-.594c-.159-.151-.371-.227-.637-.227-.296 0-.517.086-.665.257-.148.171-.222.415-.222.732 0 .21-.052.36-.154.45-.103.088-.283.133-.54.133-.312 0-.52-.04-.627-.119-.106-.079-.16-.234-.16-.464 0-.66.206-1.18.616-1.563.41-.382 1.04-.573 1.889-.573.713 0 1.263.175 1.65.524.387.35.58.81.58 1.384 0 .23-.045.463-.136.697a3.79 3.79 0 0 1-.358.692 5.638 5.638 0 0 1-.507.663c-.19.214-.383.417-.58.608a14.629 14.629 0 0 1-1.571 1.285h2.857c.258 0 .387.191.387.574z"/><path fill-rule="nonzero" fill="currentColor" d="M18.076 9.392c.205-.337.418-.528.638-.572.22-.044.44.007.66.154.41.279.455.667.132 1.166l-4.136 5.896 4.884 6.952c.103.205.165.4.187.583.022.183-.092.363-.341.539-.499.337-.91.257-1.232-.242l-4.488-6.402-4.488 6.402c-.176.25-.37.392-.583.429-.213.037-.422-.026-.627-.187a.68.68 0 0 1-.297-.572.946.946 0 0 1 .231-.66l4.774-6.82-4.136-5.918a.84.84 0 0 1-.176-.605.683.683 0 0 1 .33-.561c.22-.147.418-.216.594-.209.176.007.367.15.572.429l3.828 5.456 3.674-5.258z"/></g></svg>',a.script.sub='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="#9A84F8" d="M26 24.427c0 .382-.129.573-.387.573h-4.166c-.121 0-.23-.077-.324-.232a.901.901 0 0 1-.12-.55c.008-.105.029-.212.063-.32a.902.902 0 0 1 .176-.312c.046-.06.158-.156.336-.292.178-.135.385-.293.62-.474.236-.181.484-.386.746-.613.262-.227.5-.465.717-.712.216-.247.396-.5.54-.756.145-.257.217-.514.217-.771a.782.782 0 0 0-.24-.594c-.159-.151-.371-.227-.637-.227-.296 0-.517.086-.665.257-.148.171-.222.415-.222.732 0 .21-.052.36-.154.45-.103.088-.283.133-.54.133-.312 0-.52-.04-.627-.119-.106-.079-.16-.234-.16-.464 0-.66.206-1.18.616-1.563.41-.382 1.04-.573 1.889-.573.713 0 1.263.175 1.65.524.387.35.58.81.58 1.384 0 .23-.045.463-.136.697a3.79 3.79 0 0 1-.358.692 5.638 5.638 0 0 1-.507.663c-.19.214-.383.417-.58.608-.235.224-.484.443-.746.657-.262.215-.537.424-.825.628h2.857c.258 0 .387.191.387.574Z"/><path fill-rule="nonzero" fill="currentColor" d="M18.076 9.392c.205-.337.418-.528.638-.572.22-.044.44.007.66.154.41.279.455.667.132 1.166l-4.136 5.896 4.884 6.952c.103.205.165.4.187.583.022.183-.092.363-.341.539-.499.337-.91.257-1.232-.242l-4.488-6.402-4.488 6.402c-.176.25-.37.392-.583.429-.213.037-.422-.026-.627-.187a.68.68 0 0 1-.297-.572.946.946 0 0 1 .231-.66l4.774-6.82-4.136-5.918a.84.84 0 0 1-.176-.605.683.683 0 0 1 .33-.561c.22-.147.418-.216.594-.209.176.007.367.15.572.429l3.828 5.456 3.674-5.258Z"/></g></svg>',a.header[1]='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M18 9.656c0-.264.062-.473.187-.627.125-.154.348-.231.671-.231.293 0 .513.08.66.242a.88.88 0 0 1 .22.616v13.772c0 .25-.07.455-.209.616-.14.161-.356.25-.649.264-.293 0-.513-.084-.66-.253a.922.922 0 0 1-.22-.627v-6.336H9.948v6.336c0 .25-.07.455-.209.616-.14.161-.356.25-.649.264-.293 0-.513-.084-.66-.253a.922.922 0 0 1-.22-.627V9.656a.88.88 0 0 1 .22-.616c.147-.161.367-.242.66-.242.293 0 .51.08.649.242.14.161.209.367.209.616v5.94H18v-5.94zm5.982 13.719c0 .312-.252.468-.756.468s-.756-.156-.756-.468v-5.749h-.588c-.152 0-.256-.048-.312-.144-.056-.096-.084-.296-.084-.6 0-.288.038-.488.114-.6.076-.112.194-.168.354-.168h1.2c.552 0 .828.208.828.624v6.637z"/></g></svg>',a.header[2]='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M18 9.656c0-.264.062-.473.187-.627.125-.154.348-.231.671-.231.293 0 .513.08.66.242a.88.88 0 0 1 .22.616v13.772c0 .25-.07.455-.209.616-.14.161-.356.25-.649.264-.293 0-.513-.084-.66-.253a.922.922 0 0 1-.22-.627v-6.336H9.948v6.336c0 .25-.07.455-.209.616-.14.161-.356.25-.649.264-.293 0-.513-.084-.66-.253a.922.922 0 0 1-.22-.627V9.656a.88.88 0 0 1 .22-.616c.147-.161.367-.242.66-.242.293 0 .51.08.649.242.14.161.209.367.209.616v5.94H18v-5.94zm8.138 13.77c0 .383-.129.574-.387.574h-4.166c-.121 0-.23-.077-.324-.232a.901.901 0 0 1-.12-.55c.008-.105.029-.212.063-.32a.902.902 0 0 1 .176-.312c.046-.06.158-.156.336-.292.178-.135.385-.293.62-.474.236-.181.484-.386.746-.613.262-.227.5-.465.717-.712.216-.247.396-.5.54-.756.145-.257.217-.514.217-.771a.782.782 0 0 0-.24-.594c-.159-.151-.371-.227-.637-.227-.296 0-.517.086-.665.257-.148.171-.222.415-.222.732 0 .21-.052.36-.154.45-.103.088-.283.133-.54.133-.312 0-.52-.04-.627-.119-.106-.079-.16-.234-.16-.464 0-.66.206-1.18.616-1.563.41-.382 1.04-.573 1.889-.573.713 0 1.263.175 1.65.524.387.35.58.81.58 1.384 0 .23-.045.463-.136.697a3.79 3.79 0 0 1-.358.692 5.638 5.638 0 0 1-.507.663c-.19.214-.383.417-.58.608a14.629 14.629 0 0 1-1.571 1.285h2.857c.258 0 .387.191.387.574z"/></g></svg>',a.blockquote='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M13.86 11.2a.8.8 0 1 1 0 1.6c-1.04 0-2.043.578-2.826 1.635a6.57 6.57 0 0 0-.889 1.688A3 3 0 1 1 8.082 18.3c.12-1.83.71-3.528 1.666-4.818 1.068-1.44 2.528-2.282 4.112-2.282zm8.99 0a.8.8 0 1 1 0 1.6c-1.04 0-2.043.578-2.826 1.635a6.572 6.572 0 0 0-.89 1.692 3 3 0 1 1-2.065 2.232c.111-1.853.702-3.573 1.67-4.877 1.067-1.44 2.527-2.282 4.11-2.282z"/></g></svg>',a.list.ordered='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M8.81 7c.35 0 .525.121.525.363v3.025h1.007c.267 0 .401.147.401.44 0 .294-.137.44-.4.44H7.31c-.198 0-.297-.146-.297-.44 0-.293.1-.44.297-.44h1.065l.001-2.508h-.373c-.096 0-.162-.028-.198-.084-.035-.056-.053-.172-.053-.349 0-.168.024-.284.072-.35.049-.064.123-.097.225-.097h.76zm3.974 1h11.715a.8.8 0 1 1 0 1.6H12.784a.8.8 0 1 1 0-1.6zm0 7.2h11.715a.8.8 0 1 1 0 1.6H12.784a.8.8 0 1 1 0-1.6zm0 7.2h11.715a.8.8 0 1 1 0 1.6H12.784a.8.8 0 1 1 0-1.6zm-2.442-4.666c0 .263-.086.394-.258.394H7.299c-.081 0-.154-.053-.217-.16a.634.634 0 0 1-.08-.377.993.993 0 0 1 .042-.22.625.625 0 0 1 .118-.215 1.4 1.4 0 0 1 .224-.2l.415-.326c.157-.125.219-.125.373-.233a2.92 2.92 0 0 0 .52-.442c.144-.17.264-.343.36-.52a1.09 1.09 0 0 0 .145-.53.545.545 0 0 0-.16-.408.583.583 0 0 0-.426-.156c-.197 0-.346.059-.445.177-.099.117-.148.285-.148.503 0 .145-.034.248-.103.309-.068.061-.189.092-.361.092-.208 0-.348-.028-.419-.082-.07-.054-.106-.16-.106-.32 0-.452.137-.81.41-1.073.275-.263.696-.394 1.264-.394.476 0 .844.12 1.103.36s.388.557.388.951c0 .159-.03.319-.091.48-.061.16-.141.319-.24.475-.099.157-.185.294-.312.441-.127.148-.242.237-.354.33-.111.094-.33.219-.506.366-.175.147-.326.243-.52.384h1.91c.173 0 .26.131.26.394zm-1.161 5.189c.152.009.303.038.453.09.15.05.282.12.4.21.116.089.21.198.284.328.074.13.11.277.11.443 0 .204-.042.387-.129.55a1.245 1.245 0 0 1-.357.418 1.672 1.672 0 0 1-.548.265 2.513 2.513 0 0 1-.7.092c-.294 0-.547-.041-.757-.124a1.689 1.689 0 0 1-.517-.306 1.167 1.167 0 0 1-.293-.385.822.822 0 0 1-.084-.37.328.328 0 0 1 .137-.261.498.498 0 0 1 .304-.096c.046 0 .094.005.145.016.05.01.099.029.144.054a.407.407 0 0 1 .118.099c.033.04.052.092.057.156a.558.558 0 0 0 .19.341.758.758 0 0 0 .24.134c.1.036.22.054.362.054a.83.83 0 0 0 .544-.198.625.625 0 0 0 .216-.471.492.492 0 0 0-.083-.287.646.646 0 0 0-.22-.198 1.067 1.067 0 0 0-.309-.111 1.76 1.76 0 0 0-.354-.035.542.542 0 0 1-.32-.102c-.096-.068-.144-.17-.144-.306 0-.106.04-.193.122-.261a.47.47 0 0 1 .312-.102.821.821 0 0 0 .506-.188.684.684 0 0 0 .163-.198.505.505 0 0 0-.118-.625.592.592 0 0 0-.4-.155.594.594 0 0 0-.433.156.51.51 0 0 0-.16.379c0 .085-.039.158-.117.22-.08.061-.2.092-.362.092a.383.383 0 0 1-.27-.102.347.347 0 0 1-.11-.267c0-.17.038-.324.114-.463a1.11 1.11 0 0 1 .316-.356c.134-.1.29-.177.467-.23a1.99 1.99 0 0 1 .571-.08c.198 0 .386.022.563.064.178.043.335.109.472.198a.98.98 0 0 1 .323.34.969.969 0 0 1 .118.488c0 .149-.026.28-.08.395a1.108 1.108 0 0 1-.209.306 1.22 1.22 0 0 1-.308.23c-.12.063-.242.117-.37.159z"/></g></svg>',a.list.bullet='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M10.8 8h13.617a.8.8 0 1 1 0 1.6H10.8a.8.8 0 1 1 0-1.6zM7.998 8c.55 0 .997.447.997.998v.004a.998.998 0 0 1-1.995 0v-.004C7 8.447 7.447 8 7.998 8zm2.802 7.2h13.617a.8.8 0 1 1 0 1.6H10.8a.8.8 0 1 1 0-1.6zm-2.805-.191c.55 0 .998.446.998.997v.005a.998.998 0 0 1-1.996 0v-.005c0-.55.447-.997.998-.997zM10.8 22.4h13.617a.8.8 0 1 1 0 1.6H10.8a.8.8 0 1 1 0-1.6zm-2.802-.394c.55 0 .997.446.997.997v.005a.998.998 0 1 1-1.995 0v-.005c0-.55.447-.997.998-.997z"/></g></svg>',a.indent["+1"]='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M7.8 8h17.128a.8.8 0 1 1 0 1.6H7.8a.8.8 0 1 1 0-1.6zm6.728 7.2h10.4a.8.8 0 1 1 0 1.6h-10.4a.8.8 0 1 1 0-1.6zM7.8 22.4h17.128a.8.8 0 1 1 0 1.6H7.8a.8.8 0 1 1 0-1.6zm3.296-6.876l-2.29-2.121a.95.95 0 0 0-1.596.696v3.891a.95.95 0 0 0 1.53.752l2.291-1.769a.95.95 0 0 0 .065-1.449z"/></g></svg>',a.indent[-1]='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M7.8 8h17.128a.8.8 0 1 1 0 1.6H7.8a.8.8 0 1 1 0-1.6zm6.728 7.2h10.4a.8.8 0 1 1 0 1.6h-10.4a.8.8 0 1 1 0-1.6zM7.8 22.4h17.128a.8.8 0 1 1 0 1.6H7.8a.8.8 0 1 1 0-1.6zm-.207-6.876l2.29-2.121a.95.95 0 0 1 1.597.696v3.891a.95.95 0 0 1-1.531.752l-2.29-1.769a.95.95 0 0 1-.066-1.449z"/></g></svg>',a.align[""]='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M6.8 15.2h17.422a.8.8 0 1 1 0 1.6H6.8a.8.8 0 1 1 0-1.6zm0-7.2h7.91a.8.8 0 1 1 0 1.6H6.8a.8.8 0 1 1 0-1.6zm0 14.4h14.348a.8.8 0 1 1 0 1.6H6.8a.8.8 0 1 1 0-1.6z"/></g></svg>',a.align.center='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M6.8 15h17.422a.8.8 0 1 1 0 1.6H6.8a.8.8 0 1 1 0-1.6zm5-7h7.91a.8.8 0 1 1 0 1.6H11.8a.8.8 0 1 1 0-1.6zm-3 14h14.348a.8.8 0 1 1 0 1.6H8.8a.8.8 0 1 1 0-1.6z"/></g></svg>',a.align.right='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M6.8 15h17.422a.8.8 0 1 1 0 1.6H6.8a.8.8 0 1 1 0-1.6zm10-7h7.91a.8.8 0 1 1 0 1.6H16.8a.8.8 0 1 1 0-1.6zm-7 14h14.348a.8.8 0 1 1 0 1.6H9.8a.8.8 0 1 1 0-1.6z"/></g></svg>',a.align.justify='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M6.8 15h17.422a.8.8 0 1 1 0 1.6H6.8a.8.8 0 1 1 0-1.6zm0 7h17.422a.8.8 0 1 1 0 1.6H6.8a.8.8 0 1 1 0-1.6zm0-14h17.422a.8.8 0 1 1 0 1.6H6.8a.8.8 0 1 1 0-1.6z"/></g></svg>',a.link='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M17.438 13.934a4.467 4.467 0 0 1 .145 6.164l-.145.153-2.883 2.882a4.467 4.467 0 0 1-6.462-6.164l.145-.152 1.52-1.52a.8.8 0 0 1 1.198 1.056l-.067.075-1.52 1.52a2.867 2.867 0 0 0 3.932 4.17l.123-.116 2.883-2.883a2.867 2.867 0 0 0 0-4.054.8.8 0 1 1 1.131-1.131zm5.657-5.657a4.467 4.467 0 0 1 .145 6.165l-.145.152-1.52 1.52a.8.8 0 0 1-1.198-1.057l.067-.075 1.52-1.52a2.867 2.867 0 0 0-3.932-4.17l-.123.116-2.882 2.883a2.867 2.867 0 0 0 0 4.054.8.8 0 1 1-1.132 1.132 4.467 4.467 0 0 1-.145-6.165l.145-.152 2.883-2.883a4.467 4.467 0 0 1 6.317 0z"/></g></svg>',a.clean='<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" viewBox="0 0 32 32"><g fill-rule="evenodd" fill="none"><path fill-rule="nonzero" fill="currentColor" d="M18.358 7a1 1 0 0 1 1 1v3h6a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-.243l1.248 5.774c.209.964-.386 1.924-1.342 2.142a1.73 1.73 0 0 1-.258.04l-.131.004H8.577c-.984 0-1.772-.81-1.772-1.8 0-.086.006-.172.018-.258l.023-.128 1.255-5.807A1 1 0 0 1 7.358 16v-4a1 1 0 0 1 1-1h6V8a1 1 0 0 1 1-1h3zm5.12 10H9.73l-1.32 6.112a.227.227 0 0 0-.005.048c0 .093.053.165.12.19l.052.01h4.05l.735-3.473a.8.8 0 0 1 .84-.633l.108.015a.8.8 0 0 1 .633.84l-.015.108-.665 3.143h4.765l-.655-3.099-.015-.107a.8.8 0 0 1 .633-.84l.107-.016a.8.8 0 0 1 .84.632l.726 3.43h3.968a.147.147 0 0 0 .033-.003c.077-.018.136-.096.14-.188l-.005-.057L23.478 17zm-5.72-8.4h-1.8v4h-7v2.8h15.8v-2.8h-7v-4z"/></g></svg>',l().register(a,!0);var v=n(75195),b=n(92136),E=n(52301),y=n(51877),w=n(33007),x=n(95644),S=n(451),_=n(19040),C=n(41594),T=n.n(C),N=n(57107),D=n.n(N),M=!1,k=(0,C.memo)(function(){var e=x.a().formatMessage,t=(0,_.useDispatch)(),n=(0,_.useSelector)(function(e){return e.common.richTextEditorDialogInfo}),r=n.visible,i=n.onConfirm,a=n.content,s=void 0===a?"":a,g=(0,C.useState)(!1),h=S.a(g,2),N=h[0],k=h[1],I=(0,C.useState)(null),O=S.a(I,2),R=O[0],P=O[1],B=(0,C.useRef)(null),z=(0,C.useRef)(null),A=(0,C.useRef)(null),G=(0,C.useRef)(null),L=(0,C.useRef)(null),j=(0,C.useRef)(null),F=(0,C.useCallback)(function(){t(y.Yg())},[t]);(0,C.useEffect)(function(){if(A.current&&j.current){var t,n,r,i,a={placeholder:e({id:"RichTextEditor.inputPlaceholder"}),theme:"snow",bounds:j.current,modules:{toolbar:[[{font:d},{size:f}],["bold","italic","underline","strike",{color:["#000"]},{background:["transparent"]}],[{script:"super"},{script:"sub"},{header:"1"},{header:"2"},"blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"},{align:[]}],["link","clean"]]}};G.current=new(l())(A.current,a),t=G.current,null!=(r=(n=j.current).querySelector('.ql-font .ql-picker-options [data-value="sans-serif"]'))&&r.click(),null!=(i=n.querySelector('.ql-size .ql-picker-options [data-value="'.concat(f["3"],'"]')))&&i.click(),p(n,"color","#000"),p(n,"background","transparent"),t.on("selection-change",function(){return m(t,n)}),n.addEventListener("keyup",function(e){"Enter"===e.key&&setTimeout(function(){m(t,n)})}),t.theme.tooltip.boundsContainer=n.querySelector(".ql-editor");try{G.current.theme.tooltip.root.querySelector("input[data-link]").dataset.link=""}catch(e){console.error("quill link error")}}},[e]),(0,C.useEffect)(function(){r&&G.current&&(G.current.root.innerHTML=c.i(s))},[s,r]),(0,C.useEffect)(function(){if(r){if(!M){M=!0;var e,t=b.a(v.a);try{for(t.s();!(e=t.n()).done;){var n=e.value;(null==n?void 0:n.cdnUrl)&&o.bb(n.id,n.cdnUrl)}}catch(e){t.e(e)}finally{t.f()}}var i=function(e){var t=e.target;if(!(t instanceof Element?t.closest(".ant-popover"):null)){var n=t instanceof Element?t.closest("span.ql-picker"):null;k(!1),n&&(n.classList.contains("ql-color")||n.classList.contains("ql-background"))&&n!==B.current?setTimeout(function(){P(n),k(!0)},0):setTimeout(function(){P(null)},20)}};return document.body.addEventListener("click",i),function(){return document.body.removeEventListener("click",i)}}P(null)},[r]),(0,C.useEffect)(function(){B.current=R},[R]),(0,C.useEffect)(function(){var e=G.current;if(e&&r)if(N){L.current=e.getSelection(!0);var t,n=null==R?void 0:R.dataset.color;z.current&&n&&z.current.setRGBA((7===(t=(t=n).toUpperCase()).length&&(t+="FF"),t))}else{var i=u(e);i.background&&e.format("background",i.background),i.color&&e.format("color",i.color)}},[N,r]);var W=(0,C.useCallback)(function(){if(G.current){var e=G.current.root.innerHTML;i&&i(e)}F()},[F,i]),H=(0,C.useCallback)(function(e){var t=e.target;(t instanceof Element?t.closest("button.ql-clean"):null)&&G.current&&j.current&&m(G.current,j.current)},[]),Y=(0,C.useCallback)(function(e,t){var n;if("INPUT"!==(null==(n=document.activeElement)?void 0:n.nodeName)&&!t){var r=B.current,i=G.current,a=L.current;r&&i&&(r.dataset.color=e,r.style.setProperty("--current-color",e),a&&i.setSelection(a.index,a.length),r.classList.contains("ql-color")&&i.format("color",e),r.classList.contains("ql-background")&&i.format("background",e))}},[]),X=o.H(R,null==R?void 0:R.closest(".coco-dialog-wrapper"));return T().createElement(w.f,{visible:r,withPortal:!0,onClose:F,title:e({id:"RichTextEditor.editDialogTitle"}),className:D().container},T().createElement("div",{className:D().header}),T().createElement("div",{className:D().content,ref:j,onClick:H},T().createElement("div",{className:D().editor},T().createElement("div",{ref:A}))),T().createElement("div",{className:D().footer},T().createElement(w.d,{className:D().save,type:"primary",onClick:W},e({id:"save"}))),T().createElement(E.a,{placement:"rightBottom",visible:N,content:N&&T().createElement(w.q,{ref:z,onChange:Y})},T().createElement("span",{className:D().paletteTrigger,style:{top:null==X?void 0:X.top,left:null==X?void 0:X.left}})))})},80121(e,t,n){n.d(t,{LP:()=>x});var r=n(58968),i=n(69460),a=n(41804),o=n(10309),s=n(32919),l=n(33383),c=n(52301),u=n(51877),d=n(33007),f=n(46942),p=n.n(f),g=n(95644),h=n(451),m=n(19040),v=n(41594),b=n.n(v),E=n(6821),y=n.n(E),w=(0,v.memo)(function(e){var t=e.onUploadFileChange,n=e.onResourceLibraryClick,a=e.fileId,u=e.type,f=g.a().formatMessage,p=(0,v.useState)(!1),m=h.a(p,2),E=m[0],w=m[1],x=(0,v.useState)(""),S=h.a(x,2),_=S[0],C=S[1];return(0,v.useEffect)(function(){var e;if(l.U(a))e=a;else{var t=s.hb(a);e=(null==t?void 0:t.source)||(null==t?void 0:t.cdnUrl)}if(!e)switch(u){case r.a.HANDLE:e=i.c;break;case r.a.BACKGROUND:e=i.a;break;case r.a.TRACK:e=i.g;break;default:e=i.a}C(e)},[a,u]),b().createElement("div",{className:y().imageItemBox},b().createElement("img",{alt:a,src:_,className:u===r.a.HANDLE?y().handleImage:y().image}),b().createElement("div",{className:y().cover},b().createElement(c.a,{content:b().createElement("div",{className:y().imagePopover,onClick:function(){w(!1)}},b().createElement(d.B,{className:y().content,onChange:function(e){t(e,u)},accept:o.f},b().createElement(d.j,{type:"icon-upload"}),b().createElement("span",{className:y().contentTitle},f({id:"Resource.upload"}))),b().createElement("div",{className:y().content,onClick:function(){n(u)}},b().createElement(d.j,{type:"icon-open-resource-library"}),b().createElement("span",{className:y().contentTitle},f({id:"Resource.ImageLibrary"})))),placement:"bottomLeft",trigger:"click",visible:E,onVisibleChange:function(e){w(e)}},b().createElement("div",{className:y().replaceBtn},f({id:"Resource.Replace"})))))}),x=(0,v.memo)(function(){var e=(0,m.useSelector)(function(e){return e.common.sliderImageDialogInfo}),t=e.visible,n=e.widgetId,o=e.direction,c=e.handleImageFileId,f=e.handleImageRatio,E=e.handleImageDirection,x=e.backgroundImageFileId,S=e.backgroundImageDirection,_=e.trackImageFileId,C=e.trackImageDirection,T=g.a().formatMessage,N=(0,m.useDispatch)(),D=(0,v.useState)(""),M=h.a(D,2),k=M[0],I=M[1],O=(0,v.useState)(f),R=h.a(O,2),P=R[0],B=R[1],z=(0,v.useState)(E),A=h.a(z,2),G=A[0],L=A[1],j=(0,v.useState)(""),F=h.a(j,2),W=F[0],H=F[1],Y=(0,v.useState)(S),X=h.a(Y,2),U=X[0],V=X[1],q=(0,v.useState)(""),K=h.a(q,2),Z=K[0],$=K[1],Q=(0,v.useState)(C),J=h.a(Q,2),ee=J[0],et=J[1],en=(0,v.useState)(!0),er=h.a(en,2),ei=er[0],ea=er[1],eo=(0,v.useState)(""),es=h.a(eo,2),el=es[0],ec=es[1],eu=(0,v.useState)(""),ed=h.a(eu,2),ef=ed[0],ep=ed[1],eg=(0,v.useState)(""),eh=h.a(eg,2),em=eh[0],ev=eh[1],eb=(0,v.useState)(""),eE=h.a(eb,2),ey=eE[0],ew=eE[1],ex=(0,v.useState)(""),eS=h.a(ex,2),e_=eS[0],eC=eS[1];(0,v.useEffect)(function(){var e;if(l.U(k))e=k;else{var t=s.hb(k);e=(null==t?void 0:t.source)||(null==t?void 0:t.cdnUrl)}ev(e||i.c)},[k]),(0,v.useEffect)(function(){var e;if(l.U(W))e=W;else{var t=s.hb(W);e=(null==t?void 0:t.source)||(null==t?void 0:t.cdnUrl)||i.a}ew(e),l.gb(e,S===r.b.HORIZONTAL?-90:90).then(function(e){return ep(e)}).catch(function(){return ep("")})},[W,S]),(0,v.useEffect)(function(){var e;if(l.U(Z))e=Z;else{var t=s.hb(Z);e=(null==t?void 0:t.source)||(null==t?void 0:t.cdnUrl)||i.g}eC(e),l.gb(e,ee===r.b.HORIZONTAL?-90:90).then(function(e){return ec(e)}).catch(function(){return ec("")})},[ee,Z]),(0,v.useEffect)(function(){t&&(B(f),V(S),et(C))},[S,f,C,t]),(0,v.useEffect)(function(){o===r.b.HORIZONTAL?ea(!0):ea(!1)},[o]),(0,v.useEffect)(function(){t&&(I(c),$(_),H(x))},[x,c,_,t]);var eT=function(e,t){switch(t){case r.a.BACKGROUND:H(e.id),V(o);break;case r.a.TRACK:$(e.id),et(o);break;case r.a.HANDLE:I(e.id),L(o)}},eN=function(e,t){e&&N(u.Zf(e,function(e){eT(e[0],t)}))},eD=function(e){N(u.wj(a.c.ImageLibrary,function(t){eT(t[0],e),N(u.sh())}))};return b().createElement(d.f,{visible:t,className:y().sliderImageDialog,title:T({id:"slider.custom"}),onClose:function(){N(u.Gj({visible:!1}))},footer:b().createElement(d.d,{type:"primary",onClick:function(){(0,m.batch)(function(){N(u.Lg(n,"handleImageFileId",k)),N(u.Lg(n,"handleImageRatio",P)),N(u.Lg(n,"handleImageDirection",G)),N(u.Lg(n,"backgroundImageFileId",W)),N(u.Lg(n,"backgroundImageDirection",U)),N(u.Lg(n,"trackImageFileId",Z)),N(u.Lg(n,"trackImageDirection",ee)),N(u.Gj({visible:!1}))})}},T({id:"confirm"}))},b().createElement("div",{className:y().sliderImage},b().createElement("div",{className:y().sliderPreview},b().createElement("span",{className:y().title},T({id:"slider.preview"})),b().createElement("div",{className:y().previewBox},b().createElement("div",{className:y().backgroundImage,style:{width:ei?176:20,height:ei?20:176,backgroundImage:"url(".concat(U===o?ey:ef,")")}},b().createElement("div",{className:y().trackImageBox,style:{width:ei?88:20,height:ei?20:88}},b().createElement("div",{className:y().trackImage,style:{width:ei?176:20,height:ei?20:176,backgroundImage:"url(".concat(ee===o?e_:el,")")}}))),b().createElement("div",{className:p()(y().handleImage,G!==o&&y().vertical),style:{width:20*P,height:20*P,backgroundImage:"url(".concat(em,")")}}))),b().createElement("div",{className:y().imageInfo},b().createElement("span",{className:y().title},T({id:"slider.replaceImage"})),b().createElement("div",{className:y().imageList},b().createElement("div",{className:y().imageItem},b().createElement(w,{onUploadFileChange:eN,onResourceLibraryClick:eD,fileId:W,type:r.a.BACKGROUND}),b().createElement("span",null,T({id:"slider.backgroundImage"}))),b().createElement("div",{className:y().imageItem},b().createElement(w,{onUploadFileChange:eN,onResourceLibraryClick:eD,fileId:Z,type:r.a.TRACK}),b().createElement("span",null,T({id:"slider.trackImage"}))),b().createElement("div",{className:y().imageItem},b().createElement(w,{onUploadFileChange:eN,onResourceLibraryClick:eD,fileId:k,type:r.a.HANDLE}),b().createElement("span",null,T({id:"slider.handleImage"})))),b().createElement("span",{className:y().title},T({id:"slider.handleSize"})),b().createElement("div",{className:y().handleSize},b().createElement(d.x,{value:Math.round(100*P),min:10,max:300,onChange:function(e){B(e/100)},isShowRightInput:!0,inputAfter:"%"}),b().createElement("div",{className:y().sizeLabel},b().createElement("span",null,T({id:"smallSize"})),b().createElement("span",null,T({id:"largeSize"})))))))})},77650(e,t,n){n.d(t,{zP:()=>M});var r,i,a=n(9065),o=n(94220),s=n(33383),l=n(51877),c=n(33007),u=n(46942),d=n.n(u),f=n(95644),p=n(22827),g=n(451),h=n(34221),m=n(7452),v=n.n(m),b=n(19040),E=n(41594),y=n.n(E),w=n(91771),x=n.n(w),S=n(52348),_=n.n(S),C=n(52220),T=n.n(C),N=n(24064),D=n.n(N);(r=i||(i={})).TABLE_DATA="TABLE_DATA",r.CLOUD_SPACE_TABLE="CLOUD_SPACE_TABLE";var M=(0,E.memo)(function(){var e,t=(0,b.useSelector)(function(e){return e.common.createTableDataDialog}),n=(0,b.useSelector)(function(e){return e.oTState.isAuthor}),r=t.visible,u=t.onConfirm,m=f.a().formatMessage,w=(0,E.useState)(i.TABLE_DATA),S=g.a(w,2),C=S[0],N=S[1],M=(0,E.useState)(!1),k=g.a(M,2),I=k[0],O=k[1],R=(0,b.useDispatch)(),P=a.d();(0,E.useEffect)(function(){r&&(O(!1),N(i.TABLE_DATA))},[r]);var B=(e=h.a(v().mark(function e(){var t;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C!==i.CLOUD_SPACE_TABLE){e.next=3;break}return O(!0),e.abrupt("return");case 3:return e.next=5,l.Nf(R,l.hg((null==P?void 0:P.id)||"",o.G,{x:0,y:0}));case 5:t=e.sent,u&&u(t),R(l.mh());case 8:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),z=function(e){(n||e!==i.CLOUD_SPACE_TABLE)&&N(e)};return y().createElement(c.f,{visible:r,withPortal:!0,onClose:function(){R(l.mh())}},I&&y().createElement(y().Fragment,null,y().createElement("div",{className:D().tableDataTitle},y().createElement("div",{onClick:function(){O(!1)}},y().createElement(c.j,{type:"icon-arrow-down",className:D().backIcon})),m({id:"ListViewerWidget.createCloudTable"})),y().createElement("div",{className:D().cloudSpaceTipsContent},y().createElement("div",{className:D().imageBox},y().createElement("img",{className:D().logoImage,src:x(),alt:""}),y().createElement("img",{className:D().arrowImage,src:_(),alt:""}),y().createElement("img",{className:D().logoImage,src:T(),alt:""})),y().createElement("div",null,m({id:"ListViewerWidget.toCloudSpaceDomainTips"}))),y().createElement("div",{className:d()(D().confirmBox,D().cloudSpaceConfirm)},y().createElement(c.d,{onClick:function(){window.open("".concat(s.A(),"/dashboard/?createType=Table"),"_blank"),R(l.mh())},type:"primary"},m({id:"ListViewerWidget.toCloudSpaceDomain"})))),!I&&y().createElement(y().Fragment,null,y().createElement("p",{className:D().tableDataTitle},m({id:"ListViewerWidget.createDataSource"})),y().createElement("div",{className:D().tableDataList},y().createElement("div",{onClick:z.bind(null,i.TABLE_DATA),className:d()(D().tableDataItem,D().yellow,i.TABLE_DATA===C&&D().active)},y().createElement(c.j,{type:"icon-source-table-data",className:D().icon}),y().createElement("div",{className:D().name},m({id:"ListViewerWidget.tableData"})),y().createElement("div",{className:D().desc},m({id:"ListViewerWidget.tableDataDesc"}))),y().createElement("div",{onClick:z.bind(null,i.CLOUD_SPACE_TABLE),className:d()(D().tableDataItem,n?D().blue:D().disable,i.CLOUD_SPACE_TABLE===C&&D().active)},y().createElement(c.j,{type:"icon-source-cloud-data",className:D().icon}),n?y().createElement("div",{className:D().name},m({id:"ListViewerWidget.cloudTable"})):y().createElement(p.a,{placement:"bottom",title:m({id:"ListViewerWidget.cloudTableOtTips"})},y().createElement("div",{className:D().name},m({id:"ListViewerWidget.cloudTable"}),y().createElement(c.j,{type:"icon-locked"}))),y().createElement("div",{className:D().desc},m({id:"ListViewerWidget.cloudTableDesc"})))),y().createElement("div",{className:D().confirmBox},y().createElement(c.d,{onClick:B,type:"primary"},m({id:"confirm"})))))})},26359(e,t,n){n.d(t,{qP:()=>g});var r=n(78747),i=n(41804),a=n(51877),o=n(33007),s=n(95644),l=n(451),c=n(19040),u=n(41594),d=n.n(u),f=n(20597),p=n.n(f),g=(0,u.memo)(function(){var e=(0,c.useSelector)(function(e){return e.common.switchImageDialogInfo}),t=e.visible,n=e.widgetId,f=e.imageOpenFileId,g=e.imageCloseFileId,h=s.a().formatMessage,m=(0,u.useState)(""),v=l.a(m,2),b=v[0],E=v[1],y=(0,u.useState)(""),w=l.a(y,2),x=w[0],S=w[1],_=(0,u.useState)(""),C=l.a(_,2),T=C[0],N=C[1];(0,u.useEffect)(function(){t&&(E(f),S(g))},[g,f,t]);var D=(0,c.useDispatch)(),M=function(e,t){switch(t){case"open":E(e.id);break;case"close":S(e.id)}};function k(e){e&&D(a.Zf(e,function(e){M(e[0],T)}))}function I(){D(a.wj(i.c.ImageLibrary,function(e){M(e[0],T),D(a.sh())}))}return d().createElement(o.f,{visible:t,className:p().sliderImageDialog,title:h({id:"switch.custom"}),onClose:function(){D(a.Hj({visible:!1}))},footer:d().createElement(o.d,{type:"primary",onClick:function(){(0,c.batch)(function(){D(a.Lg(n,"backgroundOpenImage",b)),D(a.Lg(n,"backgroundCloseImage",x)),D(a.Hj({visible:!1}))})}},h({id:"confirm"}))},d().createElement("div",{className:p().sliderImage},d().createElement("div",{className:p().imageInfo},d().createElement("span",{className:p().title},h({id:"switch.replaceImage"})),d().createElement("div",{className:p().imageList},d().createElement("div",{className:p().imageItem,onClick:function(){N("close")}},d().createElement(r.nb,{onUploadFileChange:k,onResourceLibraryClick:I,fileId:x,style:{height:240,width:240,padding:"12px",marginBottom:"8px"}}),d().createElement("span",null,h({id:"switch.close"}))),d().createElement("div",{className:p().imageItem,onClick:function(){N("open")}},d().createElement(r.nb,{onUploadFileChange:k,onResourceLibraryClick:I,fileId:b,style:{height:240,width:240,padding:"12px",marginBottom:"8px"}}),d().createElement("span",null,h({id:"switch.open"})))))))})},98728(e,t,n){n.d(t,{JP:()=>D,ZP:()=>N});var r=n(36137),i=n(2171),a=n(41586),o=n.n(a),s=n(13719),l=n.n(s),c=n(19042),u=n(43721),d=n(88963),f=n(51877),p=n(33007),g=n(37298),h=n(46942),m=n.n(h),v=n(95644),b=n(50687),E=n(34221),y=n(7452),w=n.n(y),x=n(19040),S=n(41594),_=n.n(S),C=n(96736),T=n.n(C),N=(0,S.memo)(function(){var e,t,n=(0,x.useDispatch)(),a=v.a().formatMessage,o=(0,x.useSelector)(function(e){return e.common.courseList}),s=(0,x.useSelector)(function(e){return e.common.courseDialogVisible}),h=(0,x.useSelector)(function(e){return e.common.isProjectModified}),m=(0,x.useSelector)(function(e){return e.project.id}),b=u.a(m),y=(e=E.a(w().mark(function e(t){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!h||!b){e.next=9;break}return e.prev=1,e.next=4,f.Nf(n,f.tg({isUpdate:b,isAutoSave:!0,isNeedReport:!1}));case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return");case 9:if(!h||b){e.next=12;break}return n(f.Ri({visible:!0,openFrom:"course",onSave:function(){var e=E.a(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.Nf(n,f.tg({isUpdate:b,isAutoSave:!0,isNeedReport:!1}));case 3:S(t),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),onImport:function(){S(t)}})),e.abrupt("return");case 12:S(t);case 13:case"end":return e.stop()}},e,null,[[1,6]])})),function(t){return e.apply(this,arguments)}),S=(t=E.a(w().mark(function e(t){var a,s,u,h,m,v;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C(),a=o.find(function(e){return e.id===t})){e.next=5;break}return n(f.mj({message:"未获取到教程信息"})),e.abrupt("return");case 5:return s=a.bcmUrl,u=a.title,h=a.videoUrl,e.next=8,l().get(s);case 8:(m=e.sent).data&&(v=m.data,n(f.Gf({json:v,jsonFrom:d.d.COURSE,sourceTag:d.g.COURSE,sourceId:t.toString()}))),g.a.load({onPlayerInit:function(){},title:_().createElement("div",null,_().createElement("span",{style:{position:"relative",right:5}},_().createElement(i.a,{size:"esm",type:"transparent-fb",width:26,height:14,onClick:E.a(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.a.close({closeAnimationPos:{x:150,y:30}}),n(f.fi(!0));case 2:case"end":return e.stop()}},e)}))},_().createElement(p.j,{type:"icon-btn-fallback",className:"coco-video-back"}))),u),videoSrc:h,autoPlay:!0,zIndex:3,useConfirmMask:!0,confirmPercent:.9,onMinimizeBtnClick:function(){g.a.hide(),n(f.Qh(r.a,{name:r.a,content:_().createElement(r.b,null),visible:!0}))},onClose:function(){g.a.close({closeAnimationPos:{x:150,y:30}})}}),c.a("CourseClick",{courseId:t});case 12:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),C=function(){n(f.fi(!1))};return _().createElement(p.f,{title:a({id:"courseVideo"}),withPortal:!0,visible:s,className:T().courseDialog,onClose:C},_().createElement("div",{className:T().courseList},o.map(function(e){return _().createElement("div",{className:T().courseItem,key:e.id,onClick:function(){return y(e.id)}},_().createElement("div",{className:T().courseImage},_().createElement("div",{className:T().image,style:{backgroundImage:"url(".concat(e.preview,")")}}),_().createElement("div",{className:T().mask},_().createElement("div",{className:T().playBox},_().createElement(p.j,{type:"icon-sound-play"})))),_().createElement("div",{className:T().courseName},e.title),_().createElement("div",{className:T().courseDesc},e.courseIntro))}),_().createElement("div",{className:T().courseMore},_().createElement("div",{className:T().moreImage}),_().createElement("div",{className:T().moreTips},a({id:"moreCourseTips"})))))}),D=(0,S.memo)(function(e){var t=v.a().formatMessage,n=(0,x.useDispatch)(),r=(0,x.useSelector)(function(e){return e.common.projectSavePrompt}),i=r.visible,a=r.openFrom,s=r.onSave,l=r.onImport,c=function(){s&&s(),u()},u=function(){n(f.Ri({visible:!1,openFrom:""}))},d="whetherKeepWorksTitle";return"backHome"===a?d="whetherKeepWorksTitleWhenBackHome":"course"===a&&(d="whetherKeepWorksTitleWhenOpenCourse"),_().createElement(p.f,{visible:i,showCloseButton:!1,onClose:u,maskClosable:!1,className:m()(o().dialog,o().dialogSecondary)},_().createElement("h3",null,t({id:d})),_().createElement("span",null,t({id:"whetherKeepWorksDescription"})),_().createElement(b.a,null,_().createElement(b.b,{keys:"enter",callback:c})),_().createElement("div",{className:m()(o().dialogButtons)},_().createElement(p.d,{onClick:u,className:o().cancel},t({id:"cancel"})),_().createElement(p.d,{onClick:function(){l&&l(),u()},className:o().denyButton},t({id:"notSave"})),_().createElement(p.d,{type:"primary",onClick:c},t({id:"save"}))))})},27661(e,t,n){n.d(t,{iB:()=>C});var r=n(43203),i=n(12354),a=n(73400),o=n(51877),s=n(33007),l=n(46942),c=n.n(l),u=n(95644),d=n(22827),f=n(451),p=n(34221),g=n(7452),h=n.n(g),m=n(19040),v=n(41594),b=n.n(v),E=n(69072),y=n.n(E),w=n(71320),x=n(80418),S=n.n(x),_=(0,v.memo)(function(){var e=u.a().formatMessage,t=(0,m.useSelector)(function(e){return e.dataWatch.tableDataDialog}).id,n=(0,m.useSelector)(function(e){return e.dataWatch.variableList}),r=(0,v.useState)(),a=f.a(r,2),o=a[0],s=a[1],l=n.find(function(e){return e.id===t});if(!l)return null;var c=l.value,d=c.header,p=c.data;null!=o&&o.setRowData(p);var g={onGridReady:function(e){s(e.api)},context:{animationHeaders:[],lastFocusedCell:{rowIndex:void 0,columnId:void 0},scrollToRowIndex:-1},getRowHeight:function(e){return 32},enableCellChangeFlash:!1,suppressColumnVirtualisation:!0,suppressMovableColumns:!0,suppressScrollOnNewData:!0,alwaysShowHorizontalScroll:!0,frameworkComponents:{agColumnHeader:function(e){return b().createElement("div",{className:S().gridHeaderCell},e.displayName)},indexCellRenderer:function(e){return b().createElement("div",null,e.rowIndex+1)},baseCellRenderer:function(e){return b().createElement("div",{className:S().baseCell},e.value)}},overlayNoRowsTemplate:e({id:"noData"})};return b().createElement("div",{className:"ag-theme-alpine"},b().createElement(i.AgGridReact,{gridOptions:g},b().createElement(i.AgGridColumn,{colId:"indexColumn",headerName:"",field:"indexColumn",key:"index",editable:!1,resizable:!1,width:60,pinned:"left",cellRenderer:"indexCellRenderer"}),Object.entries(d).map(function(e){var t=f.a(e,2),n=t[0],r=t[1];return b().createElement(i.AgGridColumn,{colId:n,headerName:r.field,field:n,key:n,editable:!1,resizable:!0,minWidth:150,width:r.width,cellRenderer:"baseCellRenderer"})})))}),C=function(){var e,t=(0,m.useDispatch)(),n=u.a().formatMessage,i=(0,v.useState)({x:document.body.clientWidth-886,y:100}),l=f.a(i,2),g=l[0],E=l[1],x=(0,v.useState)(0),C=f.a(x,2),T=C[0],N=C[1],D=(0,v.useState)(0),M=f.a(D,2),k=M[0],I=M[1],O=(0,v.useState)(0),R=f.a(O,2),P=R[0],B=R[1],z=(0,v.useState)(0),A=f.a(z,2),G=A[0],L=A[1],j=(0,v.useState)(876),F=f.a(j,2),W=F[0],H=F[1],Y=(0,v.useState)(540),X=f.a(Y,2),U=X[0],V=X[1],q=(0,v.useRef)(W),K=(0,v.useRef)(U),Z=(0,m.useSelector)(function(e){return e.project.playing}),$=(0,m.useSelector)(function(e){return e.dataWatch.tableDataDialog}),Q=$.id,J=$.visible,ee=(0,m.useSelector)(function(e){return e.dataWatch.variableList}).find(function(e){return e.id===Q}),et=(0,v.useState)(!1),en=f.a(et,2),er=en[0],ei=en[1];if(!ee||!J)return null;var ea=(e=p.a(h().mark(function e(){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q){e.next=4;break}return e.next=3,a.resetTableDataIndexedDB(Q);case 3:ei(!0);case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});return b().createElement("div",{className:S().container},b().createElement(y(),{allowAnyClick:!0,position:g,onDrag:function(e,t){E({x:t.x,y:Math.max(t.y,-16)})},handle:".handle"},b().createElement(w.a,{defaultSize:{width:W,height:U},minWidth:300,minHeight:300,maxWidth:document.body.clientWidth,maxHeight:document.body.clientHeight,onResize:function(e,t,n,r){var i=g.x,a=g.y;switch(t){case"left":case"bottomLeft":i=T-(P+r.width);break;case"top":case"topRight":a=k-(G+r.height);break;case"topLeft":i=T-(P+r.width),a=k-(G+r.height)}E({x:i,y:Math.max(a,-16)}),H(q.current+r.width),V(K.current+r.height)},onResizeStart:function(e,t,n,r){var i=n.getBoundingClientRect().right,a=n.getBoundingClientRect().bottom,o=n.offsetWidth,s=n.offsetHeight;N(i),I(a),B(o),L(s)},onResizeStop:function(){q.current=W,K.current=U}},b().createElement("div",{className:S().wrapper,style:{width:W,height:U}},b().createElement("div",{className:c()(S().header,"handle")},b().createElement("div",{className:S().toast},b().createElement(r.rA,{visible:er,toast:"".concat(ee.name),showIcon:!0,setVisible:ei})),b().createElement("div",{className:S().name},b().createElement(s.j,{type:"icon-widget-table-data"}),b().createElement("span",null,ee.name)),b().createElement("div",{className:S().actions},Z?"":b().createElement(d.a,{placement:"bottom",trigger:["hover"],title:n({id:"resetData"})},b().createElement("div",{className:S().closeIconBox,onClick:ea},b().createElement(s.j,{type:"icon-resetData"}))),b().createElement("div",{className:S().closeIconBox,onClick:function(){t(o.aj(!1))}},b().createElement(s.j,{type:"icon-close-bold"})))),b().createElement(_,null)))))}},38011(e,t,n){n.d(t,{Rn:()=>S});var r=n(19787),i=n(32919),a=n(2980),o=n(19042),s=n(51877),l=n(46942),c=n.n(l),u=n(95644),d=n(451),f=n(5762),p=n(19040),g=n(41594),h=n.n(g);n(22776);var m=n(10536),v=n(41804),b=n(30476),E=n(94220),y=n(26911),w=n.n(y),x=h().memo(function(e){var t=e.children,n=e.vibrating,r=e.scale;return h().createElement("div",{className:c()(w().deviceFrameContainer,w().galaxy5),style:{transform:"scale(".concat(r,")")}},h().createElement("div",{className:c()(w().deviceFrame,{vibrate:n})},t,h().createElement("div",{className:w().mask})))}),S=h().memo(function(){var e=(0,p.useSelector)(function(e){return e.project.playing}),t=(0,p.useSelector)(function(e){return e.project.playedAt}),n=(0,p.useSelector)(function(e){return e.project.id}),l=(0,p.useSelector)(function(e){return e.common.language}),c=(0,p.useDispatch)(),y=u.a().formatMessage,S=(0,g.useState)(!1),_=d.a(S,2),C=_[0],T=_[1],N=(0,g.useRef)(),D=(0,g.useRef)(),M=(0,g.useRef)(null),k=(0,g.useRef)(null),I=(0,g.useRef)(null),O=(0,g.useState)(null),R=d.a(O,2),P=R[0],B=R[1],z=(0,g.useState)(1),A=d.a(z,2),G=A[0],L=A[1],j=function(e){var t=Date.now()+e.data.duration;D.current&&D.current>=t||(T(!0),window.clearTimeout(N.current),N.current=window.setTimeout(function(){return T(!1)},e.data.duration),D.current=t)};function F(){window.clearTimeout(N.current),D.current=0,T(!1)}var W=(0,g.useCallback)(function(e){var t=e.data,n=t.id,r=t.tab,i=t.value;c(s.Pj(n,"value",i)),(r===E.B||r===E.G)&&c(s.Pj(n,"defaultValue",i))},[c]),H=(0,g.useCallback)(function(e){var t=e.data.type;localStorage.removeItem("".concat(t,"DialogPermission")),c(s.Ej({type:t,visible:!0,onConfirm:function(){localStorage.setItem("".concat(t,"DialogPermission"),"true")},onDeny:function(){localStorage.setItem("".concat(t,"DialogPermission"),"false")}}))},[c]),Y=(0,g.useCallback)(function(e){var t=e.data,n="",r=t.widgetType,u=t.widgetId;if(t.message=t.message||"",!r&&u){var d=i.Bb(u);d&&(r=d.type)}if(r){var p=i.Db(r),g=y({id:(null==p?void 0:p.title)||(null==p?void 0:p.previewAreaWidgetTitle)});g&&(n+="【".concat(g,"】"))}if(u){var h=i.Fb(u);h&&(n+="".concat(h," "))}t.msgType===b.a?r&&!a.q(r)&&(t.message=f.d(t.message,t.values)):t.message=f.f(l,t.message,t.values),n&&(t.message="".concat(n).concat(t.message)),c(s.nf(t)),("error"===t.type||"customError"===t.type||"lintError"===t.type)&&o.a("ConsoleDetail",{errorMessage:t.message,warningMessage:""}),"warning"===t.type&&o.a("ConsoleDetail",{errorMessage:"",warningMessage:t.message})},[c,y,l]);(0,g.useEffect)(function(){r.Q.add(v.b.DEVICE_VIBRATE,j),r.Q.add(v.b.DEVICE_NOT_VIBRATE,F),r.Q.add(v.b.PLAYER_DATA_WATCH,W),r.Q.add(v.b.RUNTIME_LOG,Y),r.Q.add(v.b.PLAYER_PERMISSION,H)},[Y,W,H]),(0,g.useEffect)(function(){function e(){c(s.vi(!navigator.onLine))}return window.addEventListener("online",e),window.addEventListener("offline",e),function(){window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[c]),(0,g.useEffect)(function(){e||(N.current&&window.clearTimeout(N.current),D.current=0,T(!1))},[e,c]),(0,g.useLayoutEffect)(function(){if(e&&M.current&&k.current){var t=M.current.clientWidth,n=Math.min((t-208)/384,(M.current.clientHeight-20)/700,1),r=t/2+192*(n=Math.max(n=Math.floor(10*n)/10,.7));I.current&&(I.current.style.left="".concat(r,"px")),L(n)}},[e]);var X=new URLSearchParams(window.location.search.split("?")[1]).get("archiveId"),U="#id=".concat(n,"&ts=").concat(t,"&emulator=1");return h().createElement("div",{style:{display:e?void 0:"none"},className:w().wrapper,ref:M},h().createElement("div",{className:w().deviceFrameWrapper},h().createElement(x,{vibrating:C&&e,scale:G},e&&h().createElement("iframe",{ref:function(e){k.current=e,B((null==e?void 0:e.contentWindow)||null)},title:"Coco Player",sandbox:"allow-forms allow-modals allow-popups allow-same-origin allow-scripts",src:"".concat("/editor/editor-player.html").concat(X?"?&archiveId=".concat(X):"").concat(U)}))),h().createElement("div",{className:w().emulatorWrapper,ref:I},h().createElement(m.a,{messageWindow:P})))})},95546(e,t,n){n.d(t,{Pn:()=>i});var r=n(36454);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r.a(e,t,n[t])})}return e}},31713(e,t,n){n.d(t,{Br:()=>W,Dr:()=>G,Fr:()=>H,Gr:()=>Y,Jn:()=>m,Lr:()=>j,Mr:()=>L,Nr:()=>P,Pr:()=>F,Rr:()=>B,Wr:()=>X,Xn:()=>p,Zn:()=>h,ar:()=>_,cr:()=>T,dr:()=>function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(t){var i={left:r.left+t.offsetLeft,top:r.top+t.offsetTop};return t.parentNode===n?i:e(t.parentNode,n,i)}},er:()=>b,gr:()=>O,hr:()=>I,kr:()=>z,lr:()=>N,mr:()=>function e(t){var n,r;return t instanceof HTMLElement?(n=window.getComputedStyle(t),r=/(auto|scroll)/,["overflow","overflowX","overflowY"].find(function(e){return r.test(n[e])}))?t:e(t.parentNode):null},nr:()=>y,or:()=>x,pr:()=>M,rr:()=>w,sr:()=>C,tr:()=>E,ur:()=>D,wr:()=>R,xr:()=>A});var r=n(36454),i=n(72541),a=n(41594),o=n(2394),s=n(7837),l=n(6840),c=n.n(l),u=n(61117),d=n(28536),f=n.n(d),p=function(){function e(){o.a(this,e),r.a(this,"refs",{})}return s.a(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find(function(t){return t.node.sortableInfo.index==e.active.index})}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(g)}}]),e}();function g(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function h(e,t){return Object.keys(e).reduce(function(n,r){return -1===t.indexOf(r)&&(n[r]=e[r]),n},{})}var m={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},v=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function b(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function E(e,t){e.style["".concat(v,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function y(e,t){e.style["".concat(v,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function w(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function x(e,t,n){return Math.max(e,Math.min(n,t))}function S(e){return"px"===e.substr(-2)?parseFloat(e):0}function _(e){var t=window.getComputedStyle(e);return{bottom:S(t.marginBottom),left:S(t.marginLeft),right:S(t.marginRight),top:S(t.marginTop)}}function C(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function T(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function N(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function D(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}function M(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}function k(e){var t=e.lockOffset,n=e.width,r=e.height,i=t,a=t,o="px";if("string"==typeof t){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);c()(null!==s,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),i=parseFloat(t),a=parseFloat(t),o=s[1]}return c()(isFinite(i)&&isFinite(a),"lockOffset value should be a finite. Given %s",t),"%"===o&&(i=i*n/100,a=a*r/100),{x:i,y:a}}function I(e){var t=e.height,n=e.width,r=e.lockOffset,a=Array.isArray(r)?r:[r,r];c()(2===a.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var o=i.a(a,2),s=o[0],l=o[1];return[k({height:t,lockOffset:s,width:n}),k({height:t,lockOffset:l,width:n})]}function O(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:S(t.gridColumnGap),y:S(t.gridRowGap)}:{x:0,y:0}}var R="A";function P(e){var t="input, textarea, select, canvas, [contenteditable]",n=e.querySelectorAll(t),r=e.cloneNode(!0);return u.a(r.querySelectorAll(t)).forEach(function(e,t){"file"!==e.type&&(e.value=n[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),"CANVAS"===e.tagName&&n[t].width>0&&n[t].height>0&&e.getContext("2d").drawImage(n[t],0,0)}),r}function B(e){return null!=e.sortableHandle}var z=function(){function e(t,n){o.a(this,e),this.container=t,this.onScrollCallback=n}return s.a(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,r=e.minTranslate,i=e.maxTranslate,a=e.width,o=e.height,s={x:0,y:0},l={x:1,y:1},c=this.container,u=c.scrollTop,d=c.scrollLeft,f=c.scrollHeight,p=c.scrollWidth,g=f-u-c.clientHeight==0,h=p-d-c.clientWidth==0;n.y>=i.y-o/2&&!g?(s.y=1,l.y=10*Math.abs((i.y-o/2-n.y)/o)):n.x>=i.x-a/2&&!h?(s.x=1,l.x=10*Math.abs((i.x-a/2-n.x)/a)):n.y<=r.y+o/2&&0!==u?(s.y=-1,l.y=10*Math.abs((n.y-o/2-r.y)/o)):n.x<=r.x+a/2&&0!==d&&(s.x=-1,l.x=10*Math.abs((n.x-a/2-r.x)/a)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(0!==s.x||0!==s.y)&&(this.interval=setInterval(function(){t.isAutoScrolling=!0;var e={left:l.x*s.x,top:l.y*s.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)},5))}}]),e}(),A={axis:f().oneOf(["x","y","xy"]),contentWindow:f().any,disableAutoscroll:f().bool,distance:f().number,getContainer:f().func,getHelperDimensions:f().func,helperClass:f().string,helperContainer:f().oneOfType([f().func,"undefined"==typeof HTMLElement?f().any:f().instanceOf(HTMLElement)]),hideSortableGhost:f().bool,keyboardSortingTransitionDuration:f().number,lockAxis:f().string,lockOffset:f().oneOfType([f().number,f().string,f().arrayOf(f().oneOfType([f().number,f().string]))]),lockToContainerEdges:f().bool,onSortEnd:f().func,onSortMove:f().func,onSortOver:f().func,onSortStart:f().func,pressDelay:f().number,pressThreshold:f().number,keyCodes:f().shape({lift:f().arrayOf(f().number),drop:f().arrayOf(f().number),cancel:f().arrayOf(f().number),up:f().arrayOf(f().number),down:f().arrayOf(f().number)}),shouldCancelStart:f().func,transitionDuration:f().number,updateBeforeSortStart:f().func,useDragHandle:f().bool,useWindowAsScrollContainer:f().bool},G={lift:[32],drop:[32],cancel:[27],up:[38,37],down:[40,39]},L={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:G,shouldCancelStart:function(e){return -1!==["INPUT","TEXTAREA","SELECT","OPTION","BUTTON"].indexOf(e.target.tagName)||!!w(e.target,function(e){return"true"===e.contentEditable})},transitionDuration:300,useWindowAsScrollContainer:!1},j=Object.keys(A);function F(e){c()(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function W(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}var H=(0,a.createContext)({manager:{}}),Y={index:f().number.isRequired,collection:f().oneOfType([f().number,f().string]),disabled:f().bool},X=Object.keys(Y)},20223(e,t,n){n.d(t,{lo:()=>m});var r=n(50862),i=n(99085),a=n(13244),o=n(46942),s=n.n(o),l=n(41594),c=n.n(l);n(7815);var u=n(94082),d=n(98784),f=n(97415),p=n(26372),g=n.n(p),h=function(e){d.a(n,e);var t=f.a(n);function n(e){var a;return i.a(this,n),(a=t.call(this,e)).handleMouseDown=function(e){0===e.button&&(a.setState({isDragging:!0}),document.addEventListener("mousemove",a.handleMouseMove),document.addEventListener("mouseup",a.handleMouseUp))},a.handleMouseMove=function(e){var t=a.props.previewAreaRef.current;if(t){var n=t.getClientRects()[0].width,r=Math.max(Math.min(window.innerWidth/2,n+e.movementX),514);t.style.width=r+"px",a.props.onDrag(r)}},a.handleMouseUp=function(){a.setState({isDragging:!1}),document.removeEventListener("mousemove",a.handleMouseMove),document.removeEventListener("mouseup",a.handleMouseUp),r.z.resizeWorkspace();var e=a.props.previewAreaRef.current;(null==e?void 0:e.getClientRects()[0].width)&&a.props.onDragEnd(e.getClientRects()[0].width)},a.state={isDragging:!1},a}return u.a(n,[{key:"render",value:function(){var e=this.state.isDragging;return c().createElement("div",{className:s()(g().dragBar,a.a({},g().active,e)),onMouseEnter:this.props.onEnter,onMouseLeave:this.props.onLeave,onMouseDown:this.handleMouseDown})}}]),n}(c().PureComponent),m=(0,l.memo)(h)},56997(e,t,n){n.d(t,{ad:()=>N,id:()=>T,od:()=>C});var r=n(94220),i=n(41804),a=n(10309),o=n(32919),s=n(51877),l=n(33007),c=n(13244),u=n(46942),d=n.n(u),f=n(95644),p=n(22827),g=n(451),h=n(19040),m=n(41594),v=n.n(m);n(22224),n(90612);var b=n(39586),E=n.n(b),y=(0,m.memo)(function(){var e=f.a().formatMessage,t=(0,h.useDispatch)(),n=(0,h.useSelector)(function(e){return e.project.selectedWidgetId});return v().createElement("div",{className:E().imageAddon},v().createElement(l.B,{onChange:function(e){e&&n&&t(s.Zf(e,function(e){t(s.Yf(e[0],n))}))},accept:a.f,tooltip:e({id:"uploadFileByLocal"})},v().createElement(l.j,{type:"icon-upload-image",className:d()(E().item)})),v().createElement("div",{className:E().gap}),v().createElement(p.a,{placement:"right",title:e({id:"resourceLibrary"}),trigger:["hover","click"]},v().createElement("div",{onClick:function(){n&&t(s.wj(i.c.ImageLibrary,function(e){(0,h.batch)(function(){var r=o.hb(e[0].id);r&&t(s.Yf(r,n)),t(s.sh())})}))}},v().createElement(l.j,{type:"icon-image-library",className:d()(E().item)}))))}),w=(0,m.memo)(function(){var e=(0,h.useDispatch)(),t=f.a().formatMessage,n=(0,h.useSelector)(function(e){return e.common.widgetAttributeVisible});return v().createElement(p.a,{placement:"right",title:t({id:"edit"}),trigger:["hover","click"]},v().createElement("div",{onClick:function(){var t=!n;(0,h.batch)(function(){e(s.fj(t)),t&&e(s.Fj(!1))})}},v().createElement(l.j,{type:"icon-attribute",className:d()(E().iconButton,E().editIcon)})))}),x=function(){var e=f.a().formatMessage,t=(0,h.useSelector)(function(e){return e.project.selectedWidgetId}),n=(0,h.useSelector)(function(e){return e.common.previewAreaUpdatedAt}),i=(0,m.useState)(0),a=g.a(i,2),u=a[0],b=a[1],y=o.Bb(t||""),w=(0,h.useDispatch)();if(!y||y.type!==r.C&&y.type!==r.g)return v().createElement(v().Fragment,null);var x=y.attributes.options;return v().createElement("div",{"data-should-update":n,className:E().radioActions,"data-should-update-area":u},v().createElement(p.a,{placement:"bottom",title:e({id:"deleteOption"}),trigger:["hover","click"]},v().createElement("div",{onClick:function(){y&&x.length>1&&(b(Date.now()),w(s.Lg(y.id,"options",x.slice(0,-1))))},className:d()(c.a({},E().disabled,1===x.length))},v().createElement(l.j,{type:"icon-minus"}))),v().createElement(p.a,{placement:"bottom",title:e({id:"addOption"}),trigger:["hover","click"]},v().createElement("div",{onClick:function(){y&&x.length<8&&(x.push({content:"",state:"none"}),w(s.Lg(y.id,"options",x)),b(Date.now()))},className:d()(c.a({},E().disabled,8===x.length))},v().createElement(l.j,{type:"icon-add"}))))},S=function(){var e=(0,h.useDispatch)(),t=f.a().formatMessage,n=(0,h.useSelector)(function(e){return e.project.selectedWidgetId});return v().createElement(p.a,{placement:"right",title:t({id:"refresh"}),trigger:["hover","click"]},v().createElement("div",{onClick:function(){n&&e(s.Lg(n,"refreshTimestamp",Date.now(),!0,!1))},className:E().webViewAction},v().createElement(l.j,{type:"icon-refresh",className:d()(E().iconButton)})))},_=function(){var e=(0,h.useSelector)(function(e){return e.project.selectedWidgetId}),t=o.Bb(e||"");return t?v().createElement("div",{className:E().addonBox},v().createElement(w,null),t.type===r.v&&v().createElement(y,null),t.type===r.L&&v().createElement(S,null)):v().createElement(v().Fragment,null)},C={name:"MoveableRightAddon",render:function(e){var t=e.getRect();return v().createElement("div",{key:"MoveableRightAddon",style:{position:"absolute",left:t.width+10,top:0}},v().createElement(_,null))}},T={name:"MoveableBottomAddon",render:function(e){var t=e.getRect();return v().createElement("div",{key:"MoveableBottomAddon",style:{position:"absolute",left:t.width-50,top:t.height+10}},v().createElement(x,null))}},N=(0,m.memo)(_)},7214(e,t,n){n.d(t,{zd:()=>as});var r,i,a,o=n(41594),s=n.n(o),l=n(36728),c=n(35685);function u(e,t){for(var n=e.length,r=0;r<n;++r)if(t(e[r],r))return!0;return!1}function d(e,t){try{return RegExp(e,"g").exec(t)}catch(e){return null}}function f(e){return e.replace(/_/g,".")}function p(e,t){var n=null,r="-1";return u(e,function(e){var i,a=d("("+e.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!(!a||e.brand)&&(n=e,r=a[3]||"-1",e.versionAlias?r=e.versionAlias:e.versionTest&&(r=((i=d("("+e.versionTest.toLowerCase()+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t))?i[3]:"")||r),r=f(r),!0)}),{preset:n,version:r}}function g(e,t){var n={brand:"",version:"-1"};return u(e,function(e){var r=h(t,e);return!!r&&(n.brand=e.id,n.version=e.versionAlias||r.version,"-1"!==n.version)}),n}function h(e,t){for(var n=e,r=function(e){var n=e.brand;return d(""+t.test,n.toLowerCase())},i=n.length,a=0;a<i;++a)if(r(n[a],a))return n[a];return null}var m=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],v=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],b=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],E=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],y=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function w(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}function x(e,t){return t.replace(/([^}{]*){/gm,function(t,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})}function S(e,t){return function(n){n&&(e[t]=n)}}function _(e,t,n){return function(r){r&&(e[t][n]=r)}}var C=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],T={cm:function(e){return 96*e/2.54},mm:function(e){return 96*e/254},in:function(e){return 96*e},pt:function(e){return 96*e/72},pc:function(e){return 96*e/6},"%":function(e,t){return e*t/100},vw:function(e,t){return void 0===t&&(t=window.innerWidth),e/100*t},vh:function(e,t){return void 0===t&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return void 0===t&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return void 0===t&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};function N(e){return void 0===e}function D(e){return e&&"object"==typeof e}function M(e){return Array.isArray(e)}function k(e){return"string"==typeof e}function I(e){return"function"==typeof e}function O(e,t,n){if(!e.ignore)return null;var r=t.slice(Math.max(n-3,0),n+3).join("");return new RegExp(e.ignore).exec(r)}function R(e,t){var n=k(t)?{separator:t}:t,r=n.separator,i=void 0===r?",":r,a=n.isSeparateFirst,o=n.isSeparateOnlyOpenClose,s=n.isSeparateOpenClose,l=void 0===s?o:s,c=n.openCloseCharacters,u=void 0===c?C:c,d=RegExp("(\\s*"+i+"\\s*|"+u.map(function(e){var t=e.open,n=e.close;return t===n?t:t+"|"+n}).join("|")+"|\\s+)","g"),f=e.split(d).filter(Boolean),p=f.length,g=[],h=[];function m(){return!!h.length&&(g.push(h.join("")),h=[],!0)}for(var v,b=0;b<p;++b){var E=function(e){var t=f[e].trim(),n=e,r=G(u,function(e){return e.open===t}),s=G(u,function(e){return e.close===t});if(r){if(-1!==(n=function e(t,n,r,i,a){return O(t,n,r)?r:function(t,n,r,i,a){for(var o,s=r;s<i;++s){var l=function(r){var s=n[r].trim();if(s===t.close&&!O(t,n,r))return{value:r};var l=r,c=G(a,function(e){return e.open===s});if(c&&(l=e(c,n,r,i,a)),-1===l)return o=r,"break";o=l}(s);if(s=o,"object"==typeof l)return l.value;if("break"===l)break}return -1}(t,n,r+1,i,a)}(r,f,e,p,u))&&l)return m()&&a?(v=e,"break"):(g.push(f.slice(e,n+1).join("")),e=n,a?(v=e,"break"):(v=e,"continue"))}else{if(s&&!O(s,f,e))throw Error("invalid format: "+s.close);if(((""===i||" "==i)&&(""===t||" "==t)||t===i)&&!o)return m(),a?(v=e,"break"):(v=e,"continue")}-1===n&&(n=p-1),h.push(f.slice(e,n+1).join("")),v=n}(b);if(b=v,"break"===E)break}return h.length&&g.push(h.join("")),g}function P(e){return R(e,"")}function B(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function z(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var n=t[1],r=t[2];return{prefix:n,unit:t[3],value:parseFloat(r)}}function A(e,t,n){void 0===n&&(n=-1);for(var r=e.length,i=0;i<r;++i)if(t(e[i],i,e))return i;return n}function G(e,t,n){var r=A(e,t);return r>-1?e[r]:n}function L(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in t)t.push(n);return t}function j(e,t){var n=z(e),r=n.value,i=n.unit;if(D(t)){var a=t[i];if(a){if(I(a))return a(r);if(T[i])return T[i](r,a)}}else if("%"===i)return r*t/100;return T[i]?T[i](r):r}function F(e,t,n){return[[X(t[0],1e-7),X(t[0]*e[1]/e[0],1e-7)],[X(t[1]*e[0]/e[1],1e-7),X(t[1],1e-7)]].filter(function(e){return e.every(function(e,r){return n?e<=t[r]:e>=t[r]})})[0]||e}function W(e){for(var t=e.length,n=0,r=t-1;r>=0;--r)n+=e[r];return t?n/t:0}function H(e,t){var n=t[0]-e[0],r=Math.atan2(t[1]-e[1],n);return r>=0?r:r+2*Math.PI}function Y(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function X(e,t){return t?Math.round(e/t)*t:e}function U(e,t){return e.forEach(function(n,r){e[r]=X(e[r],t)}),e}function V(e,t){return e.classList?e.classList.contains(t):!!e.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))}function q(e,t,n,r){e.removeEventListener(t,n,r)}var K=['"',"'",'\\"',"\\'"],Z={cm:function(e){return 96*e/2.54},mm:function(e){return 96*e/254},in:function(e){return 96*e},pt:function(e){return 96*e/72},pc:function(e){return 96*e/6},"%":function(e,t){return e*t/100},vw:function(e,t){return void 0===t&&(t=window.innerWidth),e/100*t},vh:function(e,t){return void 0===t&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return void 0===t&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return void 0===t&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};function $(e){return e&&"object"==typeof e}function Q(e,t,n,r){for(var i=n;i<r;++i){var a=t[i].trim();if(a===e)return i;var o=i;if("("===a?o=Q(")",t,i+1,r):K.indexOf(a)>-1&&(o=Q(a,t,i+1,r)),-1===o)break;i=o}return -1}function J(e,t){for(var n=RegExp("(\\s*"+(t||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),r=e.split(n).filter(Boolean),i=r.length,a=[],o=[],s=0;s<i;++s){var l=r[s].trim(),c=s;if("("===l)c=Q(")",r,s+1,i);else{if(")"===l)throw Error("invalid format");if(K.indexOf(l)>-1)c=Q(l,r,s+1,i);else if(l===t){o.length&&(a.push(o.join("")),o=[]);continue}}-1===c&&(c=i-1),o.push(r.slice(s,c+1).join("")),s=c}return o.length&&a.push(o.join("")),a}function ee(e){return J(e,",")}function et(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var n=t[1],r=t[2];return{prefix:n,unit:t[3],value:parseFloat(r)}}function en(){return Date.now?Date.now():new Date().getTime()}function er(e,t,n){void 0===n&&(n=-1);for(var r=e.length,i=0;i<r;++i)if(t(e[i],i,e))return i;return n}function ei(e,t){var n=et(e),r=n.value,i=n.unit;if($(t)){var a=t[i];if(a){if("function"==typeof a)return a(r);if(Z[i])return Z[i](r,a)}}else if("%"===i)return r*t/100;return Z[i]?Z[i](r):r}function ea(e,t){return t?Math.round(e/t)*t:e}function eo(e,t){var n=t[0]-e[0],r=Math.atan2(t[1]-e[1],n);return r>=0?r:r+2*Math.PI}function es(e){var t=[0,1].map(function(t){return function(e){for(var t=e.length,n=0,r=t-1;r>=0;--r)n+=e[r];return t?n/t:0}(e.map(function(e){return e[t]}))}),n=eo(t,e[0]),r=eo(t,e[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function el(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function ec(e,t,n,r){e.addEventListener(t,n,r)}function eu(e,t,n){e.removeEventListener(t,n)}function ed(e,t,n){void 0===n&&(n=Math.sqrt(e.length));for(var r=e.slice(),i=0;i<n;++i)r[i*n+t-1]=0,r[(t-1)*n+i]=0;return r[(t-1)*(n+1)]=1,r}function ef(e,t){void 0===t&&(t=Math.sqrt(e.length));for(var n=e.slice(),r=eM(t),i=0;i<t;++i){var a=t*i+i;if(!ea(n[a],1e-7)){for(var o=i+1;o<t;++o)if(n[t*i+o]){!function(e,t,n,r,i){for(var a=0;a<i;++a){var o=n+a*i,s=r+a*i,l=e[o],c=t[o];e[o]=e[s],e[s]=l,t[o]=t[s],t[s]=c}}(n,r,i,o,t);break}}if(!ea(n[a],1e-7))return[];for(var s=i,l=t,c=n[a],u=0;u<l;++u){var d=s+u*l;n[d]/=c,r[d]/=c}for(o=0;o<t;++o){var f=o,p=n[o+i*t];ea(p,1e-7)&&i!==o&&function(e,t,n,r,i,a){for(var o=0;o<i;++o){var s=n+o*i,l=r+o*i;e[s]+=e[l]*a,t[s]+=t[l]*a}}(n,r,f,i,t,-p)}}return r}function ep(e,t){for(var n=e.slice(),r=e.length;r<t-1;++r)n[r]=0;return n[t-1]=1,n}function eg(e,t,n){if(void 0===t&&(t=Math.sqrt(e.length)),t===n)return e;for(var r=eM(n),i=Math.min(t,n),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*n+o]=e[a*t+o];r[(a+1)*n-1]=e[(a+1)*t-1],r[(n-1)*n+a]=e[(t-1)*t+a]}return r[n*n-1]=e[t*t-1],r}function eh(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=eM(e);return t.forEach(function(t){r=em(r,t,e)}),r}function em(e,t,n){void 0===n&&(n=Math.sqrt(e.length));var r=[],i=e.length/n,a=t.length/i;if(!i)return t;if(!a)return e;for(var o=0;o<n;++o)for(var s=0;s<a;++s){r[s*n+o]=0;for(var l=0;l<i;++l)r[s*n+o]+=e[l*n+o]*t[s*i+l]}return r}function ev(e,t){for(var n=Math.min(e.length,t.length),r=e.slice(),i=0;i<n;++i)r[i]=r[i]+t[i];return r}function eb(e,t){for(var n=Math.min(e.length,t.length),r=e.slice(),i=0;i<n;++i)r[i]=r[i]-t[i];return r}function eE(e,t){return void 0===t&&(t=9===e.length),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function ey(e,t,n){void 0===n&&(n=t.length);var r=em(e,t,n),i=r[n-1];return r.map(function(e){return e/i})}function ew(e,t){return em(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function ex(e,t){return em(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function eS(e,t){return em(e,eD(t,4))}function e_(e,t){var n=t[0],r=t[1],i=t[2];return em(e,[void 0===n?1:n,0,0,0,0,void 0===r?1:r,0,0,0,0,void 0===i?1:i,0,0,0,0,1],4)}function eC(e,t){return ey(eD(t,3),ep(e,3))}function eT(e,t){var n=t[0],r=t[1],i=t[2];return em(e,[1,0,0,0,0,1,0,0,0,0,1,0,void 0===n?0:n,void 0===r?0:r,void 0===i?0:i,1],4)}function eN(e,t){return em(e,t,4)}function eD(e,t){var n=Math.cos(e),r=Math.sin(e),i=eM(t);return i[0]=n,i[1]=r,i[t]=-r,i[t+1]=n,i}function eM(e){for(var t=e*e,n=[],r=0;r<t;++r)n[r]=r%(e+1)?0:1;return n}function ek(e,t){for(var n=eM(t),r=Math.min(e.length,t-1),i=0;i<r;++i)n[(t+1)*i]=e[i];return n}function eI(e,t){for(var n=eM(t),r=Math.min(e.length,t-1),i=0;i<r;++i)n[t*(t-1)+i]=e[i];return n}function eO(e,t,n,r,i,a,o,s){var l=e[0],c=e[1],u=t[0],d=t[1],f=n[0],p=n[1],g=r[0],h=r[1],m=i[0],v=i[1],b=a[0],E=a[1],y=o[0],w=o[1],x=s[0],S=s[1],_=ef([l,0,u,0,f,0,g,0,c,0,d,0,p,0,h,0,1,0,1,0,1,0,1,0,0,l,0,u,0,f,0,g,0,c,0,d,0,p,0,h,0,1,0,1,0,1,0,1,-m*l,-v*l,-b*u,-E*u,-y*f,-w*f,-x*g,-S*g,-m*c,-v*c,-b*d,-E*d,-y*p,-w*p,-x*h,-S*h],8);if(!_.length)return[];var C=em(_,[m,v,b,E,y,w,x,S],8);return C[8]=1,eg(function(e,t){void 0===t&&(t=Math.sqrt(e.length));for(var n=[],r=0;r<t;++r)for(var i=0;i<t;++i)n[i*t+r]=e[t*r+i];return n}(C),3,4)}function eR(e,t){var n=ey(e,[t[0],t[1]||0,t[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function eP(e){var t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach(function(e){var n=e.matrixFunction,r=e.functionValue;n&&(t=n(t,r))}),t}function eB(e){return(Array.isArray(e)?e:J(e,"")).map(function(e){var t,n=(t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e))&&!(t.length<4)?{prefix:t[1],value:t[2],suffix:t[3]}:{},r=n.prefix,i=n.value,a=null,o=r,s="";if("translate"===r||"translateX"===r||"translate3d"===r){var l=ee(i).map(function(e){return parseFloat(e)}),c=l[0],u=l[1],d=void 0===u?0:u,f=l[2];a=eT,s=[c,d,void 0===f?0:f]}else if("translateY"===r)a=eT,s=[0,d=parseFloat(i),0];else if("translateZ"===r)a=eT,s=[0,0,parseFloat(i)];else if("scale"===r||"scale3d"===r){var p=ee(i).map(function(e){return parseFloat(e)}),g=p[0],h=p[1],m=void 0===h?g:h,v=p[2];a=e_,s=[g,m,void 0===v?1:v]}else if("scaleX"===r)a=e_,s=[g=parseFloat(i),1,1];else if("scaleY"===r)a=e_,s=[1,m=parseFloat(i),1];else if("scaleZ"===r)a=e_,s=[1,1,parseFloat(i)];else if("rotate"===r||"rotateZ"===r||"rotateX"===r||"rotateY"===r){var b=et(i),E=b.unit,y=b.value;"rotate"===r||"rotateZ"===r?(o="rotateZ",a=eS):"rotateX"===r?a=ew:"rotateY"===r&&(a=ex),s="rad"===E?y:y*Math.PI/180}else if("matrix3d"===r)a=eN,s=ee(i).map(function(e){return parseFloat(e)});else if("matrix"===r){var w=ee(i).map(function(e){return parseFloat(e)});a=eN,s=[w[0],w[1],0,0,w[2],w[3],0,0,0,0,1,0,w[4],w[5],0,1]}else o="";return{name:r,functionName:o,value:i,matrixFunction:a,functionValue:s}})}var ez=function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(e){return this.values[this.keys.indexOf(e)]},t.set=function(e,t){var n=this.keys,r=this.values,i=n.indexOf(e),a=-1===i?n.length:i;n[a]=e,r[a]=t},e}(),eA=function(){function e(){this.object={}}var t=e.prototype;return t.get=function(e){return this.object[e]},t.set=function(e,t){this.object[e]=t},e}(),eG="function"==typeof Map,eL=function(){function e(){}var t=e.prototype;return t.connect=function(e,t){this.prev=e,this.next=t,e&&(e.next=this),t&&(t.prev=this)},t.disconnect=function(){var e=this.prev,t=this.next;e&&(e.next=t),t&&(t.prev=e)},t.getIndex=function(){for(var e=this,t=-1;e;)e=e.prev,++t;return t},e}(),ej=function(){function e(e,t,n,r,i,a,o,s){this.prevList=e,this.list=t,this.added=n,this.removed=r,this.changed=i,this.maintained=a,this.changedBeforeAdded=o,this.fixed=s}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var e,t,n,r,i=(e=this.changedBeforeAdded,t=this.fixed,n=[],r=[],e.forEach(function(e){var t=e[0],i=e[1],a=new eL;n[t]=a,r[i]=a}),n.forEach(function(e,t){e.connect(n[t-1])}),e.filter(function(e,n){return!t[n]}).map(function(e,t){var i=e[0],a=e[1];if(i===a)return[0,0];var o=n[i],s=r[a-1],l=o.getIndex();return o.disconnect(),s?o.connect(s,s.next):o.connect(void 0,n[0]),[l,o.getIndex()]})),a=this.changed,o=[];this.cacheOrdered=i.filter(function(e,t){var n=e[0],r=e[1],i=a[t],s=i[0],l=i[1];if(n!==r)return o.push([s,l]),!0}),this.cachePureChanged=o},e}();function eF(e,t,n){var r=eG?Map:n?eA:ez,i=n||function(e){return e},a=[],o=[],s=[],l=e.map(i),c=t.map(i),u=new r,d=new r,f=[],p=[],g={},h=[],m=0,v=0;return l.forEach(function(e,t){u.set(e,t)}),c.forEach(function(e,t){d.set(e,t)}),l.forEach(function(e,t){var n=d.get(e);void 0===n?(++v,o.push(t)):g[n]=v}),c.forEach(function(e,t){var n=u.get(e);void 0===n?(a.push(t),++m):(s.push([n,t]),v=g[t]||0,f.push([n-v,t-m]),p.push(t===n),n!==t&&h.push([n,t]))}),o.reverse(),new ej(e,t,a,o,h,s,f,p)}var eW=function(){function e(e,t){void 0===e&&(e=[]),this.findKeyCallback=t,this.list=[].slice.call(e)}return e.prototype.update=function(e){var t=[].slice.call(e),n=eF(this.list,t,this.findKeyCallback);return this.list=t,n},e}(),eH=function(e,t){return(eH=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},eY="function"==typeof Map?void 0:(r=0,function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++r)}),eX=function(e){function t(t){return void 0===t&&(t=[]),e.call(this,t,eY)||this}function n(){this.constructor=t}return eH(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n),t}(eW);function eU(e){return e.length<3?0:Math.abs(function(e){for(var t=0,n=e.length-1;n>=0;--n)t+=e[n];return t}(e.map(function(t,n){var r=e[n+1]||e[0];return t[0]*r[1]-r[0]*t[1]})))/2}function eV(e,t){var n=t.width,r=t.height,i=t.left,a=t.top,o=eq(e),s=o.minX,l=o.minY,c=o.maxX,u=o.maxY,d=n/(c-s),f=r/(u-l);return e.map(function(e){return[i+(e[0]-s)*d,a+(e[1]-l)*f]})}function eq(e){var t=e.map(function(e){return e[0]}),n=e.map(function(e){return e[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,n)}}function eK(e,t,n){var r=e[0],i=e[1],a=eq(t),o=a.minX,s=a.minY,l=a.maxX,c=a.maxY,u=[[o,i],[l,i]],d=[[r,s],[r,c]],f=eZ(u[0],u[1]),p=eZ(d[0],d[1]),g=eJ(t),h=[],m=[];return g.forEach(function(e){var t=eZ(e[0],e[1]),n=eQ(e$(f,t),[u,e]),a=eQ(e$(p,t),[d,e]);(1!==n.length||e[0][1]!==i)&&h.push.apply(h,n),(1!==a.length||e[0][0]!==r)&&m.push.apply(m,a),t[0]||h.push.apply(h,n),t[1]||m.push.apply(m,a)}),!n&&(er(h,function(e){return e[0]===r})>-1||er(m,function(e){return e[1]===i})>-1)||!!(h.filter(function(e){return e[0]>r}).length%2&&m.filter(function(e){return e[1]>i}).length%2)}function eZ(e,t){var n=e[0],r=e[1],i=t[0],a=t[1];if(n===i&&r===a)return[0,0,0];if(n===i)return[1,0,-n];if(r===a)return[0,1,-r];var o=(i-n)/(r-a);return[1,o,-n-o*r]}function e$(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],l=t[1],c=t[2],u=0===i&&0===s,d=0===a&&0===l;if(u&&d)return[];if(u){var f=-o/a;return f!==-c/l?[]:[[-1/0,f],[1/0,f]]}if(d){var p=-o/i;return p!==-c/s?[]:[[p,-1/0],[p,1/0]]}return 0===i?[[n=-(l*(r=-o/a)+c)/s,r]]:0===s?[[n=-(a*(r=-c/l)+o)/i,r]]:0===a?[[n=-o/i,r=-(s*n+c)/l]]:0===l?[[n=-c/s,r=-(i*n+o)/a]]:[[n=(a*c-l*o)/(l*i-a*s),r=-(i*n+o)/a]]}function eQ(e,t){var n=t.map(function(e){return[0,1].map(function(t){return[Math.min(e[0][t],e[1][t]),Math.max(e[0][t],e[1][t])]})});if(2===e.length){var r=e[0],i=r[0],a=r[1];if(i===e[1][0]){var o=Math.max.apply(Math,n.map(function(e){return e[1][0]})),s=Math.min.apply(Math,n.map(function(e){return e[1][1]}));return o>s?[]:[[i,o],[i,s]]}if(a===e[1][1]){var l=Math.max.apply(Math,n.map(function(e){return e[0][0]})),c=Math.min.apply(Math,n.map(function(e){return e[0][1]}));return l>c?[]:[[l,a],[c,a]]}}return e.filter(function(e){return n.every(function(t){return t[0][0]<=e[0]&&e[0]<=t[0][1]&&t[1][0]<=e[1]&&e[1]<=t[1][1]})})}function eJ(e){return(function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r})(e.slice(1),[e[0]]).map(function(t,n){return[e[n],t]})}var e0=function(){return(e0=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},e1=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(e,t){if($(e))for(var n in e)this.on(n,e[n]);else this._addEvent(e,t,{});return this},t.off=function(e,t){if(e)if($(e))for(var n in e)this.off(n);else if(t){var r=this._events[e];if(r){var i=er(r,function(e){return e.listener===t});i>-1&&r.splice(i,1)}}else this._events[e]=[];else this._events={};return this},t.once=function(e,t){var n=this;return t&&this._addEvent(e,t,{once:!0}),new Promise(function(t){n._addEvent(e,t,{once:!0})})},t.emit=function(e,t){var n=this;void 0===t&&(t={});var r=this._events[e];if(!e||!r)return!0;var i=!1;return t.eventType=e,t.stop=function(){i=!0},t.currentTarget=this,(function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r})(r).forEach(function(r){r.listener(t),r.once&&n.off(e,r.listener)}),!i},t.trigger=function(e,t){return void 0===t&&(t={}),this.emit(e,t)},t._addEvent=function(e,t,n){var r=this._events;r[e]=r[e]||[],r[e].push(e0({listener:t},n))},e}(),e2=function(e,t){return(e2=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function e3(e){var t=e.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}var e4=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}function n(){this.constructor=t}e2(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n);var r=t.prototype;return r.dragStart=function(e,t){var n=t.container,r=0,i=0,a=0,o=0;if(n===document.body)a=window.innerWidth,o=window.innerHeight;else{var s=n.getBoundingClientRect();r=s.top,i=s.left,a=s.width,o=s.height}this.startPos=[e.clientX,e.clientY],this.startRect={top:r,left:i,width:a,height:o}},r.drag=function(e,t){var n=this,r=e.clientX,i=e.clientY,a=t.container,o=t.threshold,s=void 0===o?0:o,l=t.throttleTime,c=void 0===l?0:l,u=t.getScrollPosition,d=void 0===u?e3:u,f=this.startRect,p=this.startPos,g=Date.now?Date.now():new Date().getTime(),h=Math.max(c+this.prevTime-g,0),m=[0,0];if(f.top>i-s?(p[1]>f.top||i<p[1])&&(m[1]=-1):f.top+f.height<i+s&&(p[1]<f.top+f.height||i>p[1])&&(m[1]=1),f.left>r-s?(p[0]>f.left||r<p[0])&&(m[0]=-1):f.left+f.width<r+s&&(p[0]<f.left+f.width||r>p[0])&&(m[0]=1),clearTimeout(this.timer),!m[0]&&!m[1])return!1;if(h>0)return this.timer=window.setTimeout(function(){n.drag(e,t)},h),!1;this.prevTime=g;var v=d({container:a,direction:m});this.trigger("scroll",{container:a,direction:m,inputEvent:e});var b=d({container:a,direction:m}),E=b[0]-v[0],y=b[1]-v[1];return!(!E&&!y)&&(this.trigger("move",{offsetX:m[0]?E:0,offsetY:m[1]?y:0,inputEvent:e}),c&&(this.timer=window.setTimeout(function(){n.drag(e,t)},c)),!0)},r.dragEnd=function(){clearTimeout(this.timer)},t}(e1),e5=function(e,t){return(e5=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},e6=function(){return(e6=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function e8(e){var t,n,r,i;return t=[e[0].clientX,e[0].clientY],r=(n=[e[1].clientX,e[1].clientY])[0]-t[0],((i=Math.atan2(n[1]-t[1],r))>=0?i:i+2*Math.PI)/Math.PI*180}function e7(e){return e.touches?function(e){for(var t=Math.min(e.length,2),n=[],r=0;r<t;++r)n.push(tt(e[r]));return n}(e.touches):[tt(e)]}function e9(e,t,n){var r=n.length,i=tn(e,r),a=i.clientX,o=i.clientY,s=i.originalClientX,l=i.originalClientY,c=tn(t,r),u=c.clientX,d=c.clientY,f=tn(n,r);return{clientX:s,clientY:l,deltaX:a-u,deltaY:o-d,distX:a-f.clientX,distY:o-f.clientY}}function te(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function tt(e){return{clientX:e.clientX,clientY:e.clientY}}function tn(e,t){void 0===t&&(t=e.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<t;++r){var i=e[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return t?{clientX:n.clientX/t,clientY:n.clientY/t,originalClientX:n.originalClientX/t,originalClientY:n.originalClientY/t}:n}var tr=function(){function e(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}var t=e.prototype;return t.addClients=function(e){void 0===e&&(e=this.prevClients);var t=this.getPosition(e),n=t.deltaX,r=t.deltaY;return this.movement+=Math.sqrt(n*n+r*r),this.prevClients=e,t},t.getAngle=function(e){return void 0===e&&(e=this.prevClients),e8(e)},t.getRotation=function(e){return void 0===e&&(e=this.prevClients),e8(e)-e8(this.startClients)},t.getPosition=function(e){return e9(e||this.prevClients,this.prevClients,this.startClients)},t.getPositions=function(e){void 0===e&&(e=this.prevClients);var t=this.prevClients;return this.startClients.map(function(n,r){return e9([e[r]],[t[r]],[n])})},t.getMovement=function(e){var t=this.movement;if(!e)return t;var n=tn(e,this.length),r=tn(this.prevClients,this.length),i=n.clientX-r.clientX,a=n.clientY-r.clientY;return Math.sqrt(i*i+a*a)+t},t.getDistance=function(e){return void 0===e&&(e=this.prevClients),te(e)},t.getScale=function(e){return void 0===e&&(e=this.prevClients),te(e)/te(this.startClients)},t.move=function(e,t){this.startClients.forEach(function(n){n.clientX-=e,n.clientY-=t}),this.prevClients.forEach(function(n){n.clientX-=e,n.clientY-=t})},e}(),ti=["textarea","input"],ta=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;r.options={},r.flag=!1,r.pinchFlag=!1,r.datas={},r.isDrag=!1,r.isPinch=!1,r.isMouse=!1,r.isTouch=!1,r.clientStores=[],r.targets=[],r.prevTime=0,r.doubleFlag=!1,r.onDragStart=function(e,t){if(void 0===t&&(t=!0),r.flag||!1!==e.cancelable){var n,i=r.options,a=i.container,o=i.pinchOutside,s=i.preventRightClick,l=i.preventDefault,c=i.checkInput,u=r.isTouch,d=!r.flag;if(d){var f=document.activeElement,p=e.target,g=p.tagName.toLowerCase(),h=ti.indexOf(g)>-1,m=p.isContentEditable;if(h||m){if(c||f===p||f&&m&&f.isContentEditable&&f.contains(p))return!1}else if((l||"touchstart"===e.type)&&f){var v=f.tagName;(f.isContentEditable||ti.indexOf(v)>-1)&&f.blur()}if(r.clientStores=[new tr(e7(e))],r.flag=!0,r.isDrag=!1,r.datas={},s&&(3===e.which||2===e.button))return r.initDrag(),!1;r.doubleFlag=en()-r.prevTime<200,!1===r.emit("dragStart",e6({datas:r.datas,inputEvent:e,isTrusted:t,isDouble:r.doubleFlag},r.getCurrentStore().getPosition()))&&r.initDrag(),r.flag&&l&&e.preventDefault()}if(!r.flag)return!1;var b=0;if(d&&u&&o&&(b=setTimeout(function(){ec(a,"touchstart",r.onDragStart,{passive:!1})})),!d&&u&&o&&eu(a,"touchstart",r.onDragStart),r.flag&&(n=e).touches&&n.touches.length>=2){if(clearTimeout(b),d&&e.touches.length!==e.changedTouches.length)return;r.pinchFlag||r.onPinchStart(e)}}},r.onDrag=function(e,t){if(r.flag){var n=e7(e),i=r.moveClients(n,e,!1);(r.pinchFlag||i.deltaX||i.deltaY)&&r.emit("drag",e6({},i,{isScroll:!!t,inputEvent:e})),r.pinchFlag&&r.onPinch(e,n),r.getCurrentStore().addClients(n)}},r.onDragEnd=function(e){if(r.flag){var t=r.options,n=t.pinchOutside,i=t.container;r.isTouch&&n&&eu(i,"touchstart",r.onDragStart),r.flag=!1;var a=r.getCurrentStore().getPosition(),o=en(),s=!r.isDrag&&r.doubleFlag;r.prevTime=r.isDrag||s?0:o,r.emit("dragEnd",e6({datas:r.datas,isDouble:s,isDrag:r.isDrag,inputEvent:e},a)),r.pinchFlag&&r.onPinchEnd(e),r.clientStores=[]}},r.onBlur=function(){r.onDragEnd()};var i=[].concat(t);r.options=e6({checkInput:!1,container:i.length>1?window:i[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},n);var a=r.options,o=a.container,s=a.events,l=a.checkWindowBlur;if(r.isTouch=s.indexOf("touch")>-1,r.isMouse=s.indexOf("mouse")>-1,r.targets=i,r.isMouse&&(i.forEach(function(e){ec(e,"mousedown",r.onDragStart)}),ec(o,"mousemove",r.onDrag),ec(o,"mouseup",r.onDragEnd),ec(o,"contextmenu",r.onDragEnd)),l&&ec(window,"blur",r.onBlur),r.isTouch){var c={passive:!1};i.forEach(function(e){ec(e,"touchstart",r.onDragStart,c)}),ec(o,"touchmove",r.onDrag,c),ec(o,"touchend",r.onDragEnd,c),ec(o,"touchcancel",r.onDragEnd,c)}return r}function n(){this.constructor=t}e5(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n);var r=t.prototype;return r.getMovement=function(e){return this.getCurrentStore().getMovement(e)+this.clientStores.slice(1).reduce(function(e,t){return e+t.movement},0)},r.isDragging=function(){return this.isDrag},r.isFlag=function(){return this.flag},r.isPinchFlag=function(){return this.pinchFlag},r.isDoubleFlag=function(){return this.doubleFlag},r.isPinching=function(){return this.isPinch},r.scrollBy=function(e,t,n,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(e,t),r&&this.onDrag(n,!0))},r.move=function(e,t){var n=e[0],r=e[1],i=this.getCurrentStore().prevClients;return this.moveClients(i.map(function(e){var t=e.clientX,i=e.clientY;return{clientX:t+n,clientY:i+r,originalClientX:t,originalClientY:i}}),t,!0)},r.triggerDragStart=function(e){this.onDragStart(e,!1)},r.setEventDatas=function(e){var t=this.datas;for(var n in e)t[n]=e[n];return this},r.getEventDatas=function(){return this.datas},r.unset=function(){var e=this,t=this.targets,n=this.options.container;this.off(),eu(window,"blur",this.onBlur),this.isMouse&&(t.forEach(function(t){eu(t,"mousedown",e.onDragStart)}),eu(n,"mousemove",this.onDrag),eu(n,"mouseup",this.onDragEnd),eu(n,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){eu(t,"touchstart",e.onDragStart)}),eu(n,"touchstart",this.onDragStart),eu(n,"touchmove",this.onDrag),eu(n,"touchend",this.onDragEnd),eu(n,"touchcancel",this.onDragEnd))},r.onPinchStart=function(e){var t=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>t)){var n=new tr(e7(e));this.pinchFlag=!0,this.clientStores.splice(0,0,n),!1===this.emit("pinchStart",e6({datas:this.datas,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition(),{inputEvent:e}))&&(this.pinchFlag=!1)}},r.onPinch=function(e,t){if(this.flag&&this.pinchFlag&&!(t.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",e6({datas:this.datas,movement:this.getMovement(t),angle:n.getAngle(t),rotation:n.getRotation(t),touches:n.getPositions(t),scale:n.getScale(t),distance:n.getDistance(t)},n.getPosition(t),{inputEvent:e}))}},r.onPinchEnd=function(e){if(this.pinchFlag){var t=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",e6({datas:this.datas,isPinch:t,touches:n.getPositions()},n.getPosition(),{inputEvent:e})),this.isPinch=!1,this.pinchFlag=!1}},r.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},r.getCurrentStore=function(){return this.clientStores[0]},r.moveClients=function(e,t,n){var r=this.getCurrentStore()[n?"addClients":"getPosition"](e);return this.isDrag=!0,e6({datas:this.datas},r,{movement:this.getMovement(e),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},t}(e1),to=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0},ts=function(e){var t,n="rCS"+to(e).toString(36),r=0;return{className:n,inject:function(i,a){void 0===a&&(a={});var o,s,l,c=function(e){if(e&&e.getRootNode){var t=e.getRootNode();if(11===t.nodeType)return t}}(i),u=0===r;return(c||u)&&(o=a,(s=document.createElement("style")).setAttribute("type","text/css"),s.setAttribute("data-styled-id",n),o.nonce&&s.setAttribute("nonce",o.nonce),s.innerHTML=o.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(e,t){var r=t.trim();return(r?ee(r):[""]).map(function(e){var t=e.trim();return 0===t.indexOf("@")?t:t.indexOf(":global")>-1?t.replace(/\:global/g,""):t.indexOf(":host")>-1?""+t.replace(/\:host/g,"."+n):t?"."+n+" "+t:"."+n}).join(", ")+" {"}),(c||document.head||document.body).appendChild(s),l=s),u&&(t=l),!c&&++r,{destroy:function(){c?(i.removeChild(l),l=null):(r>0&&--r,0===r&&t&&(t.parentNode.removeChild(t),t=null))}}}}},tl=function(e,t){return(tl=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function tc(e,t){function n(){this.constructor=e}tl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var tu=function(){return(tu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},td=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}tc(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.className;e.cspNonce;var n=e.portalContainer,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["className","cspNonce","portalContainer"]),i=this.injector.className,a=this.tag,s={};return(o.version||"").indexOf("simple")>-1&&n&&(s={portalContainer:n}),(0,o.createElement)(a,tu({ref:S(this,"element"),"data-styled-id":i,className:(void 0===t?"":t)+" "+i},s,r))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},t}(o.Component),tf=function(e,t){var n=ts(t);function r(){var t=null!==td&&td.apply(this,arguments)||this;return t.injector=n,t.tag=e,t}return tc(r,td),r},tp=function(e,t){return(tp=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function tg(e,t){function n(){this.constructor=e}tp(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var th=function(){return(th=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function tm(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function tv(e,t){var n;return th({events:{},props:((n={})[e]=Boolean,n),name:e},t)}function tb(e,t){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*e+'px" height="'+32*e+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+t+'deg);transform-origin: 16px 16px"></path></svg>'}var tE=(!function(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!(!t||!t.length)}()?function(e){var t=function(e){var t=e;if(void 0===t){if("undefined"==typeof navigator||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}(e),n=!!/mobi/g.exec(t),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!p(E,t).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=p(m,t),o=a.preset,s=a.version,l=p(y,t),c=l.preset,u=l.version,d=p(v,t);if(r.chromium=!!d.preset,r.chromiumVersion=d.version,!r.chromium){var f=p(b,t);r.webkit=!!f.preset,r.webkitVersion=f.version}return c&&(i.name=c.id,i.version=u,i.majorVersion=parseInt(u,10)),o&&(r.name=o.id,r.version=s,r.webview&&"ios"===i.name&&"safari"!==r.name&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}(void 0):function(e){var t=navigator.userAgentData,n=(t.uaList||t.brands).slice(),r=t.mobile||!1,i=n[0],a={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!g(E,n).brand},o={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&u(b,function(e){return h(n,e)});var s=g(v,n);if(a.chromium=!!s.brand,a.chromiumVersion=s.version,!a.chromium){var l=g(b,n);a.webkit=!!l.brand,a.webkitVersion=l.version}var c=g(m,n);return c.brand&&(a.name=c.brand,a.version=c.version),"Linux armv8l"===navigator.platform?o.name="android":a.webkit&&(o.name=r?"ios":"mac"),"ios"===o.name&&a.webview&&(a.version="-1"),o.version=f(o.version),a.version=f(a.version),o.majorVersion=parseInt(o.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:o,isMobile:r,isHints:!0}}()).browser.webkit,ty=tE&&(i="undefined"==typeof window?{userAgent:""}:window.navigator,!!(a=/applewebkit\/([^\s]+)/g.exec(i.userAgent.toLowerCase()))&&605>parseFloat(a[1])),tw="moveable-",tx="\n{\n	position: absolute;\n	width: 1px;\n	height: 1px;\n	left: 0;\n	top: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n	left: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n	width: 14px;\n	height: 14px;\n	border-radius: 50%;\n	border: 2px solid #fff;\n	box-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n	margin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n	width: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n	transform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n	border-color: #f55;\n	background: #fff;\n	width: 12px;\n	height: 12px;\n	margin-top: -6px;\n    margin-left: -6px;\n	pointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){var t,n,r,i;return'\n.direction[data-rotation="'+e+'"] {\n	'+(t=tb(1,e),n=tb(2,e),i="ns-resize",135==(r=45*Math.round(e/45)%180)?i="nwse-resize":45===r?i="nesw-resize":90===r&&(i="ew-resize"),"cursor:"+i+";cursor: url('"+t+"') 16 16, "+i+";cursor: -webkit-image-set(url('"+t+"') 1x, url('"+n+"') 2x) 16 16, "+i+";")+"\n}\n"}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(ty?':global svg *:before {\n	content:"";\n	transform-origin: inherit;\n}':"")+"\n",tS=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],t_=["n","w","s","e","nw","ne","sw","se"],tC={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},tT={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},tN=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager"];function tD(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w.apply(void 0,tm([tw],e))}function tM(e,t,n){return eh(t,eI(n,t),e,eI(n.map(function(e){return-e}),t))}function tk(e){var t=e.transformOrigin;return t?t.split(" "):["0","0"]}function tI(e,t,n){for(var r=document.body,i=!e||n?e:e.parentElement,a=e===t||i===t,o="relative";i&&i!==r;){t===i&&(a=!0);var s=t2(i),l=s.transform;if(o=s.position,"svg"===i.tagName.toLowerCase()||"static"!==o||l&&"none"!==l)break;i=i.parentElement,o="relative"}return{isStatic:"static"===o,isEnd:a||!i||i===r,offsetParent:i||r}}function tO(e,t,n){void 0===n&&(n=t2(e));var r=t2(document.body),i=r.position;if(!t&&(!i||"static"===i))return[0,0];var a=parseInt(r.marginLeft,10),o=parseInt(r.marginTop,10);return"absolute"===n.position&&(("auto"!==n.top||"auto"!==n.bottom)&&(o=0),("auto"!==n.left||"auto"!==n.right)&&(a=0)),[a,o]}function tR(e){e.forEach(function(e){var t=e.matrix;t&&(e.matrix=eg(t,3,4))})}function tP(e,t,n){for(var r,i,a,o,s,l,c=e,u=[],d=!n&&e===t,f=d,p=!1,g=3,h=tI(t,t,!0).offsetParent;c&&!f;){f=d;var m=t2(c),v=m.position,b="fixed"===v;o=(l=m.transform)&&"none"!==l?D(l)?l:B(l).value.split(/s*,\s*/g).map(function(e){return parseFloat(e)}):[1,0,0,1,0,0];var E=(s=6===o.length)?[o[0],o[1],0,o[2],o[3],0,o[4],o[5],1]:o,y=E.length;!(p||16!==y)&&(p=!0,g=4,tR(u),a&&(a=eg(a,3,4))),p&&9===y&&(E=eg(E,3,4));var w=function(e,t,n,r){var i,a,o,s=e.tagName.toLowerCase(),l=e.offsetLeft,c=e.offsetTop;if(r){var u=(t||document.documentElement).getBoundingClientRect();l-=u.left,c-=u.top}var d=N(l),f=!d;return f||"svg"===s?o=(a=tk(n).map(function(e){return parseFloat(e)})).slice():(o=(a=ty?tk(t2(e,":before")).map(function(t,n){var r,i=z(t),a=i.value,o=i.unit;return a*(r=0===n,"%"===o?tz(e.ownerSVGElement)[r?"width":"height"]/100:1)}):tk(n).map(function(e){return parseFloat(e)})).slice(),f=!0,l=(i=function(e,t){if(!e.getBBox)return[0,0];var n=e.getBBox(),r=tz(e.ownerSVGElement),i=n.x-r.x,a=n.y-r.y;return[i,a,t[0]-i,t[1]-a]}(e,a))[0],c=i[1],a[0]=i[2],a[1]=i[3]),{tagName:s,isSVG:d,hasOffset:f,offset:[l||0,c||0],origin:a,targetOrigin:o}}(c,t,m,b),x=w.tagName,S=w.hasOffset,_=w.isSVG,C=w.origin,T=w.targetOrigin,M=w.offset,k=M[0],I=M[1];"svg"===x&&a?(u.push({type:"target",target:c,matrix:function(e,t){var n=tz(e),r=n.width,i=n.height,a=n.clientWidth,o=n.clientHeight,s=a/r,l=o/i,c=e.preserveAspectRatio.baseVal,u=c.align,d=c.meetOrSlice,f=[0,0],p=[s,l],g=[0,0];if(1!==u){var h=(u-2)%3,m=Math.floor((u-2)/3);f[0]=r*h/2,f[1]=i*m/2;var v=2===d?Math.max(l,s):Math.min(s,l);p[0]=v,p[1]=v,g[0]=(a-r)/2*h,g[1]=(o-i)/2*m}var b=ek(p,t);return b[t*(t-1)]=g[0],b[t*(t-1)+1]=g[1],tM(b,t,f)}(c,g)}),u.push({type:"offset",target:c,matrix:eM(g)})):"g"===x&&e!==c&&(k=0,I=0);var O=tI(c,t),R=O.offsetParent,P=O.isEnd,A=O.isStatic;tE&&S&&!_&&A&&("relative"===v||"static"===v)&&(k-=R.offsetLeft,I-=R.offsetTop,d=d||P);var G=0,L=0;if(S&&h!==R&&(G=R.clientLeft,L=R.clientTop),S&&R===document.body){var j=tO(c,!1,m);k+=j[0],I+=j[1]}if(u.push({type:"target",target:c,matrix:tM(E,g,C)}),S?u.push({type:"offset",target:c,matrix:eI([k-c.scrollLeft+G,I-c.scrollTop+L],g)}):u.push({type:"offset",target:c,origin:C}),a||(a=E),r||(r=C),i||(i=T),f||b)break;c=R,d=P,n&&c!==document.body||(f=d)}return a||(a=eM(g)),r||(r=[0,0]),i||(i=[0,0]),{offsetContainer:h,matrixes:u,targetMatrix:a,transformOrigin:r,targetOrigin:i,is3d:p}}function tB(e,t){return void 0===t&&(t=e.length>9),(t?"matrix3d":"matrix")+"("+eE(e,!t).join(",")+")"}function tz(e){var t=e.clientWidth,n=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:n};var r=e.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||t,height:i.height||n,clientWidth:t,clientHeight:n}}function tA(e,t,n){return ey(e,ep(t,n),n)}function tG(e,t,n,r){return[[0,0],[t,0],[0,n],[t,n]].map(function(t){return tA(e,t,r)})}function tL(e){var t=e.map(function(e){return e[0]}),n=e.map(function(e){return e[1]}),r=Math.min.apply(Math,t),i=Math.min.apply(Math,n),a=Math.max.apply(Math,t),o=Math.max.apply(Math,n);return{left:r,top:i,right:a,bottom:o,width:a-r,height:o-i}}function tj(e,t,n,r){var i,a,o,s=16===e.length?4:3,l=tG(e,n,r,s),c=l[0],u=c[0],d=c[1],f=l[1],p=f[0],g=f[1],h=l[2],m=h[0],v=h[1],b=l[3],E=b[0],y=b[1],w=tA(e,t,s),x=w[0],S=w[1],_=Math.min(u,p,m,E),C=Math.min(d,g,v,y),T=Math.max(u,p,m,E);return u=u-_||0,{left:_,top:C,right:T,bottom:Math.max(d,g,v,y),origin:[x=x-_||0,S=S-C||0],pos1:[u,d=d-C||0],pos2:[p=p-_||0,g=g-C||0],pos3:[m=m-_||0,v=v-C||0],pos4:[E=E-_||0,y=y-C||0],direction:(a=H(i=[0,1].map(function(e){return W(l.map(function(t){return t[e]}))}),l[0]))<(o=H(i,l[1]))&&o-a<Math.PI||a>o&&o-a<-Math.PI?1:-1}}function tF(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function tW(e,t){return tF([t[0]-e[0],t[1]-e[1]])}function tH(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=H(e,t));var i=tW(e,t);return{transform:"translateY(-50%) translate("+e[0]+"px, "+e[1]+"px) rotate("+r+"rad) scaleY("+n+")",width:i+"px"}}function tY(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length;return{transform:"translateZ(0px) translate("+n.reduce(function(e,t){return e+t[0]},0)/i+"px, "+n.reduce(function(e,t){return e+t[1]},0)/i+"px) rotate("+e+"rad) scale("+t+")"}}function tX(e,t,n,r){void 0===t&&(t=t2(e)),void 0===r&&(r=n||"border-box"===t.boxSizing);var i=e.offsetWidth,a=e.offsetHeight,o=!N(i);if((n||r)&&o)return[i,a];if(!o&&"svg"!==e.tagName.toLowerCase()){var s=e.getBBox();return[s.width,s.height]}return i=e.clientWidth,a=e.clientHeight,n||r?[i+(parseFloat(t.borderLeftWidth)||0)+(parseFloat(t.borderRightWidth)||0),a+(parseFloat(t.borderTopWidth)||0)+(parseFloat(t.borderBottomWidth)||0)]:[i-(parseFloat(t.paddingLeft)||0)-(parseFloat(t.paddingRight)||0),a-(parseFloat(t.paddingTop)||0)-(parseFloat(t.paddingBottom)||0)]}function tU(e,t){return H(t>0?e[0]:e[1],t>0?e[1]:e[0])}function tV(e,t,n,r,i){var a=1,o=[0,0],s={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u=function(e,t,n,r){void 0===n&&(n=t);var i,a=0,o=0,s=0,l={};if(e){var c=t2(e);a=e.offsetWidth,o=e.offsetHeight,N(a)&&(a=(i=tX(e,c,!0))[0],o=i[1])}if(e){var u,d,f,p,g,h,m,v,b,E,y,w,x,S,_,C,T,D,M,k,I,O,R,P=(void 0===(u=n)&&(u=t),f=(d=tP(e,t)).matrixes,p=d.is3d,g=d.targetMatrix,h=d.transformOrigin,m=d.targetOrigin,b=(v=tP(d.offsetContainer,u,!0)).matrixes,E=v.is3d,w=(y=r||E||p)?4:3,x="svg"!==e.tagName.toLowerCase()&&"ownerSVGElement"in e,S=g,_=eM(w),C=eM(w),T=eM(w),D=eM(w),M=f.length,I=tI(k=u||document.body,k,!0).offsetParent,b.reverse(),f.reverse(),!p&&y&&(S=eg(S,3,4),tR(f)),!E&&y&&tR(b),b.forEach(function(e){C=em(C,e.matrix,w)}),f.forEach(function(e,t){if(M-2===t&&(T=_.slice()),M-1===t&&(D=_.slice()),!e.matrix){var n=function(e,t,n,r,i){var a,o=e.target,s=e.origin,l=t.matrix,c=tX(o,void 0,!0),u=c[0],d=c[1],f=n.getBoundingClientRect(),p=[0,0];n===document.body&&(p=tO(o,!0));for(var g=o.getBoundingClientRect(),h=g.left-f.left+n.scrollLeft-(n.clientLeft||0)+p[0],m=g.top-f.top+n.scrollTop-(n.clientTop||0)+p[1],v=g.width,b=g.height,E=eh(r,i,l),y=tL(tG(E,u,d,r)),w=y.left,x=y.top,S=y.width,_=y.height,C=tA(E,s,r),T=eb(C,[w,x]),N=[h+T[0]*v/S,m+T[1]*b/_],D=[0,0],M=0;++M<10;){var k,I=ef(i,r);a=eb(tA(I,N,r),tA(I,C,r)),D[0]=a[0],D[1]=a[1];var O=(k=eh(r,i,eI(D,r),l),tL(tG(k,u,d,r))),R=O.left,P=O.top,B=R-h,z=P-m;if(2>Math.abs(B)&&2>Math.abs(z))break;N[0]-=B,N[1]-=z}return D.map(function(e){return Math.round(e)})}(e,f[t+1],I,w,em(C,_,w));e.matrix=eI(n,w)}_=em(_,e.matrix,w)}),O=!x&&p,S||(S=eM(O?4:3)),R=tB(x&&16===S.length?eg(S,4,3):S,O),{rootMatrix:C=ed(C,w,w),beforeMatrix:T,offsetMatrix:D,allMatrix:_,targetMatrix:S,targetTransform:R,transformOrigin:h,targetOrigin:m,is3d:y}),B=tj(P.allMatrix,P.transformOrigin,a,o);l=th(th({},P),B);var z=tj(P.allMatrix,[50,50],100,100);s=tU([z.pos1,z.pos2],z.direction)}var A=r?4:3;return th({width:a,height:o,rotation:s,rootMatrix:eM(A),beforeMatrix:eM(A),offsetMatrix:eM(A),allMatrix:eM(A),targetMatrix:eM(A),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},l)}(t,n,i,!1);if(t){var d=u.is3d?4:3,f=tj(u.offsetMatrix,ev(u.transformOrigin,function(e,t){void 0===t&&(t=Math.sqrt(e.length));for(var n=[],r=e[t*t-1],i=0;i<t-1;++i)n[i]=e[t*(t-1)+i]/r;return n[t-1]=0,n}(u.targetMatrix,d)),u.width,u.height);a=f.direction,o=ev(f.origin,[f.left-u.left,f.top-u.top]),s=tq(t),l=tq(tI(r,r,!0).offsetParent||document.body,!0),e&&(c=tq(e))}return th({targetClientRect:s,containerClientRect:l,moveableClientRect:c,beforeDirection:a,beforeOrigin:o,originalBeforeOrigin:o,target:t},u)}function tq(e,t){var n=0,r=0,i=0,a=0;if(e===document.body||e===document.documentElement)i=window.innerWidth,a=window.innerHeight,n=-(document.documentElement.scrollLeft||document.body.scrollLeft),r=-(document.documentElement.scrollTop||document.body.scrollTop);else{var o=e.getBoundingClientRect();n=o.left,r=o.top,i=o.width,a=o.height}var s={left:n,right:n+i,top:r,bottom:r+a,width:i,height:a};return t&&(s.clientLeft=e.clientLeft,s.clientTop=e.clientTop,s.clientWidth=e.clientWidth,s.clientHeight=e.clientHeight,s.scrollWidth=e.scrollWidth,s.scrollHeight=e.scrollHeight,s.overflow="visible"!==t2(e).overflow),s}function tK(e){if(e){var t=e.getAttribute("data-direction");if(t){var n=[0,0];return t.indexOf("w")>-1&&(n[0]=-1),t.indexOf("e")>-1&&(n[0]=1),t.indexOf("n")>-1&&(n[1]=-1),t.indexOf("s")>-1&&(n[1]=1),n}}}function tZ(e,t){return[ev(t,e[0]),ev(t,e[1]),ev(t,e[2]),ev(t,e[3])]}function t$(e){var t=e.left,n=e.top;return tZ([e.pos1,e.pos2,e.pos3,e.pos4],[t,n])}function tQ(e,t){e[t]&&(e[t].unset(),e[t]=null)}function tJ(e,t,n){var r=t.datas;r.datas||(r.datas={});var i=th(th({},n),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:r.datas});return r.isStartEvent?r.lastEvent=i:r.isStartEvent=!0,i}function t0(e,t,n){var r=t.datas,i="isDrag"in n?n.isDrag:t.isDrag;return r.datas||(r.datas={}),th(th({isDrag:i},n),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:r.lastEvent,isDouble:t.isDouble,datas:r.datas})}function t1(e,t,n,r){return e.triggerEvent(t,n,r)}function t2(e,t){return window.getComputedStyle(e,t)}function t3(e,t,n){var r={},i={};return e.filter(function(e){var a=e.name;if(r[a]||!t.some(function(t){return e[t]}))return!1;if(!n&&e.ableGroup){if(i[e.ableGroup])return!1;i[e.ableGroup]=!0}return r[a]=!0,!0})}function t4(e,t){return e===t||null==e&&null==t}function t5(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(e,t){return Math.abs(t)-Math.abs(e)}),e[0]}function t6(e,t,n){return ey(ef(e,n),ep(t,n),n)}function t8(e,t){var n,r=e.is3d?4:3;return n=t6(e.rootMatrix,[t.distX,t.distY],r),t.distX=n[0],t.distY=n[1],t}function t7(e,t,n,r,i){return eb(tA(e,ev(n,t),i),r)}function t9(e,t,n){return n?e/t*100+"%":e+"px"}function ne(e){return 1e-7>=Math.abs(e)?0:e}function nt(e,t){return t.isRequest?("resizable"===t.requestAble||"scalable"===t.requestAble)&&t.parentDirection:V(t.inputEvent.target,tD("direction"))}function nn(e,t){return e?k(e)?t?document.querySelector(e):e:I(e)?e():"current"in e?e.current:e:null}function nr(e,t){return e?(e&&D(e)&&(M(e)||"length"in e)?[].slice.call(e):[e]).reduce(function(e,n){return k(n)&&t?tm(e,[].slice.call(document.querySelectorAll(n))):(e.push(nn(n,t)),e)},[]):[]}function ni(e,t){var n=e.rootMatrix,r=e.is3d,i=ef(n,r?4:3);return r||(i=eg(i,3,4)),i[12]=0,i[13]=0,i[14]=0,eR(i,t)}var na=tv("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(e,t){var n=t.datas,r=t.targets,i=t.angle,a=t.originalDatas,o=e.props,s=o.pinchable,l=o.ables;if(!s)return!1;var c="drag"+(r?"Group":"")+"ControlStart",u=(!0===s?e.controlAbles:l.filter(function(e){return s.indexOf(e.name)>-1})).filter(function(e){return e.canPinch&&e[c]}),d=tJ(e,t,{});r&&(d.targets=r),n.isPinch=!1!==t1(e,"onPinch"+(r?"Group":"")+"Start",d),n.ables=u;var f=n.isPinch;return!!f&&(u.forEach(function(n){if(a[n.name]=a[n.name]||{},n[c]){var r=th(th({},t),{datas:a[n.name],parentRotate:i,isPinch:!0});n[c](e,r)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},f)},pinch:function(e,t){var n=t.datas,r=t.scale,i=t.distance,a=t.originalDatas,o=t.inputEvent,s=t.targets,l=t.angle;if(n.isPinch){var c=i*(1-1/r),u=tJ(e,t,{});s&&(u.targets=s),t1(e,"onPinch"+(s?"Group":""),u);var d=n.ables,f="drag"+(s?"Group":"")+"Control";return d.forEach(function(n){n[f]&&n[f](e,th(th({},t),{datas:a[n.name],inputEvent:o,parentDistance:c,parentRotate:l,isPinch:!0}))}),u}},pinchEnd:function(e,t){var n=t.datas,r=t.isPinch,i=t.inputEvent,a=t.targets,o=t.originalDatas;if(n.isPinch){var s=t0(e,t,{isDrag:r});a&&(s.targets=a),t1(e,"onPinch"+(a?"Group":"")+"End",s);var l=n.ables,c="drag"+(a?"Group":"")+"ControlEnd";return l.forEach(function(n){n[c]&&n[c](e,th(th({},t),{isDrag:r,datas:o[n.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(e,t){return this.pinchStart(e,th(th({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,th(th({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,th(th({},t),{targets:e.props.targets}))}});function no(e,t,n,r,i){var a=t.gesto.move(n,e.inputEvent),o=a.originalDatas||a.datas,s=o.draggable||(o.draggable={});return th(th({},i?t8(t,a):a),{isDrag:!0,isPinch:!!r,parentEvent:!0,datas:s,originalDatas:e.originalDatas})}var ns=function(){function e(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var t=e.prototype;return t.dragStart=function(e,t){this.isDrag=!1,this.isFlag=!1;var n=t.originalDatas;return this.datas=n,n.draggable||(n.draggable={}),th(th({},this.move(e,t.inputEvent)),{type:"dragstart"})},t.drag=function(e,t){return this.move([e[0]-this.prevX,e[1]-this.prevY],t)},t.move=function(e,t){var n,r;return this.isFlag?(n=this.prevX+e[0],r=this.prevY+e[1],this.isDrag=!0):(this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],n=e[0],r=e[1],this.isFlag=!0),this.prevX=n,this.prevY=r,{type:"drag",clientX:n,clientY:r,inputEvent:t,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e}();function nl(e,t,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return e.moveables.map(function(e,r){return a[r]=a[r]||{},a[r][t]=a[r][t]||{},th(th({},n),{datas:a[r][t],originalDatas:a[r]})})}function nc(e,t,n,r,i,a){var o=!!n.match(/Start$/g),s=!!n.match(/End$/g),l=i.isPinch,c=i.datas,u=nl(e,t.name,i),d=e.moveables,f=u.map(function(e,i){var u=d[i],f=e;o?f=new ns().dragStart(r,e):(u.state.gesto||(u.state.gesto=c.childGestos[i]),f=no(e,u.state,r,l,a));var p=t[n](u,th(th({},f),{parentFlag:!0}));return s&&(u.state.gesto=null),p});return o&&(c.childGestos=d.map(function(e){return e.state.gesto})),f}function nu(e,t,n,r,i,a){void 0===i&&(i=function(e,t){return t});var o=!!n.match(/End$/g),s=nl(e,t.name,r),l=e.moveables;return s.map(function(e,r){var s,c=l[r];s=i(c,e);var u=t[n](c,th(th({},s),{parentFlag:!0}));return u&&a&&a(c,e,u,r),o&&(c.state.gesto=null),u})}function nd(e,t){var n=t.clientX,r=t.clientY,i=t.datas,a=e.state,o=a.moveableClientRect,s=a.rootMatrix,l=a.is3d,c=a.pos1,u=eb(t6(s,[n-o.left,r-o.top],l?4:3),c),d=nv({datas:i,distX:u[0],distY:u[1]});return[d[0],d[1]]}function nf(e,t){var n=t.datas,r=e.state,i=r.allMatrix,a=r.beforeMatrix,o=r.is3d,s=r.left,l=r.top,c=r.origin,u=r.offsetMatrix,d=r.targetMatrix,f=r.transformOrigin,p=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=d,n.beforeMatrix=a,n.offsetMatrix=u,n.transformOrigin=f,n.inverseMatrix=ef(i,p),n.inverseBeforeMatrix=ef(a,p),n.absoluteOrigin=ep(ev([s,l],c),p),n.startDragBeforeDist=ey(n.inverseBeforeMatrix,n.absoluteOrigin,p),n.startDragDist=ey(n.inverseMatrix,n.absoluteOrigin,p)}function np(e,t){var n,r,i,a,o,s,l,c,u,d,f,p,g,h,m,v=e.datas,b=e.originalDatas.beforeRenderable,E=v.transformIndex,y=b.nextTransforms,w=b.nextTransformAppendedIndexes,x=-1===E?y.length:E+w.filter(function(e){return e<E}).length,S=(n=y.slice(0,x<0?void 0:x),r=y.slice(0,x<0?void 0:x+1),i=y[x]||"",a=x<0?[]:y.slice(x),o=x<0?[]:y.slice(x+1),s=eB(n),l=eB(r),c=eB([i]),u=eB(a),d=eB(o),f=eP(s),p=eP(l),g=eP(u),h=eP(d),m=em(f,g,4),{transforms:y,beforeFunctionMatrix:f,beforeFunctionMatrix2:p,targetFunctionMatrix:eP(c),afterFunctionMatrix:g,afterFunctionMatrix2:h,allFunctionMatrix:m,beforeFunctions:s,beforeFunctions2:l,targetFunction:c[0],afterFunctions:u,afterFunctions2:d,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:i,afterFunctionTexts:a,afterFunctionTexts2:o}),_=S.targetFunction;v.beforeFunctionTexts=S.beforeFunctionTexts,v.afterFunctionTexts=S.afterFunctionTexts,v.beforeTransform=S.beforeFunctionMatrix,v.beforeTransform2=S.beforeFunctionMatrix2,v.targetTansform=S.targetFunctionMatrix,v.afterTransform=S.afterFunctionMatrix,v.afterTransform2=S.afterFunctionMatrix2,v.targetAllTransform=S.allFunctionMatrix,_.functionName===("rotate"===t?"rotateZ":t)?(v.afterFunctionTexts.splice(0,1),v.isAppendTransform=!1):(v.isAppendTransform=!0,b.nextTransformAppendedIndexes=tm(w,[x]))}function ng(e,t,n){return e.beforeFunctionTexts.join(" ")+" "+(e.isAppendTransform?n:t)+" "+e.afterFunctionTexts.join(" ")}function nh(e,t,n){var r=e.beforeTransform,i=e.afterTransform,a=e.beforeTransform2,o=e.afterTransform2,s=e.targetAllTransform,l=n?em(s,t,4):em(t,s,4),c=em(ef(n?a:r,4),l,4);return em(c,ef(n?o:i,4),4)}function nm(e){var t=e.datas,n=e.distX,r=e.distY,i=t.inverseBeforeMatrix,a=t.is3d,o=t.startDragBeforeDist;return eb(ey(i,ev(t.absoluteOrigin,[n,r]),a?4:3),o)}function nv(e,t){var n=e.datas,r=e.distX,i=e.distY,a=n.inverseBeforeMatrix,o=n.inverseMatrix,s=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist;return eb(ey(t?a:o,ev(n.absoluteOrigin,[r,i]),s?4:3),t?l:c)}function nb(e){var t=[];return e[1]>=0&&(e[0]>=0&&t.push(3),e[0]<=0&&t.push(2)),e[1]<=0&&(e[0]>=0&&t.push(1),e[0]<=0&&t.push(0)),t}function nE(e,t){return nb(t).map(function(t){return e[t]})}function ny(e,t){var n=nE(e,t);return[W(n.map(function(e){return e[0]})),W(n.map(function(e){return e[1]}))]}function nw(e,t,n,r){return em(e,tM(t,r,n),r)}function nx(e){var t=e.originalDatas.beforeRenderable;return{setTransform:function(n,r){void 0===r&&(r=-1),t.startTransforms=M(n)?n:P(n),n_(e,r)},setTransformIndex:function(t){n_(e,t)}}}function nS(e,t){n_(e,A(e.originalDatas.beforeRenderable.startTransforms,function(e){return 0===e.indexOf(t+"(")}))}function n_(e,t){var n=e.originalDatas.beforeRenderable,r=e.datas;if(r.transformIndex=t,-1!==t){var i=n.startTransforms[t];i&&(r.startValue=eB([i])[0].functionValue)}}function nC(e,t){e.originalDatas.beforeRenderable.nextTransforms=P(t)}function nT(e,t,n,r,i){return nC(i,t),{transform:t,drag:ru.drag(e,no(i,e.state,n,r,!1))}}function nN(e,t,n,r,i){var a,o,s,l,c,u,d,f=e.state,p=f.left,g=f.top,h=e.props.groupable,m=eb(r,nM(e,n,(a=e.state,o=a.transformOrigin,s=a.offsetMatrix,l=a.is3d,c=i.beforeTransform,u=i.afterTransform,d=l?4:3,nw(s,eg(em(em(c,eP(eB([t])),4),u,4),4,d),o,d))));return eb(m,[h?p:0,h?g:0])}function nD(e){var t=e.state,n=t.width,r=t.height,i=t.transformOrigin;return[i[0]/(n/2)-1,i[1]/(r/2)-1]}function nM(e,t,n){void 0===n&&(n=e.state.allMatrix);var r=e.state,i=r.width,a=r.height,o=r.is3d?4:3;return tA(n,[i/2*(1+t[0]),a/2*(1+t[1])],o)}function nk(e,t){return ny(t$(e.state),t)}var nI=["left","right","center"],nO=["top","bottom","middle"],nR={start:"left",end:"right",center:"center"},nP={start:"top",end:"bottom",center:"middle"};function nB(e,t){var n=e.props,r=n.snappable,i=n.bounds,a=n.innerBounds,o=n.verticalGuidelines,s=n.horizontalGuidelines,l=n.snapGridWidth,c=n.snapGridHeight,u=e.state,d=u.guidelines,f=u.enableSnap;return!(!r||!f||t&&!0!==r&&0>r.indexOf(t))&&!!(l||c||i||a||d&&d.length||o&&o.length||s&&s.length)}function nz(e){return!1===e?{}:!0!==e&&e?e:{left:!0,right:!0,top:!0,bottom:!0}}function nA(e,t){var n=function(e,t){var n=nz(e),r={};for(var i in n)i in t&&n[i]&&(r[i]=t[i]);return r}(e,t),r=nO.filter(function(e){return e in n}),i=nI.filter(function(e){return e in n});return{horizontal:r.map(function(e){return n[e]}),vertical:i.map(function(e){return n[e]})}}function nG(e,t,n,r,i,a,o){void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o={left:0,top:0,right:0,bottom:0});var s=[],l=o.left,c=o.top,u=o.bottom,d=n+o.right-l,f=r+u-c;return e&&e.forEach(function(e){s.push({type:"horizontal",pos:[l,X(e-a+c,.1)],size:d})}),t&&t.forEach(function(e){s.push({type:"vertical",pos:[X(e-i+l,.1),c],size:f})}),s}function nL(e){var t=e.state,n=t.snapOffset,r=t.containerClientRect,i=r.overflow,a=r.scrollHeight,o=r.scrollWidth,s=r.clientHeight,l=r.clientWidth,c=r.clientLeft,u=r.clientTop,d=e.props,f=d.snapGap,p=d.verticalGuidelines,g=d.horizontalGuidelines,h=d.snapThreshold,m=d.snapGridWidth,v=d.snapGridHeight,b=tm(function(e){var t=e.state,n=e.props.elementGuidelines,r=void 0===n?[]:n;if(!r.length)return t.elementRects=[],[];var i=(t.elementRects||[]).filter(function(e){return!e.refresh}),a=r.map(function(e){return D(e)&&"element"in e?e:{element:nn(e,!0)}}).filter(function(e){return e.element}),o=eF(i.map(function(e){return e.element}),a.map(function(e){return e.element}),eY),s=o.maintained,l=o.added,c=[];s.forEach(function(e){var t=e[0];c[e[1]]=i[t]}),(function(e,t){if(!t.length)return[];var n,r=e.state,i=r.containerClientRect,a=r.targetClientRect,o=a.top,s=a.left,l=r.rootMatrix,c=r.is3d?4:3,u=(n=tA(l,[i.clientLeft,i.clientTop],c),[i.left+n[0],i.top+n[1]]),d=u[0],f=u[1],p=eq(t$(r)),g=eb([p.minX,p.minY],t6(l,[s-d,o-f],c)).map(function(e){return Math.round(e%1==-.5?e-1:e)}),h=g[0],m=g[1];return t.map(function(e){var t=e.element.getBoundingClientRect(),n=t.left-d,r=t.top-f,i=r+t.height,a=n+t.width,o=t6(l,[n,r],c),s=o[0],u=o[1],p=t6(l,[a,i],c),g=p[0],v=p[1];return th(th({},e),{rect:{left:s+h,right:g+h,top:u+m,bottom:v+m,center:(s+g)/2+h,middle:(u+v)/2+m}})})})(e,l.map(function(e){return a[e]})).map(function(e,t){c[l[t]]=e}),t.elementRects=c;var u=nz(e.props.elementSnapDirections),d=[];return c.forEach(function(e){var t=e.element,n=e.top,r=void 0===n?u.top:n,i=e.left,a=void 0===i?u.left:i,o=e.right,s=void 0===o?u.right:o,l=e.bottom,c=void 0===l?u.bottom:l,f=e.center,p=void 0===f?u.center:f,g=e.middle,h=void 0===g?u.middle:g,m=e.className,v=e.rect,b=nA({top:r,right:s,left:a,bottom:c,center:p,middle:h},v),E=b.horizontal,y=b.vertical,w=v.top,x=v.left,S=v.right-x,_=v.bottom-w,C=[S,_];y.forEach(function(n){d.push({type:"vertical",element:t,pos:[X(n,.1),w],size:_,sizes:C,className:m,elementRect:e})}),E.forEach(function(n){d.push({type:"horizontal",element:t,pos:[x,X(n,.1)],size:S,sizes:C,className:m,elementRect:e})})}),d}(e));if(void 0===f||f){var E,y,w,x,S=tL(t$(e.state)),_=S.top,C=S.left,T=S.bottom,N=S.right;b.push.apply(b,(E={top:_,left:C,bottom:T,right:N,center:(C+N)/2,middle:(_+T)/2},y=void 0===h?5:h,w=e.state.elementRects,x=[],[["vertical",nR,nP],["horizontal",nP,nR]].forEach(function(e){var t=e[0],n=e[1],r=e[2],i=E[n.start],a=E[n.end],o=E[n.center],s=E[r.start],l=E[r.end];function c(e){var t=e.rect;return t[n.end]<i+y?i-t[n.end]:a-y<t[n.start]?t[n.start]-a:-1}var u=w.filter(function(e){var t=e.rect;return!(t[r.start]>l||t[r.end]<s)&&c(e)>0}).sort(function(e,t){return c(e)-c(t)}),d=[];u.forEach(function(e){u.forEach(function(t){if(e!==t){var n=e.rect,i=t.rect,a=n[r.start],o=n[r.end],s=i[r.start];a>i[r.end]||s>o||d.push([e,t])}})}),d.forEach(function(e){var r=e[0],s=e[1],l=r.rect,c=s.rect,u=l[n.start],d=l[n.end],f=c[n.start],p=c[n.end],g=0,h=0,m=!1,v=!1,b=!1;if(d<=i&&a<=f){if(v=!0,Math.abs((h=d+(g=(f-d-(a-i))/2)+(a-i)/2)-o)>y)return}else if(d<f&&p<i+y){if(m=!0,Math.abs((h=p+(g=f-d))-i)>y)return}else if(!(d<f&&a-y<u)||(b=!0,Math.abs((h=u-(g=f-d))-a)>y))return;g&&x.push({type:t,pos:"vertical"===t?[h,0]:[0,h],element:s.element,size:0,className:s.className,isStart:m,isCenter:v,isEnd:b,gap:g,hide:!0,gapRects:[r,s]})})}),x))}return b.push.apply(b,function(e,t,n,r,i,a){void 0===i&&(i=0),void 0===a&&(a=0);var o=[];if(t)for(var s=0;s<=r;s+=t)o.push({type:"horizontal",pos:[0,X(s-a,.1)],size:n,hide:!0});if(e)for(s=0;s<=n;s+=e)o.push({type:"vertical",pos:[X(s-i,.1),0],size:r,hide:!0});return o}(void 0===m?0:m,void 0===v?0:v,i?o:l,i?a:s,c,u)),b.push.apply(b,nG(g||!1,p||!1,i?o:l,i?a:s,c,u,n)),b}function nj(e,t,n,r){var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.length-1,r=0;r<n;++r){var i=e[r];if(!N(i))return i}return e[n]}(r,e.props.snapThreshold,5);return nF(e.state.guidelines,t,n,i)}function nF(e,t,n,r){return{vertical:nY(e,"vertical",t,r),horizontal:nY(e,"horizontal",n,r)}}function nW(e,t,n){var r=nA(e.props.snapDirections,t);return nj(e,r.vertical,r.horizontal,n)}function nH(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=e.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:t,offset:i,dist:a,pos:n.pos,guideline:o}}function nY(e,t,n,r){if(!e||!e.length)return{isSnap:!1,index:-1,posInfos:[]};var i=+("vertical"!==t),a=n.map(function(n,a){var o=e.map(function(e){var t=n-e.pos[i];return{offset:t,dist:Math.abs(t),guideline:e}}).filter(function(e){var n=e.guideline,i=e.dist;return!(n.type!==t||i>r)}).sort(function(e,t){return e.dist-t.dist});return{pos:n,index:a,guidelineInfos:o}}).filter(function(e){return e.guidelineInfos.length>0}).sort(function(e,t){return e.guidelineInfos[0].dist-t.guidelineInfos[0].dist}),o=a.length>0;return{isSnap:o,index:o?a[0].index:-1,posInfos:a}}function nX(e,t){var n=Math.abs(e.offset),r=Math.abs(t.offset);return e.isBound&&t.isBound?r-n:e.isBound?-1:t.isBound?1:e.isSnap&&t.isSnap?r-n:e.isSnap?-1:t.isSnap||n<1e-7?1:r<1e-7?-1:n-r}function nU(e,t){return e.slice().sort(function(e,n){var r=e.sign[t],i=n.sign[t],a=e.offset[t],o=n.offset[t];return r?i?nX({isBound:e.isBound,isSnap:e.isSnap,offset:a},{isBound:n.isBound,isSnap:n.isSnap,offset:o}):-1:1})[0]}function nV(e,t){var n=W([t[0][0],t[1][0]]),r=W([t[0][1],t[1][1]]);return{vertical:n<=e[0],horizontal:r<=e[1]}}function nq(e,t){var n,r,i=t[0],a=t[1],o=a[0]-i[0],s=a[1]-i[1];return 1e-7>Math.abs(o)&&(o=0),1e-7>Math.abs(s)&&(s=0),o?(n=s?s/o*(e[0]-i[0])+i[1]:i[1],r=e[1]):(n=i[0],r=e[0]),n-r}function nK(e,t,n){void 0===n&&(n=1e-7);var r=0>=nq(e[0],t);return e.slice(1).every(function(e){var i=nq(e,t);return i<=0===r||Math.abs(i)<=n})}function nZ(e,t,n,r,i){return void 0===i&&(i=0),r&&t-i<=e||!r&&e<=n+i?{isBound:!0,offset:r?t-e:n-e}:{isBound:!1,offset:0}}function n$(e,t,n,r,i){var a,o=e[0],s=e[1],l=t[0],c=t[1],u=ne(s[1]-o[1]),d=ne(s[0]-o[0]),f=ne(c[1]-l[1]);if(!ne(c[0]-l[0])){if(i&&!u)return{isBound:!1,offset:0};if(d)return nZ(u/d*(l[0]-o[0])+o[1],l[1],c[1],n,r);var p=l[0]-o[0];return{isBound:a=Math.abs(p)<=(r||0),offset:a?p:0}}return f?{isBound:!1,offset:0}:i&&!d?{isBound:!1,offset:0}:u?nZ((l[1]-o[1])/(u/d)+o[0],l[0],c[0],n,r):{isBound:a=Math.abs(p=l[1]-o[1])<=(r||0),offset:a?p:0}}function nQ(e,t,n,r){return t.map(function(t){var i=t[0],a=function(e,t,n){var r=e.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=r.left,a=r.top,o=r.width,s=r.height,l=[[i,a],[i,a+s]],c=[[i,a],[i+o,a]],u=[[i+o,a],[i+o,a+s]],d=[[i,a+s],[i+o,a+s]],f=nV(n,t),p=f.horizontal,g=f.vertical;if(nK([n,[i,a],[i+o,a],[i,a+s],[i+o,a+s]],t))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var h=n$(t,c,g),m=n$(t,d,g),v=n$(t,l,p),b=n$(t,u,p),E=h.isBound&&m.isBound,y=h.isBound||m.isBound,w=v.isBound&&b.isBound,x=v.isBound||b.isBound,S=t5(h.offset,m.offset),_=t5(v.offset,b.offset),C=[0,0],T=!1,N=!1;return Math.abs(_)<Math.abs(S)?(C=[S,0],T=y,N=E):(C=[0,_],T=x,N=w),{isAllBound:N,isVerticalBound:y,isHorizontalBound:x,isBound:T,offset:C}}(e,[t[1],t[2]],n),o=a.isBound,s=a.offset,l=a.isVerticalBound,c=a.isHorizontalBound,u=nv({datas:r,distX:s[0],distY:s[1]}).map(function(e,t){return e*(i[t]?2/i[t]:0)});return{sign:i,isBound:o,isVerticalBound:l,isHorizontalBound:c,isSnap:!1,offset:u}})}function nJ(e,t,n){var r,i,a;return(r=[],i=t[0],a=t[1],i&&a?r.push([[0,2*a],t,[-i,a]],[[2*i,0],t,[i,-a]]):i?(r.push([[2*i,0],[i,1],[i,-1]]),n&&r.push([[0,-1],[i,-1],[-i,-1]],[[0,1],[i,1],[-i,1]])):a?(r.push([[0,2*a],[1,a],[-1,a]]),n&&r.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r).map(function(t){var n=t[0],r=t[1],i=t[2];return[n,ny(e,r),ny(e,i)]})}function n0(e,t,n,r){var i=r?e.map(function(e){return eC(e,r)}):e,a=tm([n],t);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(e){return!nK(a,e)})}function n1(e,t,n){var r=e||{},i=r.position,a=r.left,o=r.top,s=r.right,l=r.bottom,c={position:void 0===i?"client":i,left:void 0===a?-1/0:a,top:void 0===o?-1/0:o,right:void 0===s?1/0:s,bottom:void 0===l?1/0:l};return{vertical:n3(c,t,!0),horizontal:n3(c,n,!1)}}function n2(e,t){var n=e.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,o=r.clientLeft,s=r.clientTop,l=n.snapOffset,c=l.left,u=l.top,d=l.right,f=l.bottom,p=t||e.props.bounds||{},g="css"===(p.position||"client"),h=p.left,m=p.top,v=p.right,b=void 0===v?g?-1/0:1/0:v,E=p.bottom,y=void 0===E?g?-1/0:1/0:E;return g&&(b=a+d-c-b,y=i+f-u-y),{left:(void 0===h?-1/0:h)+c-o,right:b+c-o,top:(void 0===m?-1/0:m)+u-s,bottom:y+u-s}}function n3(e,t,n){var r=e[n?"left":"top"],i=e[n?"right":"bottom"],a=Math.min.apply(Math,t),o=Math.max.apply(Math,t),s=[];return r+1>a&&s.push({isBound:!0,offset:a-r,pos:r}),i-1<o&&s.push({isBound:!0,offset:o-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(e,t){return Math.abs(t.offset)-Math.abs(e.offset)})}function n4(e,t,n){return(n?e.map(function(e){return eC(e,n)}):e).some(function(e){return e[0]<t.left&&Math.abs(e[0]-t.left)>.1||e[0]>t.right&&Math.abs(e[0]-t.right)>.1||e[1]<t.top&&Math.abs(e[1]-t.top)>.1||e[1]>t.bottom&&Math.abs(e[1]-t.bottom)>.1})}function n5(e,t){var n,r,i,a,o,s,l,c,u,d;return n=th(th({},e),{classNames:tm([tD("line","guideline",e.direction)],e.classNames).filter(function(e){return e}),size:e.size||e.sizeValue+"px",pos:e.pos||e.posValue.map(function(e){return X(e,.1)+"px"})}),i=n.direction,a=n.classNames,o=n.size,s=n.pos,l=n.zoom,c=n.key,d=(u="horizontal"===i)?"Y":"X",t.createElement("div",{key:c,className:a.join(" "),style:((r={})[u?"width":"height"]=""+o,r.transform="translate("+s[0]+", "+s[1]+") translate"+d+"(-50%) scale"+d+"("+l+")",r)})}function n6(e,t,n,r,i,a,o,s){var l=e.props.zoom;return n.map(function(e,n){var c=e.type,u=e.pos,d=[0,0];return d[o]=r,d[+!o]=-i+u,n5({key:t+"TargetGuideline"+n,classNames:[tD("target","bold",c)],posValue:d,sizeValue:a,zoom:l,direction:t},s)})}function n8(e,t,n,r,i,a){var o=e.props,s=o.zoom,l=o.isDisplayInnerSnapDigit,c="horizontal"===t?nR:nP,u=i[c.start],d=i[c.end];return n.filter(function(e){var t=e.hide,n=e.elementRect;if(t)return!1;if(l&&n){var r=n.rect;if(r[c.start]<=u&&d<=r[c.end])return!1}return!0}).map(function(e,n){var i=e.pos,o=e.size,l=e.element,c=[-r[0]+i[0],-r[1]+i[1]];return n5({key:t+"-default-guideline-"+n,classNames:l?[tD("bold")]:[],direction:t,posValue:c,sizeValue:o,zoom:s},a)})}function n7(e,t,n,r,i,a,o,s){var l,c=e.props,u=c.snapDigit,d=c.isDisplaySnapDigit,f=c.snapDistFormat,p=c.zoom,g="horizontal"===t?"X":"Y",h="vertical"===t?"height":"width",m=Math.abs(i),v=void 0===d||d?parseFloat(m.toFixed(void 0===u?0:u)):0;return s.createElement("div",{key:t+"-"+n+"-guideline-"+r,className:tD("guideline-group",t),style:((l={left:a[0]+"px",top:a[1]+"px"})[h]=m+"px",l)},n5({direction:t,classNames:[tD(n),o],size:"100%",posValue:[0,0],sizeValue:m,zoom:p},s),s.createElement("div",{className:tD("size-value","gap"),style:{transform:"translate"+g+"(-50%) scale("+p+")"}},v>0?(void 0===f?function(e){return e}:f)(v):""))}function n9(e,t,n,r,i){var a=function(e,t,n,r){var i=t[0]-e[0],a=t[1]-e[1];if(1e-7>Math.abs(i)&&(i=0),1e-7>Math.abs(a)&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var o=a/i,s=e[1]-o*e[0];return r?[n,o*(t[0]+n)+s-t[1]]:[(t[1]+n-s)/o-t[0],n]}(e,t,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var o=Y(e,t),s=Y(a,e),l=Y(a,t),c=nv({datas:i,distX:a[0],distY:a[1]});return{offset:[c[0],c[1]],isOutside:s>o||l>o}}function re(e,t){return e.isBound?e.offset:t.isSnap?nH(t).offset:0}function rt(e,t,n,r){void 0===r&&(r=n);var i=n1(n2(e),r.vertical,r.horizontal),a=i.horizontal,o=i.vertical,s=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:nj(e,n.vertical,n.horizontal),l=s.horizontal,c=s.vertical,u=re(a[0],l),d=re(o[0],c),f=Math.abs(u),p=Math.abs(d);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:f,bounds:a,snap:l},vertical:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:p,bounds:o,snap:c}}}function rn(e,t,n,r,i){var a=n1(t,n,r),o=a.horizontal,s=a.vertical,l=nF(e,n,r,i),c=l.horizontal,u=l.vertical,d=re(o[0],c),f=re(s[0],u),p=Math.abs(d),g=Math.abs(f);return{horizontal:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:p,bounds:o,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:g,bounds:s,snap:u}}}function rr(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}function ri(e){var t=e.state;if(!t.guidelines||!t.guidelines.length){var n=e.state.container,r=e.props.snapContainer||n,i=t.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var o=nn(r,!0);if(o){var s=tq(o),l=ni(t,[s.left-i.left,s.top-i.top]),c=ni(t,[s.right-i.right,s.bottom-i.bottom]);a.left=X(l[0],.1),a.top=X(l[1],.1),a.right=X(c[0],.1),a.bottom=X(c[1],.1)}}t.snapOffset=a,t.guidelines=nL(e),t.enableSnap=!0}}function ra(e,t,n,r,i,a){var o=tG(e,t,n,a?4:3);return tZ(o,eb(r,ny(o,i.map(function(e){return-e}))))}function ro(e,t,n,r,i,a,o,s){for(var l=t$(e.state),c=e.props.keepRatio,u=0,d=0,f=0;f<2;++f){var p=function(e,t,n,r,i,a){var o,s,l=(o=[],s=[-n[0],-n[1]],n[0]&&n[1]?(o.push([s,[n[0],-n[1]]],[s,[-n[0],n[1]]]),r&&o.push([s,n])):n[0]?r?o.push([s,[s[0],-1]],[s,[s[0],1]],[s,[n[0],-1]],[s,n],[s,[n[0],1]]):o.push([[s[0],-1],[n[0],-1]],[[s[0],0],[n[0],0]],[[s[0],1],[n[0],1]]):n[1]?r?o.push([s,[-1,s[1]]],[s,[1,s[1]]],[s,[-1,n[1]]],[s,[1,n[1]]],[s,n]):o.push([[-1,s[1]],[-1,n[1]]],[[0,s[1]],[0,n[1]]],[[1,s[1]],[1,n[1]]]):o.push([s,[1,0]],[s,[-1,0]],[s,[0,-1]],[s,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),o),c=nJ(t,n,r),u=tm(l.map(function(n){var o,s,l,c,u,d,f,p,g,h,m,v,b,E,y,w,x,S,_,C,T,N=n[0],D=n[1],M=ny(t,N),k=ny(t,D),I=r?(s=(o=function(e,t,n){var r=n2(e),i=r.left,a=r.top,o=r.right,s=r.bottom,l=n[0],c=n[1],u=eb(n,t),d=u[0],f=u[1];1e-7>Math.abs(d)&&(d=0),1e-7>Math.abs(f)&&(f=0);var p=f>0,g=d>0,h={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(0===d&&0===f)return{vertical:h,horizontal:m};if(0===d)p?s<c&&(m.pos=s,m.offset=c-s):a>c&&(m.pos=a,m.offset=c-a);else if(0===f)g?o<l&&(h.pos=o,h.offset=l-o):i>l&&(h.pos=i,h.offset=l-i);else{var v=f/d,b=n[1]-v*l,E=0,y=0,w=!1;g&&o<=l?(E=v*o+b,y=o,w=!0):!g&&l<=i&&(E=v*i+b,y=i,w=!0),w&&(E<a||E>s)&&(w=!1),w||(p&&s<=c?(y=((E=s)-b)/v,w=!0):!p&&c<=a&&(y=((E=a)-b)/v,w=!0)),w&&(h.isBound=!0,h.pos=y,h.offset=l-y,m.isBound=!0,m.pos=E,m.offset=c-E)}return{vertical:h,horizontal:m}}(e,M,k)).horizontal,l=o.vertical,u=(c=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(e,t,n){var r=n[0],i=n[1],a=t[0],o=t[1],s=eb(n,t),l=s[0],c=s[1],u=c>0,d=l>0;l=ne(l),c=ne(c);var f={isSnap:!1,offset:0,pos:0},p={isSnap:!1,offset:0,pos:0};if(0===l&&0===c)return{vertical:f,horizontal:p};var g=nj(e,l?[r]:[],c?[i]:[]),h=g.vertical,m=g.horizontal;h.posInfos.filter(function(e){var t=e.pos;return d?t>=a:t<=a}),m.posInfos.filter(function(e){var t=e.pos;return u?t>=o:t<=o}),h.isSnap=h.posInfos.length>0,m.isSnap=m.posInfos.length>0;var v=nH(h),b=v.isSnap,E=v.guideline,y=nH(m),w=y.isSnap,x=y.guideline,S=w?x.pos[1]:0,_=b?E.pos[0]:0;if(0===l)w&&(p.isSnap=!0,p.pos=x.pos[1],p.offset=i-p.pos);else if(0===c)b&&(f.isSnap=!0,f.pos=_,f.offset=r-_);else{var C=c/l,T=n[1]-C*r,N=0,D=0,M=!1;b?(N=C*(D=_)+T,M=!0):w&&(D=((N=S)-T)/C,M=!0),M&&(f.isSnap=!0,f.pos=D,f.offset=r-D,p.isSnap=!0,p.pos=N,p.offset=i-N)}return{vertical:f,horizontal:p}}(e,M,k)).horizontal,d=c.vertical,f=rr(s,u),p=rr(l,d),g=Math.abs(f),h=Math.abs(p),{horizontal:{isBound:s.isBound,isSnap:u.isSnap,offset:f,dist:g},vertical:{isBound:l.isBound,isSnap:d.isSnap,offset:p,dist:h}}):rt(e,i,{vertical:[k[0]],horizontal:[k[1]]}),O=I.horizontal,R=O.offset,P=O.isBound,B=O.isSnap,z=I.vertical,A=z.offset,G=z.isBound,L=z.isSnap,j=eb(D,N);if(!A&&!R)return{isBound:G||P,isSnap:L||B,sign:j,offset:[0,0]};var F=(m=H(M,k)/Math.PI*180,b=(v=I.vertical).isBound,E=v.isSnap,y=v.dist,x=(w=I.horizontal).isBound,S=w.isSnap,C=(_=m%180)<3||_>177,T=_>87&&_<93,w.dist<y&&(b||E&&!T&&(!r||!C))?"vertical":!x&&(!S||C||r&&T)?"":"horizontal");if(!F)return{sign:j,isBound:!1,isSnap:!1,offset:[0,0]};var W="vertical"===F,Y=n9(M,k,-(W?A:R),W,a).offset.map(function(e,t){return e*(j[t]?2/j[t]:0)});return{sign:j,isBound:W?G:P,isSnap:W?L:B,offset:Y}}),nQ(e,c,ny(t,[0,0]),a)),d=nU(u,0),f=nU(u,1);return{width:{isBound:d.isBound,offset:d.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}(e,t(u,d),i,c,o,s),g=p.width,h=p.height,m=g.isBound,v=h.isBound,b=g.offset,E=h.offset;if(1===f&&(m||(b=0),v||(E=0)),0===f&&o&&!m&&!v)return[0,0];if(c){var y=Math.abs(b)*(n?1/n:1),w=Math.abs(E)*(r?1/r:1);(m&&v?y<w:v||!m&&y<w)?b=n*E/r:E=r*b/n}u+=b,d+=E}if(i[0]&&i[1]){var x=function(e,t,n,r,i){var a=[-n[0],-n[1]],o=e.state,s=o.width,l=o.height,c=e.props.bounds,u=1/0,d=1/0;if(c){var f=[[n[0],-n[1]],[-n[0],n[1]]],p=c.left,g=void 0===p?-1/0:p,h=c.top,m=void 0===h?-1/0:h,v=c.right,b=void 0===v?1/0:v,E=c.bottom,y=void 0===E?1/0:E;f.forEach(function(e){var n=e[0]!==a[0],o=e[1]!==a[1],c=ny(t,e),f=360*H(r,c)/Math.PI;if(o){var p=c.slice();(2>Math.abs(f-360)||2>Math.abs(f-180))&&(p[1]=r[1]);var h=n9(r,p,(r[1]<c[1]?y:m)-c[1],!1,i),v=h.offset[1],E=h.isOutside;isNaN(v)||(d=l+(E?1:-1)*Math.abs(v))}if(n){p=c.slice(),(2>Math.abs(f-90)||2>Math.abs(f-270))&&(p[0]=r[0]);var w=n9(r,p,(r[0]<c[0]?b:g)-c[0],!0,i),x=w.offset[0],S=w.isOutside;isNaN(x)||(u=s+(S?1:-1)*Math.abs(x))}})}return{maxWidth:u,maxHeight:d}}(e,l,i,a,s),S=x.maxWidth,_=x.maxHeight,C=function(e,t,n,r,i,a,o,s,l){var c=ny(t,o),u=rt(e,s,{vertical:[c[0]],horizontal:[c[1]]}),d=u.horizontal.offset,f=u.vertical.offset;if(f||d){var p=nv({datas:l,distX:-f,distY:-d}),g=p[0],h=p[1];return[Math.min(i||1/0,n+o[0]*g)-n,Math.min(a||1/0,r+o[1]*h)-r]}return[0,0]}(e,t(u,d).map(function(e){return e.map(function(e){return X(e,1e-4)})}),n+u,r+d,S,_,i,o,s);u+=b=C[0],d+=E=C[1]}return[u,d]}function rs(e,t,n,r){if(!nB(e,"rotatable"))return r;var i=t.pos1,a=t.pos2,o=t.pos3,s=t.pos4,l=r*Math.PI/180,c=[i,a,o,s].map(function(e){return eb(e,n)}),u=c.map(function(e){return eC(e,l)}),d=tm(function(e,t,n,r,i){if(!e.props.bounds)return[];var a=i*Math.PI/180,o=n2(e),s=o.left,l=o.top,c=o.right,u=o.bottom,d=s-r[0],f=c-r[0],p=l-r[1],g=u-r[1],h={left:d,top:p,right:f,bottom:g};if(!n4(n,h,0))return[];var m=[];return[[d,0],[f,0],[p,1],[g,1]].forEach(function(e){var r=e[0],i=e[1];n.forEach(function(e){var n,o,s=H([0,0],e);m.push.apply(m,[o=Math.sqrt((n=tF(e))*n-r*r)||0,-o].sort(function(t,n){return Math.abs(t-e[+!i])-Math.abs(n-e[+!i])}).map(function(e){return H([0,0],i?[e,r]:[r,e])}).map(function(e){return a+e-s}).filter(function(e){return!n4(t,h,e)}).map(function(e){return X(180*e/Math.PI,1e-7)}))})}),m}(e,c,u,n,r),function(e,t,n,r,i){var a=e.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var s=a.left,l=a.top,c=a.width,u=a.height,d=s-r[0],f=s+c-r[0],p=l-r[1],g=l+u-r[1],h=[[d,p],[f,p],[d,g],[f,g]],m=ny(n,[0,0]);if(!n0(n,h,m,0))return[];var v=[],b=h.map(function(e){return[tF(e),H([0,0],e)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(e){var n=H([0,0],function(e){var t=e[0],n=e[1],r=n[0]-t[0],i=n[1]-t[1];if(!r)return[t[0],0];if(!i)return[0,t[1]];var a=i/r,o=-a*t[0]+t[1];return[-o/(a+1/a),o/(a*a+1)]}(e)),r=function(e){var t=e[0],n=e[1],r=n[0]-t[0],i=n[1]-t[1];if(!r)return Math.abs(t[0]);if(!i)return Math.abs(t[1]);var a=i/r;return Math.abs((-a*t[0]+t[1])/Math.sqrt(Math.pow(a,2)+1))}(e);v.push.apply(v,b.filter(function(e){var t=e[0];return t&&r<=t}).map(function(e){var t=e[0],i=e[1],a=Math.acos(t?r/t:0);return[o+(i+a)-n,o+(i-a)-n]}).reduce(function(e,t){return e.push.apply(e,t),e},[]).filter(function(e){return!n0(t,h,m,e)}).map(function(e){return X(180*e/Math.PI,1e-7)}))}),v}(e,c,u,n,r));return d.sort(function(e,t){return Math.abs(e-r)-Math.abs(t-r)}),d.length?d[0]:r}function rl(e){var t=[];return e.forEach(function(e){e.guidelineInfos.forEach(function(e){var n=e.guideline;t.indexOf(n)>-1||t.push(n)})}),t}function rc(e,t,n,r,i,a){var o=n1(n2(e,a),t,n),s=o.vertical,l=o.horizontal;s.forEach(function(e){e.isBound&&r.push({type:"bounds",pos:e.pos})}),l.forEach(function(e){e.isBound&&i.push({type:"bounds",pos:e.pos})});var c=function(e){var t=e.props.innerBounds;if(!t)return{vertical:[],horizontal:[]};var n=e.getRect(),r=n.pos1,i=n.pos2,a=n.pos3,o=n.pos4,s=ny([r,i,a,o],[0,0]),l=t.left,c=t.top,u=t.width,d=t.height,f=[[l,c],[l,c+d]],p=[[l,c],[l+u,c]],g=[[l+u,c],[l+u,c+d]],h=[[l,c+d],[l+u,c+d]],m=[],v=[],b={top:!1,bottom:!1,left:!1,right:!1};return[[r,i],[i,o],[o,a],[a,r]].forEach(function(e){var t=nV(s,e),n=t.horizontal,r=t.vertical,i=n$(e,p,r,1,!0),a=n$(e,h,r,1,!0),o=n$(e,f,n,1,!0),E=n$(e,g,n,1,!0);i.isBound&&!b.top&&(m.push(c),b.top=!0),a.isBound&&!b.bottom&&(m.push(c+d),b.bottom=!0),o.isBound&&!b.left&&(v.push(l),b.left=!0),E.isBound&&!b.right&&(v.push(l+u),b.right=!0)}),{horizontal:m,vertical:v}}(e),u=c.vertical,d=c.horizontal;u.forEach(function(e){A(r,function(t){var n=t.type,r=t.pos;return"bounds"===n&&r===e})>=0||r.push({type:"bounds",pos:e})}),d.forEach(function(e){A(i,function(t){var n=t.type,r=t.pos;return"bounds"===n&&r===e})>=0||i.push({type:"bounds",pos:e})})}var ru={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(e,t){var n=e.props,r=n.throttleDragRotate,i=n.zoom,a=e.state,o=a.dragInfo,s=a.beforeOrigin;if(!r||!o)return[];var l=o.dist;if(!l[0]&&!l[1])return[];var c=tF(l),u=H(l,[0,0]);return[t.createElement("div",{className:tD("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:c+"px",transform:"translate("+s[0]+"px, "+s[1]+"px) rotate("+u+"rad) scaleY("+i+")"}})]},dragStart:function(e,t){var n=t.datas,r=t.parentEvent,i=t.parentGesto,a=e.state,o=a.target;if(a.gesto)return!1;a.gesto=i||e.targetGesto;var s=t2(o);n.datas={},n.left=parseFloat(s.left||"")||0,n.top=parseFloat(s.top||"")||0,n.bottom=parseFloat(s.bottom||"")||0,n.right=parseFloat(s.right||"")||0,n.startValue=[0,0],nf(e,t),nS(t,"translate"),n.absolutePoses=t$(e.state),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0],n.distOffset=[0,0];var l=tJ(e,t,th({set:function(e){n.startValue=e}},nx(t)));return!1!==(r||t1(e,"onDragStart",l))?(n.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(a.gesto=null,n.isPinch=!1),!!n.isDrag&&l},drag:function(e,t){if(t){np(t,"translate");var n=t.datas,r=t.parentEvent,i=t.parentFlag,a=t.isPinch,o=t.isRequest,s=t.distX,l=t.distY,c=n.isDrag,u=n.prevDist,d=n.prevBeforeDist,f=n.startValue,p=n.distOffset;if(c){s+=p[0],l+=p[1];var g,h,m,v=e.props,b=v.parentMoveable,E=r?0:v.throttleDrag||0,y=r?0:v.throttleDragRotate||0,w=!1,x=0;if(!r&&y>0&&(s||l)){var S=v.startDragRotate||0,_=X(S+180*H([0,0],[s,l])/Math.PI,y)-S,C=l*Math.abs(Math.cos((_-90)/180*Math.PI)),T=tF([s*Math.abs(Math.cos(_/180*Math.PI)),C]);s=T*Math.cos(x=_*Math.PI/180),l=T*Math.sin(x)}if(!a&&!r&&!i&&(!y||s||l)){var N=function(e,t,n,r,i,a){if(!nB(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o,s,l,c,u,d,f,p,g,h,m,v,b,E,y,w,x,S,_,C=tZ(a.absolutePoses,[t,n]),T=tL(C),N=T.left,D=T.right,M=T.top,k=T.bottom,I={horizontal:C.map(function(e){return e[1]}),vertical:C.map(function(e){return e[0]})},O=rt(e,i,nA(nz(e.props.snapDirections),{left:N,right:D,top:M,bottom:k,center:(N+D)/2,middle:(M+k)/2}),I),R=O.vertical,P=O.horizontal,B=(o=e,s=C,l=a,E=nU(b=nQ(o,nJ(s,[0,0],!1).map(function(e){var t=e[0],n=e[1],r=e[2];return[t.map(function(e){return 2*Math.abs(e)}),n,r]}),ny(s,[0,0]),l),0),y=nU(b,1),w=0,x=0,S=E.isVerticalBound||y.isVerticalBound,_=E.isHorizontalBound||y.isHorizontalBound,(S||_)&&(w=(u=(c={datas:l,distX:-E.offset[0],distY:-y.offset[1]}).datas,d=c.distX,f=c.distY,u.beforeMatrix,p=u.matrix,g=u.is3d,u.startDragBeforeDist,h=u.startDragDist,m=u.absoluteOrigin,v=eb(ey(p,ev(h,[d,f]),g?4:3),m))[0],x=v[1]),{vertical:{isBound:S,offset:w},horizontal:{isBound:_,offset:x}}),z=B.vertical,A=B.horizontal,G=R.isSnap,L=P.isSnap,j=R.isBound||z.isBound,F=P.isBound||A.isBound,W=function(e,t,n,r,i){var a=t[0],o=t[1],s=n[0],l=n[1],c=r[0],u=r[1],d=i[0],f=i[1],p=-d,g=-f;if(e&&a&&o){p=0,g=0;var h=[];if(s&&l?h.push([0,f],[d,0]):s?h.push([d,0]):l?h.push([0,f]):c&&u?h.push([0,f],[d,0]):c?h.push([d,0]):u&&h.push([0,f]),h.length){h.sort(function(e,t){return tF(eb([a,o],e))-tF(eb([a,o],t))});var m,v=h[0];v[0]&&Math.abs(a)>1e-7?g=o*Math.abs(a+(p=-v[0]))/Math.abs(a)-o:v[1]&&Math.abs(o)>1e-7&&(p=a*Math.abs(o+(g=-v[1]))/Math.abs(o)-a),e&&l&&s&&(Math.abs(p)>1e-7&&Math.abs(p)<Math.abs(d)?(p*=m=Math.abs(d)/Math.abs(p),g*=m):Math.abs(g)>1e-7&&Math.abs(g)<Math.abs(f)?(p*=m=Math.abs(f)/Math.abs(g),g*=m):(p=t5(-d,p),g=t5(-f,g)))}}else p=a||s?-d:0,g=o||l?-f:0;return[p,g]}(r,[t,n],[j,F],[G,L],[t5(R.offset,z.offset),t5(P.offset,A.offset)]);return[{isBound:j,isSnap:G,offset:W[0]},{isBound:F,isSnap:L,offset:W[1]}]}(e,s,l,y,o,n),D=N[0],M=N[1],k=D.isSnap,I=D.isBound,O=D.offset,R=M.isSnap,P=M.isBound;w=k||R||I||P,s+=O,l+=M.offset}var B=ev(nm({datas:n,distX:s,distY:l}),f),z=ev((m=nm({datas:h=(g={datas:n,distX:s,distY:l}).datas,distX:g.distX,distY:g.distY}),ey(nh(h,function(e,t){for(var n=eM(4),r=0;r<3;++r)n[12+r]=e[r]||0;return n}([m[0],m[1]],0)),ep([0,0,0],4),4)),f);y||w||(U(z,E),U(B,E));var A=eb(B,f),G=eb(z,f),L=eb(G,u),j=eb(A,d);n.prevDist=G,n.prevBeforeDist=A,n.passDelta=L,n.passDist=G;var F=n.left+A[0],W=n.top+A[1],Y=n.right-A[0],V=n.bottom-A[1],q=ng(n,"translate("+z[0]+"px, "+z[1]+"px)","translate("+G[0]+"px, "+G[1]+"px)");if(e.state.dragInfo.dist=r?[0,0]:G,r||b||!L.every(function(e){return!e})||!j.some(function(e){return!e})){var K=e.state,Z=tJ(e,t,{transform:q,dist:G,delta:L,translate:z,beforeDist:A,beforeDelta:j,beforeTranslate:B,left:F,top:W,right:Y,bottom:V,width:K.width,height:K.height,isPinch:a});return r||t1(e,"onDrag",Z),Z}}}},dragAfter:function(e,t){var n=t.datas,r=t.datas,i=r.deltaOffset,a=r.distOffset;return!(!i[0]&&!i[1])&&(n.deltaOffset=[0,0],a[0]+=i[0],a[1]+=i[1],this.drag(e,t))},dragEnd:function(e,t){var n=t.parentEvent,r=t.datas,i=t.isDrag;if(e.state.gesto=null,e.state.dragInfo=null,r.isDrag)return r.isDrag=!1,n||t1(e,"onDragEnd",t0(e,t,{})),i},dragGroupStart:function(e,t){var n=t.datas,r=t.clientX,i=t.clientY,a=this.dragStart(e,t);if(!a)return!1;var o=nc(e,this,"dragStart",[r||0,i||0],t,!1);return n.isDrag=!1!==t1(e,"onDragGroupStart",th(th({},a),{targets:e.props.targets,events:o})),!!n.isDrag&&a},dragGroup:function(e,t){if(t.datas.isDrag){var n=this.drag(e,t),r=nc(e,this,"drag",t.datas.passDelta,t,!1);if(n){var i=th({targets:e.props.targets,events:r},n);return t1(e,"onDragGroup",i),i}}},dragGroupEnd:function(e,t){var n=t.isDrag;if(t.datas.isDrag)return this.dragEnd(e,t),nc(e,this,"dragEnd",[0,0],t,!1),t1(e,"onDragGroupEnd",t0(e,t,{targets:e.props.targets})),n},request:function(e){var t={},n=e.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:t}},request:function(e){return"x"in e?r=e.x-n.left:"deltaX"in e&&(r+=e.deltaX),"y"in e?i=e.y-n.top:"deltaY"in e&&(i+=e.deltaY),{datas:t,distX:r,distY:i}},requestEnd:function(){return{datas:t,isDrag:!0}}}},unset:function(e){e.state.dragInfo=null}};function rd(e,t,n,r){void 0===r&&(r="");var i=e.state,a=i.renderPoses,o=i.rotation,s=i.direction,l=e.props,c=l.renderDirections,u=void 0===c?t:c,d=l.zoom,f={};if(!u)return[];var p=s>0?1:-1,g=!0===u?t_:u,h=o/Math.PI*180;return g.forEach(function(e){f[e]=!0}),g.map(function(e){var t=tC[e];if(!t||!f[e])return null;var i=(X(h,15)+p*tT[e]+720)%180;return n.createElement("div",{className:tD("control","direction",e,r),"data-rotation":i,"data-direction":e,key:"direction-"+e,style:tY.apply(void 0,tm([o,d],t.map(function(e){return a[e]})))})})}function rf(e,t,n,r,i,a){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var l=H(n,r),c=t?X(l/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line"+a,className:tD.apply(void 0,tm(["line","direction",t],o)),"data-rotation":c,"data-line-index":a,"data-direction":t,style:tH(n,r,i,l)})}function rp(e,t){return rd(e,["nw","ne","sw","se"],t)}function rg(e,t,n,r,i,a){var o=e.state.is3d?4:3,s=tA(e.state.rootMatrix,i,o),l=ev([a.left,a.top],s);t.startAbsoluteOrigin=l,t.prevDeg=H(l,[n,r])/Math.PI*180,t.prevSnapDeg=t.prevDeg,t.startDeg=t.prevDeg,t.loop=0}function rh(e,t,n,r,i,a){var o=n.prevDeg,s=rs(e,t,n.origin,r);return n.prevDeg=s,[s-o,s,a+s]}function rm(e,t,n,r,i,a,o,s){var l=n.prevDeg,c=n.prevSnapDeg,u=n.startDeg,d=n.loop;l>r&&l>270&&r<90?++n.loop:l<r&&l<90&&r>270&&--n.loop;var f=n.loop,p=360*f+r-u+a;n.prevDeg=p-360*f+u-a;var g=i*((p=X(p,o))-a);return s&&(p=(g=rs(e,t,n.origin,g))/i+a),n.prevSnapDeg=p-360*f+u-a,[i*(p-(360*d+c-u+a)),g,a+g]}function rv(e,t,n,r,i,a,o,s){return rm(e,t,n,H(n.startAbsoluteOrigin,[i,a])/Math.PI*180,r,o,s,!0)}function rb(e,t){if(t.isRequest)return"rotatable"===t.requestAble;var n=t.inputEvent.target;if(V(n,tD("rotation-control")))return!0;var r=e.props.rotationTarget;return!!r&&nr(r,!0).some(function(e){return!!e&&(n===e||n.contains(e))})}function rE(e,t){return e.map(function(e,n){return(2*e+ +t[n])/3})}function ry(e,t,n){var r=H(e,t),i=H(e,n)-r;return i>=0?i:i+2*Math.PI}var rw=tD("area-pieces"),rx=tD("area-piece"),rS=tD("avoid");function r_(e){var t=e.areaElement,n=e.state,r=n.width,i=n.height;if(t.classList)t.classList.remove(rS);else{var a=RegExp("(\\s|^)"+rS+"(\\s|$)");t.className=t.className.replace(a," ")}t.style.cssText+="left: 0px; top: 0px; width: "+r+"px; height: "+i+"px"}function rC(e){return e.createElement("div",{key:"area_pieces",className:rw},e.createElement("div",{className:rx}),e.createElement("div",{className:rx}),e.createElement("div",{className:rx}),e.createElement("div",{className:rx}))}var rT={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(e,t){var n=e.props,r=n.target,i=n.dragArea,a=n.groupable,o=n.passDragArea,s=e.state,l=s.width,c=s.height,u=s.renderPoses,d=o?tD("area","pass"):tD("area");if(a)return[t.createElement("div",{key:"area",ref:S(e,"areaElement"),className:d}),rC(t)];if(!r||!i)return[];var f=eO([0,0],[l,0],[0,c],[l,c],u[0],u[1],u[2],u[3]),p=f.length?tB(f,!0):"none";return[t.createElement("div",{key:"area",ref:S(e,"areaElement"),className:d,style:{top:"0px",left:"0px",width:l+"px",height:c+"px",transformOrigin:"0 0",transform:p}}),rC(t)]},dragStart:function(e,t){var n=t.datas,r=t.clientX,i=t.clientY;if(!t.inputEvent)return!1;n.isDragArea=!1;var a=e.areaElement,o=e.state,s=o.moveableClientRect,l=o.renderPoses,c=o.rootMatrix,u=o.is3d,d=s.left,f=s.top,p=tL(l),g=p.left,h=p.top,m=p.width,v=p.height,b=t6(c,[r-d,i-f],u?4:3),E=b[0],y=b[1],w=[{left:g,top:h,width:m,height:(y-=h)-10},{left:g,top:h,width:(E-=g)-10,height:v},{left:g,top:h+y+10,width:m,height:v-y-10},{left:g+E+10,top:h,width:m-E-10,height:v}],x=[].slice.call(a.nextElementSibling.children);w.forEach(function(e,t){x[t].style.cssText="left: "+e.left+"px;top: "+e.top+"px; width: "+e.width+"px; height: "+e.height+"px;"}),a.classList?a.classList.add(rS):a.className+=" "+rS,o.disableNativeEvent=!0},drag:function(e,t){var n=t.datas,r=t.inputEvent;if(this.enableNativeEvent(e),!r)return!1;n.isDragArea||(n.isDragArea=!0,r_(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var n=t.inputEvent,r=t.datas;if(!n)return!1;r.isDragArea||r_(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){r_(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&requestAnimationFrame(function(){t.disableNativeEvent=!1})}},rN=tv("origin",{render:function(e,t){var n=e.props.zoom,r=e.state,i=r.beforeOrigin,a=r.rotation;return[t.createElement("div",{className:tD("control","origin"),style:tY(a,n,i),key:"beforeOrigin"})]}});function rD(e){var t=e.scrollContainer;return[t.scrollLeft,t.scrollTop]}var rM={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object},events:{}},rk=tv("padding",{render:function(e,t){var n=e.props;if(n.dragArea)return[];var r=n.padding||{},i=r.left,a=r.top,o=r.right,s=r.bottom,l=e.state,c=l.renderPoses,u=[l.pos1,l.pos2,l.pos3,l.pos4],d=[];return(void 0===i?0:i)>0&&d.push([0,2]),(void 0===a?0:a)>0&&d.push([0,1]),(void 0===o?0:o)>0&&d.push([1,3]),(void 0===s?0:s)>0&&d.push([2,3]),d.map(function(e,n){var r=e[0],i=e[1],a=eO([0,0],[100,0],[0,100],[100,100],u[r],u[i],c[r],c[i]);if(a.length)return t.createElement("div",{key:"padding"+n,className:tD("padding"),style:{transform:tB(a,!0)}})})}}),rI=["nw","ne","se","sw"];function rO(e,t){var n=e[0]+e[1],r=n>t?t/n:1;return e[0]*=r,e[1]=t-e[1]*r,e}var rR=[1,2,5,6],rP=[0,3,4,7],rB=[1,-1,-1,1],rz=[1,1,-1,-1];function rA(e,t,n,r,i,a,o,s,l){void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=r),void 0===l&&(l=i);var c=[],u=!1,d=e.map(function(e,d){var f=t[d],p=f.horizontal,g=f.vertical;if(g&&!u&&(u=!0,c.push("/")),u){var h=Math.max(0,1===g?e[1]-o:l-e[1]);return c.push(t9(h,i,n)),h}return h=Math.max(0,1===p?e[0]-a:s-e[0]),c.push(t9(h,r,n)),h});return{styles:c,raws:d}}function rG(e){for(var t=[0,0],n=[0,0],r=e.length,i=0;i<r;++i){var a=e[i];a.sub&&(a.horizontal&&(0===t[1]&&(t[0]=i),t[1]=i-t[0]+1,n[0]=i+1),a.vertical&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:t,verticalRange:n}}function rL(e,t,n,r,i,a){void 0===a&&(a=[0,0]);var o,s,l,c,u=e.indexOf("/"),d=(u>-1?e.slice(0,u):e).length,f=e.slice(0,d),p=e.slice(d+1),g=f[0],h=void 0===g?"0px":g,m=f[1],v=void 0===m?h:m,b=f[2],E=void 0===b?h:b,y=f[3],w=void 0===y?v:y,x=p[0],S=void 0===x?h:x,_=p[1],C=void 0===_?S:_,T=p[2],N=void 0===T?S:T,D=p[3],M=void 0===D?C:D,k=[h,v,E,w].map(function(e){return j(e,t)}),I=[S,C,N,M].map(function(e){return j(e,n)}),O=k.slice(),R=I.slice();o=rO([O[0],O[1]],t),O[0]=o[0],O[1]=o[1],s=rO([O[3],O[2]],t),O[3]=s[0],O[2]=s[1],l=rO([R[0],R[3]],n),R[0]=l[0],R[3]=l[1],c=rO([R[1],R[2]],n),R[1]=c[0],R[2]=c[1];var P=O.slice(0,Math.max(a[0],f.length)),B=R.slice(0,Math.max(a[1],p.length));return tm(P.map(function(e,t){var a=rI[t];return{horizontal:rB[t],vertical:0,pos:[r+e,i+(-1===rz[t]?n:0)],sub:!0,raw:k[t],direction:a}}),B.map(function(e,n){var a=rI[n];return{horizontal:0,vertical:rz[n],pos:[r+(-1===rB[n]?t:0),i+e],sub:!0,raw:I[n],direction:a}}))}function rj(e,t,n,r,i){void 0===i&&(i=t.length);var a=rG(e.slice(r)),o=a.horizontalRange,s=a.verticalRange,l=n-r,c=0;if(0===l)c=i;else if(l>0&&l<o[1])c=o[1]-l;else{if(!(l>=s[0]))return;c=s[0]+s[1]-l}e.splice(n,c),t.splice(n,c)}function rF(e,t,n,r,i,a,o,s,l,c,u){void 0===c&&(c=0),void 0===u&&(u=0);var d=rG(e.slice(n)),f=d.horizontalRange,p=d.verticalRange;if(r>-1)for(var g=1===rB[r]?a-c:s-a,h=f[1];h<=r;++h){var m=1===rz[h]?u:l,v=0;if(r===h?v=a:0===h?v=c+g:-1===rB[h]&&(v=s-(t[n][0]-c)),e.splice(n+h,0,{horizontal:rB[h],vertical:0,pos:[v,m]}),t.splice(n+h,0,[v,m]),0===h)break}else if(i>-1){var b=1===rz[i]?o-u:l-o;if(0===f[1]&&0===p[1]){var E=[c+b,u];e.push({horizontal:rB[0],vertical:0,pos:E}),t.push(E)}var y=p[0];for(h=p[1];h<=i&&(v=1===rB[h]?c:s,m=0,i===h?m=o:0===h?m=u+b:1===rz[h]?m=t[n+y][1]:-1===rz[h]&&(m=l-(t[n+y][1]-u)),e.push({horizontal:0,vertical:rz[h],pos:[v,m]}),t.push([v,m]),0!==h);++h);}}function rW(e,t){return void 0===t&&(t=e.map(function(e){return e.raw})),{horizontals:e.map(function(e,n){return e.horizontal?t[n]:null}).filter(function(e){return null!=e}),verticals:e.map(function(e,n){return e.vertical?t[n]:null}).filter(function(e){return null!=e})}}var rH=[[0,-1,"n"],[1,0,"e"]],rY=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function rX(e,t,n){var r=e.props.clipRelative,i=e.state,a=i.width,o=i.height,s=t.type,l=t.poses,c="rect"===s,u="circle"===s;if("polygon"===s)return n.map(function(e){return t9(e[0],a,r)+" "+t9(e[1],o,r)});if(c||"inset"===s){var d=n[1][1],f=n[3][0],p=n[7][0],g=n[5][1];if(c)return[d,f,g,p].map(function(e){return e+"px"});var h=[d,a-f,o-g,p].map(function(e,t){return t9(e,t%2?a:o,r)});if(n.length>8){var m=eb(n[4],n[0]),v=m[0],b=m[1];h.push.apply(h,tm(["round"],rA(n.slice(8),l.slice(8),r,v,b,p,d,f,g).styles))}return h}if(u||"ellipse"===s){var E=n[0],y=t9(Math.abs(n[1][1]-E[1]),u?Math.sqrt((a*a+o*o)/2):o,r);return(h=u?[y]:[t9(Math.abs(n[2][0]-E[0]),a,r),y]).push("at",t9(E[0],a,r),t9(E[1],o,r)),h}}function rU(e,t,n,r){var i=[r,(r+t)/2,t],a=[e,(e+n)/2,n];return rY.map(function(e){var t=e[0],n=e[1],r=e[2],o=i[t+1],s=a[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(t),direction:r,pos:[o,s]}})}function rV(e,t,n,r,i){var a=i;if(!a){var o=t2(e),s=o.clipPath;a="none"!==s?s:o.clip}if(a&&"none"!==a&&"auto"!==a||(a=r)){var l=B(a),c=l.prefix,u=void 0===c?a:c,d=l.value,f=void 0===d?"":d,p="circle"===u,g=" ";if("polygon"===u)return g=",",{type:u,clipText:a,poses:I=(M=R(f||"0% 0%, 100% 0%, 100% 100%, 0% 100%",",")).map(function(e){var r=e.split(" "),i=r[0],a=r[1];return{vertical:1,horizontal:1,pos:[j(i,t),j(a,n)]}}),splitter:g};if(p||"ellipse"===u){var h,m,v,b,E,y,w,x,S,_,C="",T="",N=0,D=0,M=P(f);p?(x=void 0===(h=M[0])?"50%":h,C=void 0===(m=M[2])?"50%":m,T=void 0===(v=M[3])?"50%":v,D=N=j(x,Math.sqrt((t*t+n*n)/2))):(S=void 0===(b=M[0])?"50%":b,_=void 0===(E=M[1])?"50%":E,C=void 0===(y=M[3])?"50%":y,T=void 0===(w=M[4])?"50%":w,N=j(S,t),D=j(_,n));var k=[j(C,t),j(T,n)],I=tm([{vertical:1,horizontal:1,pos:k,direction:"nesw"}],rH.slice(0,p?1:2).map(function(e){return{vertical:Math.abs(e[1]),horizontal:e[0],direction:e[2],sub:!0,pos:[k[0]+e[0]*N,k[1]+e[1]*D]}}));return{type:u,clipText:a,radiusX:N,radiusY:D,left:k[0]-N,top:k[1]-D,poses:I,splitter:g}}if("inset"===u){var O=(M=P(f||"0 0 0 0")).indexOf("round"),A=(O>-1?M.slice(0,O):M).length,G=M.slice(A+1),L=M.slice(0,A),F=L[0],W=L[1],H=void 0===W?F:W,Y=L[2],X=void 0===Y?F:Y,U=L[3],V=void 0===U?H:U,q=[F,X].map(function(e){return j(e,n)}),K=q[0],Z=q[1],$=[V,H].map(function(e){return j(e,t)}),Q=$[0],J=$[1],ee=t-J,et=n-Z,en=rL(G,ee-Q,et-K,Q,K);return{type:"inset",clipText:a,poses:I=tm(rU(K,ee,et,Q),en),top:K,left:Q,right:ee,bottom:et,radius:G,splitter:g}}if("rect"===u){g=",";var er=(M=R(f||"0px, "+t+"px, "+n+"px, 0px",",")).map(function(e){return z(e).value});return{type:"rect",clipText:a,poses:I=rU(K=er[0],J=er[1],Z=er[2],Q=er[3]),top:K,right:J,bottom:Z,left:Q,values:M,splitter:g}}}}function rq(e,t,n,r,i){var a;if(void 0===r&&(r=[0,0]),i)a=i;else{var o=t2(e);a=o&&o.borderRadius||""}return rL(a&&(i||"0px"!==a)?P(a):[],t,n,0,0,r)}function rK(e,t,n,r,i,a){var o=e.state,s=o.width,l=o.height,c=rA(a,i,e.props.roundRelative,s,l),u=c.raws,d=c.styles,f=rW(i,u),p=f.horizontals,g=f.verticals,h=d.join(" ");o.borderRadiusState=h,t1(e,"onRound",tJ(e,t,{horizontals:p,verticals:g,borderRadius:h,width:s,height:l,delta:r,dist:n}))}var rZ={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(e,t){var n=e.state,r=n.is3d,i=n.target,a=n.targetMatrix,o=null==i?void 0:i.style.transform,s=r?"matrix3d("+a.join(",")+")":"matrix("+eE(a,!0)+")";t.datas.startTransforms=o&&"none"!==o?P(o):[s]},resetTransform:function(e,t){t.datas.nextTransforms=t.datas.startTransforms,t.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return tJ(e,t,{setTransform:function(e){t.datas.startTransforms=M(e)?e:P(e)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return tJ(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),t1(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){this.resetTransform(e,t),t1(e,"onBeforeRender",tJ(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t1(e,"onBeforeRenderEnd",tJ(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var n=this;this.dragStart(e,t);var r=nl(e,"beforeRenderable",t),i=e.moveables,a=r.map(function(e,t){var r=i[t];return n.setTransform(r,e),n.fillDragStartParams(r,e)});t1(e,"onBeforeRenderGroupStart",tJ(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:a}))},dragGroup:function(e,t){var n=this;this.drag(e,t);var r=nl(e,"beforeRenderable",t),i=e.moveables,a=r.map(function(e,t){var r=i[t];return n.resetTransform(r,e),n.fillDragParams(r,e)});t1(e,"onBeforeRenderGroup",tJ(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:a}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),t1(e,"onBeforeRenderGroupEnd",tJ(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},r$={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(e,t){t1(e,"onRenderStart",tJ(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){t1(e,"onRender",tJ(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t1(e,"onRenderEnd",tJ(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){t1(e,"onRenderGroupStart",tJ(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){t1(e,"onRenderGroup",tJ(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroupEnd:function(e,t){t1(e,"onRenderGroupEnd",tJ(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}};function rQ(e,t,n,r,i,a,o){var s,l="Start"===i,c=e.state.target,u=a.isRequest;if(!c||l&&r.indexOf("Control")>-1&&!u&&e.areaElement===a.inputEvent.target)return!1;var d=""+n+r+i,f=""+n+r+"Condition",p="End"===i,g=i.indexOf("After")>-1,h=l&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());h&&e.updateRect(i,!0,!1),""!==i||g||u||t8(e.state,a);var m=tm([rZ],e[t],[r$]);if(u){var v=a.requestAble;m.some(function(e){return e.name===v})||m.push.apply(m,e.props.ables.filter(function(e){return e.name===v}))}if(!m.length)return!1;var b=m.filter(function(e){return e[d]}),E=a.datas;h&&b.forEach(function(t){t.unset&&t.unset(e)});var y=a.inputEvent;p&&y&&(s=document.elementFromPoint(a.clientX,a.clientY)||y.target);var w=b.filter(function(t){var n=t.name,r=E[n]||(E[n]={});return l&&(r.isEventStart=!t[f]||t[f](e,a)),!!r.isEventStart&&t[d](e,th(th({},a),{datas:r,originalDatas:E,inputTarget:s}))}).length,x=l&&b.length&&!w;return(p||x)&&(e.state.gesto=null,e.moveables&&e.moveables.forEach(function(e){e.state.gesto=null})),h&&x&&b.forEach(function(t){t.unset&&t.unset(e)}),!e.isUnmounted&&!x&&((!l&&w&&!o||p)&&(e.updateRect(i,!0,!1),e.forceUpdate()),l||p||g||!w||o||rQ(e,t,n,r,i+"After",a),!0)}function rJ(e,t,n){var r=e.controlBox.getElement(),i=[];i.push(r),e.props.dragArea&&!e.props.dragTarget||i.push(t);var a=function(t){var n=t.inputEvent.target;return n===e.areaElement||!e.isMoveableElement(n)||V(n,"moveable-area")||V(n,"moveable-padding")};return r0(e,i,"targetAbles",n,{dragStart:a,pinchStart:a})}function r0(e,t,n,r,i){void 0===i&&(i={});var a=e.props,o=a.pinchOutside,s=new ta(t,{container:window,pinchThreshold:a.pinchThreshold,pinchOutside:o});return["drag","pinch"].forEach(function(t){["Start","","End"].forEach(function(a){s.on(""+t+a,function(o){var s=o.eventType;(!i[s]||i[s](o))&&rQ(e,n,t,r,a,o)||o.stop()})})}),s}var r1=function(){function e(e,t,n){var r=this;this.target=e,this.moveable=t,this.eventName=n,this.ables=[],this.onEvent=function(e){var t=r.eventName,n=r.moveable;n.state.disableNativeEvent||r.ables.forEach(function(r){r[t](n,{inputEvent:e})})},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var t=e.prototype;return t.setAbles=function(e){this.ables=e},t.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},e}(),r2=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=th({container:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},tV(null)),t.enabledAbles=[],t.targetAbles=[],t.controlAbles=[],t.rotation=0,t.scale=[1,1],t.isUnmounted=!1,t.events={mouseEnter:null,mouseLeave:null},t.onPreventClick=function(e){e.stopPropagation(),q(window,"click",t.onPreventClick,!0)},t}tg(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=this.state,n=e.parentPosition,r=e.className,i=e.target,a=e.zoom,s=e.cspNonce,l=e.translateZ,c=e.cssStyled,u=e.portalContainer;this.checkUpdate(),this.updateRenderPoses();var d=n||{left:0,top:0},f=d.left,p=d.top,g=t.left,h=t.top,m=t.target,v=t.direction,b=e.targets,E=(b&&b.length||i)&&m,y=this.isDragging(),w={};return this.getEnabledAbles().forEach(function(e){w["data-able-"+e.name.toLowerCase()]=!0}),(0,o.createElement)(c,th({cspNonce:s,ref:S(this,"controlBox"),className:tD("control-box",-1===v?"reverse":"",y?"dragging":"")+" "+r},w,{onClick:this.onPreventClick,portalContainer:u,style:{position:"absolute",display:E?"block":"none",transform:"translate3d("+(g-f)+"px, "+(h-p)+"px, "+l+")","--zoom":a,"--zoompx":a+"px"}}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.controlBox.getElement();var e=this.props,t=e.parentMoveable,n=e.container,r=e.wrapperMoveable;this.updateEvent(e),this.updateNativeEvents(e),n||t||r||this.updateRect("",!1,!0),this.updateCheckInput()},n.componentDidUpdate=function(e){this.updateNativeEvents(e),this.updateEvent(e),this.updateCheckInput()},n.componentWillUnmount=function(){this.isUnmounted=!0,tQ(this,"targetGesto"),tQ(this,"controlGesto");var e=this.events;for(var t in e){var n=e[t];n&&n.destroy()}},n.getContainer=function(){var e=this.props,t=e.parentMoveable,n=e.wrapperMoveable;return e.container||n&&n.getContainer()||t&&t.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(e){return e&&(e.getAttribute("class")||"").indexOf(tw)>-1},n.dragStart=function(e){return this.targetGesto&&this.targetGesto.triggerDragStart(e),this},n.hitTest=function(e){var t,n,r,i,a,o,s,l,c,u,d,f=this.state,p=f.target,g=f.pos1,h=f.pos2,m=f.pos3,v=f.pos4,b=f.targetClientRect;if(!p)return 0;if(e instanceof Element){var E=e.getBoundingClientRect();d={left:E.left,top:E.top,width:E.width,height:E.height}}else d=th({width:0,height:0},e);var y=d.left,w=d.top,x=d.width,S=d.height,_=eV([g,h,v,m],b),C=eU((t=[[y,w],[y+x,w],[y+x,w+S],[y,w+S]],n=_.slice(),r=t.slice(),-1===es(n)&&n.reverse(),-1===es(r)&&r.reverse(),i=eJ(n),a=eJ(r),o=i.map(function(e){return eZ(e[0],e[1])}),s=a.map(function(e){return eZ(e[0],e[1])}),l=[],o.forEach(function(e,t){var n=i[t],o=[];s.forEach(function(r,i){var s=eQ(e$(e,r),[n,a[i]]);o.push.apply(o,s.map(function(e){return{index1:t,index2:i,pos:e}}))}),o.sort(function(e,t){return el(n[0],e.pos)-el(n[0],t.pos)}),l.push.apply(l,o),eK(n[1],r)&&l.push({index1:t,index2:-1,pos:n[1]})}),a.forEach(function(e,t){if(eK(e[1],n)){var r=!1,i=er(l,function(e){return e.index2===t?(r=!0,!1):!!r});-1===i&&(r=!1,i=er(l,function(e){var n=e.index1,i=e.index2;return -1===n&&i+1===t?(r=!0,!1):!!r})),-1===i?l.push({index1:-1,index2:t,pos:e[1]}):l.splice(i,0,{index1:-1,index2:t,pos:e[1]})}}),c=l.map(function(e){return e.pos}),u={},c.filter(function(e){var t=e[0]+"x"+e[1];return!u[t]&&(u[t]=!0,!0)}))),T=eU(_);return C&&T?Math.min(100,C/T*100):0},n.isInside=function(e,t){var n=this.state,r=n.target,i=n.pos1,a=n.pos2,o=n.pos3,s=n.pos4,l=n.targetClientRect;return!!r&&eK([e,t],eV([i,a,s,o],l))},n.updateRect=function(e,t,n){void 0===n&&(n=!0);var r=this.props,i=r.parentMoveable,a=this.state.target||this.props.target,o=this.getContainer(),s=i?i.props.rootContainer:r.rootContainer;this.updateState(tV(this.controlBox&&this.controlBox.getElement(),a,o,o,s||o),!i&&n)},n.isTargetChanged=function(e,t){var n=this.props,r=n.dragTarget||n.target,i=e.dragTarget||e.target,a=n.dragArea,o=e.dragArea;return!a&&i!==r||(t||a)&&o!==a},n.updateNativeEvents=function(e){var t=this,n=this.props.dragArea?this.areaElement:this.state.target,r=this.events,i=L(r);if(this.isTargetChanged(e))for(var a in r){var o=r[a];o&&o.destroy(),r[a]=null}if(n){var s=this.enabledAbles;i.forEach(function(e){var i=t3(s,[e]),a=i.length>0,o=r[e];a?(o||(o=new r1(n,t,e),r[e]=o),o.setAbles(i)):o&&(o.destroy(),r[e]=null)})}},n.updateEvent=function(e){var t=this.controlBox.getElement(),n=this.targetAbles.length,r=this.controlAbles.length,i=this.props,a=i.dragTarget||i.target,o=this.isTargetChanged(e,!0),s=!n&&this.targetGesto||o;s&&(tQ(this,"targetGesto"),this.updateState({gesto:null})),r||tQ(this,"controlGesto"),a&&n&&!this.targetGesto&&(this.targetGesto=rJ(this,a,"")),!this.controlGesto&&r&&(this.controlGesto=r0(this,t,"controlAbles","Control")),s&&this.unsetAbles()},n.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},n.updateTarget=function(e){this.updateRect(e,!0)},n.getRect=function(){var e=this.state,t=t$(this.state),n=t[0],r=t[1],i=t[2],a=t[3],o=tL(t),s=e.width,l=e.height,c=o.width,u=o.height,d=o.left,f=o.top,p=[e.left,e.top],g=ev(p,e.origin);return{width:c,height:u,left:d,top:f,pos1:n,pos2:r,pos3:i,pos4:a,offsetWidth:s,offsetHeight:l,beforeOrigin:ev(p,e.beforeOrigin),origin:g,transformOrigin:e.transformOrigin,rotation:this.getRotation()}},n.getManager=function(){return this},n.getRotation=function(){var e,t,n,r,i=this.state;return e=i.pos1,t=i.pos2,n=i.direction,r=H(e,t)/Math.PI*180,(r=n>=0?r:180-r)>=0?r:360+r},n.request=function(e,t,n){void 0===t&&(t={});var r=this.props,i=r.ables,a=r.groupable,o=i.filter(function(t){return t.name===e})[0];if(this.isDragging()||!o||!o.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,l=o.request(this),c=n||t.isInstant,u=l.isControl?"controlAbles":"targetAbles",d=(a?"Group":"")+(l.isControl?"Control":""),f={request:function(t){return rQ(s,u,"drag",d,"",th(th({},l.request(t)),{requestAble:e,isRequest:!0}),c),this},requestEnd:function(){return rQ(s,u,"drag",d,"End",th(th({},l.requestEnd()),{requestAble:e,isRequest:!0}),c),this}};return rQ(s,u,"drag",d,"Start",th(th({},l.requestStart(t)),{requestAble:e,isRequest:!0}),c),c?f.request(t).requestEnd():f},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var e=this.state,t=this.props,n=e.originalBeforeOrigin,r=e.transformOrigin,i=e.allMatrix,a=e.is3d,o=e.pos1,s=e.pos2,l=e.pos3,c=e.pos4,u=e.left,d=e.top,f=t.padding||{},p=f.left,g=void 0===p?0:p,h=f.top,m=void 0===h?0:h,v=f.bottom,b=void 0===v?0:v,E=f.right,y=void 0===E?0:E,w=a?4:3,x=t.groupable?n:ev(n,[u,d]);e.renderPoses=[ev(o,t7(i,[-g,-m],r,x,w)),ev(s,t7(i,[y,-m],r,x,w)),ev(l,t7(i,[-g,b],r,x,w)),ev(c,t7(i,[y,b],r,x,w))]},n.checkUpdate=function(){var e=this.props,t=e.target,n=e.container,r=e.parentMoveable,i=this.state,a=i.target,o=i.container;(a||t)&&(this.updateAbles(),t4(a,t)&&t4(o,n)||(this.updateState({target:t,container:n}),!r&&(n||this.controlBox)&&this.updateRect("End",!1,!1)))},n.triggerEvent=function(e,t){var n=this.props[e];return n&&n(t)},n.useCSS=function(e,t){var n=this.props.customStyledMap,r=e+t;return n[r]||(n[r]=tf(e,t)),n[r]},n.unsetAbles=function(){var e=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(e),!0)}).length&&this.forceUpdate()},n.updateAbles=function(e,t){void 0===e&&(e=this.props.ables),void 0===t&&(t="");var n=this.props,r=n.triggerAblesSimultaneously,i=e.filter(function(e){return e&&(e.always||n[e.name])}),a="drag"+t+"ControlStart",o=t3(i,["drag"+t+"Start","pinch"+t+"Start"],r),s=t3(i,[a],r);this.enabledAbles=i,this.targetAbles=o,this.controlAbles=s},n.updateState=function(e,t){if(t)this.setState(e);else{var n=this.state;for(var r in e)n[r]=e[r]}},n.getEnabledAbles=function(){var e=this.props;return e.ables.filter(function(t){return t&&e[t.name]})},n.renderAbles=function(){var e,t,n,r,i=this,a=this.props.triggerAblesSimultaneously,s={createElement:o.createElement};return(e=t3(this.getEnabledAbles(),["render"],a).map(function(e){return(0,e.render)(i,s)||[]}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e}),t=function(e){return e.key},n=[],r={},e.forEach(function(i,a){var o=t(i,a,e),s=r[o];s||(s=[],r[o]=s,n.push(s)),s.push(i)}),n).map(function(e){return e[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._renderLines=function(){var e=this.props,t=e.edge,n=e.zoom;if(e.hideDefaultLines)return[];var r=this.state.renderPoses,i={createElement:o.createElement};return[rf(i,t?"n":"",r[0],r[1],n,0),rf(i,t?"e":"",r[1],r[3],n,1),rf(i,t?"w":"",r[0],r[2],n,2),rf(i,t?"s":"",r[2],r[3],n,3)]},t.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},t}(o.PureComponent),r3={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(e,t){var n=e.props.targets||[];e.moveables=[];var r=e.state,i={left:r.left,top:r.top};return n.map(function(n,r){return t.createElement(r2,{key:"moveable"+r,ref:_(e,"moveables",r),target:n,origin:!1,cssStyled:e.props.cssStyled,customStyledMap:e.props.customStyledMap,parentMoveable:e,parentPosition:i})})}},r4=tv("clickable",{props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(e,t){var n,r;t.isRequest||(n=window,r=e.onPreventClick,n.addEventListener("click",r,!0))},dragControlStart:function(e,t){this.dragStart(e,t)},dragGroupStart:function(e,t){this.dragStart(e,t),t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){this.endEvent(e);var n=e.state.target,r=t.inputEvent,i=t.inputTarget;if(t.isDrag||this.unset(e),r&&i&&!t.isDrag&&!e.isMoveableElement(i)){var a=n.contains(i);t1(e,"onClick",tJ(e,t,{isDouble:t.isDouble,inputTarget:i,isTarget:n===i,containsTarget:a}))}},dragGroupEnd:function(e,t){this.endEvent(e);var n=t.inputEvent,r=t.inputTarget;if(n&&r&&!t.isDrag&&!e.isMoveableElement(r)&&t.datas.inputTarget!==r){var i=e.props.targets,a=i.indexOf(r),o=a>-1,s=!1;-1===a&&(s=(a=A(i,function(e){return e.contains(r)}))>-1),t1(e,"onClickGroup",tJ(e,t,{isDouble:t.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:o,containsTarget:s}))}},dragControlEnd:function(e){this.endEvent(e)},dragGroupControlEnd:function(e){this.endEvent(e)},endEvent:function(e){var t=this;requestAnimationFrame(function(){t.unset(e)})},unset:function(e){q(window,"click",e.onPreventClick,!0)}});function r5(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),th(th({},e),{datas:t})}var r6=tv("edgeDraggable",{dragControlCondition:function(e,t){if(!e.props.edgeDraggable||!t.inputEvent)return!1;var n=t.inputEvent.target;return V(n,tD("direction"))&&V(n,tD("line"))},dragControlStart:function(e,t){return ru.dragStart(e,r5(t))},dragControl:function(e,t){return ru.drag(e,r5(t))},dragControlEnd:function(e,t){return ru.dragEnd(e,r5(t))},dragGroupControlCondition:function(e,t){if(!e.props.edgeDraggable||!t.inputEvent)return!1;var n=t.inputEvent.target;return V(n,tD("direction"))&&V(n,tD("line"))},dragGroupControlStart:function(e,t){return ru.dragGroupStart(e,r5(t))},dragGroupControl:function(e,t){return ru.dragGroup(e,r5(t))},dragGroupControlEnd:function(e,t){return ru.dragGroupEnd(e,r5(t))},unset:function(e){e.state.dragInfo=null}}),r8={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},r7=[rZ,rM,{name:"snappable",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(e,t){var n,r,i,a,o,s=e.state,l=s.top,c=s.left,u=s.pos1,d=s.pos2,f=s.pos3,p=s.pos4,g=s.snapRenderInfo;if(!g||!nB(e,""))return[];s.guidelines=nL(e);var h=Math.min(u[0],d[0],f[0],p[0]),m=Math.min(u[1],d[1],f[1],p[1]),v=g.externalPoses||[],b=t$(e.state),E=[],y=[],w=[],x=[],S=[],_=tL(b),C=_.width,T=_.height,N=_.top,D=_.left,M=_.bottom,k=_.right,I={left:D,right:k,top:N,bottom:M,center:(D+k)/2,middle:(N+M)/2},O=v.length>0,R=O?tL(v):{};if(!g.request){if(g.direction&&S.push(function(e,t,n){var r=[];if(n[0]&&n[1])r=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(e){return ny(t,e)});else if(n[0]||n[1])e.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(e){return ny(t,e)}):(r=nE(t,n)).length>1&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var i=[t[0],t[1],t[3],t[2],t[0]],a=0;a<4;++a)r.push(i[a]),r.push([(i[a][0]+i[a+1][0])/2,(i[a][1]+i[a+1][1])/2]);return nj(e,r.map(function(e){return e[0]}),r.map(function(e){return e[1]}),1)}(e,b,g.direction)),g.snap){var P=tL(b);g.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),S.push(nW(e,P,1))}O&&(g.center&&(R.middle=(R.top+R.bottom)/2,R.center=(R.left+R.right)/2),S.push(nW(e,R,1))),S.forEach(function(e){var t=e.vertical.posInfos,n=e.horizontal.posInfos;E.push.apply(E,t.filter(function(e){return e.guidelineInfos.some(function(e){return!e.guideline.hide})}).map(function(e){return{type:"snap",pos:e.pos}})),y.push.apply(y,n.filter(function(e){return e.guidelineInfos.some(function(e){return!e.guideline.hide})}).map(function(e){return{type:"snap",pos:e.pos}})),w.push.apply(w,rl(t)),x.push.apply(x,rl(n))})}rc(e,[D,k],[N,M],E,y),O&&rc(e,[R.left,R.right],[R.top,R.bottom],E,y,g.externalBounds);var B=tm(w,x),z=B.filter(function(e){return e.element&&!e.gapRects}),A=B.filter(function(e){return e.gapRects});return t1(e,"onSnap",{guidelines:B.filter(function(e){return!e.element}),elements:z,gaps:A},!0),tm((n=[h,m],r=e.props.isDisplayInnerSnapDigit,i=[],["vertical","horizontal"].forEach(function(a){var o,s,l,c,u,d,f,p,g=z.filter(function(e){return e.type===a}),h=+("vertical"===a),m=+!h,v=(o=+("vertical"!==a),s=+("vertical"===a),c=I[(l=o?nR:nP).start],u=I[l.end],(d=function(e){return e.pos[o]},f=[],p=[],g.forEach(function(e,t){var n=d(e,t,g),r=p.indexOf(n),i=f[r]||[];-1===r&&(p.push(n),f.push(i)),i.push(e)}),f).map(function(e){var t=[],n=[];return e.forEach(function(e){var i,d,f=e.element,p=e.elementRect.rect;if(p[l.end]<c)t.push(e);else if(u<p[l.start])n.push(e);else if(p[l.start]<=c&&u<=p[l.end]&&r){var g=e.pos,h={element:f,rect:th(th({},p),((i={})[l.end]=p[l.start],i))},m={element:f,rect:th(th({},p),((d={})[l.start]=p[l.end],d))},v=[0,0],b=[0,0];v[o]=g[o],v[s]=g[s],b[o]=g[o],b[s]=g[s]+e.size,t.push({type:a,pos:v,size:0,elementRect:h}),n.push({type:a,pos:b,size:0,elementRect:m})}}),t.sort(function(e,t){return t.pos[s]-e.pos[s]}),n.sort(function(e,t){return e.pos[s]-t.pos[s]}),{total:e,start:t,end:n,inner:[]}})),b=h?nP:nR,E=h?nR:nP,y=I[b.start],w=I[b.end];v.forEach(function(r){var o=r.total,s=r.start,l=r.end,c=r.inner,u=n[m]+o[0].pos[m]-I[E.start],d=I;s.forEach(function(r){var o=r.elementRect.rect,s=d[b.start]-o[b.end];if(s>0){var l=[0,0];l[h]=n[h]+d[b.start]-y-s,l[m]=u,i.push(n7(e,a,"dashed",i.length,s,l,r.className,t))}d=o}),d=I,l.forEach(function(r){var o=r.elementRect.rect,s=o[b.start]-d[b.end];if(s>0){var l=[0,0];l[h]=n[h]+d[b.end]-y,l[m]=u,i.push(n7(e,a,"dashed",i.length,s,l,r.className,t))}d=o}),c.forEach(function(r){var o=r.elementRect.rect,s=y-o[b.start],l=o[b.end]-w,c=[0,0],d=[0,0];c[h]=n[h]-s,c[m]=u,d[h]=n[h]+w-y,d[m]=u,i.push(n7(e,a,"dashed",i.length,s,c,r.className,t)),i.push(n7(e,a,"dashed",i.length,l,d,r.className,t))})})}),i),(a=[h,m],o=[],["horizontal","vertical"].forEach(function(n){var r=A.filter(function(e){return e.type===n}),i=+("vertical"!==n),s=+!i,l=i?nP:nR,c=i?nR:nP,u=I[l.start],d=I[l.end],f=I[c.start],p=I[c.end];r.forEach(function(n){var r=n.gap,g=n.gapRects,h=n.className,m=Math.max.apply(Math,tm([f],g.map(function(e){return e.rect[c.start]}))),v=Math.min.apply(Math,tm([p],g.map(function(e){return e.rect[c.end]}))),b=(m+v)/2;m!==v&&b!==(f+p)/2&&g.forEach(function(n){var c=n.rect,p=[a[0],a[1]];if(c[l.end]<u)p[i]+=c[l.end]-u;else{if(!(d<c[l.start]))return;p[i]+=c[l.start]-u-r}p[s]+=b-f,o.push(n7(e,i?"vertical":"horizontal","gap",o.length,r,p,h,t))})})}),o),n8(e,"horizontal",x,[c,l],I,t),n8(e,"vertical",w,[c,l],I,t),n6(e,"horizontal",y,h,l,C,0,t),n6(e,"vertical",E,m,c,T,1,t))},dragStart:function(e,t){e.state.snapRenderInfo={request:t.isRequest,snap:!0,center:!0},ri(e)},drag:function(e){e.state.guidelines=nL(e)},pinchStart:function(e){this.unset(e)},dragEnd:function(e){this.unset(e)},dragControlCondition:function(e,t){return!(!nt(0,t)&&!rb(e,t))||(!t.isRequest&&t.inputEvent?V(t.inputEvent.target,tD("snap-control")):void 0)},dragControlStart:function(e){e.state.snapRenderInfo=null,ri(e)},dragControl:function(e){this.drag(e)},dragControlEnd:function(e){this.unset(e)},dragGroupStart:function(e,t){this.dragStart(e,t)},dragGroup:function(e){this.drag(e)},dragGroupEnd:function(e){this.unset(e)},dragGroupControlStart:function(e){e.state.snapRenderInfo=null,ri(e)},dragGroupControl:function(e){this.drag(e)},dragGroupControlEnd:function(e){this.unset(e)},unset:function(e){var t=e.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}},na,ru,r6,{name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(e,t){var n=e.props,r=n.rotatable,i=n.rotationPosition,a=n.zoom,o=n.renderDirections,s=e.state,l=s.renderPoses,c=s.direction;if(!r)return null;var u=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];if("none"!==e){var s=(e||"top").split("-"),l=s[0],c=s[1],u=[r,i];"left"===l?u=[a,r]:"right"===l?u=[i,o]:"bottom"===l&&(u=[o,a]);var d=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2],f=tU(u,n);if(c){var p="top"===c||"left"===c,g="bottom"===l||"left"===l;d=u[p&&!g||!p&&g?0:1]}return[d,f]}}(i,l,c),d=[];if(u){var f=u[0],p=u[1];d.push(t.createElement("div",{key:"rotation",className:tD("rotation"),style:{transform:"translate(-50%) translate("+f[0]+"px, "+f[1]+"px) rotate("+p+"rad)"}},t.createElement("div",{className:tD("line rotation-line"),style:{transform:"scaleX("+a+")"}}),t.createElement("div",{className:tD("control rotation-control"),style:{transform:"translate(0.5px) scale("+a+")"}})))}return o&&d.push.apply(d,rd(e,[],t)),d},dragControlCondition:rb,dragControlStart:function(e,t){var n=t.datas,r=t.clientX,i=t.clientY,a=t.parentRotate,o=t.parentFlag,s=t.isPinch,l=t.isRequest,c=e.state,u=c.target,d=c.left,f=c.top,p=c.origin,g=c.beforeOrigin,h=c.direction,m=c.beforeDirection,v=c.targetTransform,b=c.moveableClientRect;if(!l&&!u)return!1;var E=e.getRect();if(n.rect=E,n.transform=v,n.left=d,n.top=f,n.fixedPosition=nM(e,nD(e)),n.absoluteInfo={origin:E.origin,startValue:E.rotation},rg(e,n.absoluteInfo,r,i,p,b),l||s||o){var y=a||0;n.beforeInfo={origin:E.beforeOrigin,prevDeg:y,startDeg:y,prevSnapDeg:y,loop:0},n.afterInfo={origin:E.origin,prevDeg:y,startDeg:y,prevSnapDeg:y,loop:0}}else n.beforeInfo={origin:E.beforeOrigin},n.afterInfo={origin:E.origin},rg(e,n.beforeInfo,r,i,g,b),rg(e,n.afterInfo,r,i,p,b);n.direction=h,n.beforeDirection=m,n.startValue=0,n.datas={},nS(t,"rotate");var w=tJ(e,t,th(th({set:function(e){n.startValue=e*Math.PI/180}},nx(t)),{dragStart:ru.dragStart(e,new ns().dragStart([0,0],t))}));return n.isRotate=!1!==t1(e,"onRotateStart",w),e.state.snapRenderInfo={request:t.isRequest},!!n.isRotate&&w},dragControl:function(e,t){var n=t.datas,r=t.clientX,i=t.clientY,a=t.parentRotate,o=t.parentFlag,s=t.isPinch,l=t.groupDelta,c=n.beforeDirection,u=n.beforeInfo,d=n.afterInfo,f=n.absoluteInfo,p=n.isRotate,g=n.startValue,h=n.rect;if(p){np(t,"rotate");var m,v,b,E,y,w,x,S,_,C,T,N,D,M,k,I,O,R,P=c*tj(t.datas.beforeTransform,[50,50],100,100).direction,B=e.props,z=B.throttleRotate,A=void 0===z?0:z,G=B.parentMoveable,L=180/Math.PI*g,j=f.startValue;if(!o&&"parentDist"in t){var F=t.parentDist;C=(m=rh(e,h,d,F,0,L))[0],T=m[1],N=m[2],D=(v=rh(e,h,u,F,0,L))[0],M=v[1],k=v[2],I=(b=rh(e,h,f,F,0,j))[0],O=b[1],R=b[2]}else s||o?(C=(E=rm(e,h,d,a,P,L,A))[0],T=E[1],N=E[2],D=(y=rm(e,h,u,a,c,L,A))[0],M=y[1],k=y[2],I=(w=rm(e,h,f,a,P,j,A))[0],O=w[1],R=w[2]):(C=(x=rv(e,h,d,P,r,i,L,A))[0],T=x[1],N=x[2],D=(S=rv(e,h,u,c,r,i,L,A))[0],M=S[1],k=S[2],I=(_=rv(e,h,f,P,r,i,j,A))[0],O=_[1],R=_[2]);if(I||C||D||G){var W,H,Y=ng(n,"rotate("+N+"deg)","rotate("+T+"deg)"),X=(W=T,H=n.fixedPosition,nN(e,"rotate("+W+"deg)",nD(e),H,n)),U=eb(ev(l||[0,0],X),n.prevInverseDist||[0,0]);n.prevInverseDist=X;var V=tJ(e,t,th({delta:C,dist:T,rotate:N,beforeDist:M,beforeDelta:D,beforeRotate:k,absoluteDist:O,absoluteDelta:I,absoluteRotate:R,isPinch:!!s},nT(e,Y,U,s,t)));return t1(e,"onRotate",V),V}}},dragControlEnd:function(e,t){var n=t.datas,r=t.isDrag;return!!n.isRotate&&(n.isRotate=!1,t1(e,"onRotateEnd",t0(e,t,{})),r)},dragGroupControlCondition:rb,dragGroupControlStart:function(e,t){var n=t.datas,r=e.state,i=r.left,a=r.top,o=r.beforeOrigin,s=this.dragControlStart(e,t);if(!s)return!1;s.set(n.beforeDirection*e.rotation);var l=nu(e,this,"dragControlStart",t,function(e,t){var n=e.state,r=n.left,s=n.top,l=n.beforeOrigin,c=ev(eb([r,s],[i,a]),eb(l,o));return t.datas.groupClient=c,th(th({},t),{parentRotate:0})});return n.isRotate=!1!==t1(e,"onRotateGroupStart",th(th({},s),{targets:e.props.targets,events:l})),!!n.isRotate&&s},dragGroupControl:function(e,t){var n=t.datas;if(n.isRotate){var r=this.dragControl(e,t);if(r){var i=n.beforeDirection,a=r.beforeDist,o=r.beforeDelta/180*Math.PI,s=nu(e,this,"dragControl",t,function(e,t){var n=t.datas.groupClient,r=n[0],s=n[1],l=eC([r,s],o*i),c=l[0],u=l[1];return t.datas.groupClient=[c,u],th(th({},t),{parentRotate:a,groupDelta:[c-r,u-s]})});e.rotation=i*r.beforeRotate;var l=th({targets:e.props.targets,events:s,set:function(t){e.rotation=t}},r);return t1(e,"onRotateGroup",l),l}}},dragGroupControlEnd:function(e,t){var n=t.isDrag;if(t.datas.isRotate)return this.dragControlEnd(e,t),nu(e,this,"dragControlEnd",t),t1(e,"onRotateGroupEnd",t0(e,t,{targets:e.props.targets})),n},request:function(e){var t={},n=0,r=e.getRotation();return{isControl:!0,requestStart:function(){return{datas:t}},request:function(e){return"deltaRotate"in e?n+=e.deltaRotate:"rotate"in e&&(n=e.rotate-r),{datas:t,parentDist:n}},requestEnd:function(){return{datas:t,isDrag:!0}}}}},{name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(e,t){var n=e.props,r=n.resizable,i=n.edge;if(r)return i?rp(e,t):rd(e,t_,t)},dragControlCondition:nt,dragControlStart:function(e,t){var n,r,i=t.inputEvent,a=t.isPinch,o=t.parentDirection,s=t.datas,l=t.parentFlag,c=o||(a?[0,0]:tK(i.target)),u=e.state,d=u.target,f=u.width,p=u.height;if(!c||!d)return!1;a||nf(e,t),s.datas={},s.direction=c,s.startOffsetWidth=f,s.startOffsetHeight=p,s.prevWidth=0,s.prevHeight=0,s.startWidth=(r=[parseFloat((n=t2(d)).width),parseFloat(n.height)])[0],s.startHeight=r[1];var g=[Math.max(0,f-s.startWidth),Math.max(0,p-s.startHeight)];if(s.minSize=g,s.maxSize=[1/0,1/0],!l){var h=t2(d),m=h.position,v=h.minWidth,b=h.minHeight,E=h.maxWidth,y=h.maxHeight,w="static"===m||"relative"===m,x=w?d.parentElement:d.offsetParent,S=f,_=p;if(x&&(S=x.clientWidth,_=x.clientHeight,w)){var C=t2(x);S-=parseFloat(C.paddingLeft)||0,_-=parseFloat(C.paddingTop)||0}s.minSize=ev([j(v,S)||0,j(b,_)||0],g),s.maxSize=ev([j(E,S)||1/0,j(y,_)||1/0],g)}var T=e.props.transformOrigin||"% %";function N(e){s.ratio=e&&isFinite(e)?e:0}function D(t){s.fixedDirection=t,s.fixedPosition=nk(e,t)}s.transformOrigin=T&&k(T)?T.split(" "):T,s.isWidth=!c[0]&&!c[1]||c[0]||!c[1],N(f/p),D([-c[0],-c[1]]);var M=tJ(e,t,{direction:c,set:function(e){var t=e[0],n=e[1];s.startWidth=t,s.startHeight=n},setMin:function(e){s.minSize=e},setMax:function(e){s.maxSize=[e[0]||1/0,e[1]||1/0]},setRatio:N,setFixedDirection:D,setOrigin:function(e){s.transformOrigin=e},dragStart:ru.dragStart(e,new ns().dragStart([0,0],t))});return!1!==t1(e,"onResizeStart",M)&&(s.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:c}),!!s.isResize&&M},dragControl:function(e,t){var n,r=t.datas,i=t.distX,a=t.distY,o=t.parentFlag,s=t.isPinch,l=t.parentDistance,c=t.parentScale,u=t.parentKeepRatio,d=t.dragClient,f=t.parentDist,p=t.isRequest,g=r.isResize,h=r.transformOrigin,m=r.fixedDirection,v=r.startWidth,b=r.startHeight,E=r.prevWidth,y=r.prevHeight,w=r.minSize,x=r.maxSize,S=r.ratio,_=r.isWidth,C=r.startOffsetWidth,T=r.startOffsetHeight;if(g){var N,D,M,k,I,O,R,P,B,A,G,L,j,W,Y,U,V,q,K,Z=e.props,$=Z.throttleResize,Q=void 0===$?0:$,J=Z.parentMoveable,ee=Z.snapThreshold,et=void 0===ee?5:ee,en=r.direction,er=en,ei=0,ea=0;en[0]||en[1]||(er=[1,1]);var eo=S&&(e.props.keepRatio||u),es=d;if(d||(es=!o&&s?nk(e,[0,0]):r.fixedPosition),f)ei=f[0],ea=f[1],eo&&(ei?ea||(ea=ei/S):ei=ea*S);else if(c)ei=(c[0]-1)*C,ea=(c[1]-1)*T;else if(s)l&&(ei=l,ea=l*T/C);else{var el=nv({datas:r,distX:i,distY:a});if(ei=er[0]*el[0],ea=er[1]*el[1],eo&&C&&T){var ec=Math.cos(H([0,0],el)-H([0,0],er))*tF([ei,ea]);if(er[0])if(er[1]){var eu=2*er[0]*C,ed=2*er[1]*T,ef=tF([eu+el[0],ed+el[1]])-tF([eu,ed]),ep=H([0,0],[S,1]);ei=Math.cos(ep)*ef,ea=Math.sin(ep)*ef}else ea=(ei=ec)*S;else ei=(ea=ec)/S}else if(!eo){var eg=tm(en);!C&&(el[0]<0?eg[0]=-1:el[0]>0&&(eg[0]=1)),!T&&(el[1]<0?eg[1]=-1:el[1]>0&&(eg[1]=1)),en=eg,ei=(er=eg)[0]*el[0],ea=er[1]*el[1]}}var eh=er[0]||eo?Math.max(C+ei,1e-7):C,em=er[1]||eo?Math.max(T+ea,1e-7):T;eo&&C&&T&&(_?em=eh/S:eh=em*S);var ev=[0,0];if(s||(ev=function(e,t,n,r,i,a,o){if(!nB(e,"resizable"))return[0,0];var s=e.state,l=s.allMatrix,c=s.is3d;return ro(e,function(e,a){return ra(l,t+e,n+a,i,r,c)},t,n,r,i,a,o)}(e,eh,em,en,es,p,r)),f&&(f[0]||(ev[0]=0),f[1]||(ev[1]=0)),eo){er[0]&&er[1]&&ev[0]&&ev[1]&&(Math.abs(ev[0])>Math.abs(ev[1])?ev[1]=0:ev[0]=0);var eE=!ev[0]&&!ev[1];eE&&(_?eh=X(eh,Q):em=X(em,Q)),er[0]&&!er[1]||ev[0]&&!ev[1]||eE&&_?em=(eh+=ev[0])/S:(!er[0]&&er[1]||!ev[0]&&ev[1]||eE&&!_)&&(eh=(em+=ev[1])*S)}else C+ei<-et&&(ev[0]=0),C+ea<-et&&(ev[1]=0),eh+=ev[0],em+=ev[1],ev[0]||(eh=X(eh,Q)),ev[1]||(em=X(em,Q));eh=(n=function(e,t,n,r){if(!r)return e.map(function(e,r){return Math.max(t[r],Math.min(e,n[r]))});var i=e[0],a=e[1],o=F(e,t,!1),s=o[0],l=o[1],c=F(e,n,!0),u=c[0],d=c[1];return i<s||a<l?(i=s,a=l):(i>u||a>d)&&(i=u,a=d),[i,a]}([eh,em],w,x,eo))[0],em=n[1];var ey=[(ei=(eh=Math.round(eh))-C)-E,(ea=(em=Math.round(em))-T)-y];r.prevWidth=ei,r.prevHeight=ea;var ew=(N=eh,D=em,M=es,k=e.props.groupable,O=(I=e.state).transformOrigin,R=I.targetMatrix,P=I.offsetMatrix,B=I.is3d,A=I.width,G=I.height,L=I.left,j=I.top,W=B?4:3,eb((q=nw(P,R,(Y=A,U=G,V=O,void 0===Y&&(Y=N),void 0===U&&(U=D),void 0===V&&(V=[0,0]),h?h.map(function(e,t){var n=z(e),r=n.value,i=n.unit,a=t?U:Y,o=t?D:N;return"%"===e||isNaN(r)?o*(a?V[t]/a:0):"%"!==i?r:o*r/100}):V),W),K=ny(tG(q,N,D,W),m),[M[0]-K[0],M[1]-K[1]]),[k?L:0,k?j:0]));if(J||!ey.every(function(e){return!e})||!ew.every(function(e){return!e})){var ex=tJ(e,t,{width:v+ei,height:b+ea,offsetWidth:eh,offsetHeight:em,direction:en,dist:[ei,ea],delta:ey,isPinch:!!s,drag:ru.drag(e,no(t,e.state,ew,!!s,!1))});return t1(e,"onResize",ex),ex}}},dragControlAfter:function(e,t){var n=t.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,o=n.prevWidth,s=n.prevHeight;if(r){var l=e.state,c=l.width-(i+o),u=l.height-(a+s),d=Math.abs(c)>3,f=Math.abs(u)>3;return d&&(n.startWidth+=c,n.startOffsetWidth+=c,n.prevWidth+=c),f&&(n.startHeight+=u,n.startOffsetHeight+=u,n.prevHeight+=u),d||f?(this.dragControl(e,t),!0):void 0}},dragControlEnd:function(e,t){var n=t.datas,r=t.isDrag;return!!n.isResize&&(n.isResize=!1,t1(e,"onResizeEnd",t0(e,t,{})),r)},dragGroupControlCondition:nt,dragGroupControlStart:function(e,t){var n=t.datas,r=this.dragControlStart(e,t);if(!r)return!1;var i=nl(e,"resizable",t);function a(t,r){var i=n.fixedDirection,a=n.fixedPosition,o=nk(t,i),s=ey(eD(-e.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),l=s[0],c=s[1];return r.datas.originalX=l,r.datas.originalY=c,r}var o=nu(e,this,"dragControlStart",t,function(e,t){return a(e,t)}),s=th(th({},r),{targets:e.props.targets,events:o,setFixedDirection:function(t){r.setFixedDirection(t),o.forEach(function(n,r){n.setFixedDirection(t),a(e.moveables[r],i[r])})}});return n.isResize=!1!==t1(e,"onResizeGroupStart",s),!!n.isResize&&r},dragGroupControl:function(e,t){var n=t.datas;if(n.isResize){var r=this.dragControl(e,t);if(r){var i=r.offsetWidth,a=r.offsetHeight,o=r.dist,s=e.props.keepRatio,l=[i/(i-o[0]),a/(a-o[1])],c=n.fixedPosition,u=nu(e,this,"dragControl",t,function(t,n){var r=ey(eD(e.rotation/180*Math.PI,3),[n.datas.originalX*l[0],n.datas.originalY*l[1],1],3),i=r[0],a=r[1];return th(th({},n),{parentDist:null,parentScale:l,dragClient:ev(c,[i,a]),parentKeepRatio:s})}),d=th({targets:e.props.targets,events:u},r);return t1(e,"onResizeGroup",d),d}}},dragGroupControlEnd:function(e,t){var n=t.isDrag;if(t.datas.isResize)return this.dragControlEnd(e,t),nu(e,this,"dragControlEnd",t),t1(e,"onResizeGroupEnd",t0(e,t,{targets:e.props.targets})),n},request:function(e){var t={},n=0,r=0,i=e.getRect();return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(e){return"offsetWidth"in e?n=e.offsetWidth-i.offsetWidth:"deltaWidth"in e&&(n+=e.deltaWidth),"offsetHeight"in e?r=e.offsetHeight-i.offsetHeight:"deltaHeight"in e&&(r+=e.deltaHeight),{datas:t,parentDist:[n,r]}},requestEnd:function(){return{datas:t,isDrag:!0}}}}},{name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(e,t){var n=e.props,r=n.resizable,i=n.scalable,a=n.edge;if(!r&&i)return a?rp(e,t):rd(e,t_,t)},dragControlCondition:nt,dragControlStart:function(e,t){var n=t.datas,r=t.isPinch,i=t.inputEvent,a=t.parentDirection||(r?[0,0]:tK(i.target)),o=e.state,s=o.width,l=o.height,c=o.targetTransform,u=o.target,d=o.pos1,f=o.pos2,p=o.pos4;if(!a||!u)return!1;r||nf(e,t),n.datas={},n.transform=c,n.prevDist=[1,1],n.direction=a,n.width=s,n.height=l,n.startValue=[1,1];var g=Y(d,f),h=Y(f,p),m=!a[0]&&!a[1]||a[0]||!a[1];function v(e){n.ratio=e&&isFinite(e)?e:0}function b(t){n.fixedDirection=t,n.fixedPosition=nk(e,t)}n.scaleWidth=g,n.scaleHeight=h,n.scaleXRatio=g/s,n.scaleYRatio=h/l,nS(t,"scale"),n.isWidth=m,v(Y(d,f)/Y(f,p)),b([-a[0],-a[1]]);var E=tJ(e,t,th(th({direction:a,set:function(e){n.startValue=e},setRatio:v,setFixedDirection:b},nx(t)),{dragStart:ru.dragStart(e,new ns().dragStart([0,0],t))}));return!1!==t1(e,"onScaleStart",E)&&(n.isScale=!0,e.state.snapRenderInfo={request:t.isRequest,direction:a}),!!n.isScale&&E},dragControl:function(e,t){np(t,"scale");var n,r=t.datas,i=t.distX,a=t.distY,o=t.parentScale,s=t.parentDistance,l=t.parentKeepRatio,c=t.parentFlag,u=t.isPinch,d=t.dragClient,f=t.parentDist,p=t.isRequest,g=r.prevDist,h=r.direction,m=r.width,v=r.height,b=r.isScale,E=r.startValue,y=r.isWidth,w=r.ratio,x=r.fixedDirection,S=r.scaleXRatio,_=r.scaleYRatio;if(!b)return!1;var C=e.props,T=C.throttleScale,N=C.parentMoveable,D=h;h[0]||h[1]||(D=[1,1]);var k=w&&(e.props.keepRatio||l),I=e.state,O=1,R=1,P=d;if(d||(P=!c&&u?nk(e,[0,0]):r.fixedPosition),f)O=(m+f[0])/m,R=(v+f[1])/v;else if(o)O=o[0],R=o[1];else if(u)s&&(O=(m+s)/m,R=(v+s*v/m)/v);else{var B=nv({datas:r,distX:i,distY:a}),z=D[0]*B[0]*S,A=D[1]*B[1]*_;if(k&&m&&v)if(D[0])if(D[1]){var G=tF([z,A]),L=Math.cos(H([0,0],B)-H([0,0],D))*G,j=H([0,0],[w,1]);z=Math.cos(j)*L,A=Math.sin(j)*L}else A=z/w;else z=A*w;O=(m+z/S)/m,R=(v+A/_)/v}O=D[0]||k?O*E[0]:E[0],R=D[1]||k?R*E[1]:E[1],0===O&&(O=1e-9*(g[0]>0?1:-1)),0===R&&(R=1e-9*(g[1]>0?1:-1));var F=[O/E[0],R/E[1]],W=[O,R];if(!u&&e.props.groupable){var Y=(I.snapRenderInfo||{}).direction;M(Y)&&(Y[0]||Y[1])&&(I.snapRenderInfo={direction:h,request:t.isRequest})}var U=[0,0];if(u||(U=function(e,t,n,r,i){var a=i.width,o=i.height,s=i.fixedPosition;if(!nB(e,"scalable"))return[0,0];var l=i.is3d,c=ro(e,function(e,r){var c,u,d,f;return ra((c=ev(t,[e/a,r/o]),u=i.transformOrigin,d=i.offsetMatrix,f=i.is3d?4:3,nw(d,em(i.targetMatrix,ek(c,f),f),u,f)),a,o,s,n,l)},a,o,n,s,r,i);return[c[0]/a,c[1]/o]}(e,F,h,p,r)),k){D[0]&&D[1]&&U[0]&&U[1]&&(Math.abs(U[0]*m)>Math.abs(U[1]*v)?U[1]=0:U[0]=0);var V=!U[0]&&!U[1];if(V&&(y?F[0]=X(F[0]*E[0],T)/E[0]:F[1]=X(F[1]*E[1],T)/E[1]),D[0]&&!D[1]||U[0]&&!U[1]||V&&y){F[0]+=U[0];var q=m*F[0]*E[0]/w;F[1]=q/v/E[1]}else if(!D[0]&&D[1]||!U[0]&&U[1]||V&&!y){F[1]+=U[1];var K=v*F[1]*E[1]*w;F[0]=K/m/E[0]}}else F[0]+=U[0],F[1]+=U[1],U[0]||(F[0]=X(F[0]*E[0],T)/E[0]),U[1]||(F[1]=X(F[1]*E[1],T)/E[1]);0===F[0]&&(F[0]=1e-9*(g[0]>0?1:-1)),0===F[1]&&(F[1]=1e-9*(g[1]>0?1:-1));var Z=[F[0]/g[0],F[1]/g[1]];W=[F[0]*E[0],F[1]*E[1]];var $=(n=P,nN(e,"scale("+F.join(", ")+")",x,n,r)),Q=eb($,r.prevInverseDist||[0,0]);if(r.prevDist=F,r.prevInverseDist=$,O===g[0]&&R===g[1]&&Q.every(function(e){return!e})&&!N)return!1;var J=ng(r,"scale("+W.join(", ")+")","scale("+F.join(", ")+")"),ee=tJ(e,t,th({offsetWidth:m,offsetHeight:v,direction:h,scale:W,dist:F,delta:Z,isPinch:!!u},nT(e,J,Q,u,t)));return t1(e,"onScale",ee),ee},dragControlEnd:function(e,t){var n=t.datas,r=t.isDrag;return!!n.isScale&&(n.isScale=!1,t1(e,"onScaleEnd",t0(e,t,{})),r)},dragGroupControlCondition:nt,dragGroupControlStart:function(e,t){var n=t.datas,r=this.dragControlStart(e,t);if(!r)return!1;var i=nl(e,"resizable",t);function a(t,r){var i=n.fixedDirection,a=n.fixedPosition,o=nk(t,i),s=ey(eD(-e.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),l=s[0],c=s[1];return r.datas.originalX=l,r.datas.originalY=c,r}n.moveableScale=e.scale;var o=nu(e,this,"dragControlStart",t,function(e,t){return a(e,t)}),s=th(th({},r),{targets:e.props.targets,events:o,setFixedDirection:function(t){r.setFixedDirection(t),o.forEach(function(n,r){n.setFixedDirection(t),a(e.moveables[r],i[r])})}});return n.isScale=!1!==t1(e,"onScaleGroupStart",s),!!n.isScale&&s},dragGroupControl:function(e,t){var n=t.datas;if(n.isScale){var r=this.dragControl(e,t);if(r){var i=n.moveableScale;e.scale=[r.scale[0]*i[0],r.scale[1]*i[1]];var a=e.props.keepRatio,o=r.dist,s=r.scale,l=n.fixedPosition,c=nu(e,this,"dragControl",t,function(t,n){var r=ey(eD(e.rotation/180*Math.PI,3),[n.datas.originalX*o[0],n.datas.originalY*o[1],1],3),i=r[0],c=r[1];return th(th({},n),{parentDist:null,parentScale:s,parentKeepRatio:a,dragClient:ev(l,[i,c])})}),u=th({targets:e.props.targets,events:c},r);return t1(e,"onScaleGroup",u),u}}},dragGroupControlEnd:function(e,t){var n=t.isDrag;if(t.datas.isScale)return this.dragControlEnd(e,t),nu(e,this,"dragControlEnd",t),t1(e,"onScaleGroupEnd",t0(e,t,{targets:e.props.targets})),n},request:function(){var e={},t=0,n=0;return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(r){return t+=r.deltaWidth,n+=r.deltaHeight,{datas:e,parentDist:[t,n]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},{name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(e,t){var n=e.props,r=n.resizable,i=n.scalable,a=n.warpable,o=n.zoom;if(r||i||!a)return[];var s=e.state,l=s.pos1,c=s.pos2,u=s.pos3,d=s.pos4,f=rE(l,c),p=rE(c,l),g=rE(l,u),h=rE(u,l),m=rE(u,d),v=rE(d,u),b=rE(c,d),E=rE(d,c);return tm([t.createElement("div",{className:tD("line"),key:"middeLine1",style:tH(f,m,o)}),t.createElement("div",{className:tD("line"),key:"middeLine2",style:tH(p,v,o)}),t.createElement("div",{className:tD("line"),key:"middeLine3",style:tH(g,b,o)}),t.createElement("div",{className:tD("line"),key:"middeLine4",style:tH(h,E,o)})],rd(e,t_,t))},dragControlCondition:function(e,t){return!t.isRequest&&V(t.inputEvent.target,tD("direction"))},dragControlStart:function(e,t){var n=t.datas,r=t.inputEvent,i=e.props.target,a=tK(r.target);if(!a||!i)return!1;var o=e.state,s=o.transformOrigin,l=o.is3d,c=o.targetTransform,u=o.targetMatrix,d=o.width,f=o.height,p=o.left,g=o.top;return n.datas={},n.targetTransform=c,n.warpTargetMatrix=l?u:eg(u,3,4),n.targetInverseMatrix=ed(ef(n.warpTargetMatrix,4),3,4),n.direction=a,n.left=p,n.top=g,n.poses=[[0,0],[d,0],[0,f],[d,f]].map(function(e){return eb(e,s)}),n.nextPoses=n.poses.map(function(e){var t=e[0],r=e[1];return ey(n.warpTargetMatrix,[t,r,0,1],4)}),n.startValue=eM(4),n.prevMatrix=eM(4),n.absolutePoses=t$(o),n.posIndexes=nb(a),nf(e,t),nS(t,"matrix3d"),o.snapRenderInfo={request:t.isRequest,direction:a},!1!==t1(e,"onWarpStart",tJ(e,t,th({set:function(e){n.startValue=e}},nx(t))))&&(n.isWarp=!0),n.isWarp},dragControl:function(e,t){var n=t.datas,r=t.isRequest,i=t.distX,a=t.distY,o=n.targetInverseMatrix,s=n.prevMatrix,l=n.isWarp,c=n.startValue,u=n.poses,d=n.posIndexes,f=n.absolutePoses;if(!l)return!1;if(np(t,"matrix3d"),nB(e,"warpable")){var p=d.map(function(e){return f[e]});p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var g=rt(e,r,{horizontal:p.map(function(e){return e[1]+a}),vertical:p.map(function(e){return e[0]+i})}),h=g.horizontal,m=g.vertical;a-=h.offset,i-=m.offset}var v=nv({datas:n,distX:i,distY:a},!0),b=n.nextPoses.slice();if(d.forEach(function(e){b[e]=ev(b[e],v)}),!tS.every(function(e){var t,n,r,i,a;return t=e.map(function(e){return u[e]}),n=e.map(function(e){return b[e]}),r=ry(t[0],t[1],t[2]),i=ry(n[0],n[1],n[2]),!(r>=(a=Math.PI)&&i<=a||r<=a&&i>=a)}))return!1;var E=eO(u[0],u[2],u[1],u[3],b[0],b[2],b[1],b[3]);if(!E.length)return!1;var y=nh(n,em(o,E,4),!0),w=em(ef(s,4),y,4);n.prevMatrix=y;var x=em(c,y,4),S=ng(n,"matrix3d("+x.join(", ")+")","matrix3d("+y.join(", ")+")");return nC(t,S),t1(e,"onWarp",tJ(e,t,{delta:w,matrix:x,dist:y,multiply:em,transform:S})),!0},dragControlEnd:function(e,t){var n=t.datas,r=t.isDrag;return!!n.isWarp&&(n.isWarp=!1,t1(e,"onWarpEnd",t0(e,t,{})),r)}},{name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(e,t){var n=e.props.scrollContainer,r=void 0===n?e.getContainer():n,i=new e4,a=nn(r,!0);t.datas.dragScroll=i;var o=t.isControl?"controlGesto":"targetGesto",s=t.targets;i.on("scroll",function(n){var r=tJ(e,t,{scrollContainer:n.container,direction:n.direction});s&&(r.targets=s),t1(e,s?"onScrollGroup":"onScroll",r)}).on("move",function(n){var r=n.offsetX,i=n.offsetY;e[o].scrollBy(r,i,t.inputEvent,!1)}),i.dragStart(t,{container:a})},checkScroll:function(e,t){var n=t.datas.dragScroll;if(n){var r=e.props,i=r.scrollContainer,a=void 0===i?e.getContainer():i,o=r.scrollThreshold,s=r.getScrollPosition,l=void 0===s?rD:s;return n.drag(t,{container:a,threshold:void 0===o?0:o,getScrollPosition:function(e){return l({scrollContainer:e.container,direction:e.direction})}}),!0}},drag:function(e,t){return this.checkScroll(e,t)},dragEnd:function(e,t){t.datas.dragScroll.dragEnd(),t.datas.dragScroll=null},dragControlStart:function(e,t){return this.dragStart(e,th(th({},t),{isControl:!0}))},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupStart:function(e,t){return this.dragStart(e,th(th({},t),{targets:e.props.targets}))},dragGroup:function(e,t){return this.drag(e,th(th({},t),{targets:e.props.targets}))},dragGroupEnd:function(e,t){return this.dragEnd(e,th(th({},t),{targets:e.props.targets}))},dragGroupControlStart:function(e,t){return this.dragStart(e,th(th({},t),{targets:e.props.targets,isControl:!0}))},dragGroupContro:function(e,t){return this.drag(e,th(th({},t),{targets:e.props.targets}))},dragGroupControEnd:function(e,t){return this.dragEnd(e,th(th({},t),{targets:e.props.targets}))}},rk,rN,{name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(e,t){return t.isRequest?"originDraggable"===t.requestAble:V(t.inputEvent.target,tD("origin"))},dragControlStart:function(e,t){var n=t.datas;nf(e,t);var r=tJ(e,t,{dragStart:ru.dragStart(e,new ns().dragStart([0,0],t))}),i=t1(e,"onDragOriginStart",r);return n.startOrigin=e.state.transformOrigin,n.startTargetOrigin=e.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,!1===i?(n.isDragOrigin=!1,!1):r},dragControl:function(e,t){var n=t.datas,r=t.isPinch,i=t.isRequest;if(!n.isDragOrigin)return!1;var a=nv(t),o=a[0],s=a[1],l=e.state,c=l.width,u=l.height,d=l.offsetMatrix,f=l.targetMatrix,p=l.is3d,g=e.props.originRelative,h=void 0===g||g,m=p?4:3,v=[o,s];if(i){var b=t.distOrigin;(b[0]||b[1])&&(v=b)}var E=ev(n.startOrigin,v),y=ev(n.startTargetOrigin,v),w=eb(v,n.prevOrigin),x=nw(d,f,E,m),S=e.getRect(),_=tL(tG(x,c,u,m)),C=[S.left-_.left,S.top-_.top];n.prevOrigin=v;var T=tJ(e,t,{width:c,height:u,origin:E,dist:v,delta:w,transformOrigin:[t9(y[0],c,h),t9(y[1],u,h)].join(" "),drag:ru.drag(e,no(t,e.state,C,!!r,!1))});return t1(e,"onDragOrigin",T),T},dragControlEnd:function(e,t){return!!t.datas.isDragOrigin&&(t1(e,"onDragOriginEnd",t0(e,t,{})),!0)},dragGroupControlCondition:function(e,t){return this.dragControlCondition(e,t)},dragGroupControlStart:function(e,t){return!!this.dragControlStart(e,t)},dragGroupControl:function(e,t){var n=this.dragControl(e,t);return!!n&&(e.transformOrigin=n.transformOrigin,!0)},request:function(e){var t={},n=e.getRect(),r=0,i=0,a=n.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:t}},request:function(e){return"deltaOrigin"in e?(o[0]+=e.deltaOrigin[0],o[1]+=e.deltaOrigin[1]):"origin"in e?(o[0]=e.origin[0]-a[0],o[1]=e.origin[1]-a[1]):("x"in e?r=e.x-n.left:"deltaX"in e&&(r+=e.deltaX),"y"in e?i=e.y-n.top:"deltaY"in e&&(i+=e.deltaY)),{datas:t,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:t,isDrag:!0}}}}},{name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(e,t){var n=e.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,o=n.zoom,s=e.state,l=s.target,c=s.width,u=s.height,d=s.allMatrix,f=s.is3d,p=s.left,g=s.top,h=s.pos1,m=s.pos2,v=s.pos3,b=s.pos4,E=s.clipPathState,y=s.snapBoundInfos;if(!l)return[];var w=rV(l,c,u,i||"inset",E||r);if(!w)return[];var x=f?4:3,S=w.type,_=w.poses.map(function(e){var t=tA(d,e.pos,x);return[t[0]-p,t[1]-g]}),C=[],T=[],N="rect"===S,D="inset"===S,M="polygon"===S;if(N||D||M){var k=D?_.slice(0,8):_;T=k.map(function(e,n){var r=0===n?k[k.length-1]:k[n-1],i=H(r,e),a=tW(r,e);return t.createElement("div",{key:"clipLine"+n,className:tD("line","clip-line","snap-control"),"data-clip-index":n,style:{width:a+"px",transform:"translate("+r[0]+"px, "+r[1]+"px) rotate("+i+"rad) scaleY("+o+")"}})})}if(C=_.map(function(e,n){return t.createElement("div",{key:"clipControl"+n,className:tD("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate("+e[0]+"px, "+e[1]+"px) scale("+o+")"}})}),D&&C.push.apply(C,_.slice(8).map(function(e,n){return t.createElement("div",{key:"clipRadiusControl"+n,className:tD("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate("+e[0]+"px, "+e[1]+"px) scale("+o+")"}})})),"circle"===S||"ellipse"===S){var I=w.left,O=w.top,R=w.radiusX,P=w.radiusY,B=eb(tA(d,[I,O],x),tA(d,[0,0],x)),z=B[0],A=B[1],G="none";if(!a){for(var L=Math.max(10,R/5,P/5),j=[],F=0;F<=L;++F){var W=2*Math.PI/L*F;j.push([R+(R-o)*Math.cos(W),P+(P-o)*Math.sin(W)])}j.push([R,-2]),j.push([-2,-2]),j.push([-2,2*P+2]),j.push([2*R+2,2*P+2]),j.push([2*R+2,-2]),j.push([R,-2]),G="polygon("+j.map(function(e){return e[0]+"px "+e[1]+"px"}).join(", ")+")"}C.push(t.createElement("div",{key:"clipEllipse",className:tD("clip-ellipse","snap-control"),style:{width:2*R+"px",height:2*P+"px",clipPath:G,transform:"translate("+(-p+z)+"px, "+(-g+A)+"px) "+tB(d)}}))}if(a){var Y=tL(tm([h,m,v,b],_)),X=Y.width,U=Y.height,V=Y.left,q=Y.top;(M||N||D)&&(j=D?_.slice(0,8):_,C.push(t.createElement("div",{key:"clipArea",className:tD("clip-area","snap-control"),style:{width:X+"px",height:U+"px",transform:"translate("+V+"px, "+q+"px)",clipPath:"polygon("+j.map(function(e){return e[0]-V+"px "+(e[1]-q)+"px"}).join(", ")+")"}})))}return y&&["vertical","horizontal"].forEach(function(e){var n=y[e],r="horizontal"===e;n.isSnap&&T.push.apply(T,n.snap.posInfos.map(function(n,i){var a=n.pos;return rf(t,"",eb(tA(d,r?[0,a]:[a,0],x),[p,g]),eb(tA(d,r?[c,a]:[a,u],x),[p,g]),o,"clip"+e+"snap"+i,"guideline")})),n.isBound&&T.push.apply(T,n.bounds.map(function(n,i){var a=n.pos;return rf(t,"",eb(tA(d,r?[0,a]:[a,0],x),[p,g]),eb(tA(d,r?[c,a]:[a,u],x),[p,g]),o,"clip"+e+"bounds"+i,"guideline","bounds","bold")}))}),tm(C,T)},dragControlCondition:function(e,t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(e,t){var n=e.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(e,t)},drag:function(e,t){return this.dragControl(e,t)},dragEnd:function(e,t){return this.dragControlEnd(e,t)},dragControlStart:function(e,t){var n=e.state,r=e.props,i=r.defaultClipPath,a=r.customClipPath,o=n.target,s=n.width,l=n.height,c=t.inputEvent?t.inputEvent.target:null,u=c?c.getAttribute("class"):"",d=t.datas,f=rV(o,s,l,i||"inset",a);if(!f)return!1;var p=f.clipText;return!1===t1(e,"onClipStart",tJ(e,t,{clipType:f.type,clipStyle:p,poses:f.poses.map(function(e){return e.pos})}))?(d.isClipStart=!1,!1):(d.isControl=u.indexOf("clip-control")>-1,d.isLine=u.indexOf("clip-line")>-1,d.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,d.index=c?parseInt(c.getAttribute("data-clip-index"),10):-1,d.clipPath=f,d.isClipStart=!0,n.clipPathState=p,nf(e,t),!0)},dragControl:function(e,t){var n=t.datas,r=t.originalDatas;if(!n.isClipStart)return!1;var i=r&&r.draggable||{},a=n.isControl,o=n.isLine,s=n.isArea,l=n.index,c=n.clipPath;if(!c)return!1;var u=i.isDrag?i.prevDist:nv(t),d=u[0],f=u[1],p=e.props,g=e.state,h=g.width,m=g.height,v=c.type,b=c.poses,E=c.splitter,y=b.map(function(e){return e.pos});s||a||o||(d=-d,f=-f);var w=!a||"nesw"===b[l].direction,x="inset"===v||"rect"===v,S=b.map(function(){return[0,0]});if(a&&!w){var _=b[l],C=_.horizontal,T=_.vertical;S=function(e,t,n,r){var i=e[t],a=i.direction,o=i.sub,s=e.map(function(){return[0,0]}),l=a?a.split(""):[];if(r&&t<8){var c=l.filter(function(e){return"w"===e||"e"===e})[0],u=l.filter(function(e){return"n"===e||"s"===e})[0];s[t]=n,e.forEach(function(e,t){var r=e.direction;r&&(r.indexOf(c)>-1&&(s[t][0]=n[0]),r.indexOf(u)>-1&&(s[t][1]=n[1]))}),c&&(s[1][0]=n[0]/2,s[5][0]=n[0]/2),u&&(s[3][1]=n[1]/2,s[7][1]=n[1]/2)}else a&&!o?l.forEach(function(t){var r="n"===t||"s"===t;e.forEach(function(e,i){var a=e.direction,o=e.horizontal,l=e.vertical;a&&-1!==a.indexOf(t)&&(s[i]=[r||!o?0:n[0],r&&l?n[1]:0])})}):s[t]=n;return s}(b,l,[d*Math.abs(C),f*Math.abs(T)],x)}else w&&(S=y.map(function(){return[d,f]}));var N=y.map(function(e,t){return ev(e,S[t])}),D=tm(N);g.snapBoundInfos=null;var M="circle"===c.type,k="ellipse"===c.type;if(M||k){var I=tL(N),O=Math.abs(I.bottom-I.top),R=Math.abs(k?I.right-I.left:O),P=N[0][1]+O,B=N[0][0]-R,z=N[0][0]+R;M&&(D.push([z,I.bottom]),S.push([1,0])),D.push([I.left,P]),S.push([0,1]),D.push([B,I.bottom]),S.push([1,0])}var A=nG((p.clipHorizontalGuidelines||[]).map(function(e){return j(""+e,m)}),(p.clipVerticalGuidelines||[]).map(function(e){return j(""+e,h)}),h,m),G=[],L=[];if(M||k)G=[D[4][0],D[2][0]],L=[D[1][1],D[3][1]];else if(x){var F=[D[0],D[2],D[4],D[6]],W=[S[0],S[2],S[4],S[6]];G=F.filter(function(e,t){return W[t][0]}).map(function(e){return e[0]}),L=F.filter(function(e,t){return W[t][1]}).map(function(e){return e[1]})}else G=D.filter(function(e,t){return S[t][0]}).map(function(e){return e[0]}),L=D.filter(function(e,t){return S[t][1]}).map(function(e){return e[1]});for(var H=[0,0],Y=0;Y<2&&"break"!==function(e){var t=rn(A,p.clipTargetBounds&&{left:0,top:0,right:h,bottom:m},G,L,5),n=t.horizontal,r=t.vertical,i=n.offset,a=r.offset;if(n.isBound&&(H[1]+=i),r.isBound&&(H[0]+=a),!k&&!M||0!==S[0][0]||0!==S[0][1])return D.forEach(function(e,t){var n=S[t];n[0]&&(e[0]-=a),n[1]&&(e[1]-=i)}),"break";var o=tL(N),s=o.bottom-o.top,l=k?o.right-o.left:s;l-=r.isBound?Math.abs(a):0===r.snapIndex?-a:a,s-=n.isBound?Math.abs(i):0===n.snapIndex?-i:i,M&&(l=s=nX(r,n)>0?s:l);var c=D[0];D[1][1]=c[1]-s,D[2][0]=c[0]+l,D[3][1]=c[1]+s,D[4][0]=c[0]-l}();++Y);var X=rX(e,c,N),U=v+"("+X.join(E)+")";return g.clipPathState=U,M||k?(G=[D[4][0],D[2][0]],L=[D[1][1],D[3][1]]):x?(G=(F=[D[0],D[2],D[4],D[6]]).map(function(e){return e[0]}),L=F.map(function(e){return e[1]})):(G=D.map(function(e){return e[0]}),L=D.map(function(e){return e[1]})),g.snapBoundInfos=rn(A,p.clipTargetBounds&&{left:0,top:0,right:h,bottom:m},G,L,1),r.draggable&&(r.draggable.deltaOffset=H),t1(e,"onClip",tJ(e,t,{clipEventType:"changed",clipType:v,poses:N,clipStyle:U,clipStyles:X,distX:d,distY:f})),!0},dragControlEnd:function(e,t){this.unset(e);var n=t.isDrag,r=t.datas,i=t.isDouble,a=r.isLine,o=r.isClipStart,s=r.isControl;return!!o&&(t1(e,"onClipEnd",t0(e,t,{})),i&&(s?function(e,t){var n=t.datas,r=n.clipPath,i=n.index,a=r.type,o=r.poses,s=r.splitter,l=o.map(function(e){return e.pos}),c=l.length;if("polygon"===a)o.splice(i,1),l.splice(i,1);else if("inset"!==a||i<8||(rj(o,l,i,8,c),c===o.length))return;var u=rX(e,r,l);t1(e,"onClip",tJ(e,t,{clipEventType:"removed",clipType:a,poses:l,clipStyles:u,clipStyle:a+"("+u.join(s)+")",distX:0,distY:0}))}(e,t):a&&function(e,t){var n=nd(e,t),r=n[0],i=n[1],a=t.datas,o=a.clipPath,s=a.index,l=o.type,c=o.poses,u=o.splitter,d=c.map(function(e){return e.pos});if("polygon"===l)d.splice(s,0,[r,i]);else{if("inset"!==l)return;var f=rR.indexOf(s),p=rP.indexOf(s),g=c.length;if(rF(c,d,8,f,p,r,i,d[4][0],d[4][1],d[0][0],d[0][1]),g===c.length)return}var h=rX(e,o,d);t1(e,"onClip",tJ(e,t,{clipEventType:"added",clipType:l,poses:d,clipStyles:h,clipStyle:l+"("+h.join(u)+")",distX:0,distY:0}))}(e,t)),i||n)},unset:function(e){e.state.clipPathState="",e.state.snapBoundInfos=null}},{name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(e,t){var n=e.state,r=n.target,i=n.width,a=n.height,o=n.allMatrix,s=n.is3d,l=n.left,c=n.top,u=n.borderRadiusState,d=e.props,f=d.minRoundControls,p=d.maxRoundControls,g=void 0===p?[4,4]:p,h=d.zoom;if(!r)return null;var m=s?4:3,v=rq(r,i,a,void 0===f?[0,0]:f,u);if(!v)return null;var b=0,E=0;return v.map(function(e,n){E+=Math.abs(e.horizontal),b+=Math.abs(e.vertical);var r=eb(tA(o,e.pos,m),[l,c]),i=e.vertical?b<=g[1]:E<=g[0];return t.createElement("div",{key:"borderRadiusControl"+n,className:tD("control","border-radius"),"data-radius-index":n,style:{display:i?"block":"none",transform:"translate("+r[0]+"px, "+r[1]+"px) scale("+h+")"}})})},dragControlCondition:function(e,t){if(!t.inputEvent||t.isRequest)return!1;var n=t.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragControlStart:function(e,t){var n=t.inputEvent,r=t.datas,i=n.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,s=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,l=o?parseInt(i.getAttribute("data-radius-index"),10):-1,c=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!o&&!s||!1===t1(e,"onRoundStart",tJ(e,t,{})))return!1;r.lineIndex=c,r.controlIndex=l,r.isControl=o,r.isLine=s,nf(e,t);var u=e.props,d=u.roundRelative,f=u.minRoundControls,p=e.state,g=p.target,h=p.width,m=p.height;r.isRound=!0,r.prevDist=[0,0];var v=rq(g,h,m,void 0===f?[0,0]:f)||[];return r.controlPoses=v,p.borderRadiusState=rA(v.map(function(e){return e.pos}),v,d,h,m).styles.join(" "),!0},dragControl:function(e,t){var n=t.datas;if(!n.isRound||!n.isControl||!n.controlPoses.length)return!1;var r=n.controlIndex,i=n.controlPoses,a=nv(t),o=a[0],s=a[1],l=[o,s],c=eb(l,n.prevDist),u=e.props.maxRoundControls,d=void 0===u?[4,4]:u,f=e.state,p=f.width,g=f.height,h=i[r],m=h.vertical,v=h.horizontal,b=i.map(function(e){var t=e.horizontal,n=e.vertical,r=[t*v*l[0],n*m*l[1]];if(t){if(1===d[0]||d[0]<4&&t!==v)return r}else{if(0===d[1])return r[1]=n*v*l[0]/p*g,r;if(m&&(1===d[1]||d[1]<4&&n!==m))return r}return[0,0]});b[r]=l;var E=i.map(function(e,t){return ev(e.pos,b[t])});return n.prevDist=[o,s],rK(e,t,l,c,i,E),!0},dragControlEnd:function(e,t){var n=e.state;n.borderRadiusState="";var r=t.datas,i=t.isDouble;if(!r.isRound)return!1;var a=n.width,o=n.height,s=r.isControl,l=r.controlIndex,c=r.isLine,u=r.lineIndex,d=r.controlPoses,f=d.map(function(e){return e.pos}),p=f.length,g=e.props.roundClickable;if(i&&(void 0===g||g)){if(s)rj(d,f,l,0);else if(c){var h,m,v,b,E,y,w,x,S,_=nd(e,t);h=_[0],m=_[1],b=(v=rW(d)).horizontals,E=v.verticals,y=b.length,w=E.length,x=-1,S=-1,0===u?0===y?x=0:1===y&&(x=1):3===u&&(y<=2?x=2:y<=3&&(x=3)),2===u?0===w?S=0:w<4&&(S=3):1===u&&(w<=1?S=1:w<=2&&(S=2)),rF(d,f,0,x,S,h,m,a,o)}p!==d.length&&rK(e,t,[0,0],[0,0],d,f)}return t1(e,"onRoundEnd",t0(e,t,{})),n.borderRadiusState="",!0},unset:function(e){e.state.borderRadiusState=""}},r3,r8,r4,rT,r$],r9=r7.reduce(function(e,t){return th(th({},e),"events"in t?t.events:{})},{}),ie=r7.reduce(function(e,t){return th(th({},e),t.props)},{});function it(e,t){return Math.max.apply(Math,e.map(function(e){var n=e[0],r=e[1],i=e[2],a=e[3];return Math.max(n[t],r[t],i[t],a[t])}))}function ir(e,t){return Math.min.apply(Math,e.map(function(e){var n=e[0],r=e[1],i=e[2],a=e[3];return Math.min(n[t],r[t],i[t],a[t])}))}Object.keys(function(e){var t={};for(var n in e)t[e[n]]=n;return t}(r9)),Object.keys(ie);var ii=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.differ=new eX,t.moveables=[],t.transformOrigin="50% 50%",t}tg(t,e);var n=t.prototype;return n.updateEvent=function(e){var t=this.state,n=this.props,r=e.dragTarget||t.target,i=n.dragTarget||this.areaElement;r!==i&&(tQ(this,"targetGesto"),tQ(this,"controlGesto"),t.target=null),t.target||(t.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=rJ(this,i,"Group"),this.controlGesto=r0(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var a=!t4(e.container,n.container);a&&(t.container=n.container);var o=this.differ.update(n.targets),s=o.added,l=o.changed,c=o.removed;(a||s.length||l.length||c.length)&&this.updateRect()},n.checkUpdate=function(){this.updateAbles()},n.updateRect=function(e,t,n){if(void 0===n&&(n=!0),this.controlBox){this.moveables.forEach(function(t){t.updateRect(e,!1,!1)});var r=this.state,i=this.props,a=r.target||i.target;(!t||""!==e&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate,this.transformOrigin=i.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var o=this.rotation,s=this.scale,l=function(e,t){if(!e.length)return[0,0,0,0];var n=e.map(function(e){return t$(e.state)}),r=1e10,i=1e10,a=0,o=0,s=X(t,1e-7);if(s%90){var l=s/180*Math.PI,c=Math.tan(l),u=-1/c,d=[-1e10,1e10],f=[-1e10,1e10];n.forEach(function(e){e.forEach(function(e){var t=e[1]-c*e[0],n=e[1]-u*e[0];d[0]=Math.max(d[0],t),d[1]=Math.min(d[1],t),f[0]=Math.max(f[0],n),f[1]=Math.min(f[1],n)})}),d.forEach(function(e){f.forEach(function(t){var n=(t-e)/(c-u);r=Math.min(r,n),i=Math.min(i,c*n+e)})});var p=n.map(function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return[eC(t,-l),eC(n,-l),eC(r,-l),eC(i,-l)]});a=it(p,0)-ir(p,0),o=it(p,1)-ir(p,1)}else if(r=ir(n,0),i=ir(n,1),a=it(n,0)-r,o=it(n,1)-i,s%180){var g=a;a=o,o=g}return[r,i,a,o]}(this.moveables,o),c=l[0],u=l[1],d=l[2],f=l[3],p="rotate("+o+"deg) scale("+(s[0]>=0?1:-1)+", "+(s[1]>=0?1:-1)+")";a.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+d+"px; height:"+f+"px;transform:"+p,r.width=d,r.height=f;var g=this.getContainer(),h=tV(this.controlBox.getElement(),a,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||g),m=[h.left,h.top],v=t$(h),b=v[0],E=v[1],y=v[2],w=v[3],x=eq([b,E,y,w]),S=[x.minX,x.minY];h.pos1=eb(b,S),h.pos2=eb(E,S),h.pos3=eb(y,S),h.pos4=eb(w,S),h.left=c-h.left+S[0],h.top=u-h.top+S[1],h.origin=eb(ev(m,h.origin),S),h.beforeOrigin=eb(ev(m,h.beforeOrigin),S),h.originalBeforeOrigin=ev(m,h.originalBeforeOrigin);var _=h.targetClientRect,C=s[0]*s[1]>0?1:-1;_.top+=h.top-r.top,_.left+=h.left-r.left,a.style.transform="translate("+-S[0]+"px, "+-S[1]+"px) "+p,this.updateState(th(th({},h),{direction:C,beforeDirection:C}),n)}},n.getRect=function(){return th(th({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},n.triggerEvent=function(t,n,r){if(r||t.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,t,n)},n.updateAbles=function(){e.prototype.updateAbles.call(this,tm(this.props.ables,[r3]),"Group")},t.defaultProps=th(th({},r2.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(r2),ia=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveables=[],t}tg(t,e);var n=t.prototype;return n.render=function(){var e=this,t=this.props,n=t.cspNonce,r=t.cssStyled,i=t.targets;return(0,o.createElement)(r,{cspNonce:n,ref:S(this,"controlBox"),className:tD("control-box")},i.map(function(t,n){return(0,o.createElement)(r2,th({key:"moveable"+n,ref:_(e,"moveables",n)},e.props,{target:t,wrapperMoveable:e}))}))},n.componentDidUpdate=function(){},n.updateRect=function(e,t,n){void 0===n&&(n=!0),this.moveables.forEach(function(r){r.updateRect(e,t,n)})},n.getRect=function(){return th(th({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.updateEvent=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},t}(r2),io=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tg(t,e),t.defaultAbles=r7,t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t}tg(t,e);var n,r=t.prototype;return t.makeStyled=function(){var e={};this.getTotalAbles().forEach(function(t){var n=t.css;n&&n.forEach(function(t){e[t]=!0})});var t=L(e).join("\n");this.defaultStyled=tf("div",x(tw,tx+t))},t.getTotalAbles=function(){return tm([rM,r3,r8,rT],this.defaultAbles)},r.render=function(){var e,t,n=this.constructor;n.defaultStyled||n.makeStyled();var r=this.props,i=r.ables,a=r.props,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(r,["ables","props"]),l=nr(s.target||s.targets),c=(e=this.selectorMap,t=[],l.forEach(function(n){n&&(k(n)?e[n]&&t.push.apply(t,e[n]):t.push(n))}),t);this.refTargets=l;var u=c.length>1,d=tm(n.getTotalAbles(),i||[]),f=th(th(th({},s),a||{}),{ables:d,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});return u?s.individualGroupable?(0,o.createElement)(ia,th({key:"individual-group",ref:S(this,"moveable")},f,{target:null,targets:c})):(0,o.createElement)(ii,th({key:"group",ref:S(this,"moveable")},f,{target:null,targets:c})):(0,o.createElement)(r2,th({key:"single",ref:S(this,"moveable")},f,{target:c[0]}))},r.componentDidMount=function(){this.updateRefs()},r.componentDidUpdate=function(){this.updateRefs()},r.updateRefs=function(e){var t=nr(this.props.target||this.props.targets),n=this.refTargets.some(function(e,n){var r=t[n];return!(!e&&!r)&&e!==r}),r=e?{}:this.selectorMap,i={};this.refTargets.forEach(function(e){k(e)&&(r[e]?i[e]=r[e]:(n=!0,i[e]=[].slice.call(document.querySelectorAll(e))))}),this.selectorMap=i,n&&this.forceUpdate()},r.getManager=function(){return this.moveable},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,!function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);a>3&&o&&Object.defineProperty(t,n,o)}([(void 0===n&&(n={}),function(e,t){tN.forEach(function(r){var i=n[r]||r;i in e||(e[i]=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=(e=this[t])[r].apply(e,n);return a===this[t]?this:a})})})],t.prototype,"moveable",void 0),t}(o.PureComponent)),is=n(56997),il=n(68248),ic=n.n(il),iu={name:"WidgetSize",render:function(e){var t=e.getRect();return s().createElement("div",{key:"WidgetSize",className:ic().container,style:{left:t.width+10,top:t.height+10}},Math.round(t.offsetWidth)," x ",Math.round(t.offsetHeight))}},id=n(90612),ip=n(22224),ig=n(26372),ih=n.n(ig),im=n(94220),iv=n(32919),ib=n(51877),iE=n(28950),iy=n(28413),iw=n(95644),ix=n(451),iS=n(19040),i_=["n","nw","ne","s","se","sw","e","w"],iC=["e","w"],iT=["n","s"],iN=s().memo(function(e){var t=e.hidden,n=e.onMoveStart,r=e.onMouseMove,i=e.onMoveEnd,a=(0,iS.useDispatch)(),l=s().useRef(null),c=(0,o.useRef)({}),u=(0,o.useState)(!1),d=ix.a(u,2),f=d[0],p=d[1],g=(0,o.useState)(i_),h=ix.a(g,2),m=h[0],v=h[1],b=s().useState(),E=ix.a(b,2),y=E[0],w=E[1],x=(0,iS.useSelector)(function(e){return e.project.selectedWidgetId}),S=(0,iS.useSelector)(function(e){return e.common.previewAreaUpdatedAt});return(0,o.useEffect)(function(){setTimeout(function(){var e;return null==(e=l.current)?void 0:e.moveable.updateRect()},0)},[S]),(0,o.useEffect)(function(){function e(){var e;null!=(e=l.current)&&e.moveable.updateRect()}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]),(0,o.useEffect)(function(){setTimeout(function(){var e;if(x){var t=document.getElementById(x);t&&(e=t)}w(e)})},[x]),(0,o.useEffect)(function(){if(y){var e="true"===y.dataset.lockHeight,t="true"===y.dataset.lockWidth;v(e&&t?[]:e?iC:t?iT:i_)}},[y]),t?null:s().createElement(io,{ref:l,target:y,origin:!1,draggable:!0,resizable:!0,className:"select-box",renderDirections:m,keepRatio:!1,ables:[is.od,is.id,iu],props:{MoveableRightAddon:!0,MoveableBottomAddon:!0,WidgetSize:f},onDragStart:function(e){if(function(e){if(e.target){var t=e.target.getBoundingClientRect();if(e.clientX<t.left||e.clientX>t.right||e.clientY<t.top||e.clientY>t.bottom)return!0}return!1}(e))return!1;n()},onDrag:function(e){var t=e.target.id;e.target.style.transform=e.transform;var n={x:Math.round(e.left),y:Math.round(e.top)};r(t,iE.a({},n))},onDragEnd:function(e){var t=e.lastEvent;e.target.style.transform="";var n=e.target.id;if(t){var r=Math.round(t.left),o=Math.round(t.top);a(ib.Lg(n,"position",{x:r,y:o},!0,!0))}i()},onResizeStart:function(e){p(!0),c.current={};var t=e.target.id,n=iv.Bb(t);n&&n.type===im.H&&(document.activeElement&&"TEXTAREA"===document.activeElement.tagName.toUpperCase()&&document.activeElement.blur(),n.attributes.sizeAdaptive&im.q.AUTO_HEIGHT&&0!==e.direction[1]&&a(ib.Lg(t,"sizeAdaptive",im.q.FIXED,!0,!0)))},onResize:function(e){var t=e.target.dataset,n=e.target.id,r=iv.Bb(n);if(r){var i=r.type===im.H&&r.attributes.sizeAdaptive&im.q.AUTO_HEIGHT,o="true"===t.lockWidth,s="true"===t.lockHeight,l=Number(t.minWidth)||id.u,u=Number(t.maxWidth)||id.l,d=Number(t.minHeight)||id.p,f=Number(t.maxHeight)||id.g,p=Math.round(e.width),g=Math.round(e.height);if(o||(u&&(p=Math.min(u,p)),l&&(p=Math.max(l,p)),e.target.style.width="".concat(p,"px")),s||i||(f&&(g=Math.min(f,g)),d&&(g=Math.max(d,g)),e.target.style.height="".concat(g,"px")),0===e.direction[1]&&i){var h=e.drag.translate[0];e.target.style.transform="translate(".concat(h,"px, 0)"),c.current[n]={width:p,height:g,translate:[h,0]}}else e.target.style.transform=e.drag.transform,c.current[n]={width:p,height:g,translate:e.drag.beforeTranslate};e.target.style.transform=e.drag.transform,c.current[n]={width:p,height:g,translate:e.drag.beforeTranslate},r&&((null==r?void 0:r.type)===im.z||(null==r?void 0:r.type)===im.E||(null==r?void 0:r.type)===im.w||(null==r?void 0:r.type)===im.F)&&ip.throttle(function(){if(void 0!==p||void 0!==g){var e={width:p,height:g};a(ib.Lg(n,"size",e,!0,!0))}},500)()}},onResizeEnd:function(e){p(!1);var t=e.target.id,n=iv.Bb(t),r=c.current[t];if(r&&n){var i=r.width,o=r.height,s=r.translate;(0,iS.batch)(function(){if(s){var r=n.position,l=Math.round(s[0]),c=Math.round(s[1]);r.x+=l,r.y+=c,e.target.style.left="".concat(r.x,"px"),e.target.style.top="".concat(r.y,"px"),e.target.style.transform="",a(ib.Lg(t,"position",r,!0,!0))}(void 0!==i||void 0!==o)&&a(ib.Lg(t,"size",{width:i,height:o},!0,!0))})}}})}),iD=s().memo(function(){var e=iw.a().formatMessage,t=(0,iS.useDispatch)();return s().createElement("div",{className:ih().stageMask,onDrop:function(){var n=ih().canvasFlash,r=e({id:"StageToast.addActorToCanvasTips"});t(ib.xj(r));var i=document.querySelectorAll('[data-widget-type="CANVAS_WIDGET"][data-role="WIDGET"]');i&&i.forEach(function(e){e.classList.contains(n)||(e.classList.add(n),setTimeout(function(){try{e.classList.remove(n)}catch(e){console.error("Canvas widget remove flush class error")}},2e3))})}})}),iM=s().memo(function(){return s().createElement("div",{className:ih().stageReadOnlyMask})}),ik=function(e,t,n,r){var i,a=e.x,o=e.y,s=t.height,l=t.width,c=n.left,u=n.right,d={x:[n.top,n.bottom,o,o+s],y:[c,u,a,a+l]};return{length:(i=d[r].sort(function(e,t){return e-t}))[i.length-1]-i[0],origin:Math.min.apply(Math,iy.a(d[r]))}},iI=function(e,t,n,r){var i={};n.forEach(function(n){var a,o,s,l,c,u,d,f,p,g,h,m,v,b,E;(a=e.x,o=e.y,s=t.width,l=t.height,c=n.left,u=n.right,d=n.top,f=n.bottom,p=n.center,g=n.middle,m=(h=ik({x:a,y:o},t,n,r)).origin,v=h.length,b="x"===r?[a,a+s/2,a+s]:[o,o+l/2,o+l],E=[],("x"===r?[c,p,u]:[d,g,f]).forEach(function(e){b.forEach(function(t){var n={near:!1,dist:Number.MAX_SAFE_INTEGER,value:0,length:v,origin:m};n.dist=t-e,n.value=e,2>Math.abs(n.dist)&&(n.near=!0),E.push(n)})}),E).forEach(function(e){var t,r=e.near,a=e.dist,o=e.value,s=e.origin,l=e.length;r&&(t={id:n.id,value:o,origin:s,length:l},Array.isArray(i[a])?i[a].push(t):i[a]=[t])})});var a=Object.entries(i);if(a.length){var o=a.sort(function(e,t){var n=ix.a(e,1)[0],r=ix.a(t,1)[0];return Math.abs(parseInt(n))-Math.abs(parseInt(r))}),s=ix.a(o[0],2),l=s[0],c=s[1],u=parseInt(l);return{v:e[r]-u,dist:u,lines:c,indices:c.map(function(e){return e.id})}}return{v:e[r],dist:0,lines:[],indices:[]}},iO=function(e,t){return(iO=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},iR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={scrollPos:0},t.width=0,t.height=0,t}function n(){this.constructor=t}iO(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n);var r=t.prototype;return r.render=function(){return(0,o.createElement)("canvas",{ref:S(this,"canvasElement"),style:this.props.style})},r.componentDidMount=function(){var e=this.canvasElement.getContext("2d");this.canvasContext=e,this.resize()},r.componentDidUpdate=function(){this.resize()},r.scroll=function(e){this.draw(e)},r.resize=function(){var e=this.canvasElement,t=this.props,n=t.width,r=t.height,i=t.scrollPos;this.width=n||e.offsetWidth,this.height=r||e.offsetHeight,e.width=2*this.width,e.height=2*this.height,this.draw(i)},r.draw=function(e){void 0===e&&(e=this.state.scrollPos);var t=this.props,n=t.unit,r=t.zoom,i=t.type,a=t.backgroundColor,o=t.lineColor,s=t.textColor,l=t.direction,c=t.negativeRuler,u=t.textFormat,d=this.width,f=this.height;this.state.scrollPos=e;var p=this.canvasContext,g="horizontal"===i,h="start"===l,m=!1!==(void 0===c||c),v=t.textAlign||"left",b="vertical"===i?[-10,-5]:[5,-10],E=g?f:d,y=ei(""+(t.mainLineSize||"100%"),E),w=ei(""+(t.longLineSize||10),E),x=ei(""+(t.shortLineSize||7),E);"transparent"===a?p.clearRect(0,0,2*d,2*f):(p.rect(0,0,2*d,2*f),p.fillStyle=a,p.fill()),p.save(),p.scale(2,2),p.strokeStyle=o,p.lineWidth=1,p.font="10px sans-serif",p.fillStyle=s,h&&(p.textBaseline="top"),p.translate(.5,0),p.beginPath();for(var S=g?d:f,_=r*n,C=Math.floor(e*r/_),T=Math.ceil((e*r+S)/_)-C,N=Math.max(["left","center","right"].indexOf(v)-1,-1),D=0;D<=T;++D){var M=D+C;if(m||!(M<0)){for(var k=(M*n-e)*r,I=0;I<10;++I){var O=k+I/10*_;if(!(O<0||O>=S)){var R=0===I?y:I%5==0?w:x,P=g?[O,h?0:f-R]:[h?0:d-R,O],B=P[0],z=P[1],A=g?[B,z+R]:[B+R,z],G=A[0],L=A[1];p.moveTo(B,z),p.lineTo(G,L)}}if(k>=-_&&k<S+n*r){var j=g?[k+-3*N,h?17:f-17]:[h?17:d-17,k+3*N],F=j[0],W=j[1],H=""+M*n;u&&(H=u(M*n)),p.textAlign=v,g?p.fillText(H,F+b[0],W+b[1]):(p.save(),p.translate(F+b[0],W+b[1]),p.rotate(-Math.PI/2),p.fillText(H,0,0),p.restore())}}}p.stroke(),p.restore()},t.defaultProps={type:"horizontal",zoom:1,width:0,height:0,unit:50,negativeRuler:!0,mainLineSize:"100%",longLineSize:10,shortLineSize:7,direction:"end",style:{width:"100%",height:"100%"},backgroundColor:"#333333",textColor:"#ffffff",lineColor:"#777777"},t}(o.PureComponent),iP=["type","width","height","unit","zoom","style","backgroundColor","lineColor","textColor","direction","textFormat","scrollPos","textAlign","mainLineSize","longLineSize","shortLineSize","negativeRuler"],iB=function(e,t){return(iB=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function iz(e,t){function n(){this.constructor=e}iB(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var iA=function(){return(iA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},iG=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}iz(t,e);var n=t.prototype;return n.render=function(){var e,t=this.props,n=t.className;t.cspNonce;var r=t.portalContainer,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["className","cspNonce","portalContainer"]),a=this.injector.className,s=this.tag,l={};return(o.version||"").indexOf("simple")>-1&&r&&(l={portalContainer:r}),(0,o.createElement)(s,iA({ref:(e=this,function(t){t&&(e.element=t)}),"data-styled-id":a,className:(void 0===n?"":n)+" "+a},l,i))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},t}(o.Component),iL=function(e,t){return(iL=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},ij=function(){return(ij=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function iF(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w.apply(void 0,["scena-"].concat(e))}iF("ruler");var iW=iF("guide","adder"),iH=iF("guides"),iY=iF("guide"),iX=iF("dragging"),iU=iF("display-drag"),iV=x("scena-",'\n{\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\ncanvas {\n    position: relative;\n}\n.guide-origin {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    top: 0;\n    left: 0;\n    opacity: 0;\n}\n.guides {\n    position: absolute;\n    top: 0;\n    left: 0;\n    will-change: transform;\n    z-index: 2000;\n}\n.display-drag {\n    position: absolute;\n    will-change: transform;\n    z-index: 2000;\n    font-weight: bold;\n    font-size: 12px;\n    display: none;\n    left: 20px;\n    top: -20px;\n    color: #f33;\n}\n:host.horizontal .guides {\n    width: 100%;\n    height: 0;\n    top: 30px;\n}\n:host.vertical .guides {\n    height: 100%;\n    width: 0;\n    left: 30px;\n}\n.guide {\n    position: absolute;\n    background: #f33;\n    z-index: 2;\n}\n.guide.dragging:before {\n    position: absolute;\n    content: "";\n    width: 100%;\n    height: 100%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n:host.horizontal .guide {\n    width: 100%;\n    height: 1px;\n    cursor: row-resize;\n}\n:host.vertical .guide {\n    width: 1px;\n    height: 100%;\n    cursor: col-resize;\n}\n.mobile :host.horizontal .guide {\n    transform: scale(1, 2);\n}\n.mobile :host.vertical .guide {\n    transform: scale(2, 1);\n}\n:host.horizontal .guide:before {\n    height: 20px;\n}\n:host.vertical .guide:before {\n    width: 20px;\n}\n.adder {\n    display: none;\n}\n.adder.dragging {\n    display: block;\n}\n');["className","rulerStyle","snapThreshold","snaps","displayDragPos","cspNonce","dragPosFormat","defaultGuides","showGuides"].concat(iP);var iq=function(e,t){var n=ts(t);function r(){var t=null!==iG&&iG.apply(this,arguments)||this;return t.injector=n,t.tag=e,t}return iz(r,iG),r}("div",iV),iK=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={guides:[]},t.scrollPos=0,t.guideElements=[],t.onDragStart=function(e){var n,r=e.datas,i=e.inputEvent,a=t.props.onDragStart;n=r.target,n.classList?n.classList.add(iX):n.className+=" "+iX,t.onDrag(e),a(ij({},e,{dragElement:r.target})),i.stopPropagation(),i.preventDefault()},t.onDrag=function(e){var n=t.movePos(e);return t.props.onDrag(ij({},e,{dragElement:e.datas.target})),n},t.onDragEnd=function(e){var n=e.datas,r=e.isDouble,i=e.distX,a=e.distY,o=t.movePos(e),s=t.state.guides,l=t.props,c=l.onChangeGuides,u=l.zoom,d=l.displayDragPos,f=l.digit,p=l.lockGuides,g=parseFloat((o/u).toFixed(f||0));d&&(t.displayElement.style.cssText+="display: none;");var h=n.target;if(h.classList)h.classList.remove(iX);else{var m=RegExp("(\\s|^)"+iX+"(\\s|$)");h.className=h.className.replace(m," ")}if(t.props.onDragEnd(ij({},e,{dragElement:n.target})),n.fromRuler)o>=t.scrollPos&&0>s.indexOf(g)&&t.setState({guides:s.concat([g])},function(){c({guides:t.state.guides,distX:i,distY:a,isAdd:!0,isRemove:!1,isChange:!1})});else{var v=n.target.getAttribute("data-index"),b=!1,E=!1;if(s=s.slice(),r||g<t.scrollPos){if(p&&(!0===p||p.indexOf("remove")>-1))return;s.splice(v,1),b=!0}else{if(s.indexOf(g)>-1||p&&(!0===p||p.indexOf("change")>-1))return;s[v]=g,E=!0}t.setState({guides:s},function(){c({distX:i,distY:a,guides:t.state.guides,isAdd:!1,isChange:E,isRemove:b})})}},t}function n(){this.constructor=t}iL(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n);var r=t.prototype;return r.render=function(){var e=this.props,t=e.className,n=e.type,r=e.zoom,i=e.style,a=e.rulerStyle,s=e.displayDragPos,l=e.cspNonce,c=e.dragGuideStyle,u=e.portalContainer,d=this.props,f=this.getTranslateName(),p={};return iP.forEach(function(e){"style"!==e&&(p[e]=d[e])}),(0,o.createElement)(iq,{ref:S(this,"manager"),cspNonce:l,className:iF("manager",n)+" "+t,portalContainer:u,style:i},(0,o.createElement)("div",{className:iF("guide-origin"),ref:S(this,"originElement")}),(0,o.createElement)(iR,ij({ref:S(this,"ruler"),style:a},p)),(0,o.createElement)("div",{className:iH,ref:S(this,"guidesElement"),style:{transform:f+"("+-this.scrollPos*r+"px)"}},s&&(0,o.createElement)("div",{className:iU,ref:S(this,"displayElement"),style:c}),(0,o.createElement)("div",{className:iW,ref:S(this,"adderElement")}),this.renderGuides()))},r.renderGuides=function(){var e=this,t=this.props,n=t.type,r=t.zoom,i=t.showGuides,a=t.guideStyle,s=this.getTranslateName(),l=this.state.guides;if(this.guideElements=[],i)return l.map(function(t,i){return(0,o.createElement)("div",{className:iF("guide",n),ref:_(e,"guideElements",i),key:i,"data-index":i,"data-pos":t,style:ij({},a,{transform:s+"("+t*r+"px) translateZ(0px)"})})})},r.componentDidMount=function(){var e=this;this.gesto=new ta(this.manager.getElement(),{container:document.body}).on("dragStart",function(t){var n=e.props,r=n.type,i=n.zoom,a=n.lockGuides;if(!0!==a){var o=t.inputEvent.target,s=t.datas,l=e.ruler.canvasElement,c=e.guidesElement,u=e.originElement.getBoundingClientRect(),d=function(e,t){void 0===t&&(t=document.body);for(var n=e,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];n&&(r=eN(eP(eB(getComputedStyle(n).transform)),r),n!==t);)n=n.parentElement;return(r=ef(r,4))[12]=0,r[13]=0,r[14]=0,r}(e.manager.getElement()),f=eR(d,[t.clientX-u.left,t.clientY-u.top]);f[0]-=c.offsetLeft,f[1]-=c.offsetTop,f[+("horizontal"===r)]+=e.scrollPos*i,s.offsetPos=f,s.matrix=d;var p=a&&a.indexOf("add")>-1,g=a&&a.indexOf("remove")>-1,h=a&&a.indexOf("change")>-1;if(o===l){if(p)return void t.stop();s.fromRuler=!0,s.target=e.adderElement}else{if(!(o.classList?o.classList.contains(iY):o.className.match(RegExp("(\\s|^)"+iY+"(\\s|$)"))))return t.stop(),!1;if(g&&h)return void t.stop();s.target=o}e.onDragStart(t)}else t.stop()}).on("drag",this.onDrag).on("dragEnd",this.onDragEnd),this.setState({guides:this.props.defaultGuides||[]})},r.componentWillUnmount=function(){this.gesto.unset()},r.componentDidUpdate=function(e){e.defaultGuides!==this.props.defaultGuides&&this.setState({guides:this.props.defaultGuides||[]})},r.loadGuides=function(e){this.setState({guides:e})},r.getGuides=function(){return this.state.guides},r.scrollGuides=function(e){var t=this.props.zoom,n=this.guidesElement;this.scrollPos=e,n.style.transform=this.getTranslateName()+"("+-e*t+"px)";var r=this.state.guides;this.guideElements.forEach(function(t,n){t&&(t.style.display=-e+r[n]<0?"none":"block")})},r.resize=function(){this.ruler.resize()},r.scroll=function(e){this.ruler.scroll(e)},r.movePos=function(e){var t=e.datas,n=e.distX,r=e.distY,i=this.props,a=i.type,o=i.zoom,s=i.snaps,l=i.snapThreshold,c=i.displayDragPos,u=i.digit,d=i.dragPosFormat||function(e){return e},f=eR(t.matrix,[n,r]),p=t.offsetPos,g=f[0]+p[0],h=f[1]+p[1],m=Math.round("horizontal"===a?h:g),v=parseFloat((m/o).toFixed(u||0)),b=s.slice().sort(function(e,t){return Math.abs(v-e)-Math.abs(v-t)});if(b.length&&Math.abs(b[0]*o-m)<l&&(m=(v=b[0])*o),c){var E="horizontal"===a?[g,m]:[m,h];this.displayElement.style.cssText+="display: block;transform: translate(-50%, -50%) translate("+E.map(function(e){return e+"px"}).join(", ")+")",this.displayElement.innerHTML=""+d(v)}return t.target.setAttribute("data-pos",v),t.target.style.transform=this.getTranslateName()+"("+m+"px)",m},r.getTranslateName=function(){return"horizontal"===this.props.type?"translateY":"translateX"},t.defaultProps={className:"",type:"horizontal",zoom:1,style:{},snapThreshold:5,snaps:[],digit:0,onChangeGuides:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},displayDragPos:!1,dragPosFormat:function(e){return e},defaultGuides:[],lockGuides:!1,showGuides:!0,guideStyle:{},dragGuideStyle:{},portalContainer:null},t}(o.PureComponent),iZ=n(63554),i$=n(43591),iQ=n(83402),iJ=n.n(iQ),i0=s().memo(function(){var e=(0,o.useRef)(null),t=(0,o.useRef)(null),n=(0,o.useRef)(null),r=(0,iS.useSelector)(function(e){return e.common.stageRulerVisible}),i=(0,iS.useSelector)(function(e){return e.common.stageScale});return(0,o.useEffect)(function(){if(n.current&&r){var a=ip.throttle(function(){if(n.current&&t.current&&e.current){t.current.resize(),e.current.resize();var r=n.current.offsetWidth,a=n.current.offsetHeight,o=(r-iZ.e*i)/2;o=-(o/i*1);var s=(a-iZ.d*i)/2;s=-(s/i*1),e.current.scroll(o),t.current.scroll(s),e.current.scrollGuides(s),t.current.scrollGuides(o)}},15),o=new i$.default(a);return o.observe(n.current),function(){o&&o.disconnect(),o=null}}},[r,i]),r?s().createElement("div",{ref:n,className:iJ().container},s().createElement("div",{className:iJ().vRuler},s().createElement(iK,{ref:function(e){t.current=e},zoom:i,type:"vertical",unit:100,backgroundColor:"transparent",lineColor:"#CCCCCC",textColor:"rgba(0, 0, 0, 0.5)",direction:"start",mainLineSize:12,longLineSize:8,shortLineSize:4})),s().createElement("div",{className:iJ().hRuler},s().createElement(iK,{ref:function(t){e.current=t},zoom:i,unit:100,backgroundColor:"transparent",lineColor:"#CCCCCC",textColor:"rgba(0, 0, 0, 0.5)",direction:"start",mainLineSize:12,longLineSize:8,shortLineSize:4}))):null}),i1=n(9065),i2=n(81555),i3=n(26816),i4=n(50862),i5=n(52846),i6=n(88963),i8=n(13244),i7=n(46942),i9=n.n(i7),ae=n(50687),at=n(34221),an=n(7452),ar=n.n(an),ai=n(59926),aa=n.n(ai),ao=function(e){var t,n=e.position,r=iw.a().formatMessage,i=(0,iS.useSelector)(function(e){return e.project.selectedWidgetId}),a=i1.d();if(!i)return a?s().createElement("div",{className:aa().container},s().createElement("div",null,a.get("title"))):null;var o=iv.Bb(i);if(!o)return null;var l=iv.Fb(i);if(null==(t=iv.Db(o.type))?void 0:t.isInvisibleWidget)return null;if(o.type===im.a||o.type===im.c)return s().createElement("div",{className:aa().container},s().createElement("div",null,l),s().createElement("div",null,r({id:"relativeCoordinate"})," X:",n.x," Y:",n.y));var c=o.parentId?iv.Bb(o.parentId):void 0;return(null==c?void 0:c.type)&&[im.x,im.A].includes(c.type)?s().createElement("div",{className:aa().container},s().createElement("div",null,l),s().createElement("div",null,"X: - Y: -")):s().createElement("div",{className:aa().container},s().createElement("div",null,l),s().createElement("div",null,"X:",n.x," Y:",n.y))},as=s().memo(function(){var e,t,n=(0,o.useRef)(null),r=(0,o.useRef)(null),i=null==(t=i1.d())?void 0:t.id,a=(0,o.useRef)(id.d.NONE),u=(0,iS.useDispatch)(),d=(0,iS.useSelector)(function(e){return e.project.selectedWidgetId}),f=(0,iS.useSelector)(function(e){return e.common.previewAreaUpdatedAt}),p=(0,iS.useSelector)(function(e){return e.common.stageState.isActorDragging}),g=(0,iS.useSelector)(function(e){return e.common.stageScale}),h=(0,iS.useSelector)(function(e){return e.project.focusedWorkspaceArea}),m=(0,o.useState)({x:0,y:0}),v=ix.a(m,2),b=v[0],E=v[1],y=i1.d(),w=d?iv.Bb(d):void 0,x=null==w?void 0:w.type,S=x?iv.Db(x):null,_=null==w?void 0:w.position;(0,o.useEffect)(function(){_&&E(_)},[_]);var C=(0,o.useState)(void 0),T=ix.a(C,2),N=T[0],D=T[1],M=(0,o.useState)([]),k=ix.a(M,2),I=k[0],O=k[1],R=(0,o.useState)([]),P=ix.a(R,2),B=P[0],z=P[1],A=(0,o.useRef)([]),G=(0,iS.useSelector)(function(e){return e.uiConfig.stage})===i6.j.ReadOnly,L=(e=at.a(ar().mark(function e(t){var n,i,a,o,s,l,c,d;return ar().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.persist(),i=null==(n=r.current)?void 0:n.getClientRects()[0],a=t.dataTransfer,!i||!y){e.next=20;break}if(o=a.getData("widget/action"),s=a.getData("widget/type"),l=a.getData("widget/dragging-offset-x"),c=a.getData("widget/dragging-offset-y"),d={x:Math.ceil((t.clientX-i.x-parseInt(l))/g),y:Math.ceil((t.clientY-i.y-parseInt(c))/g)},s!==im.c&&s!==im.a){e.next=14;break}return e.abrupt("return");case 14:if(o!==im.r.CREATE){e.next=20;break}if(u(ib.ki("screen")),!i3.e(s)){e.next=19;break}return e.next=19,ib.Nf(u,ib.lg(s));case 19:u(ib.hg(y.id,s,d));case 20:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)});(0,o.useEffect)(function(){D(y?l.b(y.toJSON()):void 0)},[y,f]);var j=(0,o.useRef)(),F=function(){d&&i&&u(ib.Mf(d,i))},W=iw.a().formatMessage;return s().createElement("div",{ref:n,className:i9()(ih().stage,i8.a({},ih().isActorDragging,p)),onDrop:L,onDragOver:function(e){e.preventDefault()}},s().createElement(i0,null),G&&s().createElement(iM,null),s().createElement(ae.a,{useCapture:!0},s().createElement(ae.b,{keys:{osx:"command+c",windows:"control+c"},callback:function(){if(d){var e=iv.Bb(d),t=iv.Db((null==e?void 0:e.type)||""),n=iv.qb(d);!t||t.isInvisibleWidget||(null==n?void 0:n.type)&&[im.x,im.A].includes(n.type)||(j.current=d)}},disabled:"screen"!==h}),s().createElement(ae.b,{keys:{osx:"command+v",windows:"control+v"},callback:function(){if(j.current){var e=void 0;if(j.current.startsWith(im.a)||j.current.startsWith(im.c)){if(!d)return;var t,n,r=iv.Bb(d);if(!r)return;if(r.type===im.f)e=r.id;else{if(!r.parentId||(null==(t=iv.Bb(r.parentId))?void 0:t.type)!==im.f)return;e=null==(n=iv.Bb(r.parentId))?void 0:n.id}}u(ib.Ef(iv.w(j.current,!0,e),null==y?void 0:y.id))}},disabled:"screen"!==h}),s().createElement(ae.b,{keys:["backspace","del","delete"],callback:function(){if(d){var e=iv.qb(d);if(!((null==e?void 0:e.type)&&[im.x,im.A].includes(e.type))){var t=iv.Fb(d),n=W({id:"deleteWidget"})+"“"+i5.f(t,10)+"”?",r=i4.z.checkFieldValueIsSelected("WIDGET_ID",d),a=i4.z.checkSomeFieldValueIsSelected("WIDGET_ID",iv.U(d));r||a?u(ib.zh({onConfirm:F,allowText:W({id:"delete"}),title:n,isDangerous:!0,content:W({id:a?"deleteParentWidgetTips":"deleteWidgetTips"})})):i&&u(ib.Mf(d,i))}}},disabled:"screen"!==h})),s().createElement("div",{ref:r,className:ih().appZone,id:"COCO_APP_ZONE",onMouseDown:function(e){a.current=id.d.NONE;var t=e.target,n=t.closest("."+i2.b),r=t.closest(".coco-widget-editor"),i=t.closest(".select-box");u(ib.ki("screen")),i||r||setTimeout(function(){var e,t;n?n.id!==d?(u(ib.ug(n.id)),a.current=id.d.DRAG):a.current=id.d.CLICK:u(ib.ug(void 0)),null!=(e=c.E.customEvent)&&null!=(t=e.emit)&&t.focusItem("widget",null==n?void 0:n.id)},0)},onMouseUp:function(e){if(0===e.button){var t=e.target instanceof HTMLElement&&d?e.target.closest("#".concat(d)):null;t instanceof HTMLElement&&(a.current===id.d.CLICK?t.dataset.clickType=id.d.CLICK:t.dataset.clickType=id.d.NONE)}},onMouseMove:function(){a.current===id.d.CLICK&&(a.current=id.d.DRAG)},style:{transform:"scale(".concat(g,")")}},s().createElement(ao,{position:b}),p&&s().createElement(iD,null),N,s().createElement(iN,{onMoveStart:function(){if(y){var e=y.widgetIds,t=[];e.forEach(function(e){var n=iv.Bb(e);if(n&&!n.parentId){var r=n.position,i=n.size,a=r.x,o=r.y,s=i.width,l=i.height,c={id:n.id,width:s,height:l,left:a,top:o,right:a+s,bottom:o+l,center:a+s/2,middle:o+l/2};t.push(c)}});var n=iZ.e,r=iZ.d;t.push({id:y.id,width:n,height:r,left:0,top:0,right:0+n,bottom:0+r,center:0+n/2,middle:0+r/2}),A.current=t}},onMouseMove:function(e,t){var n,r,i,a,o,s,l,c=A.current.find(function(t){return t.id===e});if(!c)return t;E(iE.a({},t));var u=A.current.filter(function(t){return t.id!==e}),d=(i=(r=iI(n=iE.a({},t),c,u,"x")).v,a=r.lines,s=(o=iI(n,c,u,"y")).v,l=o.lines,a.length&&l.length&&(a.forEach(function(e){var t=u.find(function(t){return t.id===e.id});if(t){var n=ik({x:i,y:s},c,t,"x"),r=n.length,a=n.origin;e.length=r,e.origin=a}}),l.forEach(function(e){var t=u.find(function(t){return t.id===e.id});if(t){var n=ik({x:i,y:s},c,t,"y"),r=n.length,a=n.origin;e.length=r,e.origin=a}})),{position:{x:i,y:s},lines:{hLines:l,vLines:a}}),f=d.position,p=d.lines,g=p.vLines,h=p.hLines;return z(g),O(h),f},onMoveEnd:function(){a.current=id.d.DRAG,z([]),O([])},hidden:!d||!(null==w?void 0:w.visible)||!!(null==w?void 0:w.parentId)||(null==S?void 0:S.isInvisibleWidget)||p&&x===im.f}),s().createElement(s().Fragment,null,B.map(function(e,t){var n=e.length,r=e.value,i=e.origin;return s().createElement("span",{className:ih().guideLine,key:"v-".concat(t),style:{left:r,top:i,height:n,width:1}})}),I.map(function(e,t){var n=e.length,r=e.value,i=e.origin;return s().createElement("span",{className:ih().guideLine,key:"h-".concat(t),style:{top:r,left:i,width:n,height:1}})}))))})},27322(e,t,n){n.d(t,{Cp:()=>W});var r=n(90612);n(12152);var i=n(86897),a=[{type:"WidgetTitle",hasDisableOrVisible:!0},{type:"VisibleSwitch"},{type:"TextWidgetTextGroup"},{type:"BackgroundColor"},{type:"AntSwitch",label:"textOverflow",key:"overflow",convert:function(e){return void 0===e||"hidden"===e},reverse:function(e){return e?"hidden":"visible"}},{type:"Align"},{type:"WidgetOpacity"},{type:"Size",sizeRange:[[i.m,r.l],[i.l,r.g]]},{type:"Coordinate"}],o=n(38752),s=n(12327),l='<sep gap="50"></sep>',c=n(94220),u=n(28950),d=n(24876),f=n(60096),p=n(65141),g=n(74375),h={type:c.H,category:{iconId:i.b,blocks:c.H},categoryClass:{text:"",iconId:i.b,blocks:[]},getTemplate:function(e){var t='<field name="WIDGET_ID">'.concat(e,"</field>");return['<block type="text_widget_on_press" uncache="true">\n      '.concat(t,"\n    </block>"),l,'<block type="text_widget_set_content" uncache="true">\n      '.concat(t,'\n      <value name="CONTENT">\n        <shadow type="text_multiline">\n          <field name="TEXT">').concat(o.Z.Msg.TEXT,"</field>\n        </shadow>\n      </value>\n    </block>"),'<block type="text_widget_set_color" uncache="true">\n      '.concat(t,'\n      <value name="COLOR">\n        <shadow type="color_picker"><field name="COLOR_PALETTE">').concat(i.e,"</field></shadow>\n      </value>\n    </block>"),'<block type="text_widget_set_font_size" uncache="true">\n      '.concat(t,'\n      <value name="VALUE">\n        <shadow type="math_number">\n          <field name="NUM" constraints=\'').concat(r.n,",,1'>16</field>\n        </shadow>\n      </value>\n    </block>"),'<block type="text_widget_set_align" uncache="true">\n      '.concat(t,"\n    </block>"),l,s.sb({property:"__opacity",widgetType:c.H,widgetId:e,isSetProperty:!0}),'<block type="text_widget_set_size" uncache="true">\n      '.concat(t,'\n      <field name="SIZE_TYPE">height</field>\n      <value name="NUM">\n        <shadow type="math_number">\n          <field name="NUM" constraints=\'').concat(i.l,",").concat(i.j,",1'>100</field>\n        </shadow>\n      </value>\n    </block>"),'<block type="text_widget_set_position" uncache="true">\n        '.concat(t,'\n        <field name="POSITION_TYPE">positionX</field>\n        <value name="NUM">\n          <shadow type="math_number">\n            <field name="NUM" constraints=\',,1\'>100</field>\n          </shadow>\n        </value>\n    </block>'),'<block type="text_widget_set_visible" uncache="true">\n      '.concat(t,"\n    </block>"),l,"<block type='text_widget_get_content' uncache=\"true\">\n      ".concat(t,"\n    </block>"),"<block type='text_widget_get_color' uncache=\"true\">\n      ".concat(t,"\n    </block>"),"<block type='text_widget_get_font_size' uncache=\"true\">\n      ".concat(t,"\n    </block>"),s.sb({property:"__opacity",widgetType:c.H,widgetId:e}),'<block type="text_widget_get_size" uncache="true">\n      '.concat(t,'\n      <field name="SIZE_TYPE">height</field>\n    </block>'),'<block type="text_widget_get_position" uncache="true">\n      '.concat(t,'\n      <field name="POSITION_TYPE">positionX</field>\n    </block>'),l,s.sb({property:"__visible",widgetType:c.H,widgetId:e})]},blockDeclareGroup:{setBlockGroupSnippet:function(e){e.insertBlockSnippetGenerator("text_widget_on_press",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID")||"",a=e.statementToCode(t,n,"DO");return a?d.n("onTextPress",[d.o(i)],a):""}),e.insertBlockSnippetGenerator("text_widget_set_visible",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID")||"",a="show"===e.getFieldValue(r,"DISPLAY");return d.n("setTextWidgetVisible",[d.o(i),a])}),e.insertBlockSnippetGenerator("text_widget_get_color",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID")||"",a=e.getFieldValue(r,"COLOR_TYPE")||"";return i&&a?d.s("textColor"===a?"getTextWidgetFontColor":"getTextWidgetBackgroundColor",[d.o(i)]):""}),e.insertBlockSnippetGenerator("text_widget_get_content",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID");return i?d.s("getTextWidgetContent",[d.o(i)]):""}),e.insertBlockSnippetGenerator("text_widget_field_color",function(t,n){var r=t.blocks[n];return d.o(e.getFieldValue(r,"COLOR_VALUE")||"")}),e.insertBlockSnippetGenerator("text_widget_get_property",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID"),a=e.getFieldValue(r,"PROPERTY");if(!i||!a)return"";var o="";switch(a){case"height":o="getTextWidgetHeight";break;case"width":o="getTextWidgetWidth";break;case"fontSize":o="getTextWidgetFontSize";break;case"positionX":o="getTextWidgetPositionX";break;case"positionY":o="getTextWidgetPositionY"}return d.s(o,[d.o(i)])}),e.insertBlockSnippetGenerator("text_widget_set_content",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID"),a=e.valueToCode(t,n,"CONTENT",e.ORDER_FUNCTION_CALL);return i?d.n("setTextWidgetContent",[d.o(i),a]):""}),e.insertBlockSnippetGenerator("text_widget_set_color",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID"),a=e.getFieldValue(r,"COLOR_TYPE"),o=e.valueToCode(t,n,"COLOR",e.ORDER_FUNCTION_CALL);return i&&a&&o?d.l(d.n("textColor"===a?"setTextWidgetFontColor":"setTextWidgetBackgroundColor",[d.o(i),o]),r,e):""}),e.insertBlockSnippetGenerator("text_widget_set_align",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID"),a=e.getFieldValue(r,"ALIGN_TYPE"),o=e.getFieldValue(r,"ALIGN_VALUE");return i&&a&&o?d.n("horizontal"===a?"setTextWidgetHorizontalAlignment":"setTextWidgetVerticalAlignment",[d.o(i),d.o(o)]):""}),e.insertBlockSnippetGenerator("text_widget_set_property",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID"),a=e.getFieldValue(r,"PROPERTY");if(!i||!a)return"";var o=e.valueToCode(t,n,"NUM",e.ORDER_FUNCTION_CALL)||"''",s="";switch(a){case"height":s="setTextWidgetHeight";break;case"width":s="setTextWidgetWidth";break;case"fontSize":s="setTextWidgetFontSize";break;case"positionX":s="setTextWidgetPositionX";break;case"positionY":s="setTextWidgetPositionY"}return d.l(d.n(s,[d.o(i),o]),r,e)}),e.insertBlockSnippetGenerator("text_widget_set_position",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID"),a=e.getFieldValue(r,"POSITION_TYPE")||"",o=e.valueToCode(t,n,"NUM",e.ORDER_FUNCTION_CALL)||"";return d.l(d.n("positionX"===a?"setTextWidgetPositionX":"setTextWidgetPositionY",[d.o(i),o]),r,e)}),e.insertBlockSnippetGenerator("text_widget_get_position",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID"),a="positionX"===(e.getFieldValue(r,"POSITION_TYPE")||"")?"getTextWidgetPositionX":"getTextWidgetPositionY";return d.s(a,[d.o(i)])}),e.insertBlockSnippetGenerator("text_widget_set_size",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID"),a=e.valueToCode(t,n,"NUM",e.ORDER_FUNCTION_CALL),o="width"===e.getFieldValue(r,"SIZE_TYPE")?"setTextWidgetWidth":"setTextWidgetHeight";return d.l(d.n(o,[d.o(i),a]),r,e)}),e.insertBlockSnippetGenerator("text_widget_get_size",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID"),a="width"===e.getFieldValue(r,"SIZE_TYPE")?"getTextWidgetWidth":"getTextWidgetHeight";return d.s(a,[d.o(i)])}),e.insertBlockSnippetGenerator("text_widget_set_font_size",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID"),a=e.valueToCode(t,n,"VALUE",e.ORDER_FUNCTION_CALL);return d.l(d.n("setTextWidgetFontSize",[d.o(i),a]),r,e)}),e.insertBlockSnippetGenerator("text_widget_get_font_size",function(t,n){var r=t.blocks[n],i=e.getFieldValue(r,"WIDGET_ID");return i?d.s("getTextWidgetFontSize",[d.o(i)]):""})},setBlockGroupProfile:function(e,t){var n={type:"field_coco_dropdown",name:"WIDGET_ID",custom:!0,options:function(){return f.c().getWidgetListByType(c.H)}};function r(e){g.l(this,e,[{label:"width",min:i.m,max:i.k,value:100},{label:"height",min:i.l,max:i.j,value:100}])}e.insertBlockProfile("text_widget_on_press",{type:"text_widget_on_press",message0:"%{BKY_TEXT_WIDGET_ON_PRESS}",args0:[d.e("%{BKY_BLOCK_TAB_ICON}",!0),u.a({},n),{type:"input_dummy",align:"CENTRE"},{type:"input_statement",name:"DO"}],colour:"%{BKY_EVENTS_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_set_content",{type:"text_widget_set_content",message0:"%{BKY_TEXT_WIDGET_SET_CONTENT}",args0:[u.a({},n),{type:"input_value",name:"CONTENT",check:["String","Number","Boolean","Array","Object"]}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_set_color",{type:"text_widget_set_color",message0:"%{BKY_TEXT_WIDGET_SET_PROPERTY}",args0:[u.a({},n),{type:"field_coco_dropdown",name:"COLOR_TYPE",custom:!0,options:[[t.Msg.TEXT_COLOR,"textColor"],[t.Msg.BACKGROUND_COLOR,"backgroundColor"]]},{type:"input_value",check:["Color","String"],name:"COLOR"}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_field_color",{type:"text_widget_field_color",message0:"%1",args0:[{type:"field_colour",name:"COLOR_VALUE",colour:"#000000"}],colour:"#ffffff",output:["Color"]}),e.insertBlockProfile("text_widget_set_align",{type:"text_widget_set_align",message0:"%{BKY_TEXT_WIDGET_SET_ALIGN}",args0:[u.a({},n),{type:"field_coco_dropdown",name:"ALIGN_TYPE",custom:!0,options:[[t.Msg.TEXT_WIDGET_HORIZONTAL_ALIGN,"horizontal"],[t.Msg.TEXT_WIDGET_VERTICAL_ALIGN,"vertical"]],optOnchange:function(e){if(this.source_block){var n=this.source_block,r=n.inputList,i=r[r.length-1].name;n.removeInput(i);var a=[];a="horizontal"===e?[[t.Msg.LEFT_ALIGN,"left"],[t.Msg.CENTER_ALIGN,"center"],[t.Msg.RIGHT_ALIGN,"right"]]:[[t.Msg.TOP_ALIGN,"flex-start"],[t.Msg.CENTER_ALIGN,"center"],[t.Msg.BOTTOM_ALIGN,"flex-end"]];var o=new p.a({type:"field_coco_dropdown",name:"ALIGN_VALUE",custom:!0,options:a});n.appendDummyInput("ALIGN").append_field(o,"ALIGN_VALUE")}}}],message1:"%1 %2",args1:[{type:"field_coco_dropdown",name:"ALIGN_VALUE",custom:!0,options:[[t.Msg.LEFT_ALIGN,"left"],[t.Msg.CENTER_ALIGN,"center"],[t.Msg.RIGHT_ALIGN,"right"]]},{type:"input_dummy",name:"ALIGN"}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_set_property",{type:"text_widget_set_property",message0:"%{BKY_SET} %1 %{BKY_OF} %2 %{BKY_IS}",args0:[u.a({},n),{type:"field_coco_dropdown",name:"PROPERTY",custom:!0,options:[[t.Msg.FONT_SIZE,"fontSize"],[t.Msg.HEIGHT,"height"],[t.Msg.WIDTH,"width"],[t.Msg.POSITION_X,"positionX"],[t.Msg.POSITION_Y,"positionY"]],optOnchange:r}],message1:"%1",args1:[{type:"input_value",name:"NUM",check:["Number"]}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_set_visible",{type:"text_widget_set_visible",message0:"%1 %2",args0:[{type:"field_coco_dropdown",name:"DISPLAY",custom:!0,options:function(){return[[t.Msg.SHOW,"show"],[t.Msg.HIDE,"hide"]]}},{type:"field_coco_dropdown",name:"WIDGET_ID",custom:!0,options:function(){return f.c().getWidgetListByType(c.H)}}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_get_content",{type:"text_widget_get_content",message0:"%{BKY_TEXT_WIDGET_GET_CONTENT}",args0:[u.a({},n)],output:["String"],colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_get_color",{type:"text_widget_get_color",message0:"%{BKY_TEXT_WIDGET_GET_PROPERTY}",args0:[u.a({},n),{type:"field_coco_dropdown",name:"COLOR_TYPE",custom:!0,options:[[t.Msg.TEXT_COLOR,"textColor"],[t.Msg.BACKGROUND_COLOR,"backgroundColor"]]}],output:["String","Color"],colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_get_property",{type:"text_widget_get_property",message0:"%{BKY_TEXT_WIDGET_GET_PROPERTY}",args0:[u.a({},n),{type:"field_coco_dropdown",name:"PROPERTY",custom:!0,options:function(){return[[t.Msg.FONT_SIZE,"fontSize"],[t.Msg.HEIGHT,"height"],[t.Msg.WIDTH,"width"],[t.Msg.POSITION_X,"positionX"],[t.Msg.POSITION_Y,"positionY"]]}}],output:["String","Number"],colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_set_position",{type:"text_widget_set_position",message0:"%{BKY_SET} %1 %{BKY_OF} %2 %{BKY_IS}",args0:[u.a({},n),{type:"field_coco_dropdown",name:"POSITION_TYPE",custom:!0,options:[[t.Msg.POSITION_X,"positionX"],[t.Msg.POSITION_Y,"positionY"]]}],message1:"%1",args1:[{type:"input_value",name:"NUM",check:["Number"]}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_get_position",{type:"text_widget_get_position",message0:"%1 %{BKY_OF} %2",args0:[u.a({},n),{type:"field_coco_dropdown",name:"POSITION_TYPE",custom:!0,options:function(){return[[t.Msg.POSITION_X,"positionX"],[t.Msg.POSITION_Y,"positionY"]]}}],output:["String","Number"],colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_set_size",{type:"text_widget_set_size",message0:"%{BKY_SET} %1 %{BKY_OF} %2 %{BKY_IS} %3",args0:[u.a({},n),{type:"field_coco_dropdown",name:"SIZE_TYPE",custom:!0,options:[[t.Msg.HEIGHT,"height"],[t.Msg.WIDTH,"width"]],optOnchange:r},{type:"input_value",name:"NUM",check:["Number"]}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_get_size",{type:"text_widget_get_size",message0:"%1 %{BKY_OF} %2",args0:[u.a({},n),{type:"field_coco_dropdown",name:"SIZE_TYPE",custom:!0,options:[[t.Msg.HEIGHT,"height"],[t.Msg.WIDTH,"width"]]}],output:["String","Number"],colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_set_font_size",{type:"text_widget_set_font_size",message0:"%{BKY_TEXT_WIDGET_SET_FONT_SIZE}",args0:[u.a({},n),{type:"input_value",name:"VALUE",check:["Number"]}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("text_widget_get_font_size",{type:"text_widget_get_font_size",message0:"%{BKY_TEXT_WIDGET_GET_FONT_SIZE}",args0:[u.a({},n)],output:["Number"],colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0})}},renameBlocksInfo:{blocksList:["text_widget_on_press","text_widget_set_visible","text_widget_set_color","text_widget_set_content","text_widget_set_align","text_widget_set_property","text_widget_get_property","text_widget_set_position","text_widget_get_position","text_widget_set_size","text_widget_get_size","text_widget_set_font_size","text_widget_get_font_size","text_widget_get_content","text_widget_get_color"],fieldName:"WIDGET_ID"},topBlocks:["text_widget_on_press"]},m=n(26564),v=n(41594),b=n.n(v),E=n(16812),y=n(11041),w=v.useLayoutEffect,x=function(e,t){"function"!=typeof e?e.current=t:e(t)},S=function(e,t){var n=(0,v.useRef)();return(0,v.useCallback)(function(r){e.current=r,n.current&&x(n.current,null),n.current=t,t&&x(t,r)},[t])},_={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},C=function(e){Object.keys(_).forEach(function(t){e.style.setProperty(t,_[t],"important")})},T=null,N=function(){},D=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],M=!!document.documentElement.currentStyle,k=function(e){var t,n=(t=(0,v.useRef)(e),w(function(){t.current=e}),t);(0,v.useLayoutEffect)(function(){var e=function(e){n.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[])},I=(0,v.forwardRef)(function(e,t){var n=e.cacheMeasurements,r=e.maxRows,i=e.minRows,a=e.onChange,o=void 0===a?N:a,s=e.onHeightChange,l=void 0===s?N:s,c=y.a(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),u=void 0!==c.value,d=(0,v.useRef)(null),f=S(d,t),p=(0,v.useRef)(0),g=(0,v.useRef)(),h=function(){var e=d.current,t=n&&g.current?g.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=D.reduce(function(e,n){return e[n]=t[n],e},{}),r=n.boxSizing;return""===r?null:(M&&"border-box"===r&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px"),{sizingStyle:n,paddingSize:parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),borderSize:parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth)})}(e);if(t){g.current=t;var a,o,s,c,u,f,h,m,v,b,E,y,w=(a=e.value||e.placeholder||"x",void 0===(o=i)&&(o=1),void 0===(s=r)&&(s=1/0),T||((T=document.createElement("textarea")).setAttribute("tabindex","-1"),T.setAttribute("aria-hidden","true"),C(T)),null===T.parentNode&&document.body.appendChild(T),c=t.paddingSize,u=t.borderSize,h=(f=t.sizingStyle).boxSizing,Object.keys(f).forEach(function(e){T.style[e]=f[e]}),C(T),T.value=a,m=T.scrollHeight,v="border-box"===t.sizingStyle.boxSizing?m+t.borderSize:m-t.paddingSize,T.value="x",E=(b=T.scrollHeight-c)*o,"border-box"===h&&(E=E+c+u),v=Math.max(E,v),y=b*s,"border-box"===h&&(y=y+c+u),[v=Math.min(y,v),b]),x=w[0],S=w[1];p.current!==x&&(p.current=x,e.style.setProperty("height",x+"px","important"),l(x,{rowHeight:S}))}};return(0,v.useLayoutEffect)(h),k(h),(0,v.createElement)("textarea",m.a({},c,{onChange:function(e){u||h(),o(e)},ref:f}))}),O=n(81555),R=n(36243),P=n(13244),B=n(46942),z=n.n(B),A=n(451),G=n(22690),L=n.n(G);function j(e,t,n){var r=e;return"center"===n?r=e+t/2:"flex-end"===n&&(r=e+t),Math.floor(r)}var F=function(e){var t=e.id,n=e.position,a=e.visible,o=e.attributes,s=e.size,l=e.selected,d=e.opacity,f=e.onChange,p=o.backgroundColor,g=o.content,h=o.color,m=o.fontFamily,E=o.fontSize,y=o.justifyContent,w=o.sizeAdaptive,x=o.textAlign,S=o.overflow,_=(0,v.useRef)(null),C=(0,v.useRef)(null),T=(0,v.useRef)(null),N=(0,v.useRef)(j(n.y,s.height,y)),D=(0,v.useState)(!1),M=A.a(D,2),k=M[0],B=M[1];(0,v.useEffect)(function(){if(k&&l&&C.current){var e=C.current;e.focus();var t=e.value.length;e.setSelectionRange(t,t)}},[k,l]),(0,v.useEffect)(function(){l||B(!1)},[l]);var G=w!==c.q.FIXED;(0,v.useEffect)(function(){if(G&&_.current&&f){var e=Math.floor(_.current.clientHeight);if(e!==s.height){f("size",{height:e});var t=j(n.y,e,y);t!==N.current&&(f&&f("position",{y:n.y+N.current-t}),N.current=t)}}},[E,m,G,g,f,s.height]),(0,v.useEffect)(function(){N.current=j(n.y,s.height,y)},[y,f,n.y,s.height]);var F={width:s.width,height:w&c.q.AUTO_HEIGHT?"auto":s.height,minWidth:"".concat(i.m,"px"),minHeight:"".concat(i.l,"px"),backgroundColor:(0,R.A)(p).toString(),color:(0,R.A)(h).toString(),fontFamily:m,fontSize:E,justifyContent:y,textAlign:x,top:n.y,left:n.x,opacity:(void 0===d?100:d)/100};return b().createElement(b().Fragment,null,b().createElement("div",{id:t,"data-widget-type":c.H,"data-role":c.M,className:z()(O.b,L().textWidget,P.a({},L().hide,!a)),"data-min-width":i.m,"data-min-height":i.l,ref:T,style:u.a(u.a({},F),{},{visibility:k?"hidden":"visible"}),onClick:function(){var e;(null==(e=T.current)?void 0:e.dataset.clickType)===r.d.CLICK&&l&&B(!0)}},b().createElement("div",{style:{overflow:void 0===S?"hidden":S}},b().createElement("span",{className:L().content},g+"\n"))),b().createElement("div",{"data-role":c.M,ref:_,className:z()(O.b,L().textWidget,"coco-widget-editor",P.a({},L().hide,!a)),onMouseDown:function(e){e.stopPropagation()},style:u.a(u.a({},F),{},{visibility:k?"visible":"hidden",zIndex:2})},b().createElement(I,{className:L().content,onBlur:function(){B(!1)},value:g,onChange:function(e){f&&f("content",e.target.value)},ref:C})))},W={icon:i.b,title:"",type:c.H,previewAreaWidgetTitle:"TextWidget.widgetName",component:function(e){return e.parentId?b().createElement(E.a,e):b().createElement(F,e)},editConfig:a,childWidgetEditConfig:[{type:"WidgetTitle",hasDisableOrVisible:!0},{type:"VisibleSwitch"},{type:"TextArea"},{type:"FontFamily"},[{type:"Color",label:"textColor"},{type:"BackgroundColor"}],{type:"HorizontalAlign"}],blockConfig:h,contentTextField:"content",isInvisibleWidget:i.i,hasAnyWidget:!0,widget:{isGlobalWidget:i.h,size:{width:i.c,height:i.a},attributes:{sizeAdaptive:c.q.AUTO_HEIGHT,backgroundColor:i.d,color:i.e,fontFamily:i.f,fontSize:i.g,justifyContent:"flex-start",textAlign:"center",content:"%{COCO_defaultTextWidgetContent}",overflow:"hidden"}}}},31656(e,t,n){n.d(t,{Ap:()=>g,Ip:()=>h});var r=n(74375),i=n(60096),a=n(24876),o=n(12327),s=n(38752),l=n(63554),c=n(94220),u=n(32919),d=n(28950),f=n(50699),p=n(16751),g={type:c.d,category:{iconId:f.d,blocks:c.d},categoryClass:{text:"",iconId:f.d,blocks:[]},getTemplate:function(e){var t='<field name="WIDGET_ID">'.concat(e,"</field>");return['<block type="button_on_press" uncache="true">\n        '.concat(t,"\n      </block>"),r.d,'<block type="button_set_content" uncache="true">\n        '.concat(t,'\n        <value name="CONTENT">\n          <shadow type="text">\n            <field name="TEXT">').concat(s.Z.Msg.BUTTON_DEFAULT_TEXT,"</field>\n          </shadow>\n        </value>\n      </block>"),'<block type="button_set_mode" uncache="true">\n        '.concat(t,'\n        <field name="MODE">').concat(p.b.CONTAINED_TEXT,"</field>\n      </block>"),'<block type="button_set_color" uncache="true">\n        '.concat(t,'\n        <value name="COLOR">\n          <shadow type="button_field_color"></shadow>\n        </value>\n      </block>'),o.sb({property:"__opacity",widgetType:c.d,widgetId:e,isSetProperty:!0}),'<block type="button_set_size_type" uncache="true">\n        '.concat(t,'\n        <field name="SIZE_TYPE">').concat(p.c.MEDIUM,"</field>\n      </block>"),'<block type="button_set_position" uncache="true">\n        '.concat(t,'\n        <field name="POSITION_TYPE">positionX</field>\n        <value name="NUM">\n          <shadow type="math_number">\n            <field name="NUM" constraints=\'').concat(-l.a,",").concat(l.a,",1'>100</field>\n          </shadow>\n        </value>\n    </block>"),r.d,'<block type="button_set_visible" uncache="true">\n        '.concat(t,"\n      </block>"),'<block type="button_set_disabled" uncache="true">\n        '.concat(t,"\n      </block>"),r.d,'<block type="button_get_content" uncache="true">\n    '.concat(t,"\n    </block>"),'<block type="button_get_color" uncache="true">\n      '.concat(t,"\n    </block>"),o.sb({property:"__opacity",widgetType:c.d,widgetId:e}),'<block type="button_get_position" uncache="true">\n      '.concat(t,'\n      <field name="POSITION_TYPE">positionX</field>\n    </block>'),r.d,o.sb({property:"__visible",widgetType:c.d,widgetId:e}),o.sb({property:"__disabled",widgetType:c.d,widgetId:e})]},blockDeclareGroup:{setBlockGroupSnippet:function(e){function t(t,n){var r=t.blocks[n];return{block:r,widgetId:e.getFieldValue(r,"WIDGET_ID")||""}}e.insertBlockSnippetGenerator("button_on_press",function(n,r){var i=t(n,r),o=i.block,s=i.widgetId,l=e.getFieldValue(o,"PRESS_EVENT")||"",c=e.statementToCode(n,r,"DO");return c?"press"===l?a.n("onButtonPress",[a.o(s)],c):"pressIn"===l?a.n("onButtonPressIn",[a.o(s)],c):a.n("onButtonPressOut",[a.o(s)],c):""}),e.insertBlockSnippetGenerator("button_set_visible",function(n,r){var i=t(n,r),o=i.block,s=i.widgetId,l="show"===e.getFieldValue(o,"DISPLAY");return a.n("setButtonWidgetVisible",[a.o(s),l])}),e.insertBlockSnippetGenerator("button_set_disabled",function(n,r){var i=t(n,r),o=i.block,s=i.widgetId,l="disabled"===e.getFieldValue(o,"DISABLED");return a.l(a.n("setButtonWidgetDisabled",[a.o(s),l]),o,e)}),e.insertBlockSnippetGenerator("button_get_content",function(e,n){var r=t(e,n).widgetId;return a.s("getButtonWidgetText",[a.o(r)])}),e.insertBlockSnippetGenerator("button_get_color",function(e,n){var r=t(e,n).widgetId;return a.s("getButtonWidgetColor",[a.o(r)])}),e.insertBlockSnippetGenerator("button_field_color",function(n,r){var i=t(n,r).block;return a.o(e.getFieldValue(i,"COLOR_VALUE")||"")}),e.insertBlockSnippetGenerator("button_get_position",function(n,r){var i=t(n,r),o=i.block,s=i.widgetId,l="positionX"===(e.getFieldValue(o,"POSITION_TYPE")||"")?"getButtonWidgetPositionX":"getButtonWidgetPositionY";return a.s(l,[a.o(s)])}),e.insertBlockSnippetGenerator("button_set_content",function(n,r){var i=t(n,r).widgetId,o=e.valueToCode(n,r,"CONTENT",e.ORDER_FUNCTION_CALL);return a.n("setButtonWidgetText",[a.o(i),o])}),e.insertBlockSnippetGenerator("button_set_mode",function(n,r){var i=t(n,r),o=i.block,s=i.widgetId,l=e.getFieldValue(o,"MODE")||"";return a.n("setButtonWidgetMode",[a.o(s),a.o(l)])}),e.insertBlockSnippetGenerator("button_set_color",function(n,r){var i=t(n,r).widgetId,o=e.valueToCode(n,r,"COLOR",e.ORDER_FUNCTION_CALL);return a.n("setButtonWidgetColor",[a.o(i),o])}),e.insertBlockSnippetGenerator("button_set_size_type",function(n,r){var i=t(n,r),o=i.block,s=i.widgetId,l=e.getFieldValue(o,"SIZE_TYPE")||"";return a.n("setButtonWidgetSizeType",[a.o(s),a.o(l)])}),e.insertBlockSnippetGenerator("button_set_position",function(n,r){var i=t(n,r),o=i.block,s=i.widgetId,l=e.getFieldValue(o,"POSITION_TYPE")||"",c=e.valueToCode(n,r,"NUM",e.ORDER_FUNCTION_CALL)||"";return a.l(a.n("positionX"===l?"setButtonWidgetPositionX":"setButtonWidgetPositionY",[a.o(s),c]),o,e)})},setBlockGroupProfile:function(e,t){var n={type:"field_coco_dropdown",name:"WIDGET_ID",custom:!0,options:function(){return i.c().getWidgetListByType("BUTTON_WIDGET")}};e.insertBlockProfile("button_on_press",{type:"button_on_press",message0:"%{BKY_BUTTON_ON_PRESS}",args0:[a.e("%{BKY_BLOCK_TAB_ICON}",!0),{type:"field_coco_dropdown",name:"WIDGET_ID",custom:!0,options:function(){return i.c().getWidgetListByType("BUTTON_WIDGET")}},{type:"field_coco_dropdown",name:"PRESS_EVENT",custom:!0,options:function(){return[[t.Msg.PRESS,"press"],[t.Msg.PRESS_IN,"pressIn"],[t.Msg.PRESS_OUT,"pressOut"]]}},{type:"input_dummy",align:"CENTRE"},{type:"input_statement",name:"DO"}],colour:"%{BKY_EVENTS_HUE}",inputsInline:!0}),e.insertBlockProfile("button_set_content",{type:"button_set_content",message0:"%{BKY_BUTTON_SET_CONTENT}",args0:[d.a({},n),{type:"input_value",name:"CONTENT"}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("button_set_mode",{type:"button_set_mode",message0:"%{BKY_BUTTON_SET_MODE}",args0:[d.a({},n),{type:"field_coco_dropdown",name:"MODE",custom:!0,options:[[t.Msg.BUTTON_CONTAINED_TEXT,p.b.CONTAINED_TEXT],[t.Msg.BUTTON_OUTLINED_TEXT,p.b.OUTLINED_TEXT],[t.Msg.BUTTON_CONTAINED_ICON,p.b.CONTAINED_ICON],[t.Msg.BUTTON_OUTLINED_ICON,p.b.OUTLINED_ICON]]}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("button_set_color",{type:"button_set_color",message0:"%{BKY_BUTTON_SET_COLOR}",args0:[d.a({},n),{type:"input_value",check:["Color","String"],name:"COLOR"}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("button_field_color",{type:"button_field_color",message0:"%1",args0:[{type:"field_colour",name:"COLOR_VALUE",colour:f.a}],colour:"#ffffff",output:["Color"]}),e.insertBlockProfile("button_set_size_type",{type:"button_set_size_type",message0:"%{BKY_BUTTON_SET_SIZE_TYPE}",args0:[d.a({},n),{type:"field_coco_dropdown",name:"SIZE_TYPE",custom:!0,options:[[t.Msg.TINY,p.c.TINY],[t.Msg.SMALL,p.c.SMALL],[t.Msg.MEDIUM,p.c.MEDIUM],[t.Msg.LARGE,p.c.LARGE],[t.Msg.HUGE,p.c.HUGE]]}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("button_set_position",{type:"button_set_position",message0:"%{BKY_SET} %1 %{BKY_OF} %2 %{BKY_IS}",args0:[{type:"field_coco_dropdown",name:"WIDGET_ID",custom:!0,options:function(){return i.c().getWidgetListByType("BUTTON_WIDGET")}},{type:"field_coco_dropdown",name:"POSITION_TYPE",custom:!0,options:[[t.Msg.POSITION_X,"positionX"],[t.Msg.POSITION_Y,"positionY"]],optOnchange:function(e){u.Gb(this,e)}}],message1:"%1",args1:[{type:"input_value",name:"NUM",check:["Number"]}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("button_set_visible",{type:"button_set_visible",message0:"%1 %2",args0:[{type:"field_coco_dropdown",name:"DISPLAY",custom:!0,options:function(){return[[t.Msg.SHOW,"show"],[t.Msg.HIDE,"hide"]]}},{type:"field_coco_dropdown",name:"WIDGET_ID",custom:!0,options:function(){return i.c().getWidgetListByType("BUTTON_WIDGET")}}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("button_set_disabled",{type:"button_set_disabled",message0:"%1 %2",args0:[{type:"field_coco_dropdown",name:"DISABLED",custom:!0,options:function(){return[[t.Msg.ABLE,"able"],[t.Msg.DISABLED,"disabled"]]}},{type:"field_coco_dropdown",name:"WIDGET_ID",custom:!0,options:function(){return i.c().getWidgetListByType("BUTTON_WIDGET")}}],previousStatement:!0,nextStatement:!0,colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("button_get_content",{type:"button_get_content",message0:"%{BKY_BUTTON_GET_CONTENT}",args0:[d.a({},n)],output:["String"],colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("button_get_color",{type:"button_get_color",message0:"%{BKY_BUTTON_GET_COLOR}",args0:[d.a({},n)],output:["String","Color"],colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0}),e.insertBlockProfile("button_get_position",{type:"button_get_position",message0:"%1 %{BKY_OF} %2",args0:[{type:"field_coco_dropdown",name:"WIDGET_ID",custom:!0,options:function(){return i.c().getWidgetListByType("BUTTON_WIDGET")}},{type:"field_coco_dropdown",name:"POSITION_TYPE",custom:!0,options:function(){return[[t.Msg.POSITION_X,"positionX"],[t.Msg.POSITION_Y,"positionY"]]}}],output:["Number"],colour:"%{BKY_APPEARANCE_HUE}",inputsInline:!0})}},renameBlocksInfo:{blocksList:["button_on_press","button_set_content","button_set_mode","button_set_color","button_set_size_type","button_set_position","button_set_visible","button_set_disabled","button_get_content","button_get_color","button_get_position"],fieldName:"WIDGET_ID"},topBlocks:["button_on_press"]},h=[{type:"WidgetTitle",hasDisableOrVisible:!0},[{type:"VisibleSwitch"},{type:"DisabledSwitch"}],{type:"ButtonMode"},{type:"Color",label:"color"},{type:"WidgetOpacity"},{type:"ButtonSizeType"},{type:"Coordinate"}]}}]);
//# sourceMappingURL=editor~7.f7c9c79d4a718252.js.map