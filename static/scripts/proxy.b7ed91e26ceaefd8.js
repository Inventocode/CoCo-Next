(self.webpackChunkcoco_next=self.webpackChunkcoco_next||[]).push([["642"],{78017(){function t(t){return!(!t.hostname.endsWith(".codemao.cn")||"static.codemao.cn"==t.hostname||"creation.codemao.cn"==t.hostname||"cdn-community.codemao.cn"==t.hostname||t.hostname.endsWith("bcmcdn.com")||"coco-next.localhost"!=location.hostname&&t.hostname.startsWith("socket"))}function o(t){if(location.hostname.endsWith(".ccwidget.top")){let o=new URL(t.protocol+"//next.ccwidget.top/proxy/");return o.searchParams.set("__proxy_url__",t.href),o}return t.pathname="/proxy/"+t.origin.replace(/(?<=^https?:\/\/)dev-/,"").replace(/(?<=^https?:\/\/)backend-dev/,"api")+t.pathname,"http:"==location.protocol&&("https:"==t.protocol&&(t.protocol="http:"),"wss:"==t.protocol&&(t.protocol="ws:")),t.host=location.host,t}function e(t){let o=new URL(t.src,location.href);"shequ.codemao.cn"==o.host&&o.pathname.startsWith("/codemao_login")&&("http:"==location.protocol&&"https:"==o.protocol&&(o.protocol="http:"),o.host=location.hostname.endsWith(".ccwidget.top")?"next.ccwidget.top":location.host,t.src=o.href)}function n(t){return!!window[t]||(Object.defineProperty(window,t,{value:!0,enumerable:!1,writable:!0,configurable:!0}),!1)}location.hostname.endsWith(".codemao.cn")||(function(){if(n("SLIGHTNING_CODEMAO_ENVIRONMENT_XML_HTTP_REQUEST"))return;let e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(n,c,r,i,a){c instanceof window.URL||(c=new URL(c,location.href)),t(c)?e.call(this,n,o(c),r??!0,i,a):e.call(this,n,c,r??!0,i,a)},XMLHttpRequest.prototype.open.toString=e.toString.bind(e)}(),function(){if(n("SLIGHTNING_CODEMAO_ENVIRONMENT_FETCH"))return;let e=fetch;window.fetch=function(n,c){return n instanceof Request&&(n=n.url),"string"==typeof n&&(n=new URL(n,location.href)),t(n)&&(n=o(n)),e.call(this,n,c)},fetch.toString=e.toString.bind(e)}(),n("SLIGHTNING_CODEMAO_ENVIRONMENT_WEB_SOCKET")||(window.WebSocket=class extends window.WebSocket{constructor(e,n){"string"==typeof e&&(e=new URL(e,location.href)),t(e)&&(e=o(e)),super(e,n)}}),function(){if(n("COCO_SOURCE_CODE_PLAN_PROXY_OPEN"))return;let t=open;window.open=function(o,e,n){return"string"==typeof o&&(o=new URL(o,location.href)),o?.host=="www.codemao.cn"&&("/get-qq-code.html"==o.pathname||"/get-weixin-code.html"==o.pathname)?("http:"==location.protocol&&"https:"==o.protocol&&(o.protocol="http:"),o.host=location.host):(o?.hostname.endsWith("coco.codemao.cn")||o?.hostname==location.hostname)&&(o.protocol=location.protocol,o.host=location.host),t.call(this,o,e,n)},open.toString=t.toString.bind(t)}(),n("COCO_SOURCE_CODE_PLAN_PROXY_IFRAME")||new MutationObserver(t=>{for(let o of t)for(let t of Array.from(o.addedNodes))if(t instanceof HTMLIFrameElement&&e(t),t instanceof HTMLElement)for(let o of Array.from(t.querySelectorAll("*")))o instanceof HTMLIFrameElement&&e(o)}).observe(document.documentElement,{subtree:!0,childList:!0}))}},function(t){t(t.s=78017)}]);
//# sourceMappingURL=proxy.b7ed91e26ceaefd8.js.map