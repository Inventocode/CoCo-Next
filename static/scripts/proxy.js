(()=>{"use strict";function o(o){return"static.codemao.cn"!=o.hostname&&"creation.codemao.cn"!=o.hostname&&!o.hostname.endsWith("bcmcdn.com")&&o.hostname.endsWith(".codemao.cn")}function t(o){return o.pathname="/proxy/"+o.origin.replace(/(?<=^https?:\/\/)dev-/,"").replace(/(?<=^https?:\/\/)backend-dev/,"api")+o.pathname,"https:"==o.protocol&&(o.protocol="http:"),"wss:"==o.protocol&&(o.protocol="ws:"),o.host=location.host,o}location.hostname.endsWith(".codemao.cn")||(function(){let n=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,c,i,s,r){c instanceof window.URL||(c=new URL(c,location.href)),o(c)?n.call(this,e,t(c),i??!0,s,r):n.call(this,e,c,i??!0,s,r)},XMLHttpRequest.prototype.open.toString=n.toString.bind(n),window.SLIGHTNING_CODEMAO_ENVIRONMENT_XML_HTTP_REQUEST=!0}(),function(){let n=fetch;window.fetch=function(e,c){return e instanceof Request&&(e=e.url),"string"==typeof e&&(e=new URL(e,location.href)),o(e)&&(e=t(e)),n.call(this,e,c)},fetch.toString=n.toString.bind(n),window.SLIGHTNING_CODEMAO_ENVIRONMENT_FETCH=!0}(),window.WebSocket=class extends window.WebSocket{constructor(n,e){"string"==typeof n&&(n=new URL(n,location.href)),o(n)&&(n=t(n)),super(n,e)}},window.SLIGHTNING_CODEMAO_ENVIRONMENT_WEB_SOCKET=!0,function(){const o=open;window.open=function(t,n,e){return"string"==typeof t&&(t=new URL(t,location.href)),(t?.hostname.endsWith("coco.codemao.cn")||t?.hostname==location.hostname)&&(t.protocol=location.protocol,t.host=location.host),o.call(this,t,n,e)},window.open.toString=o.toString.bind(o)}())})();