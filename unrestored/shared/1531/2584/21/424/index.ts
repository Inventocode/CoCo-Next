/** 
 * 由 CoCo 源代码计划解包器解包
 *
 * 模块 ID：424
 */

"use strict";

export { s as gd };
export { c as bd };
export { l as cd };
export { u as fd };
export { d as Yc };
export { p as Zc };
export { f as Xc };
export { h as ed };
export { m as ad };
export { g as dd };
export { _ as lh };
export { v as gh };
export { b as hh };
export { y as ih };
export { E as mh };
export { O as ch };
export { w as dh };
export { C as eh };
export { T as kh };
export { S as fh };
export { I as jh };
export { ne as Ac };
export { re as Bc };
export { oe as ye };
export { ie as Vf };
export { ae as Fg };
export { se as Vj };
export { ce as Be };
export { le as ze };
export { ue as ki };
export { pe as Eg };
export { fe as xe };
export { he as Ae };
export { me as rb };
export { ge as Bb };
export { _e as Cb };
export { be as Cd };
export { ye as Bd };
export { Ee as Dd };
export { Oe as Kd };
export { we as Gd };
export { Ce as yd };
export { Te as Ad };
export { Se as zd };
export { Ie as Ed };
export { Ae as Fd };
export { je as Jd };
export { Ne as f };
export { Ue as dg };
export { Re as e };
export { We as uc };
export { He as hb };
export { Ve as Me };
export { ke as d };
export { ze as cg };
export { xe as c };
export { Ye as dc };
export { Ke as zg };
export { De as h };
export { qe as fg };
export { Me as g };
export { Xe as eg };
export { Le as b };
export { Qe as cc };
export { Ze as Q };
export { Je as kc };
export { $e as ec };
export { et as af };
export { tt as wb };
export { nt as wc };
export { rt as xj };
export { it as zj };
export { at as Cj };
export { st as Hg };
export { ct as uf };
export { lt as tf };
export { ut as sf };
export { mt as ff };
export { gt as gf };
export { _t as if };
export { vt as hf };
export { bt as ef };
export { yt as nf };
export { Et as kf };
export { Ot as jf };
export { wt as pf };
export { Ct as lf };
export { Tt as mf };
export { St as of };
export { It as gj };
export { At as bj };
export { jt as cj };
export { Nt as dj };
export { Rt as ej };
export { kt as hj };
export { xt as Zi };
export { Dt as Vi };
export { Mt as Xi };
export { Lt as Yi };
export { Pt as Ui };
export { Bt as Ti };
export { Ft as aj };
export { Gt as fj };
export { Ut as Wi };
export { Ht as qe };
export { Vt as le };
export { zt as me };
export { Yt as pe };
export { Kt as he };
export { qt as ge };
export { Xt as oe };
export { Qt as ke };
export { Zt as ie };
export { Jt as je };
export { $t as ne };
export { en as sb };
export { tn as Zh };
export { nn as Uh };
export { rn as Vh };
export { on as Wh };
export { an as ai };
export { sn as Ph };
export { cn as Yh };
export { ln as Th };
export { un as Rh };
export { dn as Uj };
export { pn as Qh };
export { fn as Sh };
export { hn as Xh };
export { vn as wf };
export { bn as ij };
export { yn as Pf };
export { En as pc };
export { On as ug };
export { wn as Xf };
export { Cn as Bg };
export { Tn as Dg };
export { Sn as Ag };
export { In as Tg };
export { An as Ug };
export { jn as lc };
export { Nn as Oc };
export { Rn as Qc };
export { kn as Rc };
export { xn as Pc };
export { Dn as ub };
export { Pn as bg };
export { Fn as li };
export { Gn as Ce };
export { Un as rc };
export { Wn as Db };
export { Hn as nc };
export { Vn as De };
export { zn as vb };
export { Kn as yj };
export { qn as Bj };
export { Ir as Pd };
export { Ar as Qd };
export { jr as Rd };
export { Nr as Sd };
export { Rr as Td };
export { kr as Ud };
export { xr as Od };
export { Dr as Zj };
export { Mr as Ej };
export { Lr as Aj };
export { Pr as Dj };
export { Br as xf };
export { Gr as Wd };
export { Ur as fe };
export { Wr as Zd };
export { Hr as be };
export { Vr as ce };
export { zr as ee };
export { Yr as Xd };
export { Kr as Yd };
export { qr as de };
export { Xr as ae };
export { Qr as Mh };
export { Zr as Hh };
export { Jr as Ih };
export { $r as Jh };
export { eo as Nh };
export { to as Fh };
export { no as Dh };
export { ro as Eh };
export { oo as Kh };
export { io as Gh };
export { ao as Lh };
export { j as kg } from "./312";
export { g as Mf } from "./312";
export { h as ig } from "./312";
export { i as jg } from "./312";
export { l as Ci } from "./312";
export { m as Di } from "./312";
export { f as Qe } from "./312";
export { e as Pe } from "./312";
export { c as Ne } from "./312";
export { d as Oe } from "./312";
export { k as oi } from "./312";
export { n as Yj } from "./312";
export { b as Gb } from "./312";
export { a as tb } from "./312";
export { Wo as Ye };
export { Ho as Mi };
export { Vo as tc };
export { zo as Ni };
export { Yo as Ze };
export { Ko as Cc };
export { qo as xb };
export { Xo as S };
export { Zo as oh };
export { Jo as kd };
export { ei as ni };
export { ti as Xj };
export { ni as Fb };
export { ri as pb };
export { ho as sj };
export { mo as tj };
export { go as nj };
export { _o as pj };
export { vo as qj };
export { bo as oj };
export { yo as mj };
export { Eo as rj };
export { Oo as Lf };
export { wo as Ff };
export { Co as If };
export { To as Jf };
export { So as Hf };
export { Io as Kf };
export { Ao as Ef };
export { jo as Df };
export { Ro as x };
export { ko as Gf };
export { xo as Nc };
export { Do as Ee };
export { Mo as ri };
export { Lo as qi };
export { Po as R };
export { Fo as pi };
export { Fa as M };
export { Ga as L };
export { Ua as K };
export { Ha as J };
export { za as I };
export { Ya as H };
export { qa as O };
export { Xa as N };
export { Za as Zg };
export { Ja as bh };
export { $a as Vg };
export { es as Xg };
export { ts as Yg };
export { ns as Tc };
export { rs as ah };
export { os as cb };
export { as as Wg };
export { ss as bb };
export { cs as Uc };
export { ls as Vc };
export { us as Wc };
export { ds as db };
export { di as q };
export { pi as s };
export { fi as l };
export { hi as k };
export { mi as v };
export { vi as o };
export { bi as p };
export { yi as w };
export { Ei as Jg };
export { Oi as j };
export { wi as r };
export { Ti as n };
export { Si as m };
export { Ii as t };
export { Ai as u };
export { ji as U };
export { Ni as W };
export { Ri as V };
export { xi as X };
export { Mi as hg };
export { Pi as Sg };
export { Bi as Mg };
export { Gi as Ng };
export { Wi as Pg };
export { Hi as Y };
export { Vi as Qg };
export { zi as Jc };
export { Yi as Z };
export { Ki as T };
export { Xi as Lc };
export { Qi as eb };
export { Zi as Dc };
export { Ji as Kc };
export { $i as xc };
export { ea as fb };
export { ta as Hc };
export { na as Fj };
export { ra as Rg };
export { oa as ab };
export { ia as Fc };
export { aa as Gc };
export { sa as Ic };
export { ca as uj };
export { la as vj };
export { fa as mi };
export { ha as Wj };
export { ma as Eb };
export { ga as ob };
export { _a as ib };
export { va as jb };
export { ba as kb };
export { ya as nb };
export { Ea as mb };
export { Oa as wj };
export { wa as mg };
export { Ca as ng };
export { Ta as og };
export { Sa as qg };
export { Ia as pg };
export { Aa as Og };
export { ja as lb };
export { Na as gg };
export { Ra as Ec };
export { ka as Mc };
export { hs as Le };
export { ms as Ke };
export { gs as Ge };
export { _s as Fe };
export { vs as He };
export { bs as Ie };
export { ys as Je };
export { Es as yi };
export { Os as zi };
export { ws as ti };
export { Cs as vi };
export { Ts as ui };
export { Ss as xi };
export { Is as Ib };
export { As as wi };
export { js as Hb };
export { Ns as sc };
export { Rs as xg };
export { ks as Ai };
export { xs as si };
export { Ms as rd };
export { Ls as qd };
export { Ps as md };
export { Bs as ld };
export { Fs as nd };
export { Gs as od };
export { Us as pd };
export { Ws as xh };
export { Hs as yh };
export { Vs as qh };
export { zs as sh };
export { Ys as rh };
export { Ks as vh };
export { qs as wh };
export { Xs as th };
export { Qs as zb };
export { Zs as uh };
export { Js as yb };
export { $s as qc };
export { ec as wg };
export { tc as zh };
export { nc as ph };
export { mc as zc };
export { gc as Tj };
export { vc as yc };
export { bc as gc };
export { yc as fc };
export { Ec as hc };
export { Oc as yf };
export { wc as Cf };
export { Cc as zf };
export { Tc as Af };
export { Sc as Bf };
export { Ic as yg };
export { Ac as kj };
export { jc as lj };
export { Nc as jj };
export { Rc as bf };
export { kc as cf };
export { xc as df };
export { Dc as Ri };
export { Mc as Si };
export { Lc as Oi };
export { Pc as Pi };
export { Bc as Qi };
export { Fc as Ue };
export { Gc as Ve };
export { Uc as We };
export { Wc as Te };
export { Hc as Se };
export { Vc as Xe };
export { zc as Re };
export { Yc as Ji };
export { Kc as Fi };
export { qc as Gi };
export { Xc as Hi };
export { Qc as Ii };
export { Zc as Li };
export { Jc as Ki };
export { $c as Ei };
export { nl as td };
export { ol as Ah };
export { al as Cg };
export { cl as sd };
export { ul as ud };
export { pl as qb };
export { hl as Ab };
export { yl as Uf };
export { Ol as Ch };
export { wl as Bh };
export { Cl as Kg };
export { Sl as Of };
export { Al as Vd };
export { jl as Zf };
export { Nl as lg };
export { Wl as Wf };
export { Hl as Bi };
export { Vl as mc };
export { Yl as Ig };
export { ql as Yf };
export { Ql as ag };
export { Jl as Lg };
export { eu as vf };
export { nu as Id };
export { ou as Hd };
export { pu as a };
export { mu as Rj };
export { _u as Sj };
export { Eu as B };
export { Ou as F };
export { wu as A };
export { Cu as D };
export { Tu as E };
export { Su as C };
export { Iu as z };
export { Au as y };
export { xu as nh };
export { Du as id };
export { Lu as jd };
export { Bu as hd };
export { Vu as gb };
export { zu as Ld };
export { Yu as rg };
export { Ku as sg };
export { qu as Nd };
export { Xu as Md };
export { Qu as rf };
export { Zu as qf };
export { sc as ic };
export { cc as vg };
export { lc as tg };
export { uc as oc };
export { dc as jc };
export { pc as ak };
export { fc as bk };
export { rd as Tf };
export { id as Rf };
export { sd as Vb };
export { ud as Oh };
export { dd as ji };
export { pd as fi };
export { fd as gi };
export { hd as hi };
export { md as di };
export { gd as ii };
export { _d as ei };
export { vd as we };
export { bd as te };
export { yd as ue };
export { Ed as ve };
export { Od as se };
export { wd as ci };
export { Cd as bi };
export { Td as re };
export { Id as G };
export { Nd as Sc };
export { xd as vc };
export { Pd as Qf };
export { Bd as Kb };
export { Gd as Jb };
export { Wd as Nb };
export { Vd as Lb };
export { Kd as Mb };
export { Xd as Sf };
export { Zd as Qj };
export { Jd as Oj };
export { $d as Pj };
export { ep as Hj };
export { tp as Gj };
export { np as Ij };
export { rp as Nj };
export { op as Mj };
export { ip as Jj };
export { ap as Kj };
export { sp as Lj };
export { lp as P };
export { up as i };
export { pp as Gg };
export { xa as vd };
export { Da as xd };
export { Ma as wd };
export { La as Nf };
export { Np as Tb };
export { kp as Pb };
export { Dp as Sb };
export { Lp as Rb };
export { Bp as Qb };
export { Gp as Ob };
export { Vp as bc };
export { Qp as Xb };
export { Jp as Wb };
export { ef as ac };
export { nf as Yb };
export { of as Zb };
export { sf as Ub };
var r = {};
Object.defineProperty(r, "getSensorOrientationAzimuth", {
  get: function () {
    return rr;
  }
});
Object.defineProperty(r, "getSensorOrientationPitch", {
  get: function () {
    return or;
  }
});
Object.defineProperty(r, "getSensorOrientationRoll", {
  get: function () {
    return ir;
  }
});
Object.defineProperty(r, "getSensorGravityX", {
  get: function () {
    return ar;
  }
});
Object.defineProperty(r, "getSensorGravityY", {
  get: function () {
    return sr;
  }
});
Object.defineProperty(r, "getSensorGravityZ", {
  get: function () {
    return cr;
  }
});
Object.defineProperty(r, "getSensorRotationX", {
  get: function () {
    return lr;
  }
});
Object.defineProperty(r, "getSensorRotationY", {
  get: function () {
    return ur;
  }
});
Object.defineProperty(r, "getSensorRotationZ", {
  get: function () {
    return dr;
  }
});
Object.defineProperty(r, "unsubscribeSensor", {
  get: function () {
    return pr;
  }
});
Object.defineProperty(r, "subscribeSensor", {
  get: function () {
    return fr;
  }
});
var o = {};
Object.defineProperty(o, "startSoundDetection", {
  get: function () {
    return wr;
  }
});
Object.defineProperty(o, "stopSoundDetection", {
  get: function () {
    return Tr;
  }
});
Object.defineProperty(o, "getVolumeSensorCurrentValue", {
  get: function () {
    return Sr;
  }
});
import i = require("../../28/index");
import a = require("./12");
function s(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.width;
}
function c(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.x;
}
function l(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.y;
}
function u(e) {
  return a.g(e);
}
function d(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.disabled;
}
function p(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.iconId;
}
function f(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.color;
}
function h(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.text;
}
function m(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.mode;
}
function g(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.sizeType;
}
function _(e, t) {
  a.l(e, t);
}
function v(e, t) {
  a.j(e, t);
}
function b(e, t) {
  a.j(e, {
    x: t
  });
}
function y(e, t) {
  a.j(e, {
    y: t
  });
}
function E(e, t) {
  a.k(e, {
    width: t
  });
}
function O(e, t) {
  a.h(e, {
    color: t
  });
}
function w(e, t) {
  a.h(e, {
    disabled: t
  });
}
function C(e, t) {
  a.h(e, {
    iconId: t
  });
}
function T(e, t) {
  a.h(e, {
    text: i.p(t)
  });
}
function S(e, t) {
  a.h(e, {
    mode: t
  });
}
function I(e, t) {
  a.h(e, {
    sizeType: t
  });
}
import A = require("regenerator-runtime");
var j = function __importDefault(module) {
  var defaultExport = module && module.__esModule ? function () {
    return module.default;
  } : function () {
    return module;
  };
  Object.defineProperty(defaultExport, "a", {
    enumerable: true,
    get: defaultExport
  });
  return defaultExport;
}(A);
import N = require("../../47");
import R = require("../../7");
import k = require("lodash");
import x = require("../../5");
import D = require("../../197/479/index");
import M = require("axios");
var L = function __importDefault(module) {
  var defaultExport = module && module.__esModule ? function () {
    return module.default;
  } : function () {
    return module;
  };
  Object.defineProperty(defaultExport, "a", {
    enumerable: true,
    get: defaultExport
  });
  return defaultExport;
}(M);
import P = require("../../15");
import B = require("../../48/200");
new D.a({
  env: B.a.env,
  projectName: B.a.productCode,
  config: {
    pid: B.a.pid,
    api: B.a.openServiceHost
  }
});
function F(e) {
  return G.apply(this, arguments);
}
function G() {
  return (G = R.a(j.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var a;
    var s;
    var c;
    var l;
    var u;
    var d;
    var p = arguments;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            n = p.length > 1 && undefined !== p[1] ? p[1] : B.a.cdnPath.root;
            e.next = 3;
            return U(t.type, n);
          case 3:
            r = e.sent;
            o = r.data[0];
            i = o.filename;
            a = o.token;
            (s = new FormData()).append("token", a);
            s.append("file", t);
            s.append("key", i);
            e.next = 11;
            return L.a.post(B.a.apiQiniuHost, s);
          case 11:
            c = e.sent;
            l = c.data;
            u = l.hash;
            d = l.key;
            return e.abrupt("return", "https://static.bcmcdn.com/" + d + "?hash=" + u);
          case 14:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function U(e, t) {
  return W.apply(this, arguments);
}
function W() {
  return (W = R.a(j.a.mark(function e(t, n) {
    var r;
    var o;
    var i = arguments;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            r = i.length > 2 && undefined !== i[2] ? i[2] : 1;
            e.next = 3;
            return L.a.get(B.a.apiOverseaServiceHost + "/tiger/kitten/cdn/token/".concat(r), {
              params: {
                type: t,
                prefix: n,
                bucket: "static"
              }
            });
          case 3:
            o = e.sent;
            return e.abrupt("return", o.data);
          case 5:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function H(e) {
  return V.apply(this, arguments);
}
function V() {
  return (V = R.a(j.a.mark(function e(t) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", new Promise(function (e, n) {
              if (P.T(t)) {
                var r = P.m(t);
                if (r) {
                  e(r);
                }
              } else if (P.P(t)) {
                P.e(t).then(function (t) {
                  return e(t);
                });
              } else {
                if (P.S(t)) {
                  window.resolveLocalFileSystemURL(t, function (t) {
                    t.file(function () {
                      var t = R.a(j.a.mark(function t(n) {
                        var r;
                        return j.a.wrap(function (t) {
                          for (;;) {
                            switch (t.prev = t.next) {
                              case 0:
                                (r = new FileReader()).onloadend = function () {
                                  if (this.result) {
                                    var t = new Blob([this.result], {
                                      type: n.type
                                    });
                                    if (t) {
                                      e(t);
                                    }
                                  }
                                };
                                r.readAsArrayBuffer(n);
                              case 3:
                              case "end":
                                return t.stop();
                            }
                          }
                        }, t);
                      }));
                      return function (e) {
                        return t.apply(this, arguments);
                      };
                    }(), function () {
                      console.error("load file error");
                    });
                  });
                } else {
                  e(null);
                }
              }
            }));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function z(e) {
  return Y.apply(this, arguments);
}
function Y() {
  return (Y = R.a(j.a.mark(function e(t) {
    var n;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.next = 2;
            return H(t);
          case 2:
            if (!(n = e.sent)) {
              e.next = 13;
              break;
            }
            e.prev = 4;
            e.next = 7;
            return F(n, B.a.cdnPath.playerUnstable);
          case 7:
            return e.abrupt("return", e.sent);
          case 10:
            e.prev = 10;
            e.t0 = e.catch(4);
            console.error("图片上传失败");
          case 13:
            return e.abrupt("return", null);
          case 14:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[4, 10]]);
  }))).apply(this, arguments);
}
import K = require("../../14");
import q = require("../../91");
import X = require("../../68");
import Q = require("../../48/index");
import Z = require("../../9");
import J = require("../../../../../../src/shared/events/actions");
import $ = require("../../64");
import ee = require("../../38/142");
function te(e) {
  return String(e);
}
function ne(e, t) {
  return "@".concat(e, "_").concat(t);
}
function re(e) {
  return "@__INITIALIZED__".concat(e);
}
function oe(e) {
  var t = {};
  for (var n in e) if (!(e[n].type !== x.y && e[n].type !== x.B)) {
    (function () {
      var r = [];
      e[n].attributes.fields.forEach(function (e) {
        return e.key && r.push(e);
      });
      t[n] = r;
    })();
  }
  return t;
}
function ie(e, t) {
  var n = oe(t);
  var r = [];
  for (var o in n) {
    var i = n[o];
    var a = ce(e, o);
    if (i && !a) {
      r.push([ne(e, o), JSON.stringify(i)]);
    }
  }
  ee.a.multiSet(r);
}
function ae(e) {
  var t = Z.Bb(e);
  var n = [];
  t.attributes.fields.forEach(function (e) {
    return n.push(e);
  });
  var r = J.d.getState().project.id;
  if (t) {
    var o = ne(r, t.id);
    if (ee.a.getItem(o)) {
      ee.a.setItem(o, JSON.stringify(n));
    }
    q.a({
      type: X.b.PLAYER_DATA_WATCH,
      data: {
        screenId: Q.a().getState().currentScreenId,
        tab: x.B,
        id: t.id,
        value: n
      }
    });
  }
}
function se(e) {
  var t = ee.a.getAllKeys().filter(function (t) {
    return 0 === t.indexOf("@".concat(e, "_"));
  });
  t.push(re(e));
  ee.a.multiRemove(t);
}
function ce(e, t) {
  var n = ne(e, t);
  var r = ee.a.getItem(n);
  if (r) {
    try {
      var o = JSON.parse(r);
      if (Array.isArray(o)) {
        return o;
      }
      if ("object" === typeof o) {
        var i = [];
        for (var a in o) i.push({
          id: $.a("DOC_KEY"),
          key: a,
          value: o[a],
          type: "string"
        });
        ee.a.setItem(n, JSON.stringify(i));
        return i;
      }
    } catch (s) {
      ee.a.removeItem(n);
    }
  }
}
function le(e, t, n) {
  var r;
  var o = ce(e, t);
  if (!o) {
    return "";
  }
  n = null === (r = n) || undefined === r ? undefined : r.toString();
  var i = o.find(function (e) {
    return e.key === n;
  });
  return i ? i.value : (K.a.condition(false, {
    type: "error",
    messageId: "keyNotExists",
    values: {
      key: n
    }
  }), console.error("getLocalDocumentFieldItem error.", "appId:", e, "docId:", t, "key:", n, "document:", o), "");
}
function ue(e, t, n, r) {
  return de.apply(this, arguments);
}
function de() {
  return (de = R.a(j.a.mark(function e(t, n, r, o) {
    var i;
    var a;
    var s;
    var c;
    var l;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if ("string" === typeof r || "number" === typeof r) {
              e.next = 3;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "localStorageInvalidKeyType",
              widgetId: n
            });
            return e.abrupt("return");
          case 3:
            if (r = r.toString(), i = "number" === typeof o || "string" === typeof o, K.a.condition(i, {
              type: "error",
              messageId: "localStorageInvalidValueType",
              widgetId: n,
              values: {
                key: r
              }
            }), i) {
              e.next = 8;
              break;
            }
            return e.abrupt("return");
          case 8:
            if (!(a = ce(t, n))) {
              e.next = 27;
              break;
            }
            if ((s = a.find(function (e) {
              return e.key === r;
            })) || (s = {
              id: $.a("DOC_KEY"),
              key: r,
              value: "",
              type: "string"
            }, a.push(s)), !k.isNumber(o)) {
              e.next = 16;
              break;
            }
            e.t0 = o;
            e.next = 22;
            break;
          case 16:
            e.next = 18;
            return z(o);
          case 18:
            if (e.t1 = e.sent, e.t1) {
              e.next = 21;
              break;
            }
            e.t1 = o;
          case 21:
            e.t0 = e.t1;
          case 22:
            s.value = e.t0;
            c = ne(t, n);
            ee.a.setItem(ne(t, n), JSON.stringify(a));
            l = ee.a.getItem(c);
            q.a({
              type: X.b.PLAYER_DATA_WATCH,
              data: {
                screenId: Q.a().getState().currentScreenId,
                tab: x.B,
                id: n,
                value: l ? JSON.parse(l) : ""
              }
            });
          case 27:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function pe(e, t, n) {
  var r;
  var o = ce(e, t);
  n = null === (r = n) || undefined === r ? undefined : r.toString();
  K.a.condition(null === o || undefined === o ? undefined : o.find(function (e) {
    return e.key === n;
  }), {
    type: "error",
    messageId: "keyNotExists",
    values: {
      key: n
    }
  });
  if (o) {
    var i = o.findIndex(function (e) {
      return e.key === te(n);
    });
    if (i >= 0) {
      o.splice(i, 1);
    }
    var a = ne(e, t);
    ee.a.setItem(a, JSON.stringify(o));
    q.a({
      type: X.b.PLAYER_DATA_WATCH,
      data: {
        screenId: Q.a().getState().currentScreenId,
        tab: "",
        id: t,
        value: o
      }
    });
  }
}
function fe(e, t) {
  var n = ce(e, t);
  return n ? n.map(function (e) {
    return e.key;
  }) : [];
}
function he(e, t) {
  return fe(e, t).length;
}
function me(e, t, n) {
  return fe(e, t).includes(te(n));
}
function ge(e, t) {
  var n = ne(e, t);
  if (ee.a.getItem(n)) {
    try {
      ee.a.setItem(n, JSON.stringify([]));
      q.a({
        type: X.b.PLAYER_DATA_WATCH,
        data: {
          screenId: Q.a().getState().currentScreenId,
          tab: x.B,
          id: t,
          value: ee.a.getItem(n)
        }
      });
    } catch (r) {}
  }
}
function _e(e, t) {
  var n;
  var r = N.a(t);
  try {
    for (r.s(); !(n = r.n()).done;) {
      var o = ne(e, n.value);
      if (ee.a.getItem(o)) {
        try {
          ee.a.removeItem(o);
        } catch (i) {}
      }
    }
  } catch (a) {
    r.e(a);
  } finally {
    r.f();
  }
}
var ve = {
  "zh-CN": {
    weekdays: ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"]
  },
  "zh-TW": {
    weekdays: ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"]
  },
  "en-US": {
    weekdays: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
  }
};
function be() {
  return ye() + " " + Ee();
}
function ye() {
  var e = new Date();
  var t = e.getFullYear();
  var n = e.getMonth() + 1;
  var r = e.getDate();
  n = n < 10 ? "0" + n : n;
  r = r < 10 ? "0" + r : r;
  return "".concat(t, "-").concat(n, "-").concat(r);
}
function Ee() {
  var e = new Date();
  var t = e.getHours();
  var n = e.getMinutes();
  var r = e.getSeconds();
  n = n < 10 ? "0" + n : n;
  r = r < 10 ? "0" + r : r;
  return "".concat(t = t < 10 ? "0" + t : t, ":").concat(n, ":").concat(r);
}
function Oe() {
  return new Date().getFullYear();
}
function we() {
  return new Date().getMonth() + 1;
}
function Ce() {
  return new Date().getDate();
}
function Te() {
  var e = arguments.length > 0 && undefined !== arguments[0] ? arguments[0] : "zh-CN";
  return ve[e].weekdays[new Date().getDay()];
}
function Se() {
  return new Date().getDay() || 7;
}
function Ie() {
  return new Date().getHours();
}
function Ae() {
  return new Date().getMinutes();
}
function je() {
  return new Date().getSeconds();
}
var Ne;
var Re;
var ke;
var xe;
var De;
var Me;
var Le;
import Pe = require("./775/index");
var Be = function __importDefault(module) {
  var defaultExport = module && module.__esModule ? function () {
    return module.default;
  } : function () {
    return module;
  };
  Object.defineProperty(defaultExport, "a", {
    enumerable: true,
    get: defaultExport
  });
  return defaultExport;
}(Pe);
import Fe = require("./608");
function Ge(e, t) {
  var n = Math.pow(10, t);
  return Math.round(e * n) / n;
}
function Ue(e, t, n) {
  if (e === Ne.DIVIDE && 0 === n) {
    return t / n;
  }
  if ("number" === typeof t && "number" === typeof n) {
    return function (e, t, n) {
      switch (e) {
        case Ne.ADD:
          return t.plus(n).toNumber();
        case Ne.MINUS:
          return t.minus(n).toNumber();
        case Ne.MULTIPLY:
          return t.times(n).toNumber();
        case Ne.DIVIDE:
          return t.dividedBy(n).toNumber();
        case Ne.POWER:
          return t.pow(n).toNumber();
      }
    }(e, new Fe.Decimal(t), new Fe.Decimal(n));
  }
  var r = ["number", "string"];
  if (e === Ne.ADD) {
    return r.includes(typeof t) && r.includes(typeof n) ? "".concat(t).concat(n) : void K.a.condition(false, {
      type: "error",
      messageId: "additionArgumentTypeError"
    });
  }
  K.a.condition(false, {
    type: "error",
    messageId: "operationArgumentTypeError"
  });
}
function We(e, t) {
  switch (e) {
    case Re.EVEN:
      return t % 2 === 0;
    case Re.ODD:
      return 1 === Math.abs(t % 2);
    case Re.PRIME:
      return function (e) {
        if (isNaN(e) || !isFinite(e) || e % 1 || e < 2) {
          return false;
        }
        if (e % 2 === 0) {
          return 2 === e;
        }
        if (e % 3 === 0) {
          return 3 === e;
        }
        for (var t = Math.sqrt(e), n = 5; n <= t; n += 6) {
          if (e % n === 0) {
            return false;
          }
          if (e % (n + 2) === 0) {
            return false;
          }
        }
        return true;
      }(t);
    case Re.WHOLE:
      return t === Math.floor(t);
    case Re.POSITIVE:
      return t > 0;
    case Re.NEGATIVE:
      return t < 0;
  }
}
function He(e, t) {
  return e % t === 0;
}
function Ve(e, t) {
  var n = Math.round(Math.max(e, t));
  var r = Math.round(Math.min(e, t));
  return Math.round(Math.random() * (n - r)) + r;
}
function ze(e, t, n) {
  return e === ke.AND ? t && n : t || n;
}
function Ye(e, t) {
  switch (e) {
    case xe.ROOT:
      return Math.pow(t, .5);
    case xe.ABS:
      return Math.abs(t);
    case xe.NEG:
      return -t;
    case xe.LN:
      return Math.log(t);
    case xe.LOG10:
      return Math.log(t) / Math.log(10);
    case xe.EXP:
      return Math.pow(Math.E, t);
    case xe.POW10:
      return Math.pow(10, t);
  }
}
function Ke(e, t) {
  return e % t;
}
function qe(e, t) {
  switch (e) {
    case De.SIN:
      return Ge(Math.sin(t * Math.PI / 180), 2);
    case De.COS:
      return Ge(Math.cos(t * Math.PI / 180), 2);
    case De.TAN:
      return Ge(Math.tan(t * Math.PI / 180), 2);
    case De.ASIN:
      return Ge(Math.asin(t) / Math.PI * 180, 2);
    case De.ACOS:
      return Ge(Math.acos(t) / Math.PI * 180, 2);
    case De.ATAN:
      return Ge(Math.atan(t) / Math.PI * 180, 2);
  }
}
function Xe(e, t) {
  switch (e) {
    case Me.ROUND:
      return Math.round(t);
    case Me.CEIL:
      return Math.ceil(t);
    case Me.FLOOR:
      return Math.floor(t);
  }
}
function Qe(e, t, n) {
  switch (e) {
    case Le.EQUAL:
      return k.isEqual(t, n);
    case Le.UNEQUAL:
      return !k.isEqual(t, n);
    case Le.LESS_THAN:
      return t < n;
    case Le.LESS_THAN_OR_EQUAL:
      return t <= n;
    case Le.GREATER_THAN:
      return t > n;
    case Le.GREATER_THAN_OR_EQUAL:
      return t >= n;
  }
}
function Ze(e) {
  return Be.a.lex(e).toPostfix().postfixEval();
}
function Je(e, t) {
  return "number" === t ? "NaN" === e || "number" === typeof e && isNaN(e) ? NaN : isNaN(Number(e)) ? String(e) : Number(e) : "string" === t ? k.isPlainObject(e) ? e = JSON.stringify(e) : String(e) : Boolean(e);
}
function $e() {
  for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) {
    t[n] = arguments[n];
  }
  var r = t.map(function (e) {
    return k.isPlainObject(e) ? JSON.stringify(e) : e;
  });
  return r.join("");
}
function et(e) {
  return "".concat(e).length;
}
function tt(e, t) {
  return e.includes(t);
}
function nt(e, t, n) {
  var r = Math.floor(t);
  if (undefined === n) {
    var o = e[r - 1];
    return o || "";
  }
  var i = Math.floor(n) - 1;
  return r <= i ? e.substring(r - 1, i + 1) : e.substring(i, r).split("").reverse().join("");
}
function rt(e, t) {
  return e.split(t).map(function (e) {
    return /\s/.test(e) || "" === e || isNaN(Number(e)) ? e : Number(e);
  });
}
!function (e) {
  e.ADD = "ADD";
  e.MINUS = "MINUS";
  e.MULTIPLY = "MULTIPLY";
  e.DIVIDE = "DIVIDE";
  e.POWER = "POWER";
}(Ne || (Ne = {}));
(function (e) {
  e.EVEN = "EVEN";
  e.ODD = "ODD";
  e.PRIME = "PRIME";
  e.WHOLE = "WHOLE";
  e.POSITIVE = "POSITIVE";
  e.NEGATIVE = "NEGATIVE";
})(Re || (Re = {}));
(function (e) {
  e.AND = "AND";
  e.OR = "OR";
})(ke || (ke = {}));
(function (e) {
  e.ROOT = "ROOT";
  e.ABS = "ABS";
  e.NEG = "NEG";
  e.LN = "LN";
  e.LOG10 = "LOG10";
  e.EXP = "EXP";
  e.POW10 = "POW10";
})(xe || (xe = {}));
(function (e) {
  e.SIN = "SIN";
  e.COS = "COS";
  e.TAN = "TAN";
  e.ASIN = "ASIN";
  e.ACOS = "ACOS";
  e.ATAN = "ATAN";
})(De || (De = {}));
(function (e) {
  e.ROUND = "ROUND";
  e.CEIL = "CEIL";
  e.FLOOR = "FLOOR";
})(Me || (Me = {}));
(function (e) {
  e.EQUAL = "EQ";
  e.UNEQUAL = "NEQ";
  e.LESS_THAN = "LT";
  e.LESS_THAN_OR_EQUAL = "LTE";
  e.GREATER_THAN = "GT";
  e.GREATER_THAN_OR_EQUAL = "GTE";
})(Le || (Le = {}));
var ot = new Map();
function it(e) {
  var t = ot.get(e);
  var n = Date.now();
  if (t) {
    return t.stoppedAt ? (t.startedAt += n - t.stoppedAt, void (t.stoppedAt = undefined)) : undefined;
  }
  ot.set(e, {
    startedAt: n
  });
}
function at(e) {
  var t = ot.get(e);
  var n = Date.now();
  if (t) {
    if (!t.stoppedAt) {
      t.stoppedAt = n;
    }
  }
}
function st(e) {
  var t = ot.get(e);
  var n = Date.now();
  if (t) {
    if (t.stoppedAt) {
      ot.delete(e);
    } else {
      t.startedAt = n;
    }
  }
}
function ct(e) {
  var t = ot.get(e);
  return t ? ((t.stoppedAt || Date.now()) - t.startedAt) / 1e3 : 0;
}
function lt(e) {
  var t = arguments.length > 1 && undefined !== arguments[1] ? arguments[1] : 2;
  return ct(e).toFixed(t);
}
function ut(e) {
  var t = arguments.length > 1 && undefined !== arguments[1] ? arguments[1] : 2;
  return Number(ct(e).toFixed(t));
}
import dt = require("color");
var pt = function __importDefault(module) {
  var defaultExport = module && module.__esModule ? function () {
    return module.default;
  } : function () {
    return module;
  };
  Object.defineProperty(defaultExport, "a", {
    enumerable: true,
    get: defaultExport
  });
  return defaultExport;
}(dt);
import ft = require("../../60");
import ht = require("../../145");
function mt(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.content;
}
function gt(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.color;
}
function _t(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.fontSize;
}
function vt(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.fontFamily;
}
function bt(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.backgroundColor;
}
function yt(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.justifyContent;
}
function Et(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.textAlign;
}
function Ot(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.height;
}
function wt(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.width;
}
function Ct(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.x;
}
function Tt(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.y;
}
function St(e) {
  return a.g(e);
}
function It(e, t) {
  a.l(e, t);
}
function At(e, t) {
  a.j(e, t);
}
function jt(e, t) {
  a.j(e, {
    x: t
  });
}
function Nt(e, t) {
  a.j(e, {
    y: t
  });
}
function Rt(e, t) {
  a.k(e, t);
}
function kt(e, t) {
  if ("number" === typeof t && (t < ht.m || t > ht.k)) {
    K.a.log({
      type: "warning",
      messageId: "valueOutOfRange",
      widgetId: e
    });
  } else {
    a.k(e, {
      width: t
    });
  }
}
function xt(e, t) {
  if ("number" === typeof t && (t < ht.l || t > ht.j)) {
    K.a.log({
      type: "warning",
      messageId: "valueOutOfRange",
      widgetId: e
    });
  } else {
    a.k(e, {
      height: t
    });
  }
}
function Dt(e, t) {
  var n = i.p(t);
  n = n.replace(/<br>/gi, "\n");
  a.h(e, {
    content: n
  });
}
function Mt(e, t) {
  if (P.pb(t)) {
    t = P.l(pt()(t));
    a.h(e, {
      color: t
    });
  } else {
    K.a.log({
      type: "warning",
      messageId: "argNotColor",
      widgetId: e
    });
  }
}
function Lt(e, t) {
  if ("number" === typeof t) {
    if (t < ft.n || t > ft.e) {
      K.a.log({
        type: "warning",
        messageId: "valueOutOfRange",
        widgetId: e
      });
    } else {
      t = Math.round(t);
      a.h(e, {
        fontSize: t
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "字号"
      }
    });
  }
}
function Pt(e, t) {
  if (P.pb(t)) {
    t = P.l(pt()(t));
    a.h(e, {
      backgroundColor: t
    });
  } else {
    K.a.log({
      type: "warning",
      messageId: "argNotColor",
      widgetId: e
    });
  }
}
function Bt(e, t, n) {
  a.h(e, {
    justifyContent: n,
    textAlign: t
  });
}
function Ft(e, t) {
  a.h(e, {
    textAlign: t
  });
}
function Gt(e, t) {
  a.h(e, {
    justifyContent: t
  });
}
function Ut(e, t) {
  a.h(e, {
    content: t
  });
}
import Wt = require("./243");
function Ht(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.width;
}
function Vt(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.x;
}
function zt(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.y;
}
function Yt(e) {
  return a.g(e);
}
function Kt(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.disabled;
}
function qt(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.color;
}
function Xt(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.value;
}
function Qt(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.placeholder;
}
function Zt(e) {
  var t;
  return (null === (t = a.d(e)) || undefined === t ? undefined : t.errorMessage) || "";
}
function Jt(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.mode;
}
function $t(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.sizeType;
}
function en(e) {
  var t;
  return undefined !== (null === (t = a.d(e)) || undefined === t ? undefined : t.errorMessage);
}
function tn(e, t) {
  a.l(e, t);
}
function nn(e, t) {
  a.j(e, t);
}
function rn(e, t) {
  a.j(e, {
    x: t
  });
}
function on(e, t) {
  a.j(e, {
    y: t
  });
}
function an(e, t) {
  a.k(e, {
    width: t
  });
}
function sn(e, t) {
  a.h(e, {
    color: t
  });
}
function cn(e, t) {
  a.h(e, {
    value: i.p(t)
  });
}
function ln(e, t) {
  a.h(e, {
    placeholder: i.p(t)
  });
}
function un(e, t) {
  a.h(e, {
    errorMessage: i.p(t)
  });
  var n = a.c(e);
  if (n) {
    Wt.b(e, x.w, i.m("error", n, Jt(e)));
  }
}
function dn(e) {
  a.h(e, {
    errorMessage: undefined
  });
}
function pn(e, t) {
  a.h(e, {
    disabled: t
  });
}
function fn(e, t) {
  a.h(e, {
    mode: t
  });
}
function hn(e, t) {
  a.h(e, {
    sizeType: t
  });
}
import mn = require("../../10/index");
import gn = require("../../25/index");
var _n = ["number", "string", "boolean", "undefined", "object"];
function vn(e) {
  return Q.a().getState().variableMap.get(e);
}
function bn(e, t) {
  Q.a().getState().variableMap.set(e, t);
  if ("object" === typeof t) {
    q.b(Q.a().getState().currentScreenId, "list", e, t);
  } else {
    q.b(Q.a().getState().currentScreenId, "variable", e, t);
  }
}
function yn(e, t) {
  var n = vn(e);
  var r = n;
  if ("number" === typeof n && "number" === typeof t) {
    r = n + t;
  } else {
    if ("string" === typeof n) {
      r = "".concat(n).concat(t);
    }
  }
  bn(e, r);
}
function En(e, t) {
  var n = vn(e);
  var r = n;
  if ("number" === typeof n && "number" === typeof t) {
    r = n - t;
  }
  bn(e, r);
}
function On(e, t, n) {
  if (Array.isArray(e)) {
    if (_n.includes(typeof t)) {
      e.push(t);
    }
    q.b(Q.a().getState().currentScreenId, "list", n, e);
  } else {
    if (!Array.isArray(e) && e) {
      K.a.condition(false, {
        type: "error",
        messageId: "errorArrayType"
      });
    }
    if (!e) {
      K.a.condition(false, {
        type: "error",
        messageId: "notArray"
      });
    }
  }
}
function wn(e, t, n, r) {
  if (!isNaN(n) && Array.isArray(e)) {
    K.a.range(n, {
      min: -1
    }, {
      type: "warning",
      messageId: "variableOutRange",
      values: {
        index: n + 1
      }
    });
    if (n > -1) {
      if (Mn(t)) {
        e.splice(n, 0, t);
      }
      q.b(Q.a().getState().currentScreenId, "list", r, e);
    }
  } else {
    if (isNaN(n)) {
      K.a.condition(false, {
        type: "error",
        messageId: "argNotNumber",
        values: {
          name: "项数"
        }
      });
    }
    if (!Array.isArray(e) && e) {
      K.a.condition(false, {
        type: "error",
        messageId: "errorArrayType"
      });
    }
    if (!e) {
      K.a.condition(false, {
        type: "error",
        messageId: "notArray"
      });
    }
  }
}
function Cn(e, t, n) {
  if (!isNaN(t) && Array.isArray(e)) {
    K.a.range(t, {
      min: -1,
      max: e.length
    }, {
      type: "warning",
      messageId: "variableOutRange",
      values: {
        index: t + 1
      }
    });
    if (!Ln(e, t)) {
      e.splice(t, 1);
    }
    q.b(Q.a().getState().currentScreenId, "list", n, e);
  } else {
    if (isNaN(t)) {
      K.a.condition(false, {
        type: "error",
        messageId: "argNotNumber",
        values: {
          name: "项数"
        }
      });
    }
    if (!Array.isArray(e) && e) {
      K.a.condition(false, {
        type: "error",
        messageId: "errorArrayType"
      });
    }
    if (!e) {
      K.a.condition(false, {
        type: "error",
        messageId: "notArray"
      });
    }
  }
}
function Tn(e, t) {
  if (Array.isArray(e)) {
    e.pop();
    q.b(Q.a().getState().currentScreenId, "list", t, e);
  } else {
    if (!Array.isArray(e) && e) {
      K.a.condition(false, {
        type: "error",
        messageId: "errorArrayType"
      });
    }
    if (!e) {
      K.a.condition(false, {
        type: "error",
        messageId: "notArray"
      });
    }
  }
}
function Sn(e, t) {
  if (Array.isArray(e)) {
    e.splice(0, e.length);
    q.b(Q.a().getState().currentScreenId, "list", t, e);
  } else {
    if (!Array.isArray(e) && e) {
      K.a.condition(false, {
        type: "error",
        messageId: "errorArrayType"
      });
    }
    if (!e) {
      K.a.condition(false, {
        type: "error",
        messageId: "notArray"
      });
    }
  }
}
function In(e, t, n, r) {
  if (!isNaN(n) && Array.isArray(e)) {
    if (!K.a.range(n, {
      min: -1,
      max: e.length
    }, {
      type: "error",
      messageId: "variableOutRange",
      values: {
        index: n + 1
      }
    })) {
      return;
    }
    if (Mn(t)) {
      e[n] = t;
    }
    q.b(Q.a().getState().currentScreenId, "list", r, e);
  } else {
    if (isNaN(n)) {
      K.a.condition(false, {
        type: "error",
        messageId: "argNotNumber",
        values: {
          name: "项数"
        }
      });
    }
    if (!Array.isArray(e) && e) {
      K.a.condition(false, {
        type: "error",
        messageId: "errorArrayType"
      });
    }
    if (!e) {
      K.a.condition(false, {
        type: "error",
        messageId: "notArray"
      });
    }
  }
}
function An(e, t, n) {
  if (Array.isArray(e)) {
    if (Mn(t)) {
      e[e.length - 1] = t;
    }
    q.b(Q.a().getState().currentScreenId, "list", n, e);
  } else {
    if (!Array.isArray(e) && e) {
      K.a.condition(false, {
        type: "error",
        messageId: "errorArrayType"
      });
    }
    if (!e) {
      K.a.condition(false, {
        type: "error",
        messageId: "notArray"
      });
    }
  }
}
function jn(e, t, n) {
  if (Array.isArray(e) && Array.isArray(t)) {
    t.splice.apply(t, [0, t.length].concat(gn.a(e)));
    q.b(Q.a().getState().currentScreenId, "list", n, t);
  } else {
    if (!Array.isArray(e) && e || !Array.isArray(t) && t) {
      K.a.condition(false, {
        type: "error",
        messageId: "errorArrayType"
      });
    }
    if (!(e && t)) {
      K.a.condition(false, {
        type: "error",
        messageId: "notArray"
      });
    }
  }
}
function Nn(e, t) {
  if (!isNaN(t) && Array.isArray(e)) {
    if (!Ln(e, t)) {
      return e[t];
    }
  } else {
    if (isNaN(t)) {
      K.a.condition(false, {
        type: "error",
        messageId: "argNotNumber",
        values: {
          name: "项数"
        }
      });
    }
    if (!Array.isArray(e) && e) {
      K.a.condition(false, {
        type: "error",
        messageId: "errorArrayType"
      });
    }
    if (!e) {
      K.a.condition(false, {
        type: "error",
        messageId: "notArray"
      });
    }
  }
}
function Rn(e) {
  if (Array.isArray(e)) {
    return e[e.length - 1];
  }
  if (!Array.isArray(e) && e) {
    K.a.condition(false, {
      type: "error",
      messageId: "errorArrayType"
    });
  }
  if (!e) {
    K.a.condition(false, {
      type: "error",
      messageId: "notArray"
    });
  }
}
function kn(e) {
  if (Array.isArray(e)) {
    return e.length;
  }
  if (!Array.isArray(e) && e) {
    K.a.condition(false, {
      type: "error",
      messageId: "errorArrayType"
    });
  }
  if (!e) {
    K.a.condition(false, {
      type: "error",
      messageId: "notArray"
    });
  }
}
function xn(e, t) {
  var n = arguments.length > 2 && undefined !== arguments[2] ? arguments[2] : 0;
  if (Array.isArray(e)) {
    var r = e.indexOf(t);
    return r + n;
  }
  if (!Array.isArray(e) && e) {
    K.a.condition(false, {
      type: "error",
      messageId: "errorArrayType"
    });
  }
  if (!e) {
    K.a.condition(false, {
      type: "error",
      messageId: "notArray"
    });
  }
}
function Dn(e, t) {
  if (Array.isArray(e)) {
    return e.some(function (e) {
      return e === t;
    });
  }
  if (!Array.isArray(e) && e) {
    K.a.condition(false, {
      type: "error",
      messageId: "errorArrayType"
    });
  }
  if (!e) {
    K.a.condition(false, {
      type: "error",
      messageId: "notArray"
    });
  }
}
function Mn(e) {
  return _n.includes(typeof e);
}
function Ln(e, t) {
  return t < 0 || t >= e.length;
}
function Pn(e, t) {
  return Bn.apply(this, arguments);
}
function Bn() {
  return (Bn = R.a(j.a.mark(function e(t, n) {
    var r;
    var o;
    var i;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            r = N.a(t);
            e.prev = 1;
            r.s();
          case 3:
            if ((o = r.n()).done) {
              e.next = 9;
              break;
            }
            i = o.value;
            e.next = 7;
            return n(i);
          case 7:
            e.next = 3;
            break;
          case 9:
            e.next = 14;
            break;
          case 11:
            e.prev = 11;
            e.t0 = e.catch(1);
            r.e(e.t0);
          case 14:
            e.prev = 14;
            r.f();
            return e.finish(14);
          case 17:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[1, 11, 14, 17]]);
  }))).apply(this, arguments);
}
function Fn(e, t, n, r) {
  if (undefined !== t) {
    if (k.isPlainObject(t)) {
      if ("string" === typeof n || "number" === typeof n) {
        t[n] = r;
        q.b(Q.a().getState().currentScreenId, "object", e, t);
      } else {
        K.a.log({
          type: "error",
          messageId: "objectKeyTypeError"
        });
      }
    } else {
      K.a.log({
        type: "error",
        messageId: "objectTypeError"
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "objectNotExist"
    });
  }
}
function Gn(e, t) {
  if (k.isPlainObject(e)) {
    if ("string" === typeof t || "number" === typeof t) {
      if (!Object.prototype.hasOwnProperty.call(e, t)) {
        K.a.log({
          type: "error",
          messageId: "objectKeyNotExist"
        });
      }
      return e[t];
    }
    K.a.log({
      type: "error",
      messageId: "objectKeyTypeError"
    });
  }
}
function Un(e, t, n) {
  if (undefined !== t) {
    if (k.isPlainObject(t)) {
      if ("string" === typeof n || "number" === typeof n) {
        if (Object.prototype.hasOwnProperty.call(t, n)) {
          delete t[n];
          q.b(Q.a().getState().currentScreenId, "object", e, t);
        } else {
          K.a.log({
            type: "error",
            messageId: "objectKeyNotExist"
          });
        }
      } else {
        K.a.log({
          type: "error",
          messageId: "objectKeyTypeError"
        });
      }
    } else {
      K.a.log({
        type: "error",
        messageId: "objectTypeError"
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "objectNotExist"
    });
  }
}
function Wn(e, t) {
  if (undefined !== t) {
    if (k.isPlainObject(t)) {
      for (var n in t) delete t[n];
      q.b(Q.a().getState().currentScreenId, "object", e, {});
    } else {
      K.a.log({
        type: "error",
        messageId: "objectTypeError"
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "objectNotExist"
    });
  }
}
function Hn(e) {
  var t = {};
  e.forEach(function (e) {
    var n = mn.a(e, 2);
    var r = n[0];
    var o = n[1];
    if ("string" === typeof r || "number" === typeof r) {
      if (Object.prototype.hasOwnProperty.call(t, r)) {
        K.a.log({
          type: "warning",
          messageId: "objectRepeatKey"
        });
      }
      t[r] = o;
    } else {
      K.a.log({
        type: "error",
        messageId: "objectKeyTypeError"
      });
    }
  });
  return t;
}
function Vn(e) {
  return undefined === e ? (K.a.log({
    type: "error",
    messageId: "objectNotExist"
  }), 0) : k.isPlainObject(e) ? Object.keys(e).length : (K.a.log({
    type: "error",
    messageId: "objectTypeError"
  }), 0);
}
function zn(e, t) {
  return undefined === e ? (K.a.log({
    type: "error",
    messageId: "objectNotExist"
  }), false) : k.isPlainObject(e) ? "string" !== typeof t && "number" !== typeof t ? (K.a.log({
    type: "error",
    messageId: "objectKeyTypeError"
  }), false) : Object.prototype.hasOwnProperty.call(e, t) : (K.a.log({
    type: "error",
    messageId: "objectTypeError"
  }), false);
}
var Yn = Math.pow(2, 31) - 1;
function Kn() {
  var e = arguments.length > 0 && undefined !== arguments[0] ? arguments[0] : 1e3;
  e = Math.min(e, Yn);
  if (!i.d()) {
    q.a({
      type: X.b.DEVICE_VIBRATE,
      data: {
        duration: e
      }
    });
  }
  try {
    if (navigator.vibrate && !navigator.vibrate(e)) {
      throw new Error("vibrate error");
    }
  } catch (t) {
    console.error(t);
  }
}
function qn() {
  if (i.d()) {
    if (!i.a()) {
      try {
        if (navigator.vibrate) {
          navigator.vibrate(0);
        }
      } catch (e) {
        console.error(e);
      }
    }
  } else {
    q.a({
      type: X.b.DEVICE_NOT_VIBRATE
    });
  }
}
var Xn;
var Qn = [0, 0, 0];
var Zn = [0, 0, 0];
var Jn = [0, 0, 0];
var $n = [0, 0, 0];
function er(e) {
  return Math.round(180 * e / Math.PI) % 360;
}
function tr(e) {
  var t = arguments.length > 1 && undefined !== arguments[1] ? arguments[1] : 2;
  var n = e.toFixed(t);
  return parseFloat(n);
}
function nr() {
  var e = function (e, t) {
    var n = mn.a(e, 3);
    var r = n[0];
    var o = n[1];
    var i = n[2];
    if (!(r * r + o * o + i * i < .0981 * 9.81)) {
      var a = mn.a(t, 3);
      var s = a[0];
      var c = a[1];
      var l = a[2];
      var u = c * i - l * o;
      var d = l * r - s * i;
      var p = s * o - c * r;
      var f = Math.sqrt(u * u + d * d + p * p);
      if (!(f < .1)) {
        var h = 1 / f;
        u *= h;
        d *= h;
        p *= h;
        var m = 1 / Math.sqrt(r * r + o * o + i * i);
        var g = (o *= m) * p - (i *= m) * d;
        var _ = i * u - (r *= m) * p;
        var v = r * d - o * u;
        var b = [u, d, p, g, _, v, r, o, i];
        var y = 1 / Math.sqrt(s * s + c * c + l * l);
        var E = (s * g + c * _ + l * v) * y;
        var O = (s * r + c * o + l * i) * y;
        return {
          rotation: b,
          inclination: [1, 0, 0, 0, E, O, 0, -O, E]
        };
      }
    }
  }(Zn, Qn);
  if (e) {
    return function (e) {
      var t = er(Math.atan2(e[1], e[4]));
      return [t < 0 ? t + 360 : t || 0, er(Math.asin(-e[7])) || 0, er(Math.atan2(-e[6], e[8])) || 0];
    }(e.rotation);
  }
}
function rr() {
  return tr(Jn[0]);
}
function or() {
  return tr(Jn[1]);
}
function ir() {
  return tr(Jn[2]);
}
function ar() {
  return tr(Zn[0]);
}
function sr() {
  return tr(Zn[1]);
}
function cr() {
  return tr(Zn[2]);
}
function lr() {
  return tr($n[0]);
}
function ur() {
  return tr($n[1]);
}
function dr() {
  return tr($n[2]);
}
function pr() {}
function fr() {
  if (!i.a()) {
    try {
      if ("undefined" !== typeof Magnetometer) {
        var e = new Magnetometer({
          frequency: 60
        });
        e.addEventListener("reading", function () {
          Qn = [e.x, e.y, e.z];
        });
        e.start();
      }
      if ("undefined" !== typeof Accelerometer) {
        var t = new Accelerometer({
          referenceFrame: "device"
        });
        t.addEventListener("reading", function () {
          var e = t.x;
          var n = t.y;
          var r = t.z;
          Zn = [e, n, r];
          Jn = nr() || Jn;
          $n = [Jn[1], Jn[2], Jn[0]];
        });
        t.start();
      }
    } catch (n) {
      console.error(n);
    }
  }
}
function hr(e) {
  return mr.apply(this, arguments);
}
function mr() {
  return (mr = R.a(j.a.mark(function e(t) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if ("true" !== localStorage.getItem("".concat(t, "Permission"))) {
              e.next = 2;
              break;
            }
            return e.abrupt("return", true);
          case 2:
            if (!i.e()) {
              e.next = 5;
              break;
            }
            q.a({
              type: X.b.PLAYER_PERMISSION,
              data: {
                type: t
              }
            });
            return e.abrupt("return", new Promise(function (e) {
              var n = setInterval(function () {
                var r = localStorage.getItem("".concat(t, "DialogPermission"));
                if ("string" === typeof r) {
                  e("true" === r);
                  if (n) {
                    clearInterval(n);
                  }
                }
              }, 500);
            }));
          case 5:
            return e.abrupt("return", true);
          case 6:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function gr() {
  return (gr = R.a(j.a.mark(function e(t) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if ("undefined" !== typeof permissionHandler) {
              e.next = 2;
              break;
            }
            return e.abrupt("return", true);
          case 2:
            e.next = 4;
            return permissionHandler.handleRequest(t);
          case 4:
            return e.abrupt("return", e.sent);
          case 5:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
!function (e) {
  e.RECORD_AUDIO = "RECORD_AUDIO";
}(Xn || (Xn = {}));
var _r = function (e) {
  return gr.apply(this, arguments);
};
var vr = -161;
var br = 0;
var yr = false;
function Er() {
  return Or.apply(this, arguments);
}
function Or() {
  return (Or = R.a(j.a.mark(function e() {
    var t;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.next = 2;
            return hr("microphone");
          case 2:
            if (e.sent) {
              e.next = 6;
              break;
            }
            K.a.condition(false, {
              type: "warning",
              message: "未开启声音侦测权限，无法进行侦测"
            });
            return e.abrupt("return", false);
          case 6:
            e.next = 8;
            return _r(Xn.RECORD_AUDIO);
          case 8:
            if (e.sent) {
              e.next = 12;
              break;
            }
            K.a.condition(false, {
              type: "warning",
              message: "未开启声音侦测权限，无法进行侦测"
            });
            return e.abrupt("return", false);
          case 12:
            e.prev = 12;
            e.next = 15;
            return window.navigator.mediaDevices.getUserMedia({
              audio: true
            });
          case 15:
            t = e.sent;
            localStorage.setItem("microphonePermission", "true");
            return e.abrupt("return", t);
          case 20:
            e.prev = 20;
            e.t0 = e.catch(12);
            K.a.condition(false, {
              type: "warning",
              message: "未开启声音侦测权限，无法进行侦测"
            });
            return e.abrupt("return", false);
          case 24:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[12, 20]]);
  }))).apply(this, arguments);
}
function wr() {
  return Cr.apply(this, arguments);
}
function Cr() {
  return (Cr = R.a(j.a.mark(function e() {
    var t;
    var n;
    var r;
    var o;
    var i;
    var a;
    var s;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (!yr) {
              e.next = 2;
              break;
            }
            return e.abrupt("return");
          case 2:
            e.next = 4;
            return Er();
          case 4:
            if (t = e.sent) {
              n = window.AudioContext || window.webkitAudioContext;
              r = new n();
              o = r.createMediaStreamSource(t);
              (i = r.createAnalyser()).fftSize = 256;
              a = i.frequencyBinCount;
              s = new Uint8Array(a);
              o.connect(i);
              br = window.setInterval(function () {
                i.getByteFrequencyData(s);
                for (var e = 0, t = 0; t < a; t++) {
                  e += Math.pow(s[t], 2);
                }
                var n = Math.sqrt(e / a);
                var r = n / 255 * 160 * (Math.log(n) / Math.log(10)) || 0;
                vr = Math.round(-160 + r);
                vr = Math.max(-160, Math.min(0, vr));
              }, 50);
              yr = true;
            }
          case 6:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Tr() {
  if (br) {
    clearInterval(br);
  }
  vr = -161;
  br = 0;
  yr = false;
}
function Sr() {
  var e = arguments.length > 0 && undefined !== arguments[0] ? arguments[0] : 255;
  if (!yr) {
    return -1;
  }
  var t = Math.round((vr - -160) * (e - 0) / 160);
  return Math.min(Math.max(t, 0), e);
}
if ("undefined" !== typeof window && window.navigator.mediaDevices) {
  window.navigator.mediaDevices.ondevicechange = function () {
    if (yr) {
      wr();
    }
  };
}
var Ir = r.getSensorGravityX;
var Ar = r.getSensorGravityY;
var jr = r.getSensorGravityZ;
var Nr = r.getSensorRotationX;
var Rr = r.getSensorRotationY;
var kr = r.getSensorRotationZ;
var xr = r.getSensorOrientationAzimuth;
var Dr = r.unsubscribeSensor;
var Mr = r.subscribeSensor;
var Lr = o.startSoundDetection;
var Pr = o.stopSoundDetection;
var Br = o.getVolumeSensorCurrentValue;
import Fr = require("../../36/345/114");
function Gr(e) {
  return encodeURI(e.cdnUrl);
}
function Ur(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.width;
}
function Wr(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.height;
}
function Hr(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.x;
}
function Vr(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.y;
}
function zr(e) {
  return a.g(e);
}
function Yr(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.backgroundColor;
}
function Kr(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.borderRadius;
}
function qr(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.resizeMode;
}
function Xr(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.fileId;
}
function Qr(e, t) {
  a.l(e, t);
}
function Zr(e, t) {
  a.j(e, t);
}
function Jr(e, t) {
  a.j(e, {
    x: t
  });
}
function $r(e, t) {
  a.j(e, {
    y: t
  });
}
function eo(e, t) {
  a.k(e, {
    width: t
  });
}
function to(e, t) {
  a.k(e, {
    height: t
  });
}
function no(e, t) {
  if (P.pb(t)) {
    a.h(e, {
      backgroundColor: t
    });
  } else {
    K.a.log({
      type: "warning",
      messageId: "argNotColor",
      widgetId: e
    });
  }
}
function ro(e, t) {
  a.h(e, {
    borderRadius: t
  });
}
function oo(e, t) {
  a.h(e, {
    resizeMode: t
  });
}
function io(e, t) {
  if (Fr.d(t)) {
    a.h(e, {
      fileId: t
    });
  } else {
    K.a.log({
      messageId: "imageNotExists",
      type: "error",
      widgetId: e
    });
  }
}
function ao(e, t) {
  io(e, null === t || undefined === t ? undefined : t.id);
}
import so = require("./312");
import co = require("../../11");
import lo = require("../../../../../../src/shared/widget/custom/storage");
import uo = require("../../../../../../src/shared/widget/custom/load");
import po = require("../../36/85");
function fo(e) {
  var t = e.ruleKey;
  var n = e.ruleOptions;
  var r = e.inputValue;
  var o = e.widgetType;
  var i = e.label;
  var a = e.widgetId;
  var s = {
    label: po.a(o, i)
  };
  if ("object" === typeof n && n.message) {
    n.message = po.b(o, n.message);
  }
  return K.a.validate({
    ruleKey: t,
    ruleOptions: n,
    inputValue: r,
    values: s,
    widgetId: a
  });
}
function ho(e, t) {
  a.l(e, t);
}
function mo(e, t) {
  var n = a.b(e);
  if (n) {
    var r = uo.m(n.type, "__width");
    var o = uo.o(n.type, "__width");
    var i = false;
    if ("number" === typeof t) {
      if ("number" === typeof r && t > r) {
        i = true;
      }
      if ("number" === typeof o && t < o) {
        i = true;
      }
    }
    if (i) {
      K.a.log({
        type: "warning",
        messageId: "valueOutOfRange",
        widgetId: e
      });
    } else {
      a.k(e, {
        width: t
      });
    }
  }
}
function go(e, t) {
  var n = a.b(e);
  if (n) {
    var r = uo.m(n.type, "__height");
    var o = uo.o(n.type, "__height");
    var i = false;
    if ("number" === typeof t) {
      if ("number" === typeof r && t > r) {
        i = true;
      }
      if ("number" === typeof o && t < o) {
        i = true;
      }
    }
    if (i) {
      K.a.log({
        type: "warning",
        messageId: "valueOutOfRange",
        widgetId: e
      });
    } else {
      a.k(e, {
        height: t
      });
    }
  }
}
function _o(e, t) {
  a.j(e, {
    x: t
  });
}
function vo(e, t) {
  a.j(e, {
    y: t
  });
}
function bo(e, t) {
  var n = Math.max(Math.min(Math.round(t), ft.j), ft.r);
  a.i(e, n);
  if (t < 0 || t > 100) {
    K.a.log({
      type: "warning",
      messageId: "opacityValueOutOfRange",
      widgetId: e
    });
  }
}
function yo(e, t, n) {
  a.h(e, co.a({}, t, n));
}
function Eo(e, t, n) {
  var r = i.p(n);
  a.h(e, co.a({}, t, r));
}
function Oo(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.width;
}
function wo(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.height;
}
function Co(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.x;
}
function To(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.y;
}
function So(e) {
  var t;
  var n = null === (t = a.b(e)) || undefined === t ? undefined : t.opacity;
  return undefined !== n ? n : ft.j;
}
function Io(e) {
  return a.g(e);
}
function Ao(e) {
  var t;
  return !(null === (t = a.d(e)) || undefined === t ? undefined : t.disabled);
}
function jo(e, t) {
  var n;
  return null === (n = a.d(e)) || undefined === n ? undefined : n[t];
}
var No = new Map();
function Ro(e, t) {
  No.set(e, t);
}
function ko(e) {
  return No.get(e);
}
function xo() {
  return Array.from(No.values());
}
var Do = function (e, t) {
  var n = a.b(e);
  if (n) {
    var r = lo.f(n.type);
    if (!(null === r || undefined === r ? undefined : r.types.isInvisibleWidget)) {
      var o = uo.l(n.type, t);
      return function (e, t) {
        switch (t) {
          case "color":
            try {
              return P.l(pt()(e));
            } catch (n) {
              return e;
            }
          default:
            return e;
        }
      }(jo(e, t), null === o || undefined === o ? undefined : o.valueType) || "";
    }
  }
  var i = ko(e);
  return (null === i || undefined === i ? undefined : i.hasOwnProperty(t)) ? i[t] : "";
};
var Mo = function (e, t, n) {
  var r = ko(e);
  var o = a.b(e);
  if (o) {
    var s = uo.l(o.type, t);
    if (s) {
      var c = s.valueType;
      var l = s.validators;
      var u = s.label;
      if ("string" === c || "multilineString" === c) {
        if ("string" !== typeof n) {
          n = i.p(n);
        }
        if (l) {
          var d = P.q(l);
          if (!Object.entries(d).every(function (t) {
            var r = mn.a(t, 2);
            var i = r[0];
            var a = r[1];
            return fo({
              ruleKey: "string.".concat(i),
              ruleOptions: a,
              widgetType: o.type,
              label: u,
              inputValue: n,
              widgetId: e
            });
          })) {
            return;
          }
        }
      } else if ("number" === c) {
        var p;
        if ("number" !== typeof n) {
          return void K.a.log({
            type: "error",
            widgetId: e,
            messageId: "argNotNumber",
            values: {
              name: ""
            }
          });
        }
        if (null === (p = l) || undefined === p ? undefined : p.isInteger) {
          n = Math.round(n);
        }
        if (l) {
          var f = P.q(l);
          if (!Object.entries(f).every(function (t) {
            var r = mn.a(t, 2);
            var i = r[0];
            var a = r[1];
            return fo({
              ruleKey: "number.".concat(i),
              ruleOptions: a,
              widgetType: o.type,
              label: u,
              inputValue: n,
              widgetId: e
            });
          })) {
            return;
          }
        }
      } else if ("color" === c) {
        if (!P.pb(n)) {
          return void K.a.log({
            type: "warning",
            messageId: "argNotColor",
            widgetId: e
          });
        }
      } else if ("image" === c) {
        if (!Fr.d(n)) {
          return void K.a.log({
            type: "warning",
            messageId: "imageNotExists",
            widgetId: e
          });
        }
      } else if ("icon" === c) {
        if (!Fr.c(n)) {
          return void K.a.log({
            type: "warning",
            messageId: "imageNotExists",
            widgetId: e
          });
        }
      }
    }
    if (r) {
      r[t] = n;
    } else {
      console.error("setProperty getWidgetInstance error", e, t, n);
    }
    var h = lo.f(o.type);
    if (h) {
      if (!h.types.isInvisibleWidget) {
        yo(e, t, n);
      }
    } else {
      console.error("setProperty widgetManger.getWidget error", e, t, n);
    }
  } else {
    console.error("setProperty widget is null", e, t, n);
  }
};
var Lo = function (e, t, n) {
  var r;
  var o;
  var i = a.b(e);
  if (i) {
    var s = uo.l(i.type, t);
    var c = null === s || undefined === s || null === (r = s.blockOptions) || undefined === r || null === (o = r.setter) || undefined === o ? undefined : o.func;
    if ("function" === typeof c) {
      try {
        c({
          setProperty: Mo,
          getProperty: Do,
          id: e,
          key: t,
          value: n
        });
      } catch (l) {
        console.error("setProperty call setter function error", l);
      }
    } else {
      Mo(e, t, n);
    }
  } else {
    console.error("setProperty widget is null", e, t, n);
  }
};
function Po(e, t) {
  return Bo.apply(this, arguments);
}
function Bo() {
  return (Bo = R.a(j.a.mark(function e(t, n) {
    var r;
    var o;
    var s;
    var c;
    var l;
    var u;
    var d;
    var p;
    var f;
    var h = arguments;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            for (r = h.length, o = new Array(r > 2 ? r - 2 : 0), s = 2; s < r; s++) {
              o[s - 2] = h[s];
            }
            if (c = ko(t)) {
              e.next = 5;
              break;
            }
            console.error("callMethod getWidgetInstance error", t, n);
            return e.abrupt("return");
          case 5:
            if (l = a.b(t)) {
              e.next = 9;
              break;
            }
            (u = console).error.apply(u, ["callMethod widget is null", t, n].concat(o));
            return e.abrupt("return");
          case 9:
            if (d = uo.j(l.type, n)) {
              e.next = 13;
              break;
            }
            (p = console).error.apply(p, ["callMethod getWidgetMethod error", t, n].concat(o));
            return e.abrupt("return");
          case 13:
            if (d.params.forEach(function (e, t) {
              var n = e.valueType;
              var r = o[t];
              if (!("string" !== n && "multilineString" !== n)) {
                if ("string" !== typeof r) {
                  o[t] = i.p(r);
                }
              }
            }), e.prev = 14, "function" !== typeof c[n]) {
              e.next = 20;
              break;
            }
            e.next = 18;
            return c[n].apply(c, o);
          case 18:
            f = e.sent;
            return e.abrupt("return", f);
          case 20:
            e.next = 25;
            break;
          case 22:
            e.prev = 22;
            e.t0 = e.catch(14);
            console.error("callMethod error:", e.t0, "methodName", n);
          case 25:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[14, 22]]);
  }))).apply(this, arguments);
}
function Fo(e, t) {
  for (var n in t) {
    var r = t[n];
    Mo(e, n, r);
  }
}
var Go = new Map();
var Uo = new Map();
function Wo(e) {
  return Go.get(e);
}
function Ho(e, t) {
  return Go.set(e, t);
}
function Vo(e) {
  var t = Go.get(e);
  if (t) {
    Uo.delete(t);
    Go.delete(e);
  }
}
function zo(e, t) {
  Uo.set(e, t);
}
function Yo(e) {
  return Uo.get(e);
}
function Ko(e) {
  var t = Wo(e);
  if (t) {
    var n = t.actors.get_actor(e);
    var r = n.is_error;
    var o = n.value;
    if (!r(o)) {
      return o;
    }
    console.error("get_actor error");
  }
}
function qo(e) {
  var t = Wo(e);
  if (t) {
    t.actors.get_actor_ids().forEach(function (e) {
      var n = t.actors.get_actor(e);
      var r = n.is_error;
      var o = n.value;
      if (r(o)) {
        console.error("clearCanvasBrush get_actor error", e);
      } else {
        o.get_brush().clear();
      }
    });
  }
}
function Xo(e) {
  return Qo.apply(this, arguments);
}
function Qo() {
  return (Qo = R.a(j.a.mark(function e(t) {
    var n;
    var r;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (n = Wo(t)) {
              e.next = 3;
              break;
            }
            return e.abrupt("return");
          case 3:
            e.next = 5;
            return P.lb(20);
          case 5:
            e.next = 7;
            return n.get_screenshot();
          case 7:
            r = e.sent;
            return e.abrupt("return", r);
          case 9:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Zo(e, t) {
  if (Wo(e)) {
    if (Fr.d(t)) {
      yo(e, "backgroundImage", t);
    } else {
      K.a.log({
        messageId: "imageNotExists",
        type: "error",
        widgetId: e
      });
    }
  } else {
    console.error("Stage is null");
  }
}
function Jo(e) {
  return jo(e, "backgroundImage");
}
var $o = new Set();
function ei(e) {
  $o.add(e);
}
function ti(e) {
  $o.delete(e);
}
function ni() {
  $o.clear();
}
function ri(e) {
  return $o.has(e);
}
import oi = require("../../279");
import ii = require("../../6");
import ai = require("../../107");
import si = require("../../683/65");
import ci = require("../../683/128");
import li = require("./67/index");
import ui = require("../../143");
function di(e, t) {
  if ("number" === typeof t) {
    var n = a.d(e);
    if (n && K.a.isNumber(t, {
      type: "error",
      widgetId: e,
      messageId: "argNotNumber",
      values: {
        name: "旋转角度"
      }
    })) {
      var r = n.rotation + t / 180 * Math.PI;
      a.h(e, {
        rotation: r
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "旋转角度"
      }
    });
  }
}
function pi(e, t) {
  if ("number" === typeof t) {
    var n = a.d(e);
    if (n) {
      var r = n.rotation + -t / 180 * Math.PI;
      a.h(e, {
        rotation: r
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "旋转"
      }
    });
  }
}
function fi(e, t) {
  if ("number" === typeof t) {
    var n = Ko(e);
    if (n && K.a.isNumber(t, {
      type: "error",
      widgetId: e,
      messageId: "argNotNumber",
      values: {
        name: "移动距离"
      }
    })) {
      n.move_forward(t);
      var r = n.get_position();
      a.j(e, r);
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "移动"
      }
    });
  }
}
function hi(e, t) {
  if ("number" === typeof t) {
    fi(e, -t);
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "移动"
      }
    });
  }
}
function mi(e, t) {
  if ("number" === typeof t) {
    a.h(e, {
      rotation: t / 180 * Math.PI
    });
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "角度"
      }
    });
  }
}
function gi(e, t) {
  var n = a.e(e);
  if (n) {
    var r = t.x - n.x;
    var o = t.y - n.y;
    if (!(0 === r && 0 === o)) {
      a.h(e, {
        rotation: Math.atan2(o, r)
      });
    }
  }
}
var _i = new Map();
function vi(e, t, n, r) {
  bi(e, t, n, r);
}
function bi(e, t, n, r) {
  var o;
  if ("string" === typeof t) {
    if (t.includes("ACTOR") || Qi(e, t)) {
      if (K.a.isNumber(n, {
        type: "error",
        widgetId: e,
        messageId: "argNotNumber",
        values: {
          name: "间隔时间"
        }
      }) && K.a.isNumber(r, {
        type: "error",
        widgetId: e,
        messageId: "argNotNumber",
        values: {
          name: "重复次数"
        }
      })) {
        K.a.range(n, {
          min: ui.d,
          max: ui.b
        }, {
          type: "warning",
          widgetId: e,
          messageId: "valueOutOfRange"
        });
        _i.delete(e);
        var i;
        var s;
        var c = a.b(e).attributes;
        var l = c.actionList;
        var u = c.selectedStyleId;
        var d = [];
        if (t.includes("ACTOR")) {
          d = (null === (i = l.find(function (e) {
            return e.id === t;
          })) || undefined === i ? undefined : i.styleList) || [];
        } else {
          d = (null === (s = l.find(function (e) {
            return e.name === t;
          })) || undefined === s ? undefined : s.styleList) || [];
        }
        if ((null === (o = d) || undefined === o ? undefined : o.length) && n && r) {
          var p = d.findIndex(function (e) {
            return e.id === u;
          });
          if (-1 === p) {
            p = 0;
          }
          return new Promise(function (t) {
            Ei(e, d[p].id);
            var o = 1;
            var i = 0;
            var a = window.setInterval(function () {
              if (o >= d.length) {
                o = 0;
                i++;
              }
              if (i >= r || _i.get(e) !== a) {
                window.clearInterval(a);
                return t();
              }
              p = (p + 1) % d.length;
              o++;
              Ei(e, d[p].id);
            }, n);
            _i.set(e, a);
          });
        }
      }
    } else {
      K.a.log({
        type: "error",
        widgetId: e,
        messageId: "actorActionNameNotExists"
      });
    }
  } else {
    K.a.log({
      type: "error",
      widgetId: e,
      messageId: "mustToBeString",
      values: {
        name: "动作"
      }
    });
  }
}
function yi(e) {
  _i.delete(e);
}
function Ei(e, t) {
  a.h(e, {
    selectedStyleId: t
  });
}
function Oi(e, t) {
  if ("__random" === t) {
    var n = k.random(-1 * Math.PI, Math.PI);
    a.h(e, {
      rotation: n
    });
  } else if ("__mouse" === t) {
    var r = Wo(e);
    if (!r) {
      return;
    }
    var o = Yo(r);
    if (o) {
      gi(e, o);
    }
  } else {
    var i = a.e(t);
    if (!i) {
      return;
    }
    gi(e, i);
  }
}
function wi(e, t, n) {
  var r = Wo(e);
  if (r) {
    var o = r.actors.get_actor(e);
    var i = o.value;
    if (!(0, o.is_error)(i) && K.a.isNumber(n, {
      type: "error",
      widgetId: e,
      messageId: "argNotNumber",
      values: {
        name: "旋转角度"
      }
    })) {
      var a = si.b(n);
      i.rotate_around_actor(t, a);
    }
  }
}
function Ci(e, t) {
  var n = arguments.length > 2 && undefined !== arguments[2] ? arguments[2] : "full";
  var r = Wo(e);
  if (r) {
    var o = r.actors.get_actor(e);
    var i = o.value;
    var a = o.is_error;
    if (!a(i)) {
      if ("x" === n) {
        i.set_position_x(t.x);
      } else {
        if ("y" === n) {
          i.set_position_y(t.y);
        } else {
          i.set_position(t.x, t.y);
        }
      }
    }
  }
}
function Ti(e, t, n) {
  if (K.a.isNumber(t, {
    type: "error",
    widgetId: e,
    messageId: "argNotNumber",
    values: {
      name: "x坐标"
    }
  }) && K.a.isNumber(n, {
    type: "error",
    widgetId: e,
    messageId: "argNotNumber",
    values: {
      name: "y坐标"
    }
  })) {
    a.j(e, {
      x: t,
      y: n
    });
    Ci(e, {
      x: t,
      y: n
    });
  }
}
function Si(e, t) {
  if ("__random" === t) {
    var n = Wo(e);
    if (!n) {
      return;
    }
    var r = n.get_view().clientWidth;
    var o = n.get_view().clientHeight;
    var i = k.random(-1 * r, r);
    var s = k.random(-1 * o, o);
    a.j(e, {
      x: i,
      y: s
    });
    Ci(e, {
      x: i,
      y: s
    });
  } else if ("__mouse" === t) {
    var c = Wo(e);
    if (!c) {
      return;
    }
    var l = Yo(c);
    if (l) {
      var u = l.x;
      var d = l.y;
      a.j(e, {
        x: u,
        y: d
      });
      Ci(e, {
        x: u,
        y: d
      });
    }
  } else {
    var p = a.e(t);
    if (!p) {
      return;
    }
    a.j(e, p);
    Ci(e, p);
  }
}
function Ii(e, t) {
  if (K.a.isNumber(t, {
    type: "error",
    widgetId: e,
    messageId: "argNotNumber",
    values: {
      name: "x坐标"
    }
  })) {
    a.j(e, {
      x: t
    });
    Ci(e, {
      x: t
    }, "x");
  }
}
function Ai(e, t) {
  if (K.a.isNumber(t, {
    type: "error",
    widgetId: e,
    messageId: "argNotNumber",
    values: {
      name: "y坐标"
    }
  })) {
    a.j(e, {
      y: t
    });
    Ci(e, {
      y: t
    }, "y");
  }
}
function ji(e, t, n) {
  if ("number" === typeof t) {
    var r = a.e(e);
    if (r) {
      if (!K.a.isNumber(t, {
        type: "error",
        widgetId: e,
        messageId: "argNotNumber",
        values: {
          name: "x坐标"
        }
      })) {
        return;
      }
      a.j(e, {
        x: r.x + n * t
      });
      Ci(e, {
        x: r.x + n * t
      }, "x");
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "X坐标"
      }
    });
  }
}
function Ni(e, t, n) {
  if ("number" === typeof t) {
    var r = a.e(e);
    if (r && K.a.isNumber(t, {
      type: "error",
      widgetId: e,
      messageId: "argNotNumber",
      values: {
        name: "y坐标"
      }
    })) {
      a.j(e, {
        y: r.y + n * t
      });
      Ci(e, {
        y: r.y + n * t
      }, "y");
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "Y坐标"
      }
    });
  }
}
function Ri(e, t, n, r) {
  return ki.apply(this, arguments);
}
function ki() {
  return (ki = R.a(j.a.mark(function e(t, n, r, o) {
    var i;
    var s;
    var c;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if ("number" === typeof o) {
              e.next = 3;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "时间"
              }
            });
            return e.abrupt("return");
          case 3:
            if ("number" === typeof n) {
              e.next = 6;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "X坐标"
              }
            });
            return e.abrupt("return");
          case 6:
            if (i = Wo(t), s = a.e(t), i && s) {
              e.next = 10;
              break;
            }
            return e.abrupt("return");
          case 10:
            if (o < 0 && K.a.log({
              type: "warning",
              messageId: "valueOutOfRange",
              widgetId: t
            }), !(o <= 0)) {
              e.next = 14;
              break;
            }
            ji(t, n, r);
            return e.abrupt("return");
          case 14:
            c = s.x + n * r;
            e.next = 17;
            return i.stage_animation.compose_tween(t, {
              variation_type: ai.f.TO,
              tween_vars: {
                position_x: c,
                duration: o,
                on_complete: function () {
                  a.j(t, {
                    x: c
                  });
                }
              }
            });
          case 17:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function xi(e, t, n, r) {
  return Di.apply(this, arguments);
}
function Di() {
  return (Di = R.a(j.a.mark(function e(t, n, r, o) {
    var i;
    var s;
    var c;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if ("number" === typeof o) {
              e.next = 3;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "时间"
              }
            });
            return e.abrupt("return");
          case 3:
            if ("number" === typeof n) {
              e.next = 6;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "Y坐标"
              }
            });
            return e.abrupt("return");
          case 6:
            if (i = Wo(t), s = a.e(t), i && s) {
              e.next = 10;
              break;
            }
            return e.abrupt("return");
          case 10:
            if (o < 0 && K.a.log({
              type: "warning",
              messageId: "valueOutOfRange",
              widgetId: t
            }), !(o <= 0)) {
              e.next = 14;
              break;
            }
            Ni(t, n, r);
            return e.abrupt("return");
          case 14:
            c = s.y + n * r;
            e.next = 17;
            return i.stage_animation.compose_tween(t, {
              variation_type: ai.f.TO,
              tween_vars: {
                position_y: c,
                duration: o,
                on_complete: function () {
                  a.j(t, {
                    y: c
                  });
                }
              }
            });
          case 17:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Mi(e, t, n, r) {
  return Li.apply(this, arguments);
}
function Li() {
  return (Li = R.a(j.a.mark(function e(t, n, r, o) {
    var i;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if ("number" === typeof n) {
              e.next = 3;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "时间"
              }
            });
            return e.abrupt("return");
          case 3:
            if ("number" === typeof r) {
              e.next = 6;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "X坐标"
              }
            });
            return e.abrupt("return");
          case 6:
            if ("number" === typeof o) {
              e.next = 9;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "Y坐标"
              }
            });
            return e.abrupt("return");
          case 9:
            if (i = Wo(t)) {
              e.next = 12;
              break;
            }
            return e.abrupt("return");
          case 12:
            if (n < 0 && K.a.log({
              type: "warning",
              messageId: "valueOutOfRange",
              widgetId: t
            }), !(n <= 0)) {
              e.next = 16;
              break;
            }
            Ti(t, r, o);
            return e.abrupt("return");
          case 16:
            e.next = 18;
            return i.stage_animation.compose_tween(t, {
              variation_type: ai.f.TO,
              tween_vars: {
                position_x: r,
                position_y: o,
                duration: n,
                on_complete: function () {
                  a.j(t, {
                    x: r,
                    y: o
                  });
                }
              }
            });
          case 18:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Pi(e, t) {
  a.l(e, t);
}
function Bi(e, t) {
  return Fi.apply(this, arguments);
}
function Fi() {
  return (Fi = R.a(j.a.mark(function e(t, n) {
    var r;
    var o;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (r = Wo(t)) {
              e.next = 3;
              break;
            }
            return e.abrupt("return");
          case 3:
            if (o = Ko(t)) {
              e.next = 6;
              break;
            }
            return e.abrupt("return");
          case 6:
            if (K.a.isNumber(n, {
              type: "error",
              widgetId: t,
              messageId: "argNotNumber",
              values: {
                name: "时间"
              }
            })) {
              e.next = 8;
              break;
            }
            return e.abrupt("return");
          case 8:
            o.set_visible(true);
            o.set_alpha(0);
            e.next = 12;
            return r.stage_animation.compose_tween(t, {
              variation_type: ai.f.TO,
              tween_vars: {
                alpha: 1,
                duration: n
              }
            });
          case 12:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Gi(e, t) {
  return Ui.apply(this, arguments);
}
function Ui() {
  return (Ui = R.a(j.a.mark(function e(t, n) {
    var r;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (r = Wo(t)) {
              e.next = 3;
              break;
            }
            return e.abrupt("return");
          case 3:
            if (K.a.isNumber(n, {
              type: "error",
              widgetId: t,
              messageId: "argNotNumber",
              values: {
                name: "时间"
              }
            })) {
              e.next = 5;
              break;
            }
            return e.abrupt("return");
          case 5:
            e.next = 7;
            return r.stage_animation.compose_tween(t, {
              variation_type: ai.f.TO,
              tween_vars: {
                alpha: 0,
                duration: n
              }
            });
          case 7:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Wi(e, t) {
  if (a.d(e) && K.a.isNumber(t, {
    type: "error",
    widgetId: e,
    messageId: "argNotNumber",
    values: {
      name: "比例大小"
    }
  })) {
    var n = {
      x: t /= 100,
      y: t,
      ratio: false
    };
    a.h(e, {
      scaleAndLock: n
    });
  }
}
function Hi(e, t, n) {
  var r = a.d(e);
  if (r && K.a.isNumber(t, {
    type: "error",
    widgetId: e,
    messageId: "argNotNumber",
    values: {
      name: "比例大小"
    }
  })) {
    var o;
    var i = {
      x: o = r.scaleAndLock ? (r.scaleAndLock.x || 0) + t / 100 * n : r.scale + t / 100 * n,
      y: o,
      ratio: false
    };
    a.h(e, {
      scaleAndLock: i
    });
  }
}
function Vi(e, t, n) {
  var r = a.d(e);
  if (r && K.a.isNumber(n, {
    type: "error",
    widgetId: e,
    messageId: "argNotNumber",
    values: {
      name: "比例大小"
    }
  })) {
    n /= 100;
    var o;
    var i = ii.a({}, r.scaleAndLock || {
      x: 1,
      y: 1,
      ratio: false
    });
    i.ratio = false;
    o = "scale_x" === t ? i.x = n : "scale_y" === t ? i.y = n : i.x = i.y = n;
    K.a.range(o, {
      min: .01,
      max: 100
    }, {
      type: "warning",
      widgetId: e,
      messageId: "scaleOutOfRange"
    });
    a.h(e, {
      scaleAndLock: i
    });
  }
}
function zi(e, t) {
  var n = a.d(e);
  if (n) {
    var r = ii.a({}, n.scaleAndLock || {
      x: 1,
      y: 1,
      ratio: false
    });
    var o = r.x;
    if ("scale_y" === t) {
      o = r.y;
    }
    return Math.round(100 * o);
  }
}
function Yi(e, t, n, r) {
  var o = a.d(e);
  if (o && K.a.isNumber(n, {
    type: "error",
    widgetId: e,
    messageId: "argNotNumber",
    values: {
      name: "比例大小"
    }
  })) {
    var i;
    var s = ii.a({}, o.scaleAndLock || {
      x: 1,
      y: 1,
      ratio: false
    });
    s.ratio = false;
    i = "scale_x" === t ? s.x += n / 100 * r : "scale_y" === t ? s.y += n / 100 * r : s.x = s.y = s.x + n / 100 * r;
    K.a.range(i, {
      min: .01,
      max: 100
    }, {
      type: "warning",
      widgetId: e,
      messageId: "scaleOutOfRange"
    });
    a.h(e, {
      scaleAndLock: s
    });
  }
}
function Ki(e, t, n) {
  var r = a.b(e);
  if (r && K.a.isNumber(t, {
    type: "error",
    widgetId: e,
    messageId: "argNotNumber",
    values: {
      name: "不透明度"
    }
  })) {
    var o = "number" === typeof r.opacity ? r.opacity : 100;
    K.a.range(o + t * n, {
      min: 0,
      max: 100
    }, {
      type: "warning",
      widgetId: e,
      messageId: "opacityOutOfRange"
    });
    var i = Math.min(100, Math.max(0, o + t * n));
    a.i(e, i);
  }
}
function qi(e, t) {
  var n = [];
  var r = a.b(e);
  return r ? (r.attributes.actionList.some(function (e) {
    var r = e.styleList.map(function (e) {
      return e.id;
    });
    return !!r.includes(t) && (n = r, true);
  }), n) : n;
}
function Xi(e) {
  var t;
  var n = Ko(e);
  if (n) {
    var r = null === (t = n.get_current_style()) || undefined === t ? undefined : t.style_id;
    if (r) {
      var o = qi(e, r);
      if (o.includes(r)) {
        return o.indexOf(r) + 1;
      }
    }
  }
}
function Qi(e, t) {
  var n = Ko(e);
  var r = a.b(e);
  if (r && n) {
    return r.attributes.actionList.some(function (e) {
      return e.name === t;
    });
  }
}
function Zi(e, t) {
  var n = Ko(e);
  var r = a.b(e);
  if (!r || !n) {
    return null;
  }
  var o = r.attributes.actionList;
  return t.includes("ACTOR") ? o.find(function (e) {
    return e.id === t;
  }) : o.find(function (e) {
    return e.name === t;
  });
}
function Ji(e, t, n) {
  var r;
  var o = Zi(e, t);
  return o ? null === (r = o.styleList[n]) || undefined === r ? undefined : r.id : null;
}
function $i(e, t) {
  var n = Ko(e);
  var r = a.b(e);
  if (!r || !n) {
    return -1;
  }
  var o;
  var i = r.attributes.actionList;
  var s = -1;
  var c = N.a(i);
  try {
    for (c.s(); !(o = c.n()).done;) {
      var l = o.value.styleList.findIndex(function (e) {
        return e.id === t;
      });
      if (l >= 0) {
        s = l;
        break;
      }
    }
  } catch (u) {
    c.e(u);
  } finally {
    c.f();
  }
  return s;
}
function ea(e, t, n) {
  var r = Zi(e, t);
  return !!r && ("number" === typeof n ? !!r.styleList[n - 1] && r.styleList[n - 1].id : !!r.styleList.find(function (e) {
    return e.id === n;
  }) && n);
}
function ta(e, t) {
  var n = a.d(e);
  if (n) {
    switch (t) {
      case "scale":
        return 100 * n.scale;
      case "degree":
        return Math.ceil(n.rotation / Math.PI * 180);
      case "style":
        return Xi(e);
      default:
        console.error("getActorProperty property error", t);
    }
  }
}
function na(e, t) {
  _i.delete(e);
  a.h(e, {
    selectedStyleId: t
  });
}
function ra(e, t, n) {
  var r = t;
  if ("string" === typeof n) {
    if (!n || n.includes("ACTOR") || Qi(e, n)) {
      if (t !== Z.h) {
        if ("object" !== typeof t && "boolean" !== typeof t) {
          if ("number" === typeof t || t.includes("STYLE")) {
            if ("number" === typeof t) {
              var o = ea(e, n, t);
              if (!o) {
                return void K.a.log({
                  type: "error",
                  widgetId: e,
                  messageId: "actorStyleIndexNotExists"
                });
              }
              r = o;
            }
            if (n && !n.includes("ACTOR") && "string" === typeof t && t.includes("STYLE")) {
              var i = $i(e, t);
              if (i >= 0) {
                var s = Ji(e, n, i);
                if (!s) {
                  return void K.a.log({
                    type: "error",
                    widgetId: e,
                    messageId: "actorStyleIndexNotExists"
                  });
                }
                r = s;
              }
            }
            _i.delete(e);
            a.h(e, {
              selectedStyleId: r
            });
          } else {
            K.a.log({
              type: "error",
              widgetId: e,
              messageId: "actorStyleIndexNotExists",
              values: {
                name: "造型"
              }
            });
          }
        } else {
          K.a.log({
            type: "error",
            widgetId: e,
            messageId: "actorStyleIndexNotExists",
            values: {
              name: "造型"
            }
          });
        }
      } else {
        K.a.log({
          type: "error",
          widgetId: e,
          messageId: "actorStyleIndexNotExists",
          values: {
            name: "造型"
          }
        });
      }
    } else {
      K.a.log({
        type: "error",
        widgetId: e,
        messageId: "actorActionNameNotExists",
        values: {
          name: "动作"
        }
      });
    }
  } else {
    K.a.log({
      type: "error",
      widgetId: e,
      messageId: "mustToBeString",
      values: {
        name: "动作"
      }
    });
  }
}
function oa(e, t) {
  if (Ko(e)) {
    var n = a.d(e).selectedStyleId;
    if (n) {
      var r = qi(e, n);
      if (null === r || undefined === r ? undefined : r.length) {
        var o = 0;
        if ("random" === t) {
          o = Math.floor(Math.random() * r.length);
        } else {
          var i = r.indexOf(n);
          if (i <= -1) {
            return;
          }
          o = (i + t + r.length) % r.length;
        }
        na(e, r[o]);
      }
    }
  }
}
function ia(e) {
  var t;
  return Math.ceil((null === (t = a.e(e)) || undefined === t ? undefined : t.x) || 0);
}
function aa(e) {
  var t;
  return Math.ceil((null === (t = a.e(e)) || undefined === t ? undefined : t.y) || 0);
}
function sa(e) {
  var t = a.d(e);
  if (t) {
    return Math.ceil(t.rotation / Math.PI * 180);
  }
}
function ca(e, t, n, r) {
  var o = Wo(e);
  if (o) {
    var i = o.components.get_actor_dialog_manager();
    if (i) {
      if ("" !== t) {
        if (K.a.isNumber(r, {
          type: "error",
          widgetId: e,
          messageId: "argNotNumber",
          values: {
            name: "时间"
          }
        })) {
          var a = t.length > 90 ? "".concat(t.substr(0, 90), "...") : t;
          i.load_actor_dialog(e, a, n);
          if (r !== 1 / 0) {
            setTimeout(function () {
              i.destroy_actor_dialog(e);
            }, 1e3 * r);
          }
        }
      } else {
        i.destroy_actor_dialog(e);
      }
    }
  }
}
function la(e, t) {
  var n = arguments.length > 2 && undefined !== arguments[2] ? arguments[2] : 1 / 0;
  ca(e, t, ci.a.SAYING, n);
}
function ua(e) {
  switch (e) {
    case "__boundary_left":
      return ai.b.LEFT;
    case "__boundary_right":
      return ai.b.RIGHT;
    case "__boundary_top":
      return ai.b.TOP;
    default:
      return ai.b.BOTTOM;
  }
}
var da = [ai.b.LEFT, ai.b.RIGHT, ai.b.TOP, ai.b.BOTTOM];
var pa = new Set();
function fa(e) {
  pa.add(e);
}
function ha(e) {
  pa.delete(e);
}
function ma() {
  pa.clear();
}
function ga(e) {
  return pa.has(e);
}
function _a(e, t) {
  var n = Wo(e);
  if (!n) {
    return false;
  }
  var r = n.actors.get_actor(e);
  var o = r.is_error;
  var i = r.value;
  if (o(i) || !i.get_visible()) {
    return false;
  }
  var a = i.check_bumped(t);
  var s = a.is_error;
  var c = a.value;
  return !s(c) && c;
}
function va(e, t) {
  var n = Wo(e);
  if (!n) {
    return false;
  }
  var r = n.actors.get_actor(e);
  var o = r.is_error;
  var i = r.value;
  return !(o(i) || !i.get_visible()) && ("__boundary_any" === t ? da.some(function (e) {
    return i.check_relation_with_edge("collision", e);
  }) : i.check_relation_with_edge("collision", ua(t)));
}
function ba(e) {
  var t = Wo(e);
  if (!t) {
    return false;
  }
  var n = Yo(t);
  if (!n) {
    return false;
  }
  var r = t.actors.get_actor(e);
  var o = r.is_error;
  var i = r.value;
  if (o(i) || !i.get_visible()) {
    return false;
  }
  var a = 0;
  t.actors.get_actor_ids().forEach(function (e) {
    var r = t.actors.get_actor(e).value;
    if (!o(r) && r.get_visible() && r.hit_test(n.x, n.y) && r.get_z_index() > a) {
      a = r.get_z_index();
    }
  });
  return i.hit_test(n.x, n.y) && i.get_z_index() === a;
}
function ya(e) {
  var t = Wo(e);
  if (!t) {
    return false;
  }
  var n = t.actors.get_actor(e);
  var r = n.is_error;
  var o = n.value;
  return !r(o) && o.has_left_stage();
}
function Ea(e, t) {
  if ("__boundary_any" === t) {
    return ya(e);
  }
  var n = Wo(e);
  if (!n) {
    return false;
  }
  var r = n.actors.get_actor(e);
  var o = r.is_error;
  var i = r.value;
  return !o(i) && i.check_relation_with_edge("overstep", ua(t));
}
function Oa(e, t) {
  var n = arguments.length > 2 && undefined !== arguments[2] ? arguments[2] : 1 / 0;
  ca(e, t, ci.a.THINKING, n);
}
function wa(e, t, n) {
  li.b(function () {
    return _a(e, t);
  }, n);
}
function Ca(e, t, n) {
  li.b(function () {
    return va(e, t);
  }, n);
}
function Ta(e, t, n) {
  if ("__mouse" === t) {
    li.b(function () {
      return ba(e);
    }, n);
  }
}
function Sa(e, t) {
  li.b(function () {
    return ya(e);
  }, t);
}
function Ia(e, t, n) {
  if ("__boundary_any" !== t) {
    li.b(function () {
      return Ea(e, t);
    }, n);
  } else {
    Sa(e, n);
  }
}
function Aa(e, t) {
  var n = a.d(e);
  if (n) {
    var r = ii.a({}, n.flipped || {
      vertical: false,
      horizontal: false
    });
    if ("horizontal" === t) {
      r.horizontal = true;
    } else {
      r.vertical = true;
    }
    a.h(e, {
      flipped: r
    });
  }
}
function ja(e, t) {
  var n = a.d(e);
  if (!n) {
    return false;
  }
  var r = n.flipped || {
    vertical: false,
    horizontal: false
  };
  return "horizontal" === t ? r.horizontal : r.vertical;
}
function Na(e, t) {
  var n = Wo(e);
  if (n) {
    var r = n.actors.get_actor(e);
    var o = r.is_error;
    var i = r.value;
    if (!o(i)) {
      var a = i.get_z_index();
      if ("up" === t) {
        a += 1;
      } else {
        if ("down" === t) {
          a -= 1;
        } else {
          a = "top" === t ? 999999 : 0;
        }
      }
      i.set_z_index(a);
    }
  }
}
function Ra(e) {
  if (!e) {
    return false;
  }
  var t = e.get_shadow_field("ACTOR_ACTION_WRAPPER", "ACTOR_ACTION_ID");
  return t || false;
}
function ka(e) {
  if (!e) {
    return false;
  }
  var t = e.get_shadow_field("ACTOR_STYLE_WRAPPER", "ACTOR_STYLE_ID");
  return t || false;
}
function xa(e) {
  try {
    return P.l(pt()(e));
  } catch (t) {
    return "";
  }
}
function Da(e, t, n, r) {
  try {
    var o = pt.a.rgb(e, t, n).alpha(r / 100);
    return P.l(o);
  } catch (i) {
    return "";
  }
}
function Ma(e, t, n, r) {
  try {
    var o = pt.a.hsv(e, t, n).alpha(r / 100);
    return P.l(o);
  } catch (i) {
    return "";
  }
}
function La(e) {
  try {
    var t = pt()(e).hsv();
    return t.color.concat(100 * t.valpha);
  } catch (n) {
    console.error("hexToHsv error", n);
    return [];
  }
}
function Pa(e) {
  var t = Ko(e);
  return null === t || undefined === t ? undefined : t.get_brush();
}
function Ba(e) {
  var t = a.d(e);
  var n = null === t || undefined === t ? undefined : t.isPenDown;
  var r = Ko(e);
  var o = null === r || undefined === r ? undefined : r.get_brush();
  if (r && o) {
    var i = r.get_position();
    a.j(e, i);
    if (n) {
      o.set_pen_down();
    } else {
      if (!(null === o || undefined === o)) {
        o.set_pen_up();
      }
    }
  }
}
function Fa(e, t, n) {
  if ("number" === typeof t) {
    if ("number" === typeof n) {
      var r = Ko(e);
      var o = null === r || undefined === r ? undefined : r.get_brush();
      if (r && o) {
        o.set_pen_up();
        r.set_position(t, n);
        o.set_pen_down();
        Ba(e);
      }
    } else {
      K.a.log({
        type: "error",
        messageId: "argNotNumber",
        widgetId: e,
        values: {
          name: "y"
        }
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "x"
      }
    });
  }
}
function Ga(e, t, n, r, o) {
  if ("number" === typeof t) {
    if ("number" === typeof n) {
      if ("number" === typeof r) {
        if ("number" === typeof o) {
          a.h(e, {
            updateAt: Date.now()
          });
          var i = Ko(e);
          var s = null === i || undefined === i ? undefined : i.get_brush();
          if (i && s) {
            s.set_pen_up();
            i.set_position(t, n);
            s.set_pen_down();
            i.set_position(r, o);
            Ba(e);
          }
        } else {
          K.a.log({
            type: "error",
            messageId: "argNotNumber",
            widgetId: e,
            values: {
              name: "y2"
            }
          });
        }
      } else {
        K.a.log({
          type: "error",
          messageId: "argNotNumber",
          widgetId: e,
          values: {
            name: "x2"
          }
        });
      }
    } else {
      K.a.log({
        type: "error",
        messageId: "argNotNumber",
        widgetId: e,
        values: {
          name: "y1"
        }
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "x1"
      }
    });
  }
}
function Ua(e, t) {
  return Wa.apply(this, arguments);
}
function Wa() {
  return (Wa = R.a(j.a.mark(function e(t, n) {
    var r;
    var o;
    var i;
    var a;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if ("number" === typeof n) {
              e.next = 3;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "半径"
              }
            });
            return e.abrupt("return");
          case 3:
            if (r = Ko(t), o = null === r || undefined === r ? undefined : r.get_brush(), r && o) {
              e.next = 7;
              break;
            }
            return e.abrupt("return");
          case 7:
            i = ia(t);
            a = aa(t);
            Ha(t, n, i, a);
          case 10:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Ha(e, t, n, r) {
  return Va.apply(this, arguments);
}
function Va() {
  return (Va = R.a(j.a.mark(function e(t, n, r, o) {
    var i;
    var s;
    var c;
    var l;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if ("number" === typeof n) {
              e.next = 3;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "半径"
              }
            });
            return e.abrupt("return");
          case 3:
            if ("number" === typeof r) {
              e.next = 6;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "圆心x"
              }
            });
            return e.abrupt("return");
          case 6:
            if ("number" === typeof o) {
              e.next = 9;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "圆心y"
              }
            });
            return e.abrupt("return");
          case 9:
            if (a.h(t, {
              updateAt: Date.now()
            }), i = Ko(t), s = null === i || undefined === i ? undefined : i.get_brush(), i && s) {
              e.next = 14;
              break;
            }
            return e.abrupt("return");
          case 14:
            c = Math.max(n, 0);
            l = i.get_rotation();
            e.next = 18;
            return new Promise(function (e, t) {
              s.set_pen_up();
              i.set_position(r, o - c);
              s.set_pen_down();
              for (var n = c > 20 ? 360 : 120, a = 0; a < n; a++) {
                i.set_rotation(360 * a / n / 180 * Math.PI);
                i.move_forward(2 * Math.PI * c / n);
              }
              i.set_rotation(l);
              e(true);
            });
          case 18:
            s.set_pen_up();
            i.set_position(r, o);
            Ba(t);
          case 21:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function za(e, t, n) {
  if ("number" === typeof t) {
    if ("number" === typeof n) {
      var r = Ko(e);
      var o = null === r || undefined === r ? undefined : r.get_brush();
      if (r && o) {
        Ya(e, t, n, ia(e), aa(e));
      }
    } else {
      K.a.log({
        type: "error",
        messageId: "argNotNumber",
        widgetId: e,
        values: {
          name: "角度"
        }
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "半径"
      }
    });
  }
}
function Ya(e, t, n, r, o) {
  return Ka.apply(this, arguments);
}
function Ka() {
  return (Ka = R.a(j.a.mark(function e(t, n, r, o, i) {
    var s;
    var c;
    var l;
    var u;
    var d;
    var p = arguments;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (s = p.length > 5 && undefined !== p[5] ? p[5] : -90, "number" === typeof n) {
              e.next = 4;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "半径"
              }
            });
            return e.abrupt("return");
          case 4:
            if ("number" === typeof r) {
              e.next = 7;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "角度"
              }
            });
            return e.abrupt("return");
          case 7:
            if ("number" === typeof o) {
              e.next = 10;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "圆心x"
              }
            });
            return e.abrupt("return");
          case 10:
            if ("number" === typeof i) {
              e.next = 13;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "圆心y"
              }
            });
            return e.abrupt("return");
          case 13:
            if ("number" === typeof s) {
              e.next = 16;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "起始位置"
              }
            });
            return e.abrupt("return");
          case 16:
            if (a.h(t, {
              updateAt: Date.now()
            }), c = Ko(t), l = null === c || undefined === c ? undefined : c.get_brush(), c && l) {
              e.next = 21;
              break;
            }
            return e.abrupt("return");
          case 21:
            u = Math.max(n, 0);
            d = c.get_rotation();
            e.next = 25;
            return new Promise(function (e, t) {
              l.set_pen_up();
              c.set_position(o + u * Math.cos(s * Math.PI / 180), i + u * Math.sin(s * Math.PI / 180));
              var n = (s + 90) / 180 * Math.PI;
              l.set_pen_down();
              for (var a = u > 20 ? 360 : 120, p = Math.abs(Math.ceil(a * r / 360)), f = 0; f <= p; f++) {
                if (r >= 0) {
                  c.set_rotation(n + 360 * f / a / 180 * Math.PI);
                  c.move_forward(2 * Math.PI * u / a);
                } else {
                  c.set_rotation(n - 360 * f / a / 180 * Math.PI);
                  c.move_forward(-2 * Math.PI * u / a);
                }
              }
              c.set_rotation(d);
              e(true);
            });
          case 25:
            l.set_pen_up();
            c.set_position(o, i);
            Ba(t);
          case 28:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function qa(e, t, n) {
  if ("number" === typeof t) {
    if ("number" === typeof n) {
      var r = Ko(e);
      var o = null === r || undefined === r ? undefined : r.get_brush();
      if (r && o) {
        Xa(e, t, n, ia(e), aa(e));
      }
    } else {
      K.a.log({
        type: "error",
        messageId: "argNotNumber",
        widgetId: e,
        values: {
          name: "边长"
        }
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "多边形"
      }
    });
  }
}
function Xa(e, t, n, r, o) {
  return Qa.apply(this, arguments);
}
function Qa() {
  return (Qa = R.a(j.a.mark(function e(t, n, r, o, i) {
    var s;
    var c;
    var l;
    var u;
    var d;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if ("number" === typeof n) {
              e.next = 3;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "多边形"
              }
            });
            return e.abrupt("return");
          case 3:
            if ("number" === typeof r) {
              e.next = 6;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "边长"
              }
            });
            return e.abrupt("return");
          case 6:
            if ("number" === typeof o) {
              e.next = 9;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "起点x"
              }
            });
            return e.abrupt("return");
          case 9:
            if ("number" === typeof i) {
              e.next = 12;
              break;
            }
            K.a.log({
              type: "error",
              messageId: "argNotNumber",
              widgetId: t,
              values: {
                name: "起点y"
              }
            });
            return e.abrupt("return");
          case 12:
            if (a.h(t, {
              updateAt: Date.now()
            }), s = Ko(t), c = null === s || undefined === s ? undefined : s.get_brush(), s && c) {
              e.next = 17;
              break;
            }
            return e.abrupt("return");
          case 17:
            l = Math.max(n, 0);
            u = Math.max(r, 0);
            d = s.get_rotation();
            e.next = 22;
            return new Promise(function (e, t) {
              c.set_pen_up();
              s.set_position(o, i);
              c.set_pen_down();
              if (0 !== l) {
                for (var n = 0; n < l; n++) {
                  s.set_rotation(360 * n / l / 180 * Math.PI);
                  s.move_forward(u);
                }
              }
              s.set_rotation(d);
              e(true);
            });
          case 22:
            Ba(t);
          case 23:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Za(e) {
  var t = Pa(e);
  if (!(null === t || undefined === t)) {
    t.set_pen_down();
  }
  a.h(e, {
    isPenDown: true
  });
}
function Ja(e) {
  var t = Pa(e);
  if (!(null === t || undefined === t)) {
    t.set_pen_up();
  }
  a.h(e, {
    isPenDown: false
  });
}
function $a(e, t) {
  var n = xa(t);
  if (P.pb(n)) {
    var r = n.slice(1);
    var o = Pa(e);
    if (!(null === o || undefined === o)) {
      o.set_color(r);
    }
    a.h(e, {
      color: n
    });
  } else {
    K.a.log({
      type: "warning",
      messageId: "argNotColor",
      widgetId: e
    });
  }
}
function es(e, t) {
  var n = xa(t);
  if (P.pb(n)) {
    var r = n.slice(1);
    var o = Pa(e);
    if (!(null === o || undefined === o)) {
      o.set_fill_color(r);
    }
  } else {
    K.a.log({
      type: "warning",
      messageId: "argNotColor",
      widgetId: e
    });
  }
}
function ts(e, t) {
  var n = Pa(e);
  if ("start" === t) {
    if (!(null === n || undefined === n)) {
      n.set_fill_start();
    }
  } else {
    if (!(null === n || undefined === n)) {
      n.draw_fill_pattern();
    }
  }
}
function ns(e) {
  var t = Pa(e);
  var n = null === t || undefined === t ? undefined : t.get_color();
  return n ? "#" + n : (console.error("getBrushColor error", n), "");
}
function rs(e, t) {
  if ("number" === typeof t) {
    var n = Math.max(Math.min(Math.round(t), oi.e), 1);
    var r = Pa(e);
    if (!(null === r || undefined === r)) {
      r.set_size(n);
    }
    a.h(e, {
      penSize: n
    });
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "粗细"
      }
    });
  }
}
function os(e, t, n) {
  if ("number" === typeof n) {
    var r = Pa(e);
    if (r) {
      var o = r.get_size() + t * n;
      var i = Math.max(Math.min(Math.round(o), oi.e), 1);
      r.set_size(i);
      a.h(e, {
        penSize: i
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: "粗细"
      }
    });
  }
}
var is = {
  hue: "色相",
  brightness: "明度",
  saturation: "饱和度",
  alpha: "透明度"
};
function as(e, t, n) {
  if ("number" === typeof n) {
    var r = Pa(e);
    if (r) {
      if ("alpha" !== t) {
        var o = La(ns(e));
        switch (t) {
          case "hue":
            o[0] = n >= 0 && n <= 360 ? Math.round(n) : Math.round(n) % 360;
            break;
          case "saturation":
            o[1] = Math.min(Math.max(Math.round(n), 0), 100);
            break;
          case "brightness":
            o[2] = Math.min(Math.max(Math.round(n), 0), 100);
            break;
          case "opacity":
            o[3] = Math.min(Math.max(Math.round(n), 0), 100);
            break;
          default:
            console.error("setBrushColorProperty error property", t);
        }
        var i = Ma(o[0], o[1], o[2], o[3]);
        r.set_color(i.slice(1));
        a.h(e, {
          color: i
        });
      } else {
        var s = n / 100;
        r.set_alpha(1 - s);
      }
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: is[t] || ""
      }
    });
  }
}
function ss(e, t, n, r) {
  if ("number" === typeof r) {
    var o = Pa(e);
    if (o) {
      if ("alpha" !== t) {
        var i = La(ns(e));
        var s = r * n;
        var c = i[0] + s;
        var l = i[1] + s;
        var u = i[2] + s;
        var d = i[3] + s;
        switch (t) {
          case "hue":
            i[0] = c >= 0 && c <= 360 ? Math.round(c) : Math.round(c) % 360;
            break;
          case "saturation":
            i[1] = Math.min(Math.max(Math.round(l), 0), 100);
            break;
          case "brightness":
            i[2] = Math.min(Math.max(Math.round(u), 0), 100);
            break;
          case "opacity":
            i[3] = Math.min(Math.max(Math.round(d), 0), 100);
            break;
          default:
            console.error("changeBrushColorProperty error property", t);
        }
        var p = Ma(i[0], i[1], i[2], i[3]);
        o.set_color(p.slice(1));
        a.h(e, {
          color: p
        });
      } else {
        var f = r / 100 * n;
        o.set_alpha(o.get_alpha() - f);
      }
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      widgetId: e,
      values: {
        name: is[t] || ""
      }
    });
  }
}
function cs(e, t) {
  var n = Pa(e);
  if (n) {
    var r = La(ns(e));
    switch (t) {
      case "hue":
        return Math.round(r[0]);
      case "saturation":
        return Math.round(r[1]);
      case "brightness":
        return Math.round(r[2]);
      case "opacity":
        return Math.round(r[3]);
      case "alpha":
        return Math.ceil(100 - 100 * n.get_alpha());
      default:
        console.error("getBrushColorProperty error property", t);
    }
  }
}
function ls(e) {
  var t = Pa(e);
  return null === t || undefined === t ? undefined : t.get_size();
}
function us(e) {
  var t = Ko(e);
  if (t) {
    var n = t.get_rotation();
    return Math.round(180 * n / Math.PI);
  }
}
function ds(e, t) {
  var n = Ko(e);
  var r = null === n || undefined === n ? undefined : n.get_brush();
  if (n && r) {
    var o = a.a(e);
    if (o) {
      var i = o.widgetIds.length;
      var s = n.get_z_index();
      switch (t) {
        case "up":
          n.set_z_index(s + 1);
          break;
        case "down":
          n.set_z_index(s - 1);
          break;
        case "top":
          n.set_z_index(i - 1);
          break;
        case "bottom":
          n.set_z_index(0);
      }
    }
  }
}
import ps = require("../84");
function fs() {
  var e = arguments.length > 0 && undefined !== arguments[0] ? arguments[0] : "";
  var t = arguments.length > 1 && undefined !== arguments[1] ? arguments[1] : "none";
  return {
    content: e,
    state: t
  };
}
function hs(e) {
  var t;
  var n = null === (t = a.d(e)) || undefined === t ? undefined : t.options;
  return n ? n.findIndex(function (e) {
    return e.isSelected;
  }) + 1 : 0;
}
function ms(e) {
  var t;
  var n;
  var r = null === (t = a.b(e)) || undefined === t ? undefined : t.title;
  var o = null === (n = a.d(e)) || undefined === n ? undefined : n.options;
  var i = null === o || undefined === o ? undefined : o.find(function (e) {
    return e.isSelected;
  });
  K.a.condition(!!i, {
    type: "warning",
    messageId: "emptyContent",
    values: {
      name: r
    }
  });
  return (null === i || undefined === i ? undefined : i.content) || "";
}
function gs(e, t) {
  var n;
  var r;
  var o = null === (n = a.b(e)) || undefined === n ? undefined : n.title;
  var i = (null === (r = a.d(e)) || undefined === r ? undefined : r.options) || [];
  var s = t > 8 || t < 0 ? "getExceedingTheMaximumLimitOfRadio" : "indexOutOfRange";
  K.a.isNumber(t, {
    type: "error",
    messageId: "argNotNumber",
    values: {
      name: "index"
    }
  });
  K.a.range(t, {
    min: 0,
    max: i.length + 1
  }, {
    type: "warning",
    messageId: s,
    values: {
      name: o,
      index: t
    }
  });
  t--;
  return i && i[t] ? i[t].content : "";
}
function _s(e) {
  var t = a.d(e);
  return (null === t || undefined === t ? undefined : t.headlineVisible) && (null === t || undefined === t ? undefined : t.headline) || "";
}
function vs(e) {
  var t;
  var n = null === (t = a.d(e)) || undefined === t ? undefined : t.options;
  return (null === n || undefined === n ? undefined : n.length) || 0;
}
function bs(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.x;
}
function ys(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.y;
}
function Es(e, t) {
  a.j(e, {
    x: t
  });
}
function Os(e, t) {
  a.j(e, {
    y: t
  });
}
function ws(e, t) {
  t = i.p(t).substr(0, 200);
  return a.h(e, {
    headline: t
  });
}
function Cs(e, t) {
  var n;
  var r;
  var o = null === (n = a.b(e)) || undefined === n ? undefined : n.title;
  var i = (null === (r = a.d(e)) || undefined === r ? undefined : r.options) || [];
  var s = t > 8 || t < 0 ? "setExceedingTheMaximumLimitOfRadio" : "indexOutOfRange";
  K.a.isNumber(t, {
    type: "error",
    messageId: "argNotNumber",
    values: {
      name: o
    }
  });
  K.a.range(t, {
    min: 0,
    max: 9
  }, {
    type: "warning",
    messageId: s,
    values: {
      name: o
    }
  });
  if (i) {
    var c = Math.min(t, 8) - i.length;
    if (c <= 0) {
      i = i.slice(0, t);
    } else {
      for (; c > 0;) {
        i.push(fs());
        c--;
      }
    }
  }
  a.h(e, {
    options: i
  });
}
function Ts(e, t, n) {
  var r;
  var o;
  n = i.p(n);
  var s = null === (r = a.b(e)) || undefined === r ? undefined : r.title;
  var c = (null === (o = a.d(e)) || undefined === o ? undefined : o.options) || [];
  var l = t > 8 || t < 0 ? "setExceedingTheMaximumLimitOfRadio" : "indexOutOfRange";
  K.a.isNumber(t, {
    type: "warning",
    messageId: "argNotNumber",
    values: {
      name: s
    }
  });
  K.a.range(t, {
    min: 0,
    max: c.length + 1
  }, {
    type: "warning",
    messageId: l,
    values: {
      name: s,
      index: t
    }
  });
  t--;
  if (c && c[t]) {
    c[t].content = n.slice(0, 200);
    return a.h(e, {
      options: c
    });
  }
}
function Ss(e, t, n) {
  var r;
  var o;
  var i = null === (r = a.b(e)) || undefined === r ? undefined : r.title;
  var s = (null === (o = a.d(e)) || undefined === o ? undefined : o.options) || [];
  K.a.isNumber(t, {
    type: "error",
    messageId: "argNotNumber",
    values: {
      name: i
    }
  });
  K.a.range(t, {
    min: 0,
    max: s.length + 1
  }, {
    messageId: "indexOutOfRange",
    type: "warning",
    values: {
      name: i,
      index: t
    }
  });
  t--;
  if (s && s[t]) {
    if ("selected" === n) {
      if (s.findIndex(function (e) {
        return e.isSelected;
      }) !== t) {
        s.forEach(function (e) {
          return e.isSelected = false;
        });
        s[t].isSelected = true;
        a.h(e, {
          options: s
        });
        ps.ob(e, t + 1, s[t].content);
      }
    } else {
      if ("disabled" === n) {
        s[t].state = "disabled";
        a.h(e, {
          options: s
        });
      }
    }
  }
}
function Is(e) {
  var t;
  var n = null === (t = a.d(e)) || undefined === t ? undefined : t.options;
  if (n) {
    n.forEach(function (e) {
      return e.isSelected = false;
    });
    return a.h(e, {
      options: n
    });
  }
}
function As(e, t, n) {
  var r;
  var o;
  var i = (null === (r = a.d(e)) || undefined === r ? undefined : r.options) || [];
  var s = null === (o = a.b(e)) || undefined === o ? undefined : o.title;
  K.a.isNumber(t, {
    type: "error",
    messageId: "argNotNumber",
    values: {
      name: s
    }
  });
  K.a.range(t, {
    min: 0,
    max: i.length + 1
  }, {
    type: "warning",
    messageId: "indexOutOfRange",
    values: {
      name: s,
      index: t
    }
  });
  t--;
  if (i && i[t]) {
    i[t].state = n;
    return a.h(e, {
      options: i
    });
  }
}
function js(e) {
  var t;
  var n = null === (t = a.d(e)) || undefined === t ? undefined : t.options;
  if (n) {
    n.forEach(function (e) {
      return e.state = "none";
    });
    return a.h(e, {
      options: n
    });
  }
}
function Ns(e, t) {
  var n;
  var r;
  var o = (null === (n = a.d(e)) || undefined === n ? undefined : n.options) || [];
  var i = null === (r = a.b(e)) || undefined === r ? undefined : r.title;
  K.a.range(t, {
    min: 0,
    max: o.length + 1
  }, {
    type: "warning",
    messageId: "indexOutOfRange",
    values: {
      name: i,
      index: t
    }
  });
  t--;
  if (o && o[t]) {
    o.splice(t, 1);
    return a.h(e, {
      options: o
    });
  }
}
function Rs(e, t) {
  var n;
  var r;
  t = i.p(t);
  var o = null === (n = a.b(e)) || undefined === n ? undefined : n.title;
  var s = null === (r = a.d(e)) || undefined === r ? undefined : r.options;
  if (s && s.length < 8) {
    s.push(fs(t.slice(0, 200)));
    return a.h(e, {
      options: s
    });
  }
  if (s) {
    K.a.condition(false, {
      type: "warning",
      messageId: "outMaxRange",
      values: {
        name: o
      }
    });
  }
}
function ks(e, t) {
  a.l(e, t);
}
function xs(e, t) {
  var n;
  var r = null === (n = a.b(e)) || undefined === n ? undefined : n.title;
  K.a.condition(!t, {
    type: "warning",
    messageId: "widgetDisabled",
    values: {
      name: r
    }
  });
  a.h(e, {
    disabled: t
  });
}
function Ds() {
  var e = arguments.length > 0 && undefined !== arguments[0] ? arguments[0] : "";
  var t = arguments.length > 1 && undefined !== arguments[1] ? arguments[1] : "none";
  return {
    content: e,
    state: t
  };
}
function Ms(e) {
  var t;
  var n = null === (t = a.d(e)) || undefined === t ? undefined : t.options;
  var r = [];
  return n ? (n.forEach(function (e, t) {
    return e.isSelected && r.push(t + 1);
  }), r) : r;
}
function Ls(e) {
  var t;
  var n;
  var r = null === (t = a.b(e)) || undefined === t ? undefined : t.title;
  var o = null === (n = a.d(e)) || undefined === n ? undefined : n.options;
  var i = [];
  return o ? (o.forEach(function (e) {
    return e.isSelected && i.push(e.content);
  }), i.every(function (e) {
    return "" !== e;
  }) || K.a.condition(false, {
    type: "warning",
    messageId: "emptyContent",
    values: {
      name: r
    }
  }), i) : i;
}
function Ps(e, t) {
  var n;
  var r;
  var o = null === (n = a.b(e)) || undefined === n ? undefined : n.title;
  var i = (null === (r = a.d(e)) || undefined === r ? undefined : r.options) || [];
  var s = t > 8 || t < 0 ? "getExceedingTheMaximumLimitOfRadio" : "indexOutOfRange";
  K.a.isNumber(t, {
    type: "warning",
    messageId: "argNotNumber",
    values: {
      name: o
    }
  });
  K.a.range(t, {
    min: 0,
    max: i.length + 1
  }, {
    type: "warning",
    messageId: s,
    values: {
      name: o,
      index: t
    }
  });
  t--;
  return i && i[t] ? i[t].content : "";
}
function Bs(e) {
  var t = a.d(e);
  return (null === t || undefined === t ? undefined : t.headlineVisible) && (null === t || undefined === t ? undefined : t.headline) || "";
}
function Fs(e) {
  var t;
  var n = null === (t = a.d(e)) || undefined === t ? undefined : t.options;
  return (null === n || undefined === n ? undefined : n.length) || 0;
}
function Gs(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.x;
}
function Us(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.y;
}
function Ws(e, t) {
  a.j(e, {
    x: t
  });
}
function Hs(e, t) {
  a.j(e, {
    y: t
  });
}
function Vs(e, t) {
  t = i.p(t).substr(0, 200);
  return a.h(e, {
    headline: t
  });
}
function zs(e, t) {
  var n;
  var r;
  var o = null === (n = a.b(e)) || undefined === n ? undefined : n.title;
  var i = null === (r = a.d(e)) || undefined === r ? undefined : r.options;
  if (i) {
    K.a.isNumber(t, {
      type: "error",
      messageId: "argNotNumber",
      values: {
        name: o
      }
    });
    K.a.range(t, {
      min: 0,
      max: 9
    }, {
      type: "warning",
      messageId: "setExceedingTheMaximumLimitOfRadio",
      values: {
        name: o
      }
    });
    var s = Math.min(t, 8) - i.length;
    if (s <= 0) {
      i = i.slice(0, t);
    } else {
      for (; s > 0;) {
        i.push(Ds());
        s--;
      }
    }
  }
  return a.h(e, {
    options: i
  });
}
function Ys(e, t, n) {
  var r;
  var o;
  n = i.p(n);
  var s = (null === (r = a.d(e)) || undefined === r ? undefined : r.options) || [];
  var c = null === (o = a.b(e)) || undefined === o ? undefined : o.title;
  var l = t > 8 || t < 0 ? "setExceedingTheMaximumLimitOfRadio" : "indexOutOfRange";
  K.a.isNumber(t, {
    type: "error",
    messageId: "argNotNumber",
    values: {
      name: c
    }
  });
  K.a.range(t, {
    min: 0,
    max: s.length + 1
  }, {
    type: "warning",
    messageId: l,
    values: {
      name: c,
      index: t
    }
  });
  t--;
  if (s && s[t]) {
    s[t].content = n.slice(0, 200);
    return a.h(e, {
      options: s
    });
  }
}
function Ks(e, t) {
  var n;
  var r;
  var o = (null === (n = a.d(e)) || undefined === n ? undefined : n.options) || [];
  var i = null === (r = a.b(e)) || undefined === r ? undefined : r.title;
  K.a.isNumber(t, {
    type: "error",
    messageId: "argNotNumber",
    values: {
      name: i
    }
  });
  K.a.range(t, {
    min: 0,
    max: o.length + 1
  }, {
    type: "warning",
    messageId: "indexOutOfRange",
    values: {
      name: i,
      index: t
    }
  });
  t--;
  if (o && o[t] && !o[t].isSelected) {
    o[t].isSelected = true;
    a.h(e, {
      options: o
    });
    var s = [];
    var c = [];
    o.forEach(function (e, t) {
      if (e.isSelected) {
        s.push(t + 1);
        c.push(e.content);
      }
    });
    ps.S(e, t + 1, true);
    ps.T(e, s, c);
  }
}
function qs(e, t) {
  var n;
  var r;
  var o = (null === (n = a.d(e)) || undefined === n ? undefined : n.options) || [];
  var i = null === (r = a.b(e)) || undefined === r ? undefined : r.title;
  K.a.isNumber(t, {
    type: "error",
    messageId: "argNotNumber",
    values: {
      name: i
    }
  });
  K.a.range(t, {
    min: 0,
    max: o.length + 1
  }, {
    type: "warning",
    messageId: "indexOutOfRange",
    values: {
      name: i,
      index: t
    }
  });
  t--;
  if (o && o[t] && o[t].isSelected) {
    o[t].isSelected = false;
    a.h(e, {
      options: o
    });
    ps.S(e, t + 1, false);
    var s = [];
    var c = [];
    o.forEach(function (e, t) {
      if (e.isSelected) {
        s.push(t + 1);
        c.push(e.content);
      }
    });
    ps.U(e, s, c);
  }
}
function Xs(e, t) {
  var n;
  var r;
  var o = (null === (n = a.d(e)) || undefined === n ? undefined : n.options) || [];
  var i = null === (r = a.b(e)) || undefined === r ? undefined : r.title;
  K.a.range(t, {
    min: 0,
    max: o.length + 1
  }, {
    type: "warning",
    messageId: "indexOutOfRange",
    values: {
      name: i,
      index: t
    }
  });
  t--;
  if (o && o[t]) {
    o[t].state = "disabled";
    K.a.condition("disabled" !== o[t].state, {
      type: "warning",
      messageId: "widgetDisabled",
      values: {
        name: i
      }
    });
    a.h(e, {
      options: o
    });
  }
}
function Qs(e) {
  var t;
  var n = null === (t = a.d(e)) || undefined === t ? undefined : t.options;
  if (n) {
    n.forEach(function (e) {
      return e.isSelected = false;
    });
    return a.h(e, {
      options: n
    });
  }
}
function Zs(e, t, n) {
  var r;
  var o;
  var i = (null === (r = a.d(e)) || undefined === r ? undefined : r.options) || [];
  var s = null === (o = a.b(e)) || undefined === o ? undefined : o.title;
  K.a.isNumber(t, {
    type: "error",
    messageId: "argNotNumber",
    values: {
      name: s
    }
  });
  K.a.range(t, {
    min: 0,
    max: i.length + 1
  }, {
    type: "warning",
    messageId: "indexOutOfRange",
    values: {
      name: s,
      index: t
    }
  });
  t--;
  if (i && i[t]) {
    i[t].state = n;
    return a.h(e, {
      options: i
    });
  }
}
function Js(e) {
  var t;
  var n = null === (t = a.d(e)) || undefined === t ? undefined : t.options;
  if (n) {
    n.forEach(function (e) {
      return e.state = "none";
    });
    return a.h(e, {
      options: n
    });
  }
}
function $s(e, t) {
  var n;
  var r;
  var o = null === (n = a.b(e)) || undefined === n ? undefined : n.title;
  var i = (null === (r = a.d(e)) || undefined === r ? undefined : r.options) || [];
  K.a.isNumber(t, {
    type: "error",
    messageId: "argNotNumber",
    values: {
      name: o
    }
  });
  K.a.range(t, {
    min: 0,
    max: i.length + 1
  }, {
    type: "error",
    messageId: "indexOutOfRange",
    values: {
      name: o,
      index: t
    }
  });
  t--;
  if (i && i[t]) {
    i.splice(t, 1);
    return a.h(e, {
      options: i
    });
  }
}
function ec(e, t) {
  var n;
  var r;
  t = i.p(t);
  var o = null === (n = a.b(e)) || undefined === n ? undefined : n.title;
  var s = null === (r = a.d(e)) || undefined === r ? undefined : r.options;
  if (s && s.length < 8) {
    s.push(Ds(t.slice(0, 200)));
    return a.h(e, {
      options: s
    });
  }
  if (s) {
    K.a.condition(false, {
      type: "warning",
      messageId: "outMaxRange",
      values: {
        name: o
      }
    });
  }
}
function tc(e, t) {
  a.l(e, t);
}
function nc(e, t) {
  a.h(e, {
    disabled: t
  });
}
var rc;
import oc = require("../425");
!function (e) {
  e.STACK_EXCEEDED = "STACK_EXCEEDED";
}(rc || (rc = {}));
import ic = require("../../55");
import ac = require("../../190");
var sc = new Array();
function cc(e) {
  sc.push(e);
}
function lc() {
  return sc.pop();
}
function uc() {
  return sc.length > 0 ? sc[sc.length - 1] : null;
}
function dc() {
  return sc.length;
}
function pc(e, t) {
  try {
    cc(t);
    return e();
  } finally {
    lc();
  }
}
function fc(e, t) {
  return hc.apply(this, arguments);
}
function hc() {
  return (hc = R.a(j.a.mark(function e(t, n) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            cc(n);
            e.next = 4;
            return t();
          case 4:
            return e.abrupt("return", e.sent);
          case 5:
            e.prev = 5;
            lc();
            return e.finish(5);
          case 8:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0,, 5, 8]]);
  }))).apply(this, arguments);
}
function mc() {
  return new oc.a();
}
function gc(e, t) {
  return _c.apply(this, arguments);
}
function _c() {
  return (_c = R.a(j.a.mark(function e(t, n) {
    var r;
    var o;
    var i;
    var a;
    var s = arguments;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (e.prev = 0, !(dc() > 1e3)) {
              e.next = 3;
              break;
            }
            throw new Error("Maximum call stack size exceeded");
          case 3:
            for (r = s.length, o = new Array(r > 2 ? r - 2 : 0), i = 2; i < r; i++) {
              o[i - 2] = s[i];
            }
            e.next = 6;
            return t.call.apply(t, [undefined].concat(o));
          case 6:
            a = e.sent;
            return e.abrupt("return", a);
          case 10:
            if (e.prev = 10, e.t0 = e.catch(0), !e.t0.handled) {
              e.next = 14;
              break;
            }
            throw e.t0;
          case 14:
            e.t0.handled = true;
            if (!(0 !== e.t0.message.indexOf("too much recursion") && 0 !== e.t0.message.indexOf("Maximum call stack size exceeded"))) {
              K.a.condition(false, {
                type: "error",
                messageId: "overflowStack"
              });
              ps.tb(ii.a({
                type: rc.STACK_EXCEEDED
              }, n));
            }
            throw e.t0;
          case 17:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 10]]);
  }))).apply(this, arguments);
}
function vc() {
  for (var e = "", t = arguments.length, n = new Array(t), r = 0; r < t; r++) {
    n[r] = arguments[r];
  }
  n.forEach(function (t) {
    e += "".concat(ac.d(t), " ");
  });
  return e;
}
function bc(e, t) {
  for (var n = arguments.length, r = new Array(n > 2 ? n - 2 : 0), o = 2; o < n; o++) {
    r[o - 2] = arguments[o];
  }
  var i = vc.apply(undefined, r);
  ic.b.custom("print", e, t, i);
}
function yc(e, t) {
  for (var n = arguments.length, r = new Array(n > 2 ? n - 2 : 0), o = 2; o < n; o++) {
    r[o - 2] = arguments[o];
  }
  var i = vc.apply(undefined, r);
  ic.b.custom("customError", e, t, i);
}
function Ec(e, t) {
  for (var n = arguments.length, r = new Array(n > 2 ? n - 2 : 0), o = 2; o < n; o++) {
    r[o - 2] = arguments[o];
  }
  var i = vc.apply(undefined, r);
  ic.b.custom("customWarning", e, t, i);
}
function Oc(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.height;
}
function wc(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.width;
}
function Cc(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.x;
}
function Tc(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.y;
}
function Sc(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.url;
}
function Ic(e) {
  return a.h(e, {
    refreshTimestamp: Date.now()
  });
}
function Ac(e, t) {
  if ("string" !== typeof t) {
    K.a.condition(false, {
      type: "warning",
      messageId: "mustToBeString",
      values: {
        name: "webview"
      }
    });
  } else {
    a.h(e, {
      url: t
    });
  }
}
function jc(e, t) {
  a.l(e, t);
}
function Nc(e, t) {
  a.h(e, {
    disabled: t
  });
}
function Rc(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.x;
}
function kc(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.y;
}
function xc(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.value;
}
function Dc(e, t) {
  var n;
  if ((null === (n = a.d(e)) || undefined === n ? undefined : n.value) !== t) {
    a.h(e, {
      value: t
    });
    ps.Db(e, t);
  }
}
function Mc(e, t) {
  a.l(e, t);
}
function Lc(e, t) {
  a.h(e, {
    disabled: t
  });
}
function Pc(e, t) {
  a.j(e, {
    x: t
  });
}
function Bc(e, t) {
  a.j(e, {
    y: t
  });
}
function Fc(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.x;
}
function Gc(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.y;
}
function Uc(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.value;
}
function Wc(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.minValue;
}
function Hc(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.maxValue;
}
function Vc(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.width;
}
function zc(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.height;
}
function Yc(e, t) {
  var n = !(arguments.length > 2 && undefined !== arguments[2]) || arguments[2];
  var r = a.d(e);
  if (r) {
    if ("number" === typeof t) {
      var o = Math.round(t);
      if (o < r.minValue || o > r.maxValue) {
        K.a.log({
          type: "warning",
          messageId: "sliderValueOutOfRange",
          widgetId: e
        });
      } else {
        if (o !== r.value) {
          a.h(e, {
            value: o
          });
          if (n) {
            ps.Cb(e, o);
            ps.Ab(e, o);
            ps.Bb(e, o);
          }
        }
      }
    } else {
      K.a.log({
        type: "error",
        messageId: "argNotNumber",
        widgetId: e,
        values: {
          name: "滑块位置"
        }
      });
    }
  }
}
function Kc(e, t) {
  var n = a.d(e);
  if (n) {
    if ("number" === typeof t) {
      if (t === n.minValue) {
        K.a.log({
          type: "warning",
          messageId: "sliderMaxValueEqualMinValue",
          widgetId: e
        });
      }
      if (t < n.value) {
        K.a.log({
          type: "warning",
          messageId: "sliderMaxValueOrMinValueOutOfRange",
          widgetId: e
        });
      } else {
        a.h(e, {
          maxValue: Math.round(t)
        });
      }
    } else {
      K.a.log({
        type: "error",
        messageId: "argNotNumber",
        widgetId: e,
        values: {
          name: "最大值"
        }
      });
    }
  }
}
function qc(e, t) {
  var n = a.d(e);
  if (n) {
    if ("number" === typeof t) {
      if (t === n.maxValue) {
        K.a.log({
          type: "warning",
          messageId: "sliderMaxValueEqualMinValue",
          widgetId: e
        });
      }
      if (t > n.value) {
        K.a.log({
          type: "warning",
          messageId: "sliderMaxValueOrMinValueOutOfRange",
          widgetId: e
        });
      } else {
        a.h(e, {
          minValue: Math.round(t)
        });
      }
    } else {
      K.a.log({
        type: "error",
        messageId: "argNotNumber",
        widgetId: e,
        values: {
          name: "最小值"
        }
      });
    }
  }
}
function Xc(e, t) {
  a.j(e, {
    x: t
  });
}
function Qc(e, t) {
  a.j(e, {
    y: t
  });
}
function Zc(e, t) {
  a.k(e, {
    width: t
  });
}
function Jc(e, t) {
  a.l(e, t);
}
function $c(e, t) {
  a.h(e, {
    disabled: t
  });
}
import el = require("../../48/72");
function tl(e, t) {
  return new Promise(function (n, r) {
    var o = ii.a(ii.a({}, t), {}, {
      reject: r,
      resolve: n
    });
    e(o);
  });
}
function nl(e, t, n) {
  return rl.apply(this, arguments);
}
function rl() {
  return (rl = R.a(j.a.mark(function e(t, n, r) {
    var o;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return tl(Q.a().dispatch, el.p(t, n, true));
          case 3:
            if (!(o = e.sent).length) {
              e.next = 8;
              break;
            }
            return e.abrupt("return", o[2]);
          case 8:
            if (0 !== o.length) {
              e.next = 10;
              break;
            }
            return e.abrupt("return", "");
          case 10:
            return e.abrupt("return", r);
          case 13:
            e.prev = 13;
            e.t0 = e.catch(0);
            ps.nb(t, e.t0, r);
            return e.abrupt("return", r);
          case 17:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 13]]);
  }))).apply(this, arguments);
}
function ol(e, t, n, r) {
  return il.apply(this, arguments);
}
function il() {
  return (il = R.a(j.a.mark(function e(t, n, r, o) {
    var i;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (i = "number" === typeof r || "string" === typeof r, K.a.condition(i, {
              type: "error",
              messageId: "cloudStorageInvalidValueType",
              values: {
                key: n
              }
            }), i) {
              e.next = 4;
              break;
            }
            return e.abrupt("return");
          case 4:
            if (!k.isNumber(r)) {
              e.next = 8;
              break;
            }
            e.t0 = r;
            e.next = 14;
            break;
          case 8:
            e.next = 10;
            return z(r);
          case 10:
            if (e.t1 = e.sent, e.t1) {
              e.next = 13;
              break;
            }
            e.t1 = r;
          case 13:
            e.t0 = e.t1;
          case 14:
            r = e.t0;
            e.prev = 15;
            e.next = 18;
            return tl(Q.a().dispatch, el.q(t, n, r, typeof r));
          case 18:
            q.b("", "cloud", t, "");
            e.next = 24;
            break;
          case 21:
            e.prev = 21;
            e.t2 = e.catch(15);
            ps.nb(t, e.t2, o);
          case 24:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[15, 21]]);
  }))).apply(this, arguments);
}
function al(e, t, n) {
  return sl.apply(this, arguments);
}
function sl() {
  return (sl = R.a(j.a.mark(function e(t, n, r) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return tl(Q.a().dispatch, el.n(t, n, ""));
          case 3:
            q.b("", "cloud", t, "");
            e.next = 9;
            break;
          case 6:
            e.prev = 6;
            e.t0 = e.catch(0);
            ps.nb(t, e.t0, r);
          case 9:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 6]]);
  }))).apply(this, arguments);
}
function cl(e, t) {
  return ll.apply(this, arguments);
}
function ll() {
  return (ll = R.a(j.a.mark(function e(t, n) {
    var r;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return tl(Q.a().dispatch, el.o(t));
          case 3:
            r = e.sent;
            return e.abrupt("return", r);
          case 7:
            e.prev = 7;
            e.t0 = e.catch(0);
            ps.nb(t, e.t0, n);
            return e.abrupt("return", n);
          case 11:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 7]]);
  }))).apply(this, arguments);
}
function ul(e, t) {
  return dl.apply(this, arguments);
}
function dl() {
  return (dl = R.a(j.a.mark(function e(t, n) {
    var r;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return tl(Q.a().dispatch, el.o(t));
          case 3:
            r = e.sent;
            return e.abrupt("return", r.length);
          case 7:
            e.prev = 7;
            e.t0 = e.catch(0);
            ps.nb(t, e.t0, n);
            return e.abrupt("return", n);
          case 11:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 7]]);
  }))).apply(this, arguments);
}
function pl(e, t, n) {
  return fl.apply(this, arguments);
}
function fl() {
  return (fl = R.a(j.a.mark(function e(t, n, r) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return tl(Q.a().dispatch, el.p(t, n));
          case 3:
            if (!e.sent.length) {
              e.next = 6;
              break;
            }
            return e.abrupt("return", true);
          case 6:
            return e.abrupt("return", false);
          case 9:
            e.prev = 9;
            e.t0 = e.catch(0);
            ps.nb(t, e.t0, r);
            return e.abrupt("return", r);
          case 13:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 9]]);
  }))).apply(this, arguments);
}
function hl(e, t) {
  return ml.apply(this, arguments);
}
function ml() {
  return (ml = R.a(j.a.mark(function e(t, n) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return tl(Q.a().dispatch, el.m(t));
          case 3:
            q.b("", "cloud", t, "");
            e.next = 9;
            break;
          case 6:
            e.prev = 6;
            e.t0 = e.catch(0);
            ps.nb(t, e.t0, n);
          case 9:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 6]]);
  }))).apply(this, arguments);
}
import gl = require("../../../../../../src/shared/utils/network/axios-with-credentials");
function _l(e) {
  return vl.apply(this, arguments);
}
function vl() {
  return (vl = R.a(j.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var a;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            "/http-widget-proxy";
            "@SEP@";
            n = new URL(t.url);
            r = t.url;
            o = n.origin;
            i = o.replace("://", "@SEP@");
            if (!n.host.endsWith("codemao.cn")) {
              r = r.replace(o, window.location.origin + "/http-widget-proxy/" + i);
            }
            e.next = 10;
            return gl.a({
              url: r,
              method: t.method,
              headers: ii.a({}, t.headers),
              data: t.body,
              withCredentials: false
            });
          case 10:
            a = e.sent;
            return e.abrupt("return", a);
          case 12:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function bl(e) {
  var t = {};
  e.forEach(function (e) {
    if (e.key) {
      t[e.key] = e.value;
    }
  });
  return t;
}
function yl(e) {
  for (var t in e) if (e[t].type === x.u) {
    var n = e[t].attributes;
    var r = n.body;
    var o = n.header;
    var i = n.params;
    var a = {
      url: n.url,
      body: r,
      header: bl(o),
      params: bl(i)
    };
    Q.a().getState().httpClientMap.set(t, a);
  }
}
function El(e, t) {
  var n = [];
  for (var r in t) n.push("".concat(r, "=").concat(t[r]));
  if (n.length) {
    e = e.includes("?") ? "".concat(e).concat(n.join("&")) : "".concat(e, "?").concat(n.join("&"));
  }
  return e;
}
function Ol(e, t) {
  var n = Q.a().getState().httpClientMap.get(e);
  if (n) {
    n.url = t.toString();
  } else {
    n = {
      url: t.toString(),
      body: "",
      header: {},
      params: {}
    };
  }
  Q.a().getState().httpClientMap.set(e, n);
}
function wl(e, t) {
  var n = Q.a().getState().httpClientMap.get(e);
  try {
    var r = JSON.parse(t) || {};
    if (n) {
      n.header = r;
    } else {
      n = {
        url: "",
        body: "",
        header: r,
        params: {}
      };
    }
    Q.a().getState().httpClientMap.set(e, n);
  } catch (o) {
    console.info(o);
  }
}
function Cl(e, t) {
  return Tl.apply(this, arguments);
}
function Tl() {
  return (Tl = R.a(j.a.mark(function e(t, n) {
    var r;
    var o;
    var a;
    var s;
    var c;
    var l;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (null === (r = Q.a().getState().httpClientMap.get(t)) || undefined === r ? undefined : r.url) {
              e.next = 3;
              break;
            }
            return e.abrupt("return");
          case 3:
            if (P.Y(r.url)) {
              e.next = 6;
              break;
            }
            ps.fb(t, 601, "非法的请求链接");
            return e.abrupt("return");
          case 6:
            if (o = new URL(r.url), a = o.search ? {} : r.params, s = El(r.url, a), !i.d()) {
              e.next = 14;
              break;
            }
            c = {
              headers: ii.a({}, r.header),
              method: n
            };
            window.cordova.plugin.http.sendRequest(s, c, function (e) {
              ps.gb(t, e.status, e.data);
            }, function (e) {
              console.error("http client ".concat(n, " error"), r.url, e);
              ps.fb(t, e.status, e.error);
            });
            e.next = 25;
            break;
          case 14:
            e.prev = 14;
            e.next = 17;
            return _l({
              url: s,
              headers: ii.a({}, r.header),
              method: n
            });
          case 17:
            l = e.sent;
            ps.gb(t, l.status, "string" === typeof l.data ? l.data : JSON.stringify(l.data));
            e.next = 25;
            break;
          case 21:
            e.prev = 21;
            e.t0 = e.catch(14);
            console.error(e.t0);
            if (e.t0.response) {
              ps.fb(t, e.t0.response.status, "string" === typeof e.t0.response.data ? e.t0.response.data : JSON.stringify(e.t0.response.data));
            } else {
              if (navigator.onLine) {
                ps.fb(t, 601, (null === e.t0 || undefined === e.t0 ? undefined : e.t0.toString()) || "request error");
              } else {
                K.a.condition(false, {
                  type: "error",
                  messageId: "httpOnWeakNetworkTips"
                });
                ps.fb(t, 602, "网络断开中");
              }
            }
          case 25:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[14, 21]]);
  }))).apply(this, arguments);
}
function Sl(e, t, n) {
  return Il.apply(this, arguments);
}
function Il() {
  return (Il = R.a(j.a.mark(function e(t, n, r) {
    var o;
    var a;
    var s;
    var c;
    var l;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if ("get" !== n && "delete" !== n) {
              e.next = 3;
              break;
            }
            Cl(t, n);
            return e.abrupt("return");
          case 3:
            if (null === (o = Q.a().getState().httpClientMap.get(t)) || undefined === o ? undefined : o.url) {
              e.next = 6;
              break;
            }
            return e.abrupt("return");
          case 6:
            if (P.Y(o.url)) {
              e.next = 9;
              break;
            }
            ps.fb(t, 601, "非法的请求链接");
            return e.abrupt("return");
          case 9:
            if (a = r || o.body, !i.d()) {
              e.next = 17;
              break;
            }
            s = {
              data: a,
              headers: ii.a({}, o.header),
              method: n
            };
            (c = window.cordova).plugin.http.setDataSerializer("utf8");
            c.plugin.http.sendRequest(o.url, s, function (e) {
              ps.gb(t, e.status, e.data);
            }, function (e) {
              console.error("http client ".concat(n, " error"), o.url, e);
              ps.fb(t, e.status, e.error);
            });
            e.next = 28;
            break;
          case 17:
            e.prev = 17;
            e.next = 20;
            return _l({
              url: o.url,
              body: a,
              headers: ii.a({}, o.header),
              method: n
            });
          case 20:
            l = e.sent;
            ps.gb(t, l.status, "string" === typeof l.data ? l.data : JSON.stringify(l.data));
            e.next = 28;
            break;
          case 24:
            e.prev = 24;
            e.t0 = e.catch(17);
            console.error(e.t0);
            if (e.t0.response) {
              ps.fb(t, e.t0.response.status, "string" === typeof e.t0.response.data ? e.t0.response.data : JSON.stringify(e.t0.response.data));
            } else {
              if (navigator.onLine) {
                ps.fb(t, 601, (null === e.t0 || undefined === e.t0 ? undefined : e.t0.toString()) || "request error");
              } else {
                K.a.condition(false, {
                  type: "error",
                  messageId: "httpOnWeakNetworkTips"
                });
                ps.fb(t, 602, "网络断开中");
              }
            }
          case 28:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[17, 24]]);
  }))).apply(this, arguments);
}
function Al(e) {
  var t = Q.a().getState().httpClientMap.get(e);
  return t && undefined !== t.url ? t.url : "";
}
function jl(e) {
  var t = {};
  try {
    t = JSON.parse(e);
  } catch (n) {
    console.error("jsonParseToObject error", n, e);
  }
  return t;
}
function Nl(e, t) {
  if ("string" !== typeof e) {
    try {
      return e[t] || "";
    } catch (n) {
      return "";
    }
  }
  return "";
}
import Rl = require("../../48/87");
import kl = require("../../27");
import xl = require("../../40");
import Dl = require("socket.io-client");
var Ml = function __importDefault(module) {
  var defaultExport = module && module.__esModule ? function () {
    return module.default;
  } : function () {
    return module;
  };
  Object.defineProperty(defaultExport, "a", {
    enumerable: true,
    get: defaultExport
  });
  return defaultExport;
}(Dl);
import Ll = require("../index");
import Pl = require("../../59/index");
var Bl = "".concat(Pl.a.socketHost, ":9090");
var Fl = function () {
  function e(t, n, r) {
    var o = this;
    kl.a(this, e);
    this.workId = t;
    this.roomName = n;
    this.roomId = r;
    this.members = [];
    this.username = undefined;
    this.socket = undefined;
    this.error = function (e) {
      if (e.message) {
        Ll.emitRoomError(e.message);
      } else {
        Ll.emitRoomError("网络异常");
      }
    };
    this.onMemberJoin = function (e) {
      if (!o.members.includes(e.username)) {
        o.members.push(e.username);
      }
      Ll.emitRoomMemberJoin(e.username);
    };
    this.onMemberLeave = function (e) {
      var t = o.members.indexOf(e.username);
      if (-1 !== t) {
        o.members.splice(t, 1);
      }
      Ll.emitRoomMemberLeave(e.username);
    };
    this.onReceiveData = function (e) {
      Object.entries(e.data).forEach(function (e) {
        var t = mn.a(e, 2);
        var n = t[0];
        var r = t[1];
        Ll.emitRoomMessage(n, r);
      });
    };
  }
  xl.a(e, [{
    key: "join",
    value: function () {
      var e = R.a(j.a.mark(function e(t) {
        var n = this;
        return j.a.wrap(function (e) {
          for (;;) {
            switch (e.prev = e.next) {
              case 0:
                e.next = 2;
                return Rl.b(this.roomId);
              case 2:
                if (e.sent) {
                  e.next = 5;
                  break;
                }
                throw new Error("Cannot join room");
              case 5:
                this.username = t;
                return e.abrupt("return", new Promise(function (e, r) {
                  var o = Ml()(Bl, {
                    path: "/coconut",
                    query: Rl.a(),
                    transports: ["websocket"]
                  });
                  window.socket = o;
                  o.once("error", n.error);
                  o.once("disconnect", n.error);
                  o.once("connect", function () {
                    o.emit("join", {
                      work_id: n.workId,
                      room_name: n.roomName,
                      username: t,
                      room_id: n.roomId
                    });
                    o.once("join_ack", function (t) {
                      n.socket = o;
                      n.subscribe();
                      e(t);
                    });
                    o.off("disconnect", n.error);
                    o.off("error", n.error);
                  });
                }));
              case 7:
              case "end":
                return e.stop();
            }
          }
        }, e, this);
      }));
      return function (t) {
        return e.apply(this, arguments);
      };
    }()
  }, {
    key: "subscribe",
    value: function () {
      var e;
      var t;
      var n;
      var r;
      if (!(null === (e = this.socket) || undefined === e)) {
        e.on("join", this.onMemberJoin);
      }
      if (!(null === (t = this.socket) || undefined === t)) {
        t.on("leave", this.onMemberLeave);
      }
      if (!(null === (n = this.socket) || undefined === n)) {
        n.on("broadcast", this.onReceiveData);
      }
      if (!(null === (r = this.socket) || undefined === r)) {
        r.on("error", this.error);
      }
    }
  }, {
    key: "unsubscribe",
    value: function () {
      var e;
      var t;
      var n;
      var r;
      if (!(null === (e = this.socket) || undefined === e)) {
        e.off("join", this.onMemberJoin);
      }
      if (!(null === (t = this.socket) || undefined === t)) {
        t.off("leave", this.onMemberLeave);
      }
      if (!(null === (n = this.socket) || undefined === n)) {
        n.off("broadcast", this.onReceiveData);
      }
      if (!(null === (r = this.socket) || undefined === r)) {
        r.off("error", this.error);
      }
    }
  }, {
    key: "leave",
    value: function () {
      var e;
      var t;
      this.unsubscribe();
      if (!(null === (e = this.socket) || undefined === e)) {
        e.emit("leave", {
          work_id: this.workId,
          room_name: this.roomName,
          room_id: this.roomId,
          username: this.username
        });
      }
      if (!(null === (t = this.socket) || undefined === t)) {
        t.close();
      }
    }
  }, {
    key: "broadcast",
    value: function () {
      var e = R.a(j.a.mark(function e(t) {
        var n;
        return j.a.wrap(function (e) {
          for (;;) {
            switch (e.prev = e.next) {
              case 0:
                if (!(null === (n = this.socket) || undefined === n)) {
                  n.emit("broadcast", {
                    username: this.username,
                    room_id: this.roomId,
                    data: t
                  });
                }
              case 1:
              case "end":
                return e.stop();
            }
          }
        }, e, this);
      }));
      return function (t) {
        return e.apply(this, arguments);
      };
    }()
  }, {
    key: "updateMemberList",
    value: function () {
      var e = R.a(j.a.mark(function e() {
        var t;
        return j.a.wrap(function (e) {
          for (;;) {
            switch (e.prev = e.next) {
              case 0:
                e.next = 2;
                return Rl.f(this.roomId);
              case 2:
                t = e.sent;
                this.members = t || [];
              case 4:
              case "end":
                return e.stop();
            }
          }
        }, e, this);
      }));
      return function () {
        return e.apply(this, arguments);
      };
    }()
  }]);
  return e;
}();
var Gl = {};
function Ul(e, t, n) {
  return e.then(function (e) {
    if (t) {
      return Promise.resolve(t.apply(undefined, gn.a(e)));
    }
  }).catch(function (e) {
    var t;
    var r;
    var o = e.message;
    if (L.a.isAxiosError(e)) {
      if ("ECONNABORTED" === e.code) {
        o = "网络有问题";
      } else {
        if (null === (t = e.response) || undefined === t || null === (r = t.data) || undefined === r ? undefined : r.msg) {
          o = e.response.data.msg;
        }
      }
    }
    if (n) {
      K.a.condition(false, {
        type: "error",
        message: "房间积木：".concat(o)
      });
      return Promise.resolve(n(o));
    }
  });
}
function Wl(e) {
  Gl.workId = e.workId;
  Rl.g(e.context);
}
function Hl(e, t, n) {
  return Ul(Rl.d(e).then(function () {
    Gl.username = e;
    return [e];
  }), t, n);
}
function Vl(e, t, n, r) {
  return zl.apply(this, arguments);
}
function zl() {
  return (zl = R.a(j.a.mark(function e(t, n, r, o) {
    var i;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            i = Gl.workId;
            K.a.isNumber(n, {
              type: "error",
              messageId: "argNotNumber",
              values: {
                name: "房间人数"
              }
            });
            return e.abrupt("return", Ul(R.a(j.a.mark(function e() {
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (undefined !== i) {
                        e.next = 2;
                        break;
                      }
                      return e.abrupt("return", o("not initialized"));
                    case 2:
                      e.next = 4;
                      return Rl.c(t, i, n).then(function (e) {
                        if (!e) {
                          o("创建房间失败");
                        }
                      });
                    case 4:
                      return e.abrupt("return", [t, n]);
                    case 5:
                    case "end":
                      return e.stop();
                  }
                }
              }, e);
            }))(), r, o));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Yl(e, t) {
  return Kl.apply(this, arguments);
}
function Kl() {
  return (Kl = R.a(j.a.mark(function e(t, n) {
    var r;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            r = Gl.workId;
            return e.abrupt("return", Ul(R.a(j.a.mark(function e() {
              var t;
              var n;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (undefined !== r) {
                        e.next = 2;
                        break;
                      }
                      throw new Error("not initialized");
                    case 2:
                      t = [];
                      n = [];
                      e.next = 6;
                      return Rl.e(r).then(function (e) {
                        if (e) {
                          e.forEach(function (e) {
                            t.push(e.room_name);
                            n.push(e.username_list);
                          });
                        }
                        Gl.roomList = e;
                      });
                    case 6:
                      return e.abrupt("return", [t, n]);
                    case 7:
                    case "end":
                      return e.stop();
                  }
                }
              }, e);
            }))(), t, n));
          case 2:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function ql(e, t, n) {
  return Xl.apply(this, arguments);
}
function Xl() {
  return (Xl = R.a(j.a.mark(function e(t, n, r) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", Ul(R.a(j.a.mark(function e() {
              var n;
              var r;
              var o;
              var i;
              var a;
              var s;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (n = Gl.workId, r = Gl.username, !n) {
                        e.next = 7;
                        break;
                      }
                      e.next = 4;
                      return Rl.e(n);
                    case 4:
                      i = e.sent;
                      a = i.find(function (e) {
                        return e.room_name === t;
                      });
                      o = null === a || undefined === a ? undefined : a.id;
                    case 7:
                      if (Gl.roomName = t, undefined !== n && undefined !== o) {
                        e.next = 11;
                        break;
                      }
                      console.error("进入房间失败");
                      throw new Error("进入房间失败");
                    case 11:
                      if (undefined !== r) {
                        e.next = 14;
                        break;
                      }
                      console.error("未设置昵称");
                      throw new Error("未设置昵称");
                    case 14:
                      if (Gl.session) {
                        Gl.session.leave();
                      }
                      Gl.session = new Fl(n, t, o);
                      e.next = 18;
                      return Gl.session.join(r);
                    case 18:
                      s = e.sent;
                      Gl.session.members = s.username_list;
                      return e.abrupt("return", [t, Gl.session.members.length]);
                    case 21:
                    case "end":
                      return e.stop();
                  }
                }
              }, e);
            }))(), n, r));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Ql() {
  return Zl.apply(this, arguments);
}
function Zl() {
  return (Zl = R.a(j.a.mark(function e() {
    var t;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (!(null === (t = Gl.session) || undefined === t)) {
              t.leave();
            }
            Gl.session = undefined;
          case 2:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Jl(e, t, n) {
  return $l.apply(this, arguments);
}
function $l() {
  return ($l = R.a(j.a.mark(function e(t, n, r) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", Ul(R.a(j.a.mark(function e() {
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (Gl.session) {
                        e.next = 2;
                        break;
                      }
                      throw new Error("no session");
                    case 2:
                      if (n) {
                        e.next = 4;
                        break;
                      }
                      return e.abrupt("return", []);
                    case 4:
                      Gl.session.broadcast(co.a({}, t, n));
                      return e.abrupt("return", []);
                    case 6:
                    case "end":
                      return e.stop();
                  }
                }
              }, e);
            }))(), undefined, r));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function eu(e, t, n) {
  return tu.apply(this, arguments);
}
function tu() {
  return (tu = R.a(j.a.mark(function e(t, n, r) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", Ul(R.a(j.a.mark(function e() {
              var t;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (t = Gl.session) {
                        e.next = 3;
                        break;
                      }
                      return e.abrupt("return", r("not connected"));
                    case 3:
                      e.next = 5;
                      return t.updateMemberList();
                    case 5:
                      return e.abrupt("return", [t.members]);
                    case 6:
                    case "end":
                      return e.stop();
                  }
                }
              }, e);
            }))(), n, r));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function nu() {
  return ru.apply(this, arguments);
}
function ru() {
  return (ru = R.a(j.a.mark(function e() {
    var t;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", null === (t = Gl.session) || undefined === t ? undefined : t.roomName);
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function ou() {
  return iu.apply(this, arguments);
}
function iu() {
  return (iu = R.a(j.a.mark(function e() {
    var t;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", null === (t = Gl.session) || undefined === t ? undefined : t.members);
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
import au = require("../../427/index");
var su = Pl.a.serverHost;
function cu(e) {
  return lu.apply(this, arguments);
}
function lu() {
  return (lu = R.a(j.a.mark(function e(t) {
    var n;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return gl.a.post(su + "/public-api/baidu-openapi/text2audio", ii.a({}, t), {
              headers: Rl.a()
            });
          case 3:
            n = e.sent;
            return e.abrupt("return", n);
          case 7:
            e.prev = 7;
            e.t0 = e.catch(0);
            return e.abrupt("return", e.t0);
          case 10:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 7]]);
  }))).apply(this, arguments);
}
var uu;
import du = require("../../135");
var pu = au.a.AudioPlayer;
!function (e) {
  e[e.SOUND_MAN = 1] = "SOUND_MAN";
  e[e.SOUND_WOMAN = 0] = "SOUND_WOMAN";
  e[e.SOUND_CHILD = 4] = "SOUND_CHILD";
}(uu || (uu = {}));
var fu = {};
function hu() {
  K.a.condition(false, {
    type: "warning",
    messageId: "soundBlockValueTypeError"
  });
}
function mu(e, t) {
  return gu.apply(this, arguments);
}
function gu() {
  return (gu = R.a(j.a.mark(function e(t, n) {
    var r;
    var o;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return cu({
              tex: n,
              ctp: 1,
              vol: 9,
              per: uu[t]
            });
          case 3:
            if (null === (o = e.sent) || undefined === o || null === (r = o.data) || undefined === r ? undefined : r.audioUrl) {
              pu.play_url(o.data.audioUrl);
            }
            e.next = 10;
            break;
          case 7:
            e.prev = 7;
            e.t0 = e.catch(0);
            console.error(e.t0);
          case 10:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 7]]);
  }))).apply(this, arguments);
}
function _u(e, t) {
  return vu.apply(this, arguments);
}
function vu() {
  return (vu = R.a(j.a.mark(function e(t, n) {
    var r;
    var o;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return cu({
              tex: n,
              ctp: 1,
              vol: 9,
              per: uu[t]
            });
          case 3:
            if (!(null === (o = e.sent) || undefined === o || null === (r = o.data) || undefined === r ? undefined : r.audioUrl)) {
              e.next = 7;
              break;
            }
            e.next = 7;
            return new Promise(function (e, t) {
              pu.play_url(o.data.audioUrl, function () {
                return e(true);
              }, function () {
                return t();
              });
            });
          case 7:
            e.next = 12;
            break;
          case 9:
            e.prev = 9;
            e.t0 = e.catch(0);
            console.error(e.t0);
          case 12:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 9]]);
  }))).apply(this, arguments);
}
function bu(e, t) {
  var n;
  var r;
  var o;
  function i(e) {
    var t;
    var n = Q.a().getState().soundFileMap;
    var r = n.get(e);
    return r || (n.forEach(function (n) {
      if (!(n.name !== e && "".concat(n.name, ".mp3") !== e)) {
        t = n;
      }
    }), t);
  }
  if (fu[e]) {
    if (t) {
      var a = fu[e]._volume;
      var s = fu[e]._rate;
      fu[e].unload();
      var c = i(t);
      var l = pu.load(e, (null === c || undefined === c ? undefined : c.cdnUrl) || "", true);
      l.volume(a);
      l.rate(s);
      fu[e] = l;
    }
    return fu[e];
  }
  var u = Q.a().getState().widgetMap.get(e);
  var d = t || (null === (n = u.attributes) || undefined === n ? undefined : n.fileId);
  var p = null === (r = u.attributes) || undefined === r ? undefined : r.audioVolume;
  var f = null === (o = u.attributes) || undefined === o ? undefined : o.audioRate;
  var h = i(d);
  if (h) {
    var m = pu.load(e, (null === h || undefined === h ? undefined : h.cdnUrl) || "", true);
    if ("number" === typeof p) {
      m.volume(yu(p, "volume"));
    }
    if ("number" === typeof f) {
      m.rate(yu(f, "rate"));
    }
    fu[e] = m;
    return m;
  }
  return "";
}
function yu(e, t) {
  if ("volume" === t) {
    e = (e = e > du.f ? du.f : e) < du.g ? du.g : e;
  }
  if ("rate" === t) {
    e = (e = e > du.d ? du.d : e) < du.e ? du.e : e;
  }
  return e / 100;
}
function Eu(e) {
  var t = bu(e);
  if (t && !t.playing()) {
    t.play();
  }
}
function Ou(e) {
  var t = bu(e);
  if (t) {
    t.stop();
  }
}
function wu(e) {
  var t = bu(e);
  if (t) {
    t.pause();
  }
}
function Cu(e, t) {
  bu(e, t);
}
function Tu(e, t) {
  if ("number" === typeof t) {
    var n = bu(e);
    if (n) {
      n.volume(yu(t, "volume"));
    }
  } else {
    hu();
  }
}
function Su(e, t) {
  if ("number" === typeof t) {
    var n = bu(e);
    if (n) {
      n.rate(yu(t, "rate"));
    }
  } else {
    hu();
  }
}
function Iu(e, t, n) {
  if ("number" === typeof n) {
    var r = bu(e);
    if (r) {
      var o = 100 * r._volume;
      if ("INCREASE" === t) {
        o += n;
      }
      if ("DECREASE" === t) {
        o -= n;
      }
      r.volume(yu(o, "volume"));
    }
  } else {
    hu();
  }
}
function Au(e, t, n) {
  if ("number" === typeof n) {
    var r = bu(e);
    if (r) {
      var o = 100 * r._rate;
      if ("INCREASE" === t) {
        o += n;
      }
      if ("DECREASE" === t) {
        o -= n;
      }
      r.rate(yu(o, "rate"));
    }
  } else {
    hu();
  }
}
import ju = require("../../233/324");
function Nu(e, t) {
  K.a.condition(false, {
    type: e,
    messageId: t
  });
}
function Ru(e, t, n) {
  var r;
  var o = (null === n || undefined === n ? undefined : n.width) || 700;
  var i = (null === n || undefined === n ? undefined : n.height) || 520;
  var a = document.createElement("div");
  var s = document.createElement("video");
  var c = document.createElement("div");
  var l = document.createElement("div");
  a.className = "cameraWidgetCapture";
  c.className = "cameraWidgetButtonBox";
  l.className = "cameraButton";
  c.appendChild(l);
  a.appendChild(s);
  a.appendChild(c);
  s.width = o;
  s.height = i;
  c.onclick = function () {
    var t;
    var n;
    var c = document.createElement("canvas");
    c.width = 360;
    c.height = i;
    if (!(null === (t = c.getContext("2d")) || undefined === t)) {
      t.drawImage(s, (o - 360) / 2, 0, 360, i - 22, 0, 0, 360, i + 22);
    }
    var l = c.toDataURL("image/jpeg");
    if (r.stop) {
      r.stop();
    } else {
      r.getTracks().forEach(function (e) {
        e.stop();
      });
    }
    if (!(null === a || undefined === a || null === (n = a.parentNode) || undefined === n)) {
      n.removeChild(a);
    }
    return e(l);
  };
  navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
  if (navigator.getUserMedia) {
    navigator.getUserMedia({
      video: true,
      audio: false
    }, function (e) {
      var t;
      r = e;
      localStorage.setItem("cameraPermission", "true");
      if ("srcObject" in s) {
        s.srcObject = r;
      } else {
        s.src = window.URL.createObjectURL(r);
      }
      s.play();
      if (!(null === (t = document.getElementById(ju.a)) || undefined === t)) {
        t.appendChild(a);
      }
    }, t);
  } else {
    t();
  }
}
function ku(e, t, n) {
  var r = document.createElement("input");
  r.style.position = "absolute";
  r.style.top = "0";
  r.style.width = "76px";
  r.style.overflow = "hidden";
  r.style.display = "none";
  r.className = "coco-camera-select";
  r.type = "file";
  r.accept = n;
  r.name = "files[]";
  r.onchange = function (n) {
    var o;
    var i;
    var a = r.files && r.files[0];
    if (undefined !== window.createObjectURL) {
      i = window.createObjectURL(a);
    } else {
      if (undefined !== window.URL) {
        i = window.URL.createObjectURL(a);
      } else {
        if (undefined !== window.webkitURL) {
          i = window.webkitURL.createObjectURL(a);
        } else {
          t();
        }
      }
    }
    e(i);
    if (!(null === (o = r.parentNode) || undefined === o)) {
      o.removeChild(r);
    }
  };
  document.body.appendChild(r);
  document.body.appendChild(r);
  r.click();
}
function xu(e) {
  Q.a().dispatch(el.r("FRONT" === e ? 1 : 0));
}
function Du(e, t) {
  return Mu.apply(this, arguments);
}
function Mu() {
  return (Mu = R.a(j.a.mark(function e(t, n) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.next = 2;
            return new Promise(function (e, n) {
              if (i.d()) {
                try {
                  navigator.camera.getPicture(function () {
                    var n = R.a(j.a.mark(function n(r) {
                      return j.a.wrap(function (n) {
                        for (;;) {
                          switch (n.prev = n.next) {
                            case 0:
                              n.next = 2;
                              return t(r);
                            case 2:
                              e(true);
                            case 3:
                            case "end":
                              return n.stop();
                          }
                        }
                      }, n);
                    }));
                    return function (e) {
                      return n.apply(this, arguments);
                    };
                  }(), function (t) {
                    function n() {}
                    e(true);
                    console.error("getPicture fail:", t);
                    if ("number" === typeof t) {
                      Nu("error", "cameraTakePhotoFail");
                      window.plugins.toast.showShortTop("相机没有权限拍照", n, n);
                    }
                  }, {
                    quality: 50,
                    cameraDirection: Q.a().getState().mediaMap.cameraDirection,
                    destinationType: 1,
                    saveToPhotoAlbum: true
                  });
                } catch (o) {
                  n();
                  console.error("getPicture error:", o);
                  Nu("error", "cameraNotSupportError");
                }
              } else if (i.f()) {
                var r = document.getElementById("appcraft-camera-input");
                if (r) {
                  r.onchange = function (e) {
                    var n;
                    var r = null === (n = e.target.files) || undefined === n ? undefined : n[0];
                    if (r) {
                      var o = URL.createObjectURL(r);
                      t(o);
                    }
                  };
                  r.click();
                }
              } else {
                hr("camera").then(function (n) {
                  if (n) {
                    navigator.mediaDevices.enumerateDevices().then(function (n) {
                      if (!n.some(function (e) {
                        return "videoinput" === e.kind;
                      })) {
                        return Nu("error", "cameraNotSupportError");
                      }
                      Ru(function () {
                        var n = R.a(j.a.mark(function n(r) {
                          return j.a.wrap(function (n) {
                            for (;;) {
                              switch (n.prev = n.next) {
                                case 0:
                                  n.next = 2;
                                  return t(r);
                                case 2:
                                  e(true);
                                case 3:
                                case "end":
                                  return n.stop();
                              }
                            }
                          }, n);
                        }));
                        return function (e) {
                          return n.apply(this, arguments);
                        };
                      }(), function () {
                        e(true);
                      });
                    }).catch(function () {
                      Nu("error", "cameraNotSupportError");
                    });
                  } else {
                    Nu("error", "cameraTakePhotoFail");
                  }
                });
              }
            });
          case 2:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Lu(e, t) {
  return Pu.apply(this, arguments);
}
function Pu() {
  return (Pu = R.a(j.a.mark(function e(t, n) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.next = 2;
            return new Promise(function (e, n) {
              if (i.d()) {
                try {
                  navigator.device.capture.captureVideo(function () {
                    var n = R.a(j.a.mark(function n(r) {
                      var o;
                      return j.a.wrap(function (n) {
                        for (;;) {
                          switch (n.prev = n.next) {
                            case 0:
                              n.next = 2;
                              return t(null === (o = r[0]) || undefined === o ? undefined : o.fullPath);
                            case 2:
                              e(true);
                            case 3:
                            case "end":
                              return n.stop();
                          }
                        }
                      }, n);
                    }));
                    return function (e) {
                      return n.apply(this, arguments);
                    };
                  }(), function (t) {
                    e(true);
                    Nu("error", "cameraTakeVideoFail");
                  }, {
                    limit: 1
                  });
                } catch (r) {
                  n();
                  Nu("error", "cameraNotSupportError");
                }
              } else {
                ku(function (n) {
                  e(true);
                  t(n);
                }, function () {
                  n();
                }, "video/*");
                ic.b.log("videoNotSupportTips");
              }
            });
          case 2:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Bu(e, t) {
  return Fu.apply(this, arguments);
}
function Fu() {
  return (Fu = R.a(j.a.mark(function e(t, n) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.next = 2;
            return new Promise(function (e, n) {
              if (i.d()) {
                try {
                  navigator.camera.getPicture(function () {
                    var n = R.a(j.a.mark(function n(r) {
                      return j.a.wrap(function (n) {
                        for (;;) {
                          switch (n.prev = n.next) {
                            case 0:
                              n.next = 2;
                              return t(r);
                            case 2:
                              e(true);
                            case 3:
                            case "end":
                              return n.stop();
                          }
                        }
                      }, n);
                    }));
                    return function (e) {
                      return n.apply(this, arguments);
                    };
                  }(), function (t) {
                    e(true);
                    Nu("error", "cameraPhotoFailChoose");
                  }, {
                    sourceType: 0,
                    destinationType: 1,
                    mediaType: 0
                  });
                } catch (r) {
                  n();
                  Nu("warning", "cameraPhotoFailChoose");
                }
              } else {
                ku(function () {
                  var n = R.a(j.a.mark(function n(r) {
                    return j.a.wrap(function (n) {
                      for (;;) {
                        switch (n.prev = n.next) {
                          case 0:
                            n.next = 2;
                            return t(r);
                          case 2:
                            e(true);
                          case 3:
                          case "end":
                            return n.stop();
                        }
                      }
                    }, n);
                  }));
                  return function (e) {
                    return n.apply(this, arguments);
                  };
                }(), function () {
                  n();
                }, "image/*");
              }
            });
          case 2:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
var Gu = /^(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/;
var Uu = /^[1-9]\d{3}[-/](0[1-9]|1[0-2])[-/](0[1-9]|[1-2][0-9]|3[0-1])$/;
var Wu = /^[1-9]\d{3}[-/](0[1-9]|1[0-2])[-/](0[1-9]|[1-2][0-9]|3[0-1])\s(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/;
function Hu(e) {
  var t = e ? new Date(e) : new Date();
  var n = t.getFullYear();
  var r = t.getMonth() + 1;
  var o = t.getDate();
  var i = t.getHours();
  var a = t.getMinutes();
  var s = t.getSeconds();
  var c = "".concat(n, "-").concat(r < 10 ? "0" + r : r, "-").concat(o < 10 ? "0" + o : o);
  var l = "".concat(i < 10 ? "0" + i : i, ":").concat(a < 10 ? "0" + a : a, ":").concat(s < 10 ? "0" + s : s);
  return {
    dateTime: "".concat(c, " ").concat(l),
    date: c,
    time: l,
    y: n,
    m: r,
    d: o,
    h: i,
    min: a,
    s: s
  };
}
function Vu(e, t) {
  if ((Wu.test(e) || Uu.test(e) || Gu.test(e)) && (Wu.test(t) || Uu.test(t) || Gu.test(t))) {
    if (Wu.test(e) && Wu.test(t) || Uu.test(e) && Uu.test(t) || Gu.test(e) && Gu.test(t)) {
      return e === t;
    }
    if (Wu.test(e)) {
      var n = Hu(e.replace(/-/g, "/"));
      return Uu.test(t) ? n.date === t : !!Gu.test(t) && n.time === t;
    }
    if (Wu.test(t)) {
      var r = Hu(t.replace(/-/g, "/"));
      return Uu.test(e) ? r.date === e : !!Gu.test(e) && r.time === e;
    }
  }
  return "";
}
function zu(e, t, n) {
  if ((Wu.test(e) || Uu.test(e) || Gu.test(e)) && (Wu.test(t) || Uu.test(t) || Gu.test(t))) {
    var r = 0;
    var o = 0;
    var i = Hu();
    if (Wu.test(e)) {
      r = new Date(e.replace(/-/g, "/")).getTime();
    } else {
      if (Gu.test(e)) {
        r = new Date(i.date.replace(/-/g, "/") + " " + e).getTime();
      } else {
        if (Uu.test(e)) {
          r = new Date(e.replace(/-/g, "/") + " 00:00:00").getTime();
        }
      }
    }
    if (Wu.test(t)) {
      o = new Date(t.replace(/-/g, "/")).getTime();
    } else {
      if (Gu.test(t)) {
        o = new Date(i.date.replace(/-/g, "/") + " " + t).getTime();
      } else {
        if (Uu.test(t)) {
          o = new Date(t.replace(/-/g, "/") + " 00:00:00").getTime();
        }
      }
    }
    var a = r - o;
    switch (n) {
      case "year":
        return Math.round(a / 1e3 / 60 / 60 / 24 / 30 / 12 * 100) / 100;
      case "month":
        return Math.round(a / 1e3 / 60 / 60 / 24 / 30 * 100) / 100;
      case "days":
        return Math.round(a / 1e3 / 60 / 60 / 24 * 100) / 100;
      case "hour":
        return Math.round(a / 1e3 / 60 / 60 * 100) / 100;
      case "minute":
        return Math.round(a / 1e3 / 60 * 100) / 100;
      case "second":
        return a / 1e3;
      default:
        return "";
    }
  }
}
function Yu(e) {
  var t;
  if (!(null === (t = document.getElementById("date-picker-".concat(e))) || undefined === t)) {
    t.click();
  }
}
function Ku(e) {
  var t;
  if (!(null === (t = document.getElementById("time-picker-".concat(e))) || undefined === t)) {
    t.click();
  }
}
function qu(e, t) {
  var n = jo(e, "timeStamp");
  if (!n) {
    return 0;
  }
  var r = new Date(n);
  switch (t) {
    case "year":
      return r.getFullYear();
    case "month":
      return r.getMonth() + 1;
    case "date":
      return r.getDate();
    default:
      return 0;
  }
}
function Xu(e) {
  var t = jo(e, "timeStamp");
  return t ? Hu(t).date : "";
}
function Qu(e, t) {
  var n = jo(e, "timeStamp");
  if (!n) {
    return 0;
  }
  var r = new Date(n);
  switch (t) {
    case "hour":
      return r.getHours();
    case "minute":
      return r.getMinutes();
    case "second":
      return r.getSeconds();
    default:
      return 0;
  }
}
function Zu(e) {
  var t = jo(e, "timeStamp");
  return t ? Hu(t).time : "";
}
import Ju = require("../../129");
import $u = require("../../38/113");
import ed = require("./89");
import td = require("../../174");
var nd = new Map();
function rd(e) {
  return od.apply(this, arguments);
}
function od() {
  return (od = R.a(j.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var s;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return td.a.getAll();
          case 3:
            e.sent.forEach(function (e) {
              nd.set(e.id, e);
            });
            e.next = 10;
            break;
          case 7:
            e.prev = 7;
            e.t0 = e.catch(0);
            console.error("indexed idxDB.getAll catch", e.t0);
          case 10:
            for (n in t) if (!((r = t[n]).type !== x.m && r.type !== x.G)) {
              o = ii.a({
                id: r.id,
                name: r.title
              }, r.attributes.db);
              ed.b.set(n, ld(o, r.type));
            }
            for (i in t) if (!((s = t[i]).type !== x.x && s.type !== x.A)) {
              a.h(i, {
                dataUpdatedAt: Date.now()
              });
            }
          case 12:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 7]]);
  }))).apply(this, arguments);
}
function id(e) {
  return ad.apply(this, arguments);
}
function ad() {
  return (ad = R.a(j.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var s;
    var c;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            n = [];
            e.t0 = j.a.keys(t);
          case 2:
            if ((e.t1 = e.t0()).done) {
              e.next = 16;
              break;
            }
            if (r = e.t1.value, (o = t[r]).type !== x.A || "number" !== typeof o.attributes.dataSource) {
              e.next = 14;
              break;
            }
            if (n.push(o.id), (i = ed.c.get(o.attributes.dataSource)) ? i.push(o.id) : ed.c.set(o.attributes.dataSource, [o.id]), ed.a.get(o.attributes.dataSource)) {
              e.next = 14;
              break;
            }
            e.next = 12;
            return $u.p(o.attributes.dataSource);
          case 12:
            s = e.sent;
            ed.a.set(o.attributes.dataSource, s);
          case 14:
            e.next = 2;
            break;
          case 16:
            for (c = 0; c < n.length; c++) {
              a.h(n[c], {
                dataUpdatedAt: Date.now()
              });
            }
          case 17:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function sd(e) {
  return cd.apply(this, arguments);
}
function cd() {
  return (cd = R.a(j.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var s;
    var c;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (e.prev = 0, !(n = ed.c.get(t))) {
              e.next = 8;
              break;
            }
            e.next = 5;
            return $u.p(t);
          case 5:
            for (r = e.sent, ed.a.set(t, r), o = 0; o < n.length; o++) {
              if ((null === (s = a.d(n[o])) || undefined === s ? undefined : s.dataSource) === t) {
                a.h(n[o], {
                  dataUpdatedAt: Date.now()
                });
              }
            }
          case 8:
            e.next = 16;
            break;
          case 10:
            e.prev = 10;
            e.t0 = e.catch(0);
            if ((c = e.t0.message).toLocaleLowerCase().includes("network error")) {
              c = "网络异常";
            }
            K.a.log({
              type: "error",
              messageId: "listViewerDataSourceFetchError",
              widgetId: "",
              values: {
                msg: c
              }
            });
            if (i.d()) {
              window.plugins.toast.showShortTop("网络不稳定，部分云数据源获取失败，可能影响作品效果");
            }
          case 16:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 10]]);
  }))).apply(this, arguments);
}
function ld(e, t) {
  var n = nd.get(e.id);
  if (!n) {
    return e;
  }
  var r = {};
  n.data.forEach(function (e) {
    r[e.rowId] = e;
  });
  if (t === x.m) {
    e.data = e.data.map(function (e) {
      return ii.a(ii.a({}, e), r[e.rowId]);
    });
  }
  if (t === x.G) {
    e.data = n.data.map(function (e) {
      return ii.a(ii.a({}, e), r[e.rowId]);
    });
  }
  return e;
}
function ud() {
  for (var e in ed.b) {
    var t = ed.b.get(e);
    if (t) {
      td.a.put(t).then(function (e) {
        console.info(e);
      });
    }
  }
}
function dd(e, t) {
  if ("number" === typeof t && (t > Ju.k || t < Ju.m)) {
    K.a.log({
      type: "warning",
      messageId: "valueOutOfRange",
      widgetId: e
    });
  } else {
    a.k(e, {
      width: t
    });
  }
}
function pd(e, t) {
  if ("number" === typeof t && (t > Ju.j || t < Ju.l)) {
    K.a.log({
      type: "warning",
      messageId: "valueOutOfRange",
      widgetId: e
    });
  } else {
    a.k(e, {
      height: t
    });
  }
}
function fd(e, t) {
  a.j(e, {
    x: t
  });
}
function hd(e, t) {
  a.j(e, {
    y: t
  });
}
function md(e, t) {
  var n;
  if ("string" === typeof t) {
    var r;
    var o = false;
    ed.b.forEach(function (e) {
      if (e.name === t) {
        r = e.id;
        o = true;
      }
      if (e.id === t) {
        o = true;
      }
    });
    if (o) {
      a.h(e, {
        dataSource: r || t
      });
      var i = null === (n = a.d(e)) || undefined === n ? undefined : n.templateSlotMap;
      for (var s in i) i[s].dataBindings = "";
      a.h(e, {
        templateSlotMap: i
      });
    } else {
      K.a.log({
        type: "warning",
        messageId: "listViewerDataSourceNotExists",
        widgetId: e
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "mustToBeString",
      values: {
        name: "数据源"
      },
      widgetId: e
    });
  }
}
function gd(e, t) {
  a.l(e, t);
}
function _d(e, t) {
  a.h(e, {
    disabled: t
  });
}
function vd(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.width;
}
function bd(e) {
  var t;
  return null === (t = a.f(e)) || undefined === t ? undefined : t.height;
}
function yd(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.x;
}
function Ed(e) {
  var t;
  return null === (t = a.e(e)) || undefined === t ? undefined : t.y;
}
function Od(e) {
  var t;
  var n = null === (t = a.d(e)) || undefined === t ? undefined : t.dataSource;
  if (!n) {
    return "";
  }
  var r = ed.b.get(n);
  return r ? r.name : n;
}
function wd(e, t, n) {
  var r;
  var o;
  if ("string" === typeof n) {
    var i = null === (r = a.d(e)) || undefined === r ? undefined : r.templateSlotMap;
    var s = null === (o = a.d(e)) || undefined === o ? undefined : o.dataSource;
    if (s) {
      if (i) {
        var c;
        var l = ed.b.get(s);
        if (l) {
          for (var u in l.header) if (l.header[u].field === n) {
            c = u;
          }
          if (c) {
            i[t].dataBindings = c;
            a.h(e, {
              templateSlotMap: i
            });
          }
        }
        if (!c) {
          K.a.log({
            type: "error",
            messageId: "gridColumnNotExists",
            widgetId: e
          });
        }
      }
    } else {
      K.a.log({
        type: "error",
        messageId: "listViewerNoDataSource",
        widgetId: e
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "mustToBeString",
      values: {
        name: "绑定名称"
      },
      widgetId: e
    });
  }
}
function Cd(e, t, n, r, o) {
  var i;
  var s;
  if ("number" === typeof t) {
    if (!["color", "backgroundColor"].includes(r) || "string" !== typeof o || P.pb(o)) {
      var c = null === (i = a.d(e)) || undefined === i ? undefined : i.templateSlotMap;
      var l = null === (s = a.d(e)) || undefined === s ? undefined : s.dataSource;
      if (c) {
        var u = ed.b.get(l || "");
        if (l && u) {
          if (t > 1 && t > u.data.length || t < 1) {
            return void K.a.log({
              type: "error",
              messageId: "gridRowNotExists",
              widgetId: e
            });
          }
          var d = c[n].dataBindings;
          if (d && ("content" === r || "fileId" === r || "backgroundImgUrl" === r)) {
            u.data[t - 1][d] = String(o);
            ed.b.set(l, u);
            a.h(e, {
              dataUpdatedAt: Date.now()
            });
            return void td.a.put(u).then(function (e) {});
          }
        }
        var p = ed.d.get("".concat(e, "_").concat(n)) || {};
        if (p[t]) {
          p[t] = ii.a(ii.a({}, p[t]), {}, co.a({}, r, o));
        } else {
          p[t] = co.a({}, r, o);
        }
        ed.d.set("".concat(e, "_").concat(n), p);
        a.h(e, {
          dataUpdatedAt: Date.now()
        });
      }
    } else {
      K.a.log({
        type: "warning",
        messageId: "argNotColor",
        widgetId: e
      });
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      values: {
        name: "行数"
      },
      widgetId: e
    });
  }
}
function Td(e, t, n, r) {
  var o;
  var i;
  if ("number" === typeof t) {
    var s = null === (o = a.d(e)) || undefined === o ? undefined : o.templateSlotMap;
    var c = null === (i = a.d(e)) || undefined === i ? undefined : i.dataSource;
    if (s) {
      var l = ed.b.get(c || "");
      if (c && l) {
        if (t > 1 && t > l.data.length || t < 1) {
          return void K.a.log({
            type: "error",
            messageId: "gridRowNotExists",
            widgetId: e
          });
        }
        var u = s[n].dataBindings;
        if (u && ("content" === r || "fileId" === r || "backgroundImgUrl" === r)) {
          return l.data[t - 1][u];
        }
      }
      var d = (ed.d.get("".concat(e, "_").concat(n)) || {})[t];
      if (d && undefined !== d[r]) {
        return d[r];
      }
      var p = a.d(s[n].widgetId);
      return p ? p[r] : undefined;
    }
  } else {
    K.a.log({
      type: "error",
      messageId: "argNotNumber",
      values: {
        name: "行数"
      },
      widgetId: e
    });
  }
}
import Sd = require("../../36/345/344");
var Id = {
  getBrightness: Sd.getBrightness,
  setBrightness: function (e) {
    if ("number" === typeof e) {
      if (e > 100) {
        K.a.condition(false, {
          type: "error",
          messageId: "brightnessLessThan"
        });
      } else if (e < 0) {
        K.a.condition(false, {
          type: "error",
          messageId: "brightnessGreaterThan"
        });
      } else {
        if (!i.d()) {
          var t = e / 100;
          var n = document.getElementById("cocoScreenMask");
          if (n) {
            var r = .6 * (1 - t);
            n.style.opacity = String(r);
          }
        }
        Sd.setBrightness(e);
      }
    } else {
      K.a.condition(false, {
        type: "error",
        messageId: "brightnessTypeError"
      });
    }
  },
  setKeepScreenOn: function (e) {
    if (i.d()) {
      Sd.setKeepScreenOn(e);
    } else {
      K.a.condition(false, {
        type: "warning",
        messageId: "brightnessKeepScreenOnNotSupported"
      });
    }
  }
};
function Ad() {
  return jd.apply(this, arguments);
}
function jd() {
  return (jd = R.a(j.a.mark(function e() {
    var t;
    var n;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (console.log("getBatteryInfo"), !i.d()) {
              e.next = 5;
              break;
            }
            return e.abrupt("return", new Promise(function (e) {
              window.addEventListener("batterystatus", function t(n) {
                var r = {
                  charging: n.isPlugged,
                  level: n.level
                };
                e(r);
                window.removeEventListener("batterystatus", t, false);
              }, false);
            }));
          case 5:
            if (!navigator.getBattery) {
              e.next = 13;
              break;
            }
            e.next = 8;
            return navigator.getBattery();
          case 8:
            t = e.sent;
            n = {
              level: 100 * t.level,
              charging: t.charging
            };
            return e.abrupt("return", Promise.resolve(n));
          case 13:
            console.error("无法获取电量值，返回 -1");
            return e.abrupt("return", Promise.resolve({
              level: -1,
              charging: false
            }));
          case 15:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Nd() {
  return Rd.apply(this, arguments);
}
function Rd() {
  return (Rd = R.a(j.a.mark(function e() {
    var t;
    var n;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.next = 2;
            return Ad();
          case 2:
            t = e.sent;
            n = t.level;
            return e.abrupt("return", n);
          case 5:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
var kd;
var xd = {
  getBatteryLevel: Nd
};
import Dd = require("../../146");
!function (e) {
  e.INSERT_ERROR = "E1";
  e.COLUMN_CANNOT_FOUND = "E2";
}(kd || (kd = {}));
var Md = {};
function Ld(e, t, n) {
  return e.then(function (e) {
    if (t) {
      return e ? Promise.resolve(t.apply(undefined, gn.a(e))) : Promise.resolve(t());
    }
  }).catch(function (e) {
    var t;
    var r = {
      cloudDBName: (null === (t = Md[e.cloudDBId]) || undefined === t ? undefined : t.name) || "",
      errorInfo: e.errorInfo,
      code: e.code
    };
    Ll.emitCloudDBError(JSON.stringify(r));
    K.a.condition(false, {
      type: "error",
      message: r.errorInfo
    });
    if (n) {
      return Promise.resolve(n(r.errorInfo));
    }
  });
}
function Pd(e) {
  for (var t in e) {
    var n = e[t];
    if (n.type === x.h) {
      Md[n.attributes.cloudDbId] = {
        columnInfo: n.attributes.columns,
        name: n.attributes.name
      };
    }
  }
}
function Bd(e, t, n, r) {
  return Fd.apply(this, arguments);
}
function Fd() {
  return (Fd = R.a(j.a.mark(function e(t, n, r, o) {
    var i;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", Ld(R.a(j.a.mark(function e() {
              var r;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (e.prev = 0, i = n instanceof Array ? n : n.split(","), Array.isArray(i)) {
                        e.next = 4;
                        break;
                      }
                      throw new Error("插入数据格式错误");
                    case 4:
                      if (!i.every(function (e) {
                        return "" === e;
                      })) {
                        e.next = 6;
                        break;
                      }
                      throw new Error("插入空数据错误");
                    case 6:
                      e.next = 14;
                      break;
                    case 8:
                      e.prev = 8;
                      e.t0 = e.catch(0);
                      e.t0.cloudDBId = t;
                      e.t0.errorInfo = e.t0.message;
                      e.t0.code = kd.INSERT_ERROR;
                      throw e.t0;
                    case 14:
                      e.prev = 14;
                      e.next = 17;
                      return Dd.l(t, i);
                    case 17:
                      return e.abrupt("return", undefined);
                    case 20:
                      e.prev = 20;
                      e.t1 = e.catch(14);
                      r = JSON.parse(e.t1.message);
                      e.t1.cloudDBId = t;
                      e.t1.errorInfo = r.msg;
                      e.t1.code = r.code;
                      throw e.t1;
                    case 27:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[0, 8], [14, 20]]);
            }))(), r, o));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Gd(e, t, n, r, o, i) {
  return Ud.apply(this, arguments);
}
function Ud() {
  return (Ud = R.a(j.a.mark(function e(t, n, r, o, i, a) {
    var s;
    var c;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            s = Md[t].columnInfo || [];
            c = s.find(function (e) {
              return e.id === n || e.name === n;
            });
            return e.abrupt("return", Ld(R.a(j.a.mark(function e() {
              var n;
              var i;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (e.prev = 0, c) {
                        e.next = 7;
                        break;
                      }
                      (n = new Error()).cloudDBId = t;
                      n.errorInfo = "所选列不存在";
                      n.code = kd.COLUMN_CANNOT_FOUND;
                      throw n;
                    case 7:
                      e.next = 9;
                      return Dd.k(t, c.id, r, o);
                    case 9:
                      return e.abrupt("return", undefined);
                    case 12:
                      e.prev = 12;
                      e.t0 = e.catch(0);
                      i = JSON.parse(e.t0.message);
                      e.t0.cloudDBId = t;
                      e.t0.errorInfo = i.msg;
                      e.t0.code = i.code;
                      throw e.t0;
                    case 19:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[0, 12]]);
            }))(), i, a));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Wd(e, t, n, r, o, i, a, s) {
  return Hd.apply(this, arguments);
}
function Hd() {
  return (Hd = R.a(j.a.mark(function e(t, n, r, o, i, a, s, c) {
    var l;
    var u;
    var d;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            l = Md[t].columnInfo || [];
            u = l.find(function (e) {
              return e.id === n || e.name === n;
            });
            d = l.find(function (e) {
              return e.id === i || e.name === i;
            });
            return e.abrupt("return", Ld(R.a(j.a.mark(function e() {
              var n;
              var i;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (e.prev = 0, u && d) {
                        e.next = 7;
                        break;
                      }
                      (n = new Error()).cloudDBId = t;
                      n.errorInfo = "所选列不存在";
                      n.code = kd.COLUMN_CANNOT_FOUND;
                      throw n;
                    case 7:
                      e.next = 9;
                      return Dd.o(t, u.id, r, o, d.id, a);
                    case 9:
                      return e.abrupt("return", undefined);
                    case 12:
                      e.prev = 12;
                      e.t0 = e.catch(0);
                      i = JSON.parse(e.t0.message);
                      e.t0.cloudDBId = t;
                      e.t0.errorInfo = i.msg;
                      e.t0.code = i.code;
                      throw e.t0;
                    case 19:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[0, 12]]);
            }))(), s, c));
          case 4:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Vd(e, t, n, r, o, i) {
  return zd.apply(this, arguments);
}
function zd() {
  return (zd = R.a(j.a.mark(function e(t, n, r, o, i, a) {
    var s;
    var c;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            s = Md[t].columnInfo || [];
            c = s.find(function (e) {
              return e.id === n || e.name === n;
            });
            return e.abrupt("return", Ld(R.a(j.a.mark(function e() {
              var n;
              var i;
              var a;
              var s;
              var l;
              var u;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (c) {
                        e.next = 6;
                        break;
                      }
                      (n = new Error()).cloudDBId = t;
                      n.errorInfo = "所选列不存在";
                      n.code = kd.COLUMN_CANNOT_FOUND;
                      throw n;
                    case 6:
                      e.prev = 6;
                      e.next = 9;
                      return Dd.m(t, c.id, r, o);
                    case 9:
                      if (i = e.sent) {
                        e.next = 12;
                        break;
                      }
                      return e.abrupt("return", []);
                    case 12:
                      a = i.columns || [];
                      s = i.records || [];
                      l = s.map(function (e) {
                        var t = e.values;
                        var n = [];
                        a.forEach(function (e) {
                          n.push(Yd(t[e.id], e.type));
                        });
                        return n;
                      });
                      return e.abrupt("return", [l]);
                    case 18:
                      e.prev = 18;
                      e.t0 = e.catch(6);
                      u = JSON.parse(e.t0.message);
                      e.t0.cloudDBId = t;
                      e.t0.errorInfo = u.msg;
                      e.t0.code = u.code;
                      throw e.t0;
                    case 25:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[6, 18]]);
            }))(), i, a));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Yd(e, t) {
  return e ? "number" === t ? Number(e) : "boolean" === t ? "true" === e : e : "";
}
function Kd(e, t, n, r) {
  return qd.apply(this, arguments);
}
function qd() {
  return (qd = R.a(j.a.mark(function e(t, n, r, o) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", Ld(R.a(j.a.mark(function e() {
              var r;
              var o;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      e.prev = 0;
                      e.next = 3;
                      return Dd.n(t, n);
                    case 3:
                      r = e.sent;
                      return e.abrupt("return", [r]);
                    case 7:
                      e.prev = 7;
                      e.t0 = e.catch(0);
                      o = JSON.parse(e.t0.message);
                      e.t0.cloudDBId = t;
                      e.t0.errorInfo = o.msg;
                      e.t0.code = o.code;
                      throw e.t0;
                    case 14:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[0, 7]]);
            }))(), r, o));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Xd(e) {
  if (e) {
    for (var t in e) {
      var n = e[t];
      if (null === n || undefined === n ? undefined : n.cdnUrl) {
        P.bb(t, null === n || undefined === n ? undefined : n.cdnUrl);
      }
    }
  }
}
function Qd(e, t) {
  ps.Eb(e);
  (function (e) {
    Q.a().getState().widgetMap.forEach(function (t) {
      if (t.type === x.A && t.attributes.dataSource === e) {
        a.h(t.id, {
          dataUpdatedAt: Date.now()
        });
      }
    });
  })(e);
  td.a.put(t).then(function () {
    q.a({
      type: X.b.PLAYER_DATA_WATCH,
      data: {
        screenId: Q.a().getState().currentScreenId,
        tab: x.G,
        id: e,
        value: t
      }
    });
  }).catch(function (e) {
    console.error(e);
  });
  ed.b.set(e, t);
}
function Zd(e, t, n, r) {
  var o = ed.b.get(e);
  if (o) {
    var i = cp(o, t);
    if (!i) {
      return void K.a.log({
        type: "error",
        messageId: "columnNotExists",
        widgetId: e
      });
    }
    if ("number" !== typeof n) {
      return void K.a.log({
        type: "error",
        messageId: "argNotNumber",
        values: {
          name: "行"
        },
        widgetId: e
      });
    }
    var a = Math.round(n);
    if (a <= 0 || a > o.data.length) {
      return void K.a.log({
        type: "error",
        messageId: "rowNotExists",
        widgetId: e
      });
    }
    o.data[a - 1][i] = "object" === typeof r ? JSON.stringify(r) : String(r);
    Qd(e, o);
  }
}
function Jd(e, t) {
  var n = ed.b.get(e);
  if (n) {
    for (var r in t) t[r] = "object" === typeof t[r] ? JSON.stringify(t[r]) : String(t[r]);
    var o = ii.a({
      rowId: i.j("ROW")
    }, t);
    n.data.push(o);
    Qd(e, n);
  }
}
function $d(e, t, n) {
  var r = ed.b.get(e);
  if (r) {
    if ("number" !== typeof t) {
      return void K.a.log({
        type: "error",
        messageId: "argNotNumber",
        values: {
          name: "行"
        },
        widgetId: e
      });
    }
    var o = Math.round(t);
    if (o <= 0) {
      return void K.a.log({
        type: "error",
        messageId: "rowNotExists",
        widgetId: e
      });
    }
    for (var a in n) n[a] = "object" === typeof n[a] ? JSON.stringify(n[a]) : String(n[a]);
    var s = ii.a({
      rowId: i.j("ROW")
    }, n);
    if (o > r.data.length) {
      r.data.push(s);
    } else {
      r.data.splice(o - 1, 0, s);
    }
    Qd(e, r);
  }
}
function ep(e) {
  var t = ed.b.get(e);
  if (t) {
    if (0 === t.data.length) {
      return void K.a.log({
        type: "error",
        messageId: "rowNotExists",
        widgetId: e
      });
    }
    t.data.pop();
    Qd(e, t);
  }
}
function tp(e) {
  var t = ed.b.get(e);
  if (t) {
    t.data = [];
    Qd(e, t);
  }
}
function np(e, t) {
  var n = ed.b.get(e);
  if (n) {
    if ("number" !== typeof t) {
      return void K.a.log({
        type: "error",
        messageId: "argNotNumber",
        values: {
          name: "行"
        },
        widgetId: e
      });
    }
    var r = Math.round(t);
    if (r <= 0 || r > n.data.length) {
      return void K.a.log({
        type: "error",
        messageId: "rowNotExists",
        widgetId: e
      });
    }
    n.data.splice(r - 1, 1);
    Qd(e, n);
  }
}
function rp(e, t, n) {
  var r = ed.b.get(e);
  if (r) {
    var o = cp(r, t);
    if (!o) {
      return void K.a.log({
        type: "error",
        messageId: "columnNotExists",
        widgetId: e
      });
    }
    if ("number" !== typeof n) {
      return void K.a.log({
        type: "error",
        messageId: "argNotNumber",
        values: {
          name: "行"
        },
        widgetId: e
      });
    }
    var i = Math.round(n);
    return i <= 0 || i > r.data.length ? void K.a.log({
      type: "error",
      messageId: "rowNotExists",
      widgetId: e
    }) : r.data[i - 1][o] || "";
  }
}
function op(e) {
  var t = ed.b.get(e);
  return (null === t || undefined === t ? undefined : t.data.length) || 0;
}
function ip(e, t) {
  var n = ed.b.get(e);
  if (n) {
    var r = cp(n, t);
    if (!r) {
      return void K.a.log({
        type: "error",
        messageId: "columnNotExists",
        widgetId: e
      });
    }
    var o = [];
    n.data.forEach(function (e) {
      return o.push(e[r] || "");
    });
    return o;
  }
}
function ap(e) {
  var t = ed.b.get(e);
  if (t) {
    if (0 === t.data.length) {
      return void K.a.log({
        type: "error",
        messageId: "rowNotExists",
        widgetId: e
      });
    }
    var n = {};
    var r = t.data[t.data.length - 1];
    for (var o in t.header) {
      n[t.header[o].field] = r[o] || "";
    }
    return n;
  }
}
function sp(e, t) {
  var n = ed.b.get(e);
  if (n) {
    if ("number" !== typeof t) {
      return void K.a.log({
        type: "error",
        messageId: "argNotNumber",
        values: {
          name: "行"
        },
        widgetId: e
      });
    }
    var r = Math.round(t);
    if (r <= 0 || r > n.data.length) {
      return void K.a.log({
        type: "error",
        messageId: "rowNotExists",
        widgetId: e
      });
    }
    var o = {};
    var i = n.data[r - 1];
    for (var a in n.header) {
      o[n.header[a].field] = i[a] || "";
    }
    return o;
  }
}
function cp(e, t) {
  var n = "";
  if ("number" === typeof t) {
    var r = Math.round(t);
    if (r <= 0 || r > Object.keys(e.header).length) {
      return n;
    }
    var o = 1;
    for (var i in e.header) {
      if (o === r) {
        n = i;
        break;
      }
      o++;
    }
  }
  if ("string" === typeof t) {
    for (var a in e.header) if (a === t || e.header[a].field === t) {
      n = a;
      break;
    }
  }
  return n;
}
function lp(e, t) {
  var n = Object.keys(e);
  var r = Object.keys(t);
  return {
    addColumnsIds: r.filter(function (e) {
      return -1 === n.indexOf(e);
    }),
    removeColumnsIds: n.filter(function (e) {
      return -1 === r.indexOf(e);
    }),
    updateColumns: r.filter(function (e) {
      return n.indexOf(e) >= 0;
    }).filter(function (n) {
      return e[n].field !== t[n].field;
    })
  };
}
function up(e, t, n) {
  return dp.apply(this, arguments);
}
function dp() {
  return (dp = R.a(j.a.mark(function e(t, n, r) {
    var o;
    var i;
    var a;
    var s;
    var c;
    var l;
    var u;
    var d;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            o = lp(n.header, r.header);
            i = o.addColumnsIds;
            a = o.removeColumnsIds;
            e.next = 3;
            return td.a.get(t);
          case 3:
            if (s = e.sent) {
              e.next = 10;
              break;
            }
            e.next = 7;
            return td.a.put(r);
          case 7:
            e.next = 9;
            return td.a.get(t);
          case 9:
            return e.abrupt("return", e.sent);
          case 10:
            c = s.data;
            l = N.a(c);
            try {
              for (d = function () {
                var e = u.value;
                a.forEach(function (t) {
                  delete e[t];
                });
              }, l.s(); !(u = l.n()).done;) {
                d();
              }
            } catch (p) {
              l.e(p);
            } finally {
              l.f();
            }
            s.header = r.header;
            i.forEach(function (e) {
              var t = r.data.map(function (t) {
                return t[e];
              });
              c.forEach(function (n) {
                n[e] = t.pop() || "";
              });
            });
            e.next = 17;
            return td.a.put(s);
          case 17:
            e.next = 19;
            return td.a.get(t);
          case 19:
            return e.abrupt("return", e.sent);
          case 20:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function pp(e) {
  return fp.apply(this, arguments);
}
function fp() {
  return (fp = R.a(j.a.mark(function e(t) {
    var n;
    var r;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (!(n = Z.Bb(t))) {
              e.next = 10;
              break;
            }
            r = n.attributes.db;
            e.next = 5;
            return td.a.get(t);
          case 5:
            if (!e.sent) {
              e.next = 9;
              break;
            }
            e.next = 9;
            return td.a.put(ii.a({
              id: n.id,
              name: n.title
            }, r));
          case 9:
            q.a({
              type: X.b.PLAYER_DATA_WATCH,
              data: {
                screenId: Q.a().getState().currentScreenId,
                tab: x.G,
                id: t,
                value: r
              }
            });
          case 10:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
import hp = require("../../48/209");
import mp = require("../../48/119/index");
var gp = "".concat(B.a.serverHost, "/coconut");
function _p(e, t, n) {
  return vp.apply(this, arguments);
}
function vp() {
  return (vp = R.a(j.a.mark(function e(t, n, r) {
    var o;
    var i;
    var a;
    var s;
    var c;
    var l;
    var u;
    var d;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            o = {
              key: n.toString(),
              type: "string",
              value: r
            };
            e.next = 4;
            return mp.a("".concat(JSON.stringify(o)));
          case 4:
            i = e.sent;
            a = i.sign;
            s = i.timestamp;
            e.next = 9;
            return hp.a.post(gp + "/webdb/try/dict/".concat(t, "/set"), {
              key: n,
              type: "string",
              value: r
            }, {
              headers: ii.a({
                env: 1,
                sign: a,
                timestamp: s
              }, Rl.a())
            });
          case 9:
            if (c = e.sent, 200 !== (l = c.data).code) {
              e.next = 15;
              break;
            }
            return e.abrupt("return", l.data);
          case 15:
            if (40400914 === l.code) {
              l.msg = "容量已达上限";
            }
            throw new Error(l.msg);
          case 17:
            e.next = 25;
            break;
          case 19:
            if (e.prev = 19, e.t0 = e.catch(0), !(null === (d = e.t0.response) || undefined === d || null === (u = d.data) || undefined === u ? undefined : u.msg)) {
              e.next = 24;
              break;
            }
            throw new Error(JSON.stringify(null === d || undefined === d ? undefined : d.data));
          case 24:
            throw new Error(JSON.stringify({
              code: null === d || undefined === d ? undefined : d.status,
              msg: e.t0.message
            }));
          case 25:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 19]]);
  }))).apply(this, arguments);
}
function bp(e, t) {
  return yp.apply(this, arguments);
}
function yp() {
  return (yp = R.a(j.a.mark(function e(t, n) {
    var r;
    var o;
    var i;
    var a;
    var s;
    var c;
    var l;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return mp.a("dictId=".concat(t, "&id=&key=").concat(n));
          case 3:
            r = e.sent;
            o = r.sign;
            i = r.timestamp;
            e.next = 8;
            return hp.a.delete(gp + "/webdb/try/dict/".concat(t, "/remove?key=").concat(n, "&id="), {
              headers: ii.a({
                env: 1,
                sign: o,
                timestamp: i
              }, Rl.a())
            });
          case 8:
            if (a = e.sent, 200 !== (s = a.data).code) {
              e.next = 14;
              break;
            }
            return e.abrupt("return", s.data);
          case 14:
            throw new Error(s.msg);
          case 15:
            e.next = 23;
            break;
          case 17:
            if (e.prev = 17, e.t0 = e.catch(0), !(null === (l = e.t0.response) || undefined === l || null === (c = l.data) || undefined === c ? undefined : c.msg)) {
              e.next = 22;
              break;
            }
            throw new Error(JSON.stringify(null === l || undefined === l ? undefined : l.data));
          case 22:
            throw new Error(JSON.stringify({
              code: null === l || undefined === l ? undefined : l.status,
              msg: e.t0.message
            }));
          case 23:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 17]]);
  }))).apply(this, arguments);
}
function Ep(e, t) {
  return Op.apply(this, arguments);
}
function Op() {
  return (Op = R.a(j.a.mark(function e(t, n) {
    var r;
    var o;
    var i;
    var a;
    var s;
    var c;
    var l;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return mp.a("dictId=".concat(t, "&key=").concat(n));
          case 3:
            r = e.sent;
            o = r.sign;
            i = r.timestamp;
            e.next = 8;
            return hp.a.get(gp + "/webdb/try/dict/".concat(t, "/getvalue"), {
              params: {
                key: n
              },
              headers: ii.a({
                env: 1,
                sign: o,
                timestamp: i
              }, Rl.a())
            });
          case 8:
            if (a = e.sent, 200 !== (s = a.data).code) {
              e.next = 14;
              break;
            }
            return e.abrupt("return", s.data);
          case 14:
            throw new Error(s.msg);
          case 15:
            e.next = 23;
            break;
          case 17:
            if (e.prev = 17, e.t0 = e.catch(0), !(null === (l = e.t0.response) || undefined === l || null === (c = l.data) || undefined === c ? undefined : c.msg)) {
              e.next = 22;
              break;
            }
            throw new Error(JSON.stringify(null === l || undefined === l ? undefined : l.data));
          case 22:
            throw new Error(JSON.stringify({
              code: null === l || undefined === l ? undefined : l.status,
              msg: e.t0.message
            }));
          case 23:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 17]]);
  }))).apply(this, arguments);
}
function wp(e) {
  return Cp.apply(this, arguments);
}
function Cp() {
  return (Cp = R.a(j.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var a;
    var s;
    var c;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return mp.a("dictId=".concat(t));
          case 3:
            n = e.sent;
            r = n.sign;
            o = n.timestamp;
            e.next = 8;
            return hp.a.get(gp + "/webdb/try/dict/".concat(t, "/keys"), {
              headers: ii.a({
                env: 1,
                sign: r,
                timestamp: o
              }, Rl.a())
            });
          case 8:
            if (i = e.sent, 200 !== (a = i.data).code) {
              e.next = 14;
              break;
            }
            return e.abrupt("return", a.data);
          case 14:
            throw new Error(a.msg);
          case 15:
            e.next = 23;
            break;
          case 17:
            if (e.prev = 17, e.t0 = e.catch(0), !(null === (c = e.t0.response) || undefined === c || null === (s = c.data) || undefined === s ? undefined : s.msg)) {
              e.next = 22;
              break;
            }
            throw new Error(JSON.stringify(null === c || undefined === c ? undefined : c.data));
          case 22:
            throw new Error(JSON.stringify({
              code: null === c || undefined === c ? undefined : c.status,
              msg: e.t0.message
            }));
          case 23:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 17]]);
  }))).apply(this, arguments);
}
function Tp(e) {
  return Sp.apply(this, arguments);
}
function Sp() {
  return (Sp = R.a(j.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var a;
    var s;
    var c;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            e.prev = 0;
            e.next = 3;
            return mp.a("dictId=".concat(t));
          case 3:
            n = e.sent;
            r = n.sign;
            o = n.timestamp;
            e.next = 8;
            return hp.a.delete(gp + "/webdb/try/dict/clear/".concat(t), {
              headers: ii.a({
                env: 1,
                sign: r,
                timestamp: o
              }, Rl.a())
            });
          case 8:
            if (i = e.sent, 200 !== (a = i.data).code) {
              e.next = 14;
              break;
            }
            return e.abrupt("return", a.data);
          case 14:
            throw new Error(a.msg);
          case 15:
            e.next = 23;
            break;
          case 17:
            if (e.prev = 17, e.t0 = e.catch(0), !(null === (c = e.t0.response) || undefined === c || null === (s = c.data) || undefined === s ? undefined : s.msg)) {
              e.next = 22;
              break;
            }
            throw new Error(JSON.stringify(null === c || undefined === c ? undefined : c.data));
          case 22:
            throw new Error(JSON.stringify({
              code: null === c || undefined === c ? undefined : c.status,
              msg: e.t0.message
            }));
          case 23:
          case "end":
            return e.stop();
        }
      }
    }, e, null, [[0, 17]]);
  }))).apply(this, arguments);
}
import Ip = require("../../268");
function Ap(e, t, n, r, o) {
  return n.then(function (e) {
    if (r) {
      return e ? Promise.resolve(r.apply(undefined, gn.a(e))) : Promise.resolve(r());
    }
  }).catch(function (n) {
    var r = n.errorInfo || n.message;
    if (r.toLocaleLowerCase().includes("network error")) {
      r = "网络异常";
    }
    Ll.emitCloudDictError("".concat(e, "_").concat(t), r);
    K.a.log({
      type: "error",
      message: r,
      widgetId: e
    });
    if (o) {
      return Promise.resolve(o(r));
    }
  });
}
function jp(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.cloudDictId;
}
function Np(e, t, n, r, o) {
  return Rp.apply(this, arguments);
}
function Rp() {
  return (Rp = R.a(j.a.mark(function e(t, n, r, o, i) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (t !== Z.h) {
              e.next = 2;
              break;
            }
            return e.abrupt("return");
          case 2:
            return e.abrupt("return", Ap(t, Ip.a.SETTER, R.a(j.a.mark(function e() {
              var o;
              var i;
              var a;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (e.prev = 0, o = jp(t)) {
                        e.next = 4;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未绑定数据源"
                      }));
                    case 4:
                      if (n !== Z.h) {
                        e.next = 6;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未选择key"
                      }));
                    case 6:
                      if ("string" === typeof n || "number" === typeof n) {
                        e.next = 8;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "嵌入积木的返回值不是字符串类型"
                      }));
                    case 8:
                      if (!(n.toString().length > 150)) {
                        e.next = 10;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "超出key长度限制（150个字符）"
                      }));
                    case 10:
                      if (!((i = "object" === typeof r ? JSON.stringify(r) : r.toString()).length > 2e3)) {
                        e.next = 13;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "超出value长度限制（2k个字符）"
                      }));
                    case 13:
                      e.next = 15;
                      return _p(o, n.toString(), i);
                    case 15:
                      return e.abrupt("return", undefined);
                    case 18:
                      e.prev = 18;
                      e.t0 = e.catch(0);
                      a = JSON.parse(e.t0.message);
                      e.t0.errorInfo = a.msg;
                      throw e.t0;
                    case 23:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[0, 18]]);
            }))(), o, i));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function kp(e, t, n, r) {
  return xp.apply(this, arguments);
}
function xp() {
  return (xp = R.a(j.a.mark(function e(t, n, r, o) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (t !== Z.h) {
              e.next = 2;
              break;
            }
            return e.abrupt("return");
          case 2:
            return e.abrupt("return", Ap(t, Ip.a.DELETE, R.a(j.a.mark(function e() {
              var r;
              var o;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (e.prev = 0, r = jp(t)) {
                        e.next = 4;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未绑定数据源"
                      }));
                    case 4:
                      if (n !== Z.h) {
                        e.next = 6;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未选择key"
                      }));
                    case 6:
                      if ("string" === typeof n || "number" === typeof n) {
                        e.next = 8;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "嵌入积木的返回值不是字符串类型"
                      }));
                    case 8:
                      e.next = 10;
                      return bp(r, n.toString());
                    case 10:
                      return e.abrupt("return", undefined);
                    case 13:
                      e.prev = 13;
                      e.t0 = e.catch(0);
                      o = JSON.parse(e.t0.message);
                      e.t0.errorInfo = o.msg;
                      throw e.t0;
                    case 18:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[0, 13]]);
            }))(), r, o));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Dp(e, t, n, r) {
  return Mp.apply(this, arguments);
}
function Mp() {
  return (Mp = R.a(j.a.mark(function e(t, n, r, o) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (t !== Z.h) {
              e.next = 2;
              break;
            }
            return e.abrupt("return");
          case 2:
            return e.abrupt("return", Ap(t, Ip.a.QUERY, R.a(j.a.mark(function e() {
              var r;
              var o;
              var i;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (e.prev = 0, r = jp(t)) {
                        e.next = 4;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未绑定数据源"
                      }));
                    case 4:
                      if (n !== Z.h) {
                        e.next = 6;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未选择key"
                      }));
                    case 6:
                      if ("string" === typeof n || "number" === typeof n) {
                        e.next = 8;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "嵌入积木的返回值不是字符串类型"
                      }));
                    case 8:
                      e.next = 10;
                      return Ep(r, n.toString());
                    case 10:
                      if (o = e.sent) {
                        e.next = 13;
                        break;
                      }
                      return e.abrupt("return", []);
                    case 13:
                      return e.abrupt("return", [o[2]]);
                    case 16:
                      e.prev = 16;
                      e.t0 = e.catch(0);
                      i = JSON.parse(e.t0.message);
                      e.t0.errorInfo = i.msg;
                      throw e.t0;
                    case 21:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[0, 16]]);
            }))(), r, o));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Lp(e, t, n) {
  return Pp.apply(this, arguments);
}
function Pp() {
  return (Pp = R.a(j.a.mark(function e(t, n, r) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (t !== Z.h) {
              e.next = 2;
              break;
            }
            return e.abrupt("return");
          case 2:
            return e.abrupt("return", Ap(t, Ip.a.QUERY, R.a(j.a.mark(function e() {
              var n;
              var r;
              var o;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (e.prev = 0, n = jp(t)) {
                        e.next = 4;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未绑定数据源"
                      }));
                    case 4:
                      e.next = 6;
                      return wp(n);
                    case 6:
                      r = e.sent;
                      return e.abrupt("return", [r.length]);
                    case 10:
                      e.prev = 10;
                      e.t0 = e.catch(0);
                      o = JSON.parse(e.t0.message);
                      e.t0.errorInfo = o.msg;
                      throw e.t0;
                    case 15:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[0, 10]]);
            }))(), n, r));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Bp(e, t, n) {
  return Fp.apply(this, arguments);
}
function Fp() {
  return (Fp = R.a(j.a.mark(function e(t, n, r) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (t !== Z.h) {
              e.next = 2;
              break;
            }
            return e.abrupt("return");
          case 2:
            return e.abrupt("return", Ap(t, Ip.a.QUERY, R.a(j.a.mark(function e() {
              var n;
              var r;
              var o;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (e.prev = 0, n = jp(t)) {
                        e.next = 4;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未绑定数据源"
                      }));
                    case 4:
                      e.next = 6;
                      return wp(n);
                    case 6:
                      r = e.sent;
                      return e.abrupt("return", [r]);
                    case 10:
                      e.prev = 10;
                      e.t0 = e.catch(0);
                      o = JSON.parse(e.t0.message);
                      e.t0.errorInfo = o.msg;
                      throw e.t0;
                    case 15:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[0, 10]]);
            }))(), n, r));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Gp(e, t, n) {
  return Up.apply(this, arguments);
}
function Up() {
  return (Up = R.a(j.a.mark(function e(t, n, r) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (t !== Z.h) {
              e.next = 2;
              break;
            }
            return e.abrupt("return");
          case 2:
            return e.abrupt("return", Ap(t, Ip.a.CLEAR, R.a(j.a.mark(function e() {
              var n;
              var r;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (e.prev = 0, n = jp(t)) {
                        e.next = 4;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未绑定数据源"
                      }));
                    case 4:
                      e.next = 6;
                      return Tp(n);
                    case 6:
                      return e.abrupt("return", undefined);
                    case 9:
                      e.prev = 9;
                      e.t0 = e.catch(0);
                      r = JSON.parse(e.t0.message);
                      e.t0.errorInfo = r.msg;
                      throw e.t0;
                    case 14:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[0, 9]]);
            }))(), n, r));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
var Wp;
import Hp = require("../../264");
var Vp = new Map();
function zp(e) {
  var t;
  return null === (t = a.d(e)) || undefined === t ? undefined : t.cloudTableId;
}
function Yp(e, t) {
  var n;
  var r = new Error();
  r.cloudTableId = e;
  if (undefined === t || null === t) {
    r.message = JSON.stringify({
      msg: "嵌入积木的返回值不是字符串类型"
    });
    throw r;
  }
  if ("object" === typeof t) {
    r.message = JSON.stringify({
      msg: "嵌入积木的返回值不是字符串类型"
    });
    throw r;
  }
  if ((n = t.toString()).length > 1e3) {
    r.message = JSON.stringify({
      msg: "存储的数据超出单元格限制（1k个字符）"
    });
    throw r;
  }
  return n;
}
function Kp(e) {
  return qp.apply(this, arguments);
}
function qp() {
  return (qp = R.a(j.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var a;
    var s;
    var c;
    var l;
    var u;
    var d;
    var p = arguments;
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if ((n = new Error()).cloudTableId = t, r = {
              id: t,
              columns: []
            }, !Vp.get(t)) {
              e.next = 7;
              break;
            }
            r.columns = Vp.get(t) || [];
            e.next = 11;
            break;
          case 7:
            e.next = 9;
            return $u.q([t]);
          case 9:
            if ((o = e.sent)[0]) {
              r.columns = o[0].columns;
              Vp.set(t, o[0].columns);
            }
          case 11:
            for (i = [], a = p.length, s = new Array(a > 1 ? a - 1 : 0), c = 1; c < a; c++) {
              s[c - 1] = p[c];
            }
            for (l = function () {
              var e = d[u];
              if (e === Z.h) {
                n.message = JSON.stringify({
                  msg: "未选择列"
                });
                throw n;
              }
              if ("string" !== typeof e && "number" !== typeof e) {
                n.message = JSON.stringify({
                  msg: "嵌入积木的返回值不是字符串类型"
                });
                throw n;
              }
              if ("number" === typeof e) {
                e = e.toString();
              }
              var t = r.columns.find(function (t) {
                return t.id === e;
              });
              if (t) {
                e = t.id;
              } else {
                var o = r.columns.find(function (t) {
                  return t.name === e;
                });
                if (o) {
                  e = o.id;
                }
              }
              i.push(e.toString());
            }, u = 0, d = s; u < d.length; u++) {
              l();
            }
            return e.abrupt("return", i);
          case 16:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Xp(e, t, n, r, o) {
  return n.then(function (e) {
    if (r) {
      return e ? Promise.resolve(r.apply(undefined, gn.a(e))) : Promise.resolve(r());
    }
  }).catch(function (n) {
    var r = n.errorInfo || n.message;
    if (r.toLocaleLowerCase().includes("network error") || r.toLocaleLowerCase().includes("timeout")) {
      r = "网络异常";
    }
    var i = {
      errorInfo: r,
      code: n.code
    };
    K.a.log({
      type: "error",
      message: r,
      widgetId: e
    });
    Ll.emitCloudTableError(t, JSON.stringify(i));
    if (o) {
      return Promise.resolve(o(r));
    }
  });
}
function Qp(e, t, n, r) {
  return Zp.apply(this, arguments);
}
function Zp() {
  return (Zp = R.a(j.a.mark(function e(t, n, r, o) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", Xp(t, Hp.a.ADD, R.a(j.a.mark(function e() {
              var r;
              var o;
              var i;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (o = zp(t), e.prev = 1, o) {
                        e.next = 4;
                        break;
                      }
                      throw new Error("未绑定数据源");
                    case 4:
                      if (undefined !== n && null !== n) {
                        e.next = 6;
                        break;
                      }
                      throw new Error("嵌入积木的返回值不是字符串类型");
                    case 6:
                      if ("object" !== typeof n) {
                        e.next = 14;
                        break;
                      }
                      if (Array.isArray(n)) {
                        e.next = 11;
                        break;
                      }
                      throw new Error("嵌入积木的返回值不是字符串类型");
                    case 11:
                      r = n.map(function (e) {
                        return e.toString();
                      });
                    case 12:
                      e.next = 23;
                      break;
                    case 14:
                      if ("number" !== typeof n) {
                        e.next = 18;
                        break;
                      }
                      r = [n.toString()];
                      e.next = 23;
                      break;
                    case 18:
                      if ("string" !== typeof n) {
                        e.next = 22;
                        break;
                      }
                      r = n.split(",");
                      e.next = 23;
                      break;
                    case 22:
                      throw new Error("嵌入积木的返回值不是字符串类型");
                    case 23:
                      e.next = 29;
                      break;
                    case 25:
                      e.prev = 25;
                      e.t0 = e.catch(1);
                      throw Object.assign({
                        cloudTableId: o,
                        errorInfo: e.t0.message,
                        code: Wp.INSERT_ERROR
                      }, e.t0);
                    case 29:
                      e.prev = 29;
                      e.next = 32;
                      return $u.r(o, r);
                    case 32:
                      sd(o);
                      return e.abrupt("return", undefined);
                    case 36:
                      if (e.prev = 36, e.t1 = e.catch(29), (i = JSON.parse(e.t1.message)).code !== $u.a) {
                        e.next = 45;
                        break;
                      }
                      K.a.log({
                        type: "warning",
                        message: i.msg,
                        widgetId: t
                      });
                      sd(o);
                      return e.abrupt("return", undefined);
                    case 45:
                      e.t1.cloudTableId = o;
                      e.t1.errorInfo = i.msg;
                      e.t1.code = i.code;
                      throw e.t1;
                    case 49:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[1, 25], [29, 36]]);
            }))(), r, o));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Jp(e, t, n, r, o, i) {
  return $p.apply(this, arguments);
}
function $p() {
  return ($p = R.a(j.a.mark(function e(t, n, r, o, i, a) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", Xp(t, Hp.a.DELETE, R.a(j.a.mark(function e() {
              var i;
              var a;
              var s;
              var c;
              var l;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (i = zp(t), e.prev = 1, i && i !== Z.i) {
                        e.next = 4;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未绑定数据源"
                      }));
                    case 4:
                      e.next = 6;
                      return Kp(i, n);
                    case 6:
                      a = e.sent;
                      s = mn.a(a, 1);
                      c = s[0];
                      o = Yp(i, o);
                      e.next = 12;
                      return $u.o(i, c, r, o);
                    case 12:
                      sd(i);
                      return e.abrupt("return", undefined);
                    case 16:
                      e.prev = 16;
                      e.t0 = e.catch(1);
                      l = JSON.parse(e.t0.message);
                      e.t0.cloudTableId = i;
                      e.t0.errorInfo = l.msg;
                      e.t0.code = l.code;
                      throw e.t0;
                    case 23:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[1, 16]]);
            }))(), i, a));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function ef(e, t, n, r, o, i, a, s) {
  return tf.apply(this, arguments);
}
function tf() {
  return (tf = R.a(j.a.mark(function e(t, n, r, o, i, a, s, c) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", Xp(t, Hp.a.SETTER, R.a(j.a.mark(function e() {
              var s;
              var c;
              var l;
              var u;
              var d;
              var p;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (s = zp(t), e.prev = 1, s) {
                        e.next = 4;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未绑定数据源"
                      }));
                    case 4:
                      e.next = 6;
                      return Kp(s, n, i);
                    case 6:
                      c = e.sent;
                      l = mn.a(c, 2);
                      u = l[0];
                      d = l[1];
                      o = Yp(s, o);
                      a = Yp(s, a);
                      e.next = 14;
                      return $u.u(s, u, r, o, d, a);
                    case 14:
                      sd(s);
                      return e.abrupt("return", undefined);
                    case 18:
                      e.prev = 18;
                      e.t0 = e.catch(1);
                      p = JSON.parse(e.t0.message);
                      e.t0.cloudDBId = s;
                      e.t0.errorInfo = p.msg;
                      e.t0.code = p.code;
                      throw e.t0;
                    case 25:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[1, 18]]);
            }))(), s, c));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function nf(e, t, n, r, o, i) {
  return rf.apply(this, arguments);
}
function rf() {
  return (rf = R.a(j.a.mark(function e(t, n, r, o, i, a) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", Xp(t, Hp.a.QUERY, R.a(j.a.mark(function e() {
              var i;
              var a;
              var s;
              var c;
              var l;
              var u;
              var d;
              var p;
              var f;
              var h;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (i = zp(t), e.prev = 1, i) {
                        e.next = 4;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未绑定数据源"
                      }));
                    case 4:
                      e.next = 6;
                      return Kp(i, n);
                    case 6:
                      a = e.sent;
                      s = mn.a(a, 1);
                      c = s[0];
                      o = Yp(i, o);
                      e.next = 12;
                      return $u.s(i, c, r, o);
                    case 12:
                      if (l = e.sent) {
                        e.next = 15;
                        break;
                      }
                      return e.abrupt("return", []);
                    case 15:
                      u = l.columns || [];
                      d = l.records || [];
                      p = [];
                      f = d.map(function (e) {
                        var t = e.values;
                        var n = [];
                        u.forEach(function (e, r) {
                          n.push(lf(t[e.id], e.type));
                          p.push(r + 1);
                        });
                        return n;
                      });
                      return e.abrupt("return", [f, p]);
                    case 22:
                      e.prev = 22;
                      e.t0 = e.catch(1);
                      h = JSON.parse(e.t0.message);
                      e.t0.cloudDBId = i;
                      e.t0.errorInfo = h.msg;
                      e.t0.code = h.code;
                      throw e.t0;
                    case 29:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[1, 22]]);
            }))(), i, a));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function of(e, t, n, r) {
  return af.apply(this, arguments);
}
function af() {
  return (af = R.a(j.a.mark(function e(t, n, r, o) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", Xp(t, Hp.a.QUERY, R.a(j.a.mark(function e() {
              var r;
              var o;
              var i;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (r = zp(t), e.prev = 1, r) {
                        e.next = 4;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未绑定数据源"
                      }));
                    case 4:
                      e.next = 6;
                      return $u.t(r, n);
                    case 6:
                      o = e.sent;
                      return e.abrupt("return", [o]);
                    case 10:
                      e.prev = 10;
                      e.t0 = e.catch(1);
                      i = JSON.parse(e.t0.message);
                      e.t0.cloudDBId = r;
                      e.t0.errorInfo = i.msg;
                      e.t0.code = i.code;
                      throw e.t0;
                    case 17:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[1, 10]]);
            }))(), r, o));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function sf(e, t, n) {
  return cf.apply(this, arguments);
}
function cf() {
  return (cf = R.a(j.a.mark(function e(t, n, r) {
    return j.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            return e.abrupt("return", Xp(t, Hp.a.CLEAR, R.a(j.a.mark(function e() {
              var n;
              var r;
              var o;
              return j.a.wrap(function (e) {
                for (;;) {
                  switch (e.prev = e.next) {
                    case 0:
                      if (n = zp(t), e.prev = 1, n) {
                        e.next = 4;
                        break;
                      }
                      throw new Error(JSON.stringify({
                        msg: "未绑定数据源"
                      }));
                    case 4:
                      e.next = 6;
                      return $u.n(n);
                    case 6:
                      r = e.sent;
                      sd(n);
                      return e.abrupt("return", [r]);
                    case 11:
                      e.prev = 11;
                      e.t0 = e.catch(1);
                      o = JSON.parse(e.t0.message);
                      e.t0.cloudDBId = n;
                      e.t0.errorInfo = o.msg;
                      e.t0.code = o.code;
                      throw e.t0;
                    case 18:
                    case "end":
                      return e.stop();
                  }
                }
              }, e, null, [[1, 11]]);
            }))(), n, r));
          case 1:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function lf(e, t) {
  return e ? "number" === t ? Number(e) : "boolean" === t ? "true" === e : e : "";
}
!function (e) {
  e.INSERT_ERROR = "INSERT_ERROR";
  e.COLUMN_CANNOT_FOUND = "COLUMN_CANNOT_FOUND";
  e.TYPE_INVALID = "TYPE_INVALID";
}(Wp || (Wp = {}));
export default pu;