"use strict";

export { In as oTHelper };
var r = {};
Object.defineProperty(r, "addWidgetOp", {
  get: function () {
    return le;
  }
});
Object.defineProperty(r, "addInvisibleWidgetOp", {
  get: function () {
    return de;
  }
});
Object.defineProperty(r, "addBrushAndActorWidgetOp", {
  get: function () {
    return fe;
  }
});
Object.defineProperty(r, "deleteWidgetOp", {
  get: function () {
    return me;
  }
});
Object.defineProperty(r, "deleteInvisibleWidgetOp", {
  get: function () {
    return ge;
  }
});
Object.defineProperty(r, "replaceWidgetAttributeOp", {
  get: function () {
    return _e;
  }
});
Object.defineProperty(r, "moveWidget", {
  get: function () {
    return ve;
  }
});
var o = {};
Object.defineProperty(o, "pick", {
  get: function () {
    return Se;
  }
});
Object.defineProperty(o, "drop", {
  get: function () {
    return Ie;
  }
});
var i = {};
Object.defineProperty(i, "clientOp", {
  get: function () {
    return r;
  }
});
Object.defineProperty(i, "serverOp", {
  get: function () {
    return o;
  }
});
var a = {};
Object.defineProperty(a, "changeProjectProperty", {
  get: function () {
    return je;
  }
});
var s = {};
Object.defineProperty(s, "pick", {
  get: function () {
    return Ne;
  }
});
Object.defineProperty(s, "drop", {
  get: function () {
    return Re;
  }
});
var c = {};
Object.defineProperty(c, "clientOp", {
  get: function () {
    return a;
  }
});
Object.defineProperty(c, "serverOp", {
  get: function () {
    return s;
  }
});
var l = {};
Object.defineProperty(l, "addScreen", {
  get: function () {
    return Me;
  }
});
Object.defineProperty(l, "removeScreen", {
  get: function () {
    return Le;
  }
});
Object.defineProperty(l, "moveScreen", {
  get: function () {
    return Pe;
  }
});
Object.defineProperty(l, "updateScreenStyle", {
  get: function () {
    return Be;
  }
});
var u = {};
Object.defineProperty(u, "pick", {
  get: function () {
    return Fe;
  }
});
Object.defineProperty(u, "drop", {
  get: function () {
    return Ge;
  }
});
var d = {};
Object.defineProperty(d, "clientOp", {
  get: function () {
    return l;
  }
});
Object.defineProperty(d, "serverOp", {
  get: function () {
    return u;
  }
});
var p = {};
Object.defineProperty(p, "add", {
  get: function () {
    return We;
  }
});
Object.defineProperty(p, "remove", {
  get: function () {
    return Ve;
  }
});
Object.defineProperty(p, "replaceImageFileId", {
  get: function () {
    return ze;
  }
});
Object.defineProperty(p, "replaceImageFileCdnUrl", {
  get: function () {
    return Ye;
  }
});
var f = {};
Object.defineProperty(f, "pick", {
  get: function () {
    return qe;
  }
});
Object.defineProperty(f, "drop", {
  get: function () {
    return Xe;
  }
});
var h = {};
Object.defineProperty(h, "clientOp", {
  get: function () {
    return p;
  }
});
Object.defineProperty(h, "serverOp", {
  get: function () {
    return f;
  }
});
var m = {};
Object.defineProperty(m, "add", {
  get: function () {
    return Qe;
  }
});
Object.defineProperty(m, "remove", {
  get: function () {
    return Je;
  }
});
Object.defineProperty(m, "replaceSoundName", {
  get: function () {
    return $e;
  }
});
Object.defineProperty(m, "replaceSoundFileCdnUrl", {
  get: function () {
    return et;
  }
});
var g = {};
Object.defineProperty(g, "pick", {
  get: function () {
    return rt;
  }
});
Object.defineProperty(g, "drop", {
  get: function () {
    return ot;
  }
});
var _ = {};
Object.defineProperty(_, "clientOp", {
  get: function () {
    return m;
  }
});
Object.defineProperty(_, "serverOp", {
  get: function () {
    return g;
  }
});
var v = {};
Object.defineProperty(v, "add", {
  get: function () {
    return it;
  }
});
Object.defineProperty(v, "remove", {
  get: function () {
    return st;
  }
});
Object.defineProperty(v, "replaceIconName", {
  get: function () {
    return lt;
  }
});
Object.defineProperty(v, "replaceIconFileCdnUrl", {
  get: function () {
    return ut;
  }
});
var b = {};
Object.defineProperty(b, "pick", {
  get: function () {
    return pt;
  }
});
Object.defineProperty(b, "drop", {
  get: function () {
    return ft;
  }
});
var y = {};
Object.defineProperty(y, "clientOp", {
  get: function () {
    return v;
  }
});
Object.defineProperty(y, "serverOp", {
  get: function () {
    return b;
  }
});
var E = {};
Object.defineProperty(E, "add", {
  get: function () {
    return _t;
  }
});
Object.defineProperty(E, "remove", {
  get: function () {
    return bt;
  }
});
Object.defineProperty(E, "update", {
  get: function () {
    return yt;
  }
});
var O = {};
Object.defineProperty(O, "pick", {
  get: function () {
    return Et;
  }
});
Object.defineProperty(O, "drop", {
  get: function () {
    return Ot;
  }
});
var w = {};
Object.defineProperty(w, "clientOp", {
  get: function () {
    return E;
  }
});
Object.defineProperty(w, "serverOp", {
  get: function () {
    return O;
  }
});
var C = {};
Object.defineProperty(C, "add", {
  get: function () {
    return Tt;
  }
});
Object.defineProperty(C, "remove", {
  get: function () {
    return It;
  }
});
Object.defineProperty(C, "updateProperty", {
  get: function () {
    return At;
  }
});
var T = {};
Object.defineProperty(T, "pick", {
  get: function () {
    return jt;
  }
});
Object.defineProperty(T, "drop", {
  get: function () {
    return Nt;
  }
});
var S = {};
Object.defineProperty(S, "clientOp", {
  get: function () {
    return C;
  }
});
Object.defineProperty(S, "serverOp", {
  get: function () {
    return T;
  }
});
var I = {};
Object.defineProperty(I, "add", {
  get: function () {
    return xt;
  }
});
Object.defineProperty(I, "remove", {
  get: function () {
    return Mt;
  }
});
Object.defineProperty(I, "updateProperty", {
  get: function () {
    return Lt;
  }
});
var A = {};
Object.defineProperty(A, "pick", {
  get: function () {
    return Pt;
  }
});
Object.defineProperty(A, "drop", {
  get: function () {
    return Bt;
  }
});
var j = {};
Object.defineProperty(j, "clientOp", {
  get: function () {
    return I;
  }
});
Object.defineProperty(j, "serverOp", {
  get: function () {
    return A;
  }
});
var N = {};
Object.defineProperty(N, "add", {
  get: function () {
    return Gt;
  }
});
var R = {};
Object.defineProperty(R, "pick", {
  get: function () {
    return Wt;
  }
});
Object.defineProperty(R, "drop", {
  get: function () {
    return Ht;
  }
});
var k = {};
Object.defineProperty(k, "clientOp", {
  get: function () {
    return N;
  }
});
Object.defineProperty(k, "serverOp", {
  get: function () {
    return R;
  }
});
var x = {};
Object.defineProperty(x, "focusItem", {
  get: function () {
    return Kt;
  }
});
Object.defineProperty(x, "userColors", {
  get: function () {
    return Xt;
  }
});
Object.defineProperty(x, "cloudDb", {
  get: function () {
    return Qt;
  }
});
var D = {};
Object.defineProperty(D, "emit", {
  get: function () {
    return x;
  }
});
Object.defineProperty(D, "accept", {
  get: function () {
    return Jt;
  }
});
var M = {};
Object.defineProperty(M, "add", {
  get: function () {
    return rn;
  }
});
Object.defineProperty(M, "del", {
  get: function () {
    return an;
  }
});
Object.defineProperty(M, "replaceWidgetAttributeOp", {
  get: function () {
    return sn;
  }
});
var L = {};
Object.defineProperty(L, "pick", {
  get: function () {
    return un;
  }
});
Object.defineProperty(L, "drop", {
  get: function () {
    return dn;
  }
});
var P = {};
Object.defineProperty(P, "clientOp", {
  get: function () {
    return M;
  }
});
Object.defineProperty(P, "serverOp", {
  get: function () {
    return L;
  }
});
var B = {};
Object.defineProperty(B, "addUnsafeExtensionWidget", {
  get: function () {
    return fn;
  }
});
Object.defineProperty(B, "addMallExtensionWidget", {
  get: function () {
    return mn;
  }
});
var F = {};
Object.defineProperty(F, "drop", {
  get: function () {
    return vn;
  }
});
var G = {};
Object.defineProperty(G, "clientOp", {
  get: function () {
    return B;
  }
});
Object.defineProperty(G, "serverOp", {
  get: function () {
    return F;
  }
});
var U = {};
Object.defineProperty(U, "updateCloudDictKeys", {
  get: function () {
    return yn;
  }
});
Object.defineProperty(U, "updateCloudTableColumns", {
  get: function () {
    return En;
  }
});
Object.defineProperty(U, "updateCloudTableData", {
  get: function () {
    return On;
  }
});
Object.defineProperty(U, "updateCloudDictList", {
  get: function () {
    return wn;
  }
});
Object.defineProperty(U, "updateCloudTableList", {
  get: function () {
    return Cn;
  }
});
var W = {};
Object.defineProperty(W, "pick", {
  get: function () {
    return Tn;
  }
});
Object.defineProperty(W, "drop", {
  get: function () {
    return Sn;
  }
});
var H = {};
Object.defineProperty(H, "clientOp", {
  get: function () {
    return U;
  }
});
Object.defineProperty(H, "serverOp", {
  get: function () {
    return W;
  }
});
var V = {};
Object.defineProperty(V, "oTHelper", {
  get: function () {
    return In;
  }
});
import z = require("../27");
import Y = require("../40");
import K = require("regenerator-runtime");
var q = function __importDefault(module) {
  var defaultExport = module && module.__esModule ? function () {
    return module.default;
  } : function () {
    return module;
  };
  Object.defineProperty(defaultExport, "a", {
    enumerable: true,
    get: defaultExport
  });
  return defaultExport;
}(K);
import X = require("../25/index");
import Q = require("../7");
import Z = require("./304");
import J = require("ot-json1");
import $ = require("../24/index");
import ee = require("./244");
import te = require("../10/index");
function ne(e) {
  var t;
  var n = $.a.getDoc();
  var r = null === n || undefined === n ? undefined : n.screens;
  if (r) {
    var o = Object.entries(r).find(function (t) {
      var n = te.a(t, 2);
      n[0];
      return n[1].widgets[e];
    });
    t = null === o || undefined === o ? undefined : o[1].id;
  }
  if (!t) {
    console.error("can't find screen of including widget");
  }
  return t || "";
}
function re(e, t) {
  var n;
  var r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.screens[e].widgetIds;
  var o = 0;
  if (r && (o = r.findIndex(function (e) {
    return e === t;
  })) < 0) {
    o = r.length;
  }
  for (var i = arguments.length, a = new Array(i > 2 ? i - 2 : 0), s = 2; s < i; s++) {
    a[s - 2] = arguments[s];
  }
  return ["screens", e, "widgetIds", o].concat(a);
}
function oe(e, t) {
  var n;
  var r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.screens[e].invisibleWidgetIds;
  var o = 0;
  if (r && (o = r.findIndex(function (e) {
    return e === t;
  })) < 0) {
    o = r.length;
  }
  for (var i = arguments.length, a = new Array(i > 2 ? i - 2 : 0), s = 2; s < i; s++) {
    a[s - 2] = arguments[s];
  }
  return ["screens", e, "invisibleWidgetIds", o].concat(a);
}
function ie(e, t) {
  return ["screens", e, "widgetIds", t];
}
function ae(e, t) {
  for (var n = arguments.length, r = new Array(n > 2 ? n - 2 : 0), o = 2; o < n; o++) {
    r[o - 2] = arguments[o];
  }
  return ["screens", e, "widgets", t].concat(r);
}
function se(e) {
  return "widgets" === e[2];
}
function ce(e) {
  return 4 === e.length && se(e);
}
function le(e, t) {
  return ue.apply(this, arguments);
}
function ue() {
  return (ue = Q.a(q.a.mark(function e(t, n) {
    var r;
    var o;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            r = J.insertOp(ae(t, n.id), n);
            o = J.insertOp(re(t, n.id), n.id);
            $.a.applyClient(J.type.compose(o, r));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function de(e, t) {
  return pe.apply(this, arguments);
}
function pe() {
  return (pe = Q.a(q.a.mark(function e(t, n) {
    var r;
    var o;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            r = J.insertOp(ae(t, n.id), n);
            o = J.insertOp(oe(t, n.id), n.id);
            $.a.applyClient(J.type.compose(o, r));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function fe(e, t, n, r) {
  return he.apply(this, arguments);
}
function he() {
  return (he = Q.a(q.a.mark(function e(t, n, r, o) {
    var i;
    var a;
    var s;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            i = J.insertOp(ae(t, n.id), n);
            a = J.insertOp(re(t, n.id), n.id);
            s = J.replaceOp(ae(t, r, "widgetIds"), true, o);
            $.a.applyClient(ee.a(a, i, s));
          case 4:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function me(e, t) {
  var n = J.removeOp(re(e, t));
  var r = J.removeOp(ae(e, t));
  $.a.applyClient(J.type.compose(n, r));
}
function ge(e, t) {
  var n = J.removeOp(oe(e, t));
  var r = J.removeOp(ae(e, t));
  $.a.applyClient(J.type.compose(n, r));
}
function _e(e, t, n, r) {
  var o;
  var i = !(arguments.length > 4 && undefined !== arguments[4]) || arguments[4];
  var a = ["size", "position", "visible", "title", "widgetIds"];
  var s = $.a.getDoc();
  if (a.includes(n) && i) {
    var c = ae(e, t, n);
    var l = s ? Z.a({
      path: ["$"].concat(X.a(c)),
      json: s
    }) : [];
    o = 0 === l.length ? J.insertOp(c, r) : J.replaceOp(c, true, r);
  } else {
    var u = ae(e, t, "attributes", n);
    var d = s ? Z.a({
      path: ["$"].concat(X.a(u)),
      json: s
    }) : [];
    o = 0 === d.length ? J.insertOp(u, r) : J.replaceOp(u, true, r);
  }
  $.a.applyClient(o);
}
function ve(e, t, n) {
  var r = J.moveOp(X.a(ie(e, t)), X.a(ie(e, n)));
  $.a.applyClient(r);
}
import be = require("../2");
import ye = require("../9");
import Ee = require("../38/index");
import Oe = require("../43");
import we = require("../../../../../src/shared/widget/custom/type");
import Ce = require("../../../../../src/shared/language");
import Te = require("../../../../../src/shared/widget/custom/load");
function Se(e) {
  if (ce(e.path)) {
    (function (e) {
      var t = e.path;
      var n = t[3];
      var r = t[1];
      if (n && r) {
        Oe.h(be.Mf(n, r, false));
      }
    })(e);
  }
}
function Ie(e) {
  var t;
  if (ce(e.path)) {
    (function (e) {
      Ae.apply(this, arguments);
    })(e);
  }
  if ("screens" === (t = e.path)[0] && "widgetIds" === t[2]) {
    (function (e) {
      var t;
      var n = e.path[1];
      var r = null === (t = $.a.getDoc()) || undefined === t ? undefined : t.screens[n].widgetIds;
      if (r) {
        Oe.h(be.Bj(n, r));
      }
    })(e);
  }
  if (function (e) {
    return "screens" === e[0] && "invisibleWidgetIds" === e[2];
  }(e.path)) {
    (function (e) {
      var t = e.path;
      var n = e.op;
      var r = t[1];
      var o = n.i;
      Oe.h(be.jf(r, o, true));
    })(e);
  }
  if (function (e) {
    return 6 === e.length && se(e) && "attributes" === e[4];
  }(e.path)) {
    (function (e) {
      var t = e.op;
      var n = e.path;
      var r = t.i;
      var o = n[3];
      var i = n[5];
      var a = ne(o);
      Oe.h(be.Lg(o, i, r, Oe.g(a), Oe.g(a), false));
    })(e);
  }
  if (function (e) {
    return 5 === e.length && se(e);
  }(e.path)) {
    (function (e) {
      var t = e.op;
      var n = e.path;
      var r = t.i;
      var o = n[3];
      var i = n[4];
      var a = ne(o);
      if ("title" === i) {
        Oe.h(be.Ng(o, r, false, true, false));
      } else {
        if ("widgetIds" === i) {
          Oe.h(be.Mg(a, o, r, true, true, false));
        } else {
          Oe.h(be.Lg(o, i, r, Oe.g(a), Oe.g(a), false));
        }
      }
    })(e);
  }
}
function Ae() {
  return (Ae = Q.a(q.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var a;
    var s;
    var c;
    var l;
    var u;
    var d;
    var p;
    var f;
    var h;
    var m;
    var g;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (r = t.path, o = t.op, i = o.i, !we.e(i.type) || ye.Db(i.type)) {
              e.next = 11;
              break;
            }
            if (!(c = null === (a = $.a.getDoc()) || undefined === a || null === (s = a.extensionWidgetList) || undefined === s ? undefined : s.find(function (e) {
              return e.type === i.type;
            }))) {
              e.next = 11;
              break;
            }
            l = c.cdnUrl;
            u = c.id;
            Ee.a(be.zh({
              title: Ce.c(Ce.b, "ExtensionWidget.loading").toString(),
              cancelBtnVisible: false,
              confirmBtnVisible: false
            }));
            e.next = 9;
            return Te.u(l, u);
          case 9:
            if (d = e.sent) {
              p = d.title;
              f = d.type;
              h = we.f(f, true);
              Ee.a(be.Vg());
              Ee.a(be.zh({
                title: Ce.c(Ce.b, "ExtensionWidget.finishRegistration", {
                  title: p,
                  type: h
                }).toString(),
                cancelBtnVisible: false
              }));
            }
          case 11:
            m = r[1];
            ye.Ub(i.id, i);
            if (g = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.screens[m].widgetIds) {
              Oe.h(be.Bj(m, g));
            }
          case 15:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function je(e, t) {
  var n = J.replaceOp([e], true, t);
  $.a.applyClient(n);
}
function Ne(e) {}
function Re(e, t) {
  var n;
  if (1 === (n = e.path).length && "title" === n[0]) {
    (function (e) {
      var t = e.op.i;
      Oe.h(be.Bf(t, false));
    })(e);
  }
}
import ke = require("./377/index");
import xe = require("../99");
function De(e) {
  return 2 === e.length && "screens" === e[0];
}
function Me(e, t) {
  e = xe.g(e);
  var n = J.insertOp(["screens", e.id], e);
  var r = J.insertOp(["screenIds", t], e.id);
  var o = J.type.compose(n, r);
  $.a.applyClient(o);
}
function Le(e, t) {
  var n = J.removeOp(["screens", t]);
  var r = J.removeOp(["screenIds", e]);
  var o = J.type.compose(n, r);
  if (function (e) {
    var t = $.a.getDoc();
    return null === t || undefined === t ? undefined : t.blockly[e];
  }(t)) {
    o = J.type.compose(o, J.removeOp(["blockly", t]));
  }
  $.a.applyClient(o);
}
function Pe(e, t) {
  var n = J.moveOp(["screenIds", e], ["screenIds", t]);
  $.a.applyClient(n);
}
function Be(e, t, n) {
  var r = J.replaceOp(["screens", e, t], true, n);
  $.a.applyClient(r);
}
function Fe(e) {
  if (De(e.path)) {
    (function (e) {
      var t = e.path[1];
      Oe.h(be.ng(t, false));
    })(e);
  }
}
function Ge(e, t) {
  var n;
  if (De(e.path)) {
    (function (e) {
      var t;
      var n = e.op.i;
      Object.entries(n.widgets).forEach(function (e) {
        var t = te.a(e, 2);
        t[0];
        var n = t[1];
        ye.Ub(n.id, n);
      });
      var r = xe.d(n);
      Oe.h(be.if(r));
      var o = null === (t = $.a.getDoc()) || undefined === t ? undefined : t.screenIds;
      if (o) {
        Oe.h(be.xg(X.a(o)));
      }
    })(e);
  }
  if (2 === (n = e.path).length && "screenIds" === n[0]) {
    (function () {
      var e;
      var t = null === (e = $.a.getDoc()) || undefined === e ? undefined : e.screenIds;
      if (t) {
        Oe.h(be.xg(X.a(t)));
      }
    })();
  }
  if (function (e) {
    return 3 === e.length && "screens" === e[0];
  }(e.path)) {
    (function (e) {
      var t = e.path;
      var n = e.op;
      var r = t[1];
      var o = t[2];
      var i = n.i;
      Oe.h(be.Jg(r, o, i, false));
    })(e);
  }
}
import Ue = require("lodash");
function We(e) {
  return He.apply(this, arguments);
}
function He() {
  return (He = Q.a(q.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            (r = Ue.cloneDeep(t)).source = "";
            o = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.imageFileList;
            i = J.insertOp(["imageFileList", (null === o || undefined === o ? undefined : o.length) || 0], r);
            $.a.applyClient(i);
          case 5:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Ve(e) {
  var t;
  var n = null === (t = $.a.getDoc()) || undefined === t ? undefined : t.imageFileList;
  var r = null === n || undefined === n ? undefined : n.findIndex(function (t) {
    return t.id === e;
  });
  if (undefined !== r && r > -1) {
    var o = J.removeOp(["imageFileList", r]);
    $.a.applyClient(o);
  }
}
function ze(e, t) {
  var n;
  var r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.imageFileList;
  if (r) {
    var o = r.findIndex(function (t) {
      return t.id === e;
    });
    if (o > -1) {
      var i = J.replaceOp(["imageFileList", o, "id"], true, t);
      $.a.applyClient(i);
    }
  }
}
function Ye(e, t) {
  var n;
  var r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.imageFileList;
  if (r) {
    var o = r.findIndex(function (t) {
      return t.id === e;
    });
    var i = J.replaceOp(["imageFileList", o, "cdnUrl"], true, t);
    $.a.applyClient(i);
  }
}
function Ke(e) {
  return 2 === e.length && "imageFileList" === e[0];
}
function qe(e) {
  if (Ke(e.path)) {
    (function (e) {
      var t;
      var n = e.path;
      var r = null === (t = $.a.getPreviousDoc()) || undefined === t ? undefined : t.imageFileList[n[1]];
      if (r) {
        Oe.h(be.Jf(r.id, false));
      }
    })(e);
  }
}
function Xe(e) {
  var t;
  if (Ke(e.path)) {
    (function (e) {
      var t = e.op;
      var n = e.path;
      var r = t.i;
      var o = n[1];
      ye.Tb(r, o);
      Oe.h(be.Zj());
      Oe.h(be.Uj());
      Oe.h(be.Qj());
    })(e);
  }
  if (3 === (t = e.path).length && "imageFileList" === t[0]) {
    (function (e) {
      var t;
      var n = e.path;
      var r = e.op;
      var o = n[1];
      var i = n[2];
      var a = r.i;
      var s = null === (t = $.a.getPreviousDoc()) || undefined === t ? undefined : t.imageFileList[o];
      if (s) {
        if ("id" === i) {
          Oe.h(be.zf(a, s.id, false));
        }
        if ("cdnUrl" === i) {
          ye.bc(s.id, a);
        }
        Oe.h(be.Zj());
        Oe.h(be.Uj());
        Oe.h(be.Qj());
      }
    })(e);
  }
}
function Qe(e) {
  return Ze.apply(this, arguments);
}
function Ze() {
  return (Ze = Q.a(q.a.mark(function e(t) {
    var n;
    var r;
    var o;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.soundFileList;
            o = (null === r || undefined === r ? undefined : r.length) || 0;
            t.forEach(function (e, t) {
              var n = Ue.cloneDeep(e);
              n.source = "";
              var r = J.insertOp(["soundFileList", o + t], n);
              $.a.applyClient(r);
            });
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Je(e) {
  var t;
  var n = null === (t = $.a.getDoc()) || undefined === t ? undefined : t.soundFileList;
  var r = null === n || undefined === n ? undefined : n.findIndex(function (t) {
    return t.id === e;
  });
  if (undefined !== r && r > -1) {
    var o = J.removeOp(["soundFileList", r]);
    $.a.applyClient(o);
  }
}
function $e(e, t) {
  var n;
  var r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.soundFileList;
  if (r) {
    var o = r.findIndex(function (t) {
      return t.id === e;
    });
    if (o > -1) {
      var i = J.replaceOp(["soundFileList", o, "name"], true, t);
      $.a.applyClient(i);
    }
  }
}
function et(e, t) {
  var n;
  var r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.soundFileList;
  if (r) {
    var o = r.findIndex(function (t) {
      return t.id === e;
    });
    var i = J.replaceOp(["soundFileList", o, "cdnUrl"], true, t);
    $.a.applyClient(i);
  }
}
import tt = require("../26/index");
function nt(e) {
  return 2 === e.length && "soundFileList" === e[0];
}
function rt(e) {
  if (nt(e.path)) {
    (function (e) {
      var t;
      var n;
      var r = e.path;
      var o = null === (t = $.a.getPreviousDoc()) || undefined === t || null === (n = t.soundFileList) || undefined === n ? undefined : n[r[1]];
      if (o) {
        Oe.h(be.og(o.id, false));
      }
    })(e);
  }
}
function ot(e) {
  var t;
  if (nt(e.path)) {
    (function (e) {
      var t = e.op;
      var n = e.path;
      var r = t.i;
      var o = n[1];
      Oe.h(be.kf([r], o));
      Oe.h(be.Zj());
      Oe.h(be.Uj());
      Oe.h(be.Qj());
    })(e);
  }
  if (3 === (t = e.path).length && "soundFileList" === t[0]) {
    (function (e) {
      var t;
      var n;
      var r = e.path;
      var o = e.op;
      var i = r[1];
      var a = r[2];
      var s = o.i;
      var c = null === (t = $.a.getPreviousDoc()) || undefined === t || null === (n = t.soundFileList) || undefined === n ? undefined : n[i];
      if (c) {
        if ("cdnUrl" === a) {
          Oe.h(be.Rg(c.id, s));
        }
        if ("name" === a) {
          var l = c.name;
          Oe.h(be.Ph(c.id, s));
          tt.z.replaceTextValue("audio_sound_file_list_dropdown", "SOUND_FILE_ID", l, s);
        }
        Oe.h(be.Uj());
        Oe.h(be.Qj());
      }
    })(e);
  }
}
function it(e) {
  return at.apply(this, arguments);
}
function at() {
  return (at = Q.a(q.a.mark(function e(t) {
    var n;
    var r;
    var o;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.iconFileList;
            o = (null === r || undefined === r ? undefined : r.length) || 0;
            t.forEach(function (e, t) {
              var n = Ue.cloneDeep(e);
              n.source = "";
              var r = J.insertOp(["iconFileList", o + t], n);
              $.a.applyClient(r);
            });
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function st(e) {
  return ct.apply(this, arguments);
}
function ct() {
  return (ct = Q.a(q.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.iconFileList;
            if (undefined !== (o = null === r || undefined === r ? undefined : r.findIndex(function (e) {
              return e.id === t;
            })) && o > -1) {
              i = J.removeOp(["iconFileList", o]);
              $.a.applyClient(i);
            }
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function lt(e, t) {
  var n;
  var r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.iconFileList;
  if (r) {
    var o = r.findIndex(function (t) {
      return t.id === e;
    });
    if (o > -1) {
      var i = J.replaceOp(["iconFileList", o, "name"], true, t);
      $.a.applyClient(i);
    }
  }
}
function ut(e, t) {
  var n;
  var r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.iconFileList;
  if (r) {
    var o = r.findIndex(function (t) {
      return t.id === e;
    });
    var i = J.replaceOp(["iconFileList", o, "cdnUrl"], true, t);
    $.a.applyClient(i);
  }
}
function dt(e) {
  return 2 === e.length && "iconFileList" === e[0];
}
function pt(e) {
  if (dt(e.path)) {
    (function (e) {
      var t;
      var n;
      var r = e.path;
      var o = null === (t = $.a.getPreviousDoc()) || undefined === t || null === (n = t.iconFileList) || undefined === n ? undefined : n[r[1]];
      if (o) {
        Oe.h(be.mg(o.id, false));
      }
    })(e);
  }
}
function ft(e) {
  var t;
  if (dt(e.path)) {
    (function (e) {
      var t = e.op;
      var n = e.path;
      var r = t.i;
      var o = n[1];
      Oe.h(be.df([r], o));
      Oe.h(be.Zj());
      Oe.h(be.Uj());
      Oe.h(be.Qj());
    })(e);
  }
  if (3 === (t = e.path).length && "iconFileList" === t[0]) {
    (function (e) {
      var t;
      var n;
      var r = e.path;
      var o = e.op;
      var i = r[1];
      var a = r[2];
      var s = o.i;
      var c = null === (t = $.a.getPreviousDoc()) || undefined === t || null === (n = t.iconFileList) || undefined === n ? undefined : n[i];
      if (c) {
        if ("cdnUrl" === a) {
          Oe.h(be.Pg(c.id, s));
        }
        if ("name" === a) {
          Oe.h(be.Oh(c.id, s));
        }
        Oe.h(be.Uj());
        Oe.h(be.Qj());
      }
    })(e);
  }
}
import ht = require("../18");
function mt(e, t) {
  for (var n = arguments.length, r = new Array(n > 2 ? n - 2 : 0), o = 2; o < n; o++) {
    r[o - 2] = arguments[o];
  }
  return ["screens", e, "primitiveVariables", t].concat(r);
}
function gt(e) {
  return 4 === e.length && "primitiveVariables" === e[2] || 2 === e.length && "globalVariableList" === e[0];
}
function _t(e, t, n, r, o, i) {
  return vt.apply(this, arguments);
}
function vt() {
  return (vt = Q.a(q.a.mark(function e(t, n, r, o, i, a) {
    var s;
    var c;
    var l;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            s = {
              id: r,
              name: o,
              defaultValue: i,
              value: i
            };
            if (t === ht.i.GLOBAL) {
              c = J.insertOp(["globalVariableList", a], s);
              $.a.applyClient(c);
            } else {
              l = J.insertOp(mt(n, a), s);
              $.a.applyClient(l);
            }
          case 2:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function bt(e, t, n) {
  if (e === ht.i.GLOBAL) {
    var r;
    var o = null === (r = $.a.getDoc()) || undefined === r ? undefined : r.globalVariableList.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== o) {
      var i = J.removeOp(["globalVariableList", o]);
      $.a.applyClient(i);
    } else {
      console.error("can't find index of globalVariableList");
    }
  } else {
    var a;
    var s = null === (a = $.a.getDoc()) || undefined === a ? undefined : a.screens[t].primitiveVariables.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== s) {
      var c = J.removeOp(mt(t, s));
      $.a.applyClient(c);
    } else {
      console.error("can't find index of primitiveVariable");
    }
  }
}
function yt(e, t, n, r, o) {
  if (e === ht.i.GLOBAL) {
    var i;
    var a = null === (i = $.a.getDoc()) || undefined === i ? undefined : i.globalVariableList.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== a) {
      var s = J.replaceOp(["globalVariableList", a, r], true, o);
      $.a.applyClient(s);
    }
  } else {
    var c;
    var l = null === (c = $.a.getDoc()) || undefined === c ? undefined : c.screens[t].primitiveVariables.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== l) {
      var u = J.replaceOp(mt(t, l, r), true, o);
      $.a.applyClient(u);
    }
  }
}
function Et(e) {
  if (gt(e.path)) {
    (function (e) {
      var t;
      var n = e.path;
      if ("globalVariableList" === n[0]) {
        var r;
        var o = n[1];
        var i = null === (r = $.a.getPreviousDoc()) || undefined === r ? undefined : r.globalVariableList[o];
        var a = null === i || undefined === i ? undefined : i.id;
        return void (a && Oe.h(be.Lf(ht.i.GLOBAL, a, "", false)));
      }
      var s = n[1];
      var c = n[3];
      var l = null === (t = $.a.getPreviousDoc()) || undefined === t ? undefined : t.screens[s].primitiveVariables[c];
      var u = null === l || undefined === l ? undefined : l.id;
      if (u) {
        Oe.h(be.Lf(ht.i.SCREEN, u, s, false));
      }
    })(e);
  }
}
function Ot(e) {
  var t;
  if (gt(e.path)) {
    (function (e) {
      var t = e.path;
      var n = e.op.i;
      var r = n.id;
      var o = n.name;
      var i = n.defaultValue;
      if ("globalVariableList" === t[0]) {
        var a = t[1];
        return void Oe.h(be.uf(ht.i.GLOBAL, r, o, i, "", a, undefined, false));
      }
      var s = t[3];
      var c = t[1];
      Oe.h(be.uf(ht.i.SCREEN, r, o, i, c, s, undefined, false));
    })(e);
  }
  if (5 === (t = e.path).length && "primitiveVariables" === t[2] || 3 === t.length && "globalVariableList" === t[0]) {
    (function (e) {
      var t;
      var n = e.path;
      var r = e.op;
      if ("globalVariableList" === n[0]) {
        var o;
        var i = n[1];
        var a = r.i;
        var s = n[2];
        var c = null === (o = $.a.getPreviousDoc()) || undefined === o ? undefined : o.globalVariableList[i];
        var l = null === c || undefined === c ? undefined : c.id;
        return void (l && Oe.h(be.Hg(ht.i.GLOBAL, l, s, a, "", false)));
      }
      var u = n[1];
      var d = n[3];
      var p = r.i;
      var f = n[4];
      var h = null === (t = $.a.getPreviousDoc()) || undefined === t ? undefined : t.screens[u].primitiveVariables[d];
      var m = null === h || undefined === h ? undefined : h.id;
      if (m) {
        Oe.h(be.Hg(ht.i.SCREEN, m, f, p, u, false));
      }
    })(e);
  }
}
function wt(e, t) {
  for (var n = arguments.length, r = new Array(n > 2 ? n - 2 : 0), o = 2; o < n; o++) {
    r[o - 2] = arguments[o];
  }
  return ["screens", e, "arrayVariables", t].concat(r);
}
function Ct(e) {
  return 4 === e.length && "arrayVariables" === e[2] || 2 === e.length && "globalArrayList" === e[0];
}
function Tt(e, t, n, r, o, i) {
  return St.apply(this, arguments);
}
function St() {
  return (St = Q.a(q.a.mark(function e(t, n, r, o, i, a) {
    var s;
    var c;
    var l;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            s = {
              id: r,
              name: o,
              defaultValue: i,
              value: i
            };
            if (t === ht.i.GLOBAL) {
              c = J.insertOp(["globalArrayList", a], s);
              $.a.applyClient(c);
            } else {
              l = J.insertOp(wt(n, a), s);
              $.a.applyClient(l);
            }
          case 2:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function It(e, t, n) {
  if (e === ht.i.GLOBAL) {
    var r;
    var o = null === (r = $.a.getDoc()) || undefined === r ? undefined : r.globalArrayList.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== o) {
      var i = J.removeOp(["globalArrayList", o]);
      $.a.applyClient(i);
    } else {
      console.error("can't find index of arrayVariable");
    }
  } else {
    var a;
    var s = null === (a = $.a.getDoc()) || undefined === a ? undefined : a.screens[t].arrayVariables.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== s) {
      var c = J.removeOp(wt(t, s));
      $.a.applyClient(c);
    } else {
      console.error("can't find index of arrayVariable");
    }
  }
}
function At(e, t, n, r, o) {
  if (e === ht.i.GLOBAL) {
    var i;
    var a = null === (i = $.a.getDoc()) || undefined === i ? undefined : i.globalArrayList.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== a) {
      var s = J.replaceOp(["globalArrayList", a, r], true, o);
      $.a.applyClient(s);
    }
  } else {
    var c;
    var l = null === (c = $.a.getDoc()) || undefined === c ? undefined : c.screens[t].arrayVariables.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== l) {
      var u = J.replaceOp(wt(t, l, r), true, o);
      $.a.applyClient(u);
    }
  }
}
function jt(e) {
  if (Ct(e.path)) {
    (function (e) {
      var t;
      var n = e.path;
      if ("globalArrayList" === n[0]) {
        var r;
        var o = n[1];
        var i = null === (r = $.a.getPreviousDoc()) || undefined === r ? undefined : r.globalArrayList[o];
        var a = null === i || undefined === i ? undefined : i.id;
        return void (a && Oe.h(be.If(ht.i.GLOBAL, a, "", false)));
      }
      var s = n[1];
      var c = n[3];
      var l = null === (t = $.a.getPreviousDoc()) || undefined === t ? undefined : t.screens[s].arrayVariables[c];
      var u = null === l || undefined === l ? undefined : l.id;
      if (u) {
        Oe.h(be.If(ht.i.SCREEN, u, s, false));
      }
    })(e);
  }
}
function Nt(e) {
  var t;
  if (Ct(e.path)) {
    (function (e) {
      var t = e.path;
      var n = e.op.i;
      var r = n.id;
      var o = n.name;
      var i = n.defaultValue;
      if ("globalArrayList" === t[0]) {
        var a = t[1];
        return void Oe.h(be.of(ht.i.GLOBAL, r, o, i, "", a, undefined, false));
      }
      var s = t[3];
      var c = t[1];
      Oe.h(be.of(ht.i.SCREEN, r, o, i, c, s, undefined, false));
    })(e);
  }
  if (5 === (t = e.path).length && "arrayVariables" === t[2] || 3 === t.length && "globalArrayList" === t[0]) {
    (function (e) {
      var t;
      var n = e.path;
      var r = e.op;
      if ("globalArrayList" === n[0]) {
        var o;
        var i = n[1];
        var a = r.i;
        var s = n[2];
        var c = null === (o = $.a.getPreviousDoc()) || undefined === o ? undefined : o.globalArrayList[i];
        var l = null === c || undefined === c ? undefined : c.id;
        return void (l && Oe.h(be.yg(ht.i.GLOBAL, l, s, a, "", false)));
      }
      var u = n[1];
      var d = n[3];
      var p = r.i;
      var f = n[4];
      var h = null === (t = $.a.getPreviousDoc()) || undefined === t ? undefined : t.screens[u].arrayVariables[d];
      var m = null === h || undefined === h ? undefined : h.id;
      if (m) {
        Oe.h(be.yg(ht.i.SCREEN, m, f, p, u, false));
      }
    })(e);
  }
}
function Rt(e, t) {
  for (var n = arguments.length, r = new Array(n > 2 ? n - 2 : 0), o = 2; o < n; o++) {
    r[o - 2] = arguments[o];
  }
  return ["screens", e, "objectVariables", t].concat(r);
}
function kt(e) {
  return 4 === e.length && "objectVariables" === e[2] || 2 === e.length && "globalObjectList" === e[0];
}
function xt(e, t, n, r, o, i) {
  return Dt.apply(this, arguments);
}
function Dt() {
  return (Dt = Q.a(q.a.mark(function e(t, n, r, o, i, a) {
    var s;
    var c;
    var l;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            s = {
              id: r,
              name: o,
              defaultValue: i,
              value: i
            };
            if (t === ht.i.GLOBAL) {
              c = J.insertOp(["globalObjectList", a], s);
              $.a.applyClient(c);
            } else {
              l = J.insertOp(Rt(n, a), s);
              $.a.applyClient(l);
            }
          case 2:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Mt(e, t, n) {
  if (e === ht.i.GLOBAL) {
    var r;
    var o = null === (r = $.a.getDoc()) || undefined === r ? undefined : r.globalObjectList.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== o) {
      var i = J.removeOp(["globalObjectList", o]);
      $.a.applyClient(i);
    } else {
      console.error("can't find index of objectVariable");
    }
  } else {
    var a;
    var s = null === (a = $.a.getDoc()) || undefined === a ? undefined : a.screens[t].objectVariables.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== s) {
      var c = J.removeOp(Rt(t, s));
      $.a.applyClient(c);
    } else {
      console.error("can't find index of objectVariable");
    }
  }
}
function Lt(e, t, n, r, o) {
  if (e === ht.i.GLOBAL) {
    var i;
    var a = null === (i = $.a.getDoc()) || undefined === i ? undefined : i.globalObjectList.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== a) {
      var s = J.replaceOp(["globalObjectList", a, r], true, o);
      $.a.applyClient(s);
    }
  } else {
    var c;
    var l = null === (c = $.a.getDoc()) || undefined === c ? undefined : c.screens[t].objectVariables.findIndex(function (e) {
      return e.id === n;
    });
    if (undefined !== l) {
      var u = J.replaceOp(Rt(t, l, r), true, o);
      $.a.applyClient(u);
    }
  }
}
function Pt(e) {
  if (kt(e.path)) {
    (function (e) {
      var t;
      var n = e.path;
      if ("globalObjectList" === n[0]) {
        var r;
        var o = n[1];
        var i = null === (r = $.a.getPreviousDoc()) || undefined === r ? undefined : r.globalObjectList[o];
        var a = null === i || undefined === i ? undefined : i.id;
        return void (a && Ee.a(be.Kf(ht.i.GLOBAL, a, "", false)));
      }
      var s = n[1];
      var c = n[3];
      var l = null === (t = $.a.getPreviousDoc()) || undefined === t ? undefined : t.screens[s].objectVariables[c];
      var u = null === l || undefined === l ? undefined : l.id;
      if (u) {
        Ee.a(be.Kf(ht.i.SCREEN, u, s, false));
      }
    })(e);
  }
}
function Bt(e) {
  var t;
  if (kt(e.path)) {
    (function (e) {
      var t = e.path;
      var n = e.op.i;
      var r = n.id;
      var o = n.name;
      var i = n.defaultValue;
      if ("globalObjectList" === t[0]) {
        var a = t[1];
        return void Ee.a(be.tf({
          scopeType: ht.i.GLOBAL,
          id: r,
          name: o,
          defaultValue: i,
          screenId: "",
          index: a,
          isEmitOT: false
        }));
      }
      var s = t[3];
      var c = t[1];
      Ee.a(be.tf({
        scopeType: ht.i.SCREEN,
        id: r,
        name: o,
        defaultValue: i,
        screenId: c,
        index: s,
        isEmitOT: false
      }));
    })(e);
  }
  if (5 === (t = e.path).length && "objectVariables" === t[2] || 3 === t.length && "globalObjectList" === t[0]) {
    (function (e) {
      var t;
      var n = e.path;
      var r = e.op;
      if ("globalObjectList" === n[0]) {
        var o;
        var i = n[1];
        var a = r.i;
        var s = n[2];
        var c = null === (o = $.a.getPreviousDoc()) || undefined === o ? undefined : o.globalObjectList[i];
        var l = null === c || undefined === c ? undefined : c.id;
        return void (l && Ee.a(be.Gg({
          scopeType: ht.i.GLOBAL,
          id: l,
          key: s,
          value: a,
          screenId: "",
          isEmitOT: false
        })));
      }
      var u = n[1];
      var d = n[3];
      var p = r.i;
      var f = n[4];
      var h = null === (t = $.a.getPreviousDoc()) || undefined === t ? undefined : t.screens[u].objectVariables[d];
      var m = null === h || undefined === h ? undefined : h.id;
      if (m) {
        Ee.a(be.Gg({
          scopeType: ht.i.SCREEN,
          id: m,
          key: f,
          value: p,
          screenId: u,
          isEmitOT: false
        }));
      }
    })(e);
  }
}
function Ft(e, t) {
  for (var n = arguments.length, r = new Array(n > 2 ? n - 2 : 0), o = 2; o < n; o++) {
    r[o - 2] = arguments[o];
  }
  return ["screens", e, "broadcasts", t].concat(r);
}
function Gt(e, t, n) {
  return Ut.apply(this, arguments);
}
function Ut() {
  return (Ut = Q.a(q.a.mark(function e(t, n, r) {
    var o;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            o = J.insertOp(Ft(t, r), n);
            $.a.applyClient(o);
          case 2:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function Wt(e) {}
function Ht(e) {
  var t;
  if (4 === (t = e.path).length && "broadcasts" === t[2]) {
    (function (e) {
      var t = e.path;
      var n = e.op.i;
      var r = t[3];
      var o = t[1];
      Oe.h(be.pf(n, o, r, undefined, false));
    })(e);
  }
}
var Vt;
var zt;
import Yt = require("../6");
function Kt(e, t) {
  var n;
  var r = Oe.e();
  var o = Oe.a() || "";
  if (!t) {
    e = ht.k;
    t = "";
  }
  var i = {
    userId: r,
    path: {
      id: t,
      screenId: o,
      type: e
    }
  };
  if (!(null === (n = $.a.client) || undefined === n)) {
    n.emitCustomEvent({
      type: Vt.USER_FOCUS,
      data: i
    });
  }
  qt.runIntervalTask(i);
}
!function (e) {
  e.USER_FOCUS = "USER_FOCUS";
  e.CLOUD_DATABASE = "CLOUD_DATABASE";
  e.USER_COLORS = "USER_COLORS";
}(Vt || (Vt = {}));
(function (e) {
  e.CHANGE_NAME = "CHANGE_NAME";
  e.ADD_DOC = "ADD_DOC";
  e.INITIAL = "INITIAL";
  e.REPLACE_DATA = "REPLACE_DATA";
})(zt || (zt = {}));
var qt = new (function () {
  function e() {
    z.a(this, e);
    this.intervalTime = 1e4;
    this.currentUserFocusInfo = undefined;
    this.timeId = undefined;
    this.currentUserFocusInfo = {
      userId: -1,
      path: {
        screenId: "",
        id: "",
        type: ""
      }
    };
  }
  Y.a(e, [{
    key: "runIntervalTask",
    value: function (e) {
      var t = this;
      this.currentUserFocusInfo = Yt.a({}, e);
      if (this.timeId) {
        clearInterval(this.timeId);
      }
      this.timeId = setInterval(function () {
        var e;
        if (t.currentUserFocusInfo.path.type !== ht.k) {
          if (!(null === (e = $.a.client) || undefined === e)) {
            e.emitCustomEvent({
              type: Vt.USER_FOCUS,
              data: t.currentUserFocusInfo
            });
          }
        }
      }, this.intervalTime);
    }
  }]);
  return e;
}())();
function Xt(e) {
  var t;
  if (!(null === (t = $.a.client) || undefined === t)) {
    t.emitCustomEvent({
      type: Vt.USER_COLORS,
      data: e
    });
  }
}
function Qt(e, t, n, r) {
  var o;
  if (!(null === (o = $.a.client) || undefined === o)) {
    o.emitCustomEvent({
      type: Vt.CLOUD_DATABASE,
      data: {
        type: e,
        id: t,
        name: n,
        fields: r
      }
    });
  }
}
import Zt = require("../102");
function Jt(e) {
  if (e.type === Vt.USER_COLORS) {
    Oe.h(Zt.t(e.data));
  } else {
    if (e.type === Vt.USER_FOCUS) {
      Oe.h(Zt.m(e.data));
    } else {
      if (e.type === Vt.CLOUD_DATABASE) {
        (function (e) {
          var t = e.data;
          var n = t.type;
          var r = t.id;
          var o = t.name;
          if (n === zt.ADD_DOC && r && o) {
            Oe.h(be.af(r, o));
          }
          zt.INITIAL;
        })(e);
      }
    }
  }
}
function $t(e) {
  var t;
  var n = null === (t = $.a.getDoc()) || undefined === t ? undefined : t.globalWidgetIds;
  var r = 0;
  if (n && (r = n.findIndex(function (t) {
    return t === e;
  })) < 0) {
    r = n.length;
  }
  return ["globalWidgetIds", r];
}
function en(e) {
  for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++) {
    n[r - 1] = arguments[r];
  }
  return ["globalWidgets", e].concat(n);
}
function tn(e) {
  return "globalWidgets" === e[0];
}
function nn(e) {
  return 2 === e.length && tn(e);
}
function rn(e) {
  return on.apply(this, arguments);
}
function on() {
  return (on = Q.a(q.a.mark(function e(t) {
    var n;
    var r;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            n = J.insertOp(en(t.id), t);
            r = J.insertOp($t(t.id), t.id);
            $.a.applyClient(J.type.compose(r, n));
          case 3:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function an(e) {
  var t = J.removeOp($t(e));
  var n = J.removeOp(en(e));
  $.a.applyClient(J.type.compose(t, n));
}
function sn(e, t, n) {
  var r;
  var o = !(arguments.length > 3 && undefined !== arguments[3]) || arguments[3];
  var i = ["size", "position", "visible", "title", "widgetIds"];
  var a = $.a.getDoc();
  if (i.includes(t) && o) {
    var s = en(e, t);
    var c = a ? Z.a({
      path: ["$"].concat(X.a(s)),
      json: a
    }) : [];
    r = 0 === c.length ? J.insertOp(s, n) : J.replaceOp(s, true, n);
  } else {
    var l = en(e, "attributes", t);
    var u = a ? Z.a({
      path: ["$"].concat(X.a(l)),
      json: a
    }) : [];
    r = 0 === u.length ? J.insertOp(l, n) : J.replaceOp(l, true, n);
  }
  $.a.applyClient(r);
}
import cn = require("../5");
import ln = require("../112");
function un(e) {
  if (nn(e.path)) {
    (function (e) {
      var t = e.path[1];
      if (t) {
        Oe.h(be.Mf(t, undefined, false));
      }
    })(e);
  }
}
function dn(e) {
  var t;
  if (nn(e.path)) {
    (function (e) {
      pn.apply(this, arguments);
    })(e);
  }
  if (2 === (t = e.path).length && function (e) {
    return "globalWidgetIds" === e[0];
  }(t)) {
    e.path;
  }
  if (function (e) {
    return 4 === e.length && tn(e) && "attributes" === e[2];
  }(e.path)) {
    (function (e) {
      var t = e.op;
      var n = e.path;
      var r = t.i;
      var o = n[1];
      var i = n[3];
      Oe.h(be.Lg(o, i, r, false, true, false));
    })(e);
  }
  if (function (e) {
    return 3 === e.length && tn(e);
  }(e.path)) {
    (function (e) {
      var t = e.op;
      var n = e.path;
      var r = t.i;
      var o = n[1];
      var i = n[2];
      if ("title" === i) {
        Oe.h(be.Ng(o, r, false, true, false));
      } else {
        Oe.h(be.Lg(o, i, r, false, true, false));
      }
    })(e);
  }
}
function pn() {
  return (pn = Q.a(q.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var a;
    var s;
    var c;
    var l;
    var u;
    var d;
    var p;
    var f;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (n = t.op, r = n.i, !we.e(r.type) || ye.Db(r.type)) {
              e.next = 11;
              break;
            }
            if (!(a = null === (o = $.a.getDoc()) || undefined === o || null === (i = o.extensionWidgetList) || undefined === i ? undefined : i.find(function (e) {
              return e.type === r.type;
            }))) {
              e.next = 11;
              break;
            }
            s = a.cdnUrl;
            c = a.id;
            Ee.a(be.zh({
              title: Ce.c(Ce.b, "ExtensionWidget.loading").toString(),
              cancelBtnVisible: false,
              confirmBtnVisible: false
            }));
            e.next = 9;
            return Te.u(s, c);
          case 9:
            if (l = e.sent) {
              u = l.title;
              d = l.type;
              p = we.f(d, true);
              Ee.a(be.Vg());
              Ee.a(be.zh({
                title: Ce.c(Ce.b, "ExtensionWidget.finishRegistration", {
                  title: u,
                  type: p
                }).toString(),
                cancelBtnVisible: false
              }));
            }
          case 11:
            ye.Ub(r.id, r);
            Oe.h(be.hf(r.id));
            if (r.type === cn.B || r.type === cn.y) {
              f = r.attributes.fields;
              Ee.a(be.bf(ln.a(r.type, {
                id: r.id,
                name: r.title,
                value: f,
                defaultValue: "no-use"
              }, {
                isWatching: false
              })));
            } else {
              if (r.type === cn.G) {
                Ee.a(be.bf(ln.a(cn.G, {
                  id: r.id,
                  name: r.title,
                  value: r.attributes.db,
                  defaultValue: "no-use"
                }, {
                  isWatching: false
                })));
              }
            }
          case 14:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function fn(e) {
  return hn.apply(this, arguments);
}
function hn() {
  return (hn = Q.a(q.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var a;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (undefined !== (r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.unsafeExtensionWidgetList)) {
              e.next = 3;
              break;
            }
            return e.abrupt("return");
          case 3:
            if (-1 !== (o = function () {
              for (var e = 0; e < r.length; e++) {
                if (r[e].type === t.type) {
                  return e;
                }
              }
              return -1;
            }())) {
              i = J.replaceOp(["unsafeExtensionWidgetList", o], true, t);
              $.a.applyClient(i);
            } else {
              a = J.insertOp(["unsafeExtensionWidgetList", r.length], t);
              $.a.applyClient(a);
            }
          case 6:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function mn(e) {
  return gn.apply(this, arguments);
}
function gn() {
  return (gn = Q.a(q.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var a;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (undefined !== (r = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.extensionWidgetList)) {
              e.next = 3;
              break;
            }
            return e.abrupt("return");
          case 3:
            o = function () {
              for (var e = 0; e < r.length; e++) {
                if (r[e].type === t.type) {
                  return e;
                }
              }
              return -1;
            }();
            i = {
              id: t.id,
              cdnUrl: t.cdnUrl,
              type: t.type,
              version: t.version || 0
            };
            if (-1 === o) {
              a = J.insertOp(["extensionWidgetList", r.length], i);
              $.a.applyClient(a);
            }
          case 7:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
import _n = require("../98");
function vn(e) {
  var t;
  if (2 === (t = e.path).length && "unsafeExtensionWidgetList" === t[0]) {
    (function (e) {
      bn.apply(this, arguments);
    })(e);
  }
  (function (e) {
    if (2 === e.length) {
      e[0];
    }
  })(e.path);
}
function bn() {
  return (bn = Q.a(q.a.mark(function e(t) {
    var n;
    var r;
    var o;
    var i;
    var a;
    var s;
    var c;
    var l;
    return q.a.wrap(function (e) {
      for (;;) {
        switch (e.prev = e.next) {
          case 0:
            if (t.path, n = t.op, !(r = n.i.code)) {
              e.next = 16;
              break;
            }
            Ee.a(be.zh({
              title: Ce.c(Ce.b, "ExtensionWidget.loading").toString(),
              cancelBtnVisible: false,
              confirmBtnVisible: false
            }));
            e.next = 6;
            return Te.r(r, false);
          case 6:
            o = e.sent;
            i = o.types;
            a = o.widget;
            Te.v({
              types: i,
              widget: a
            });
            s = i.title;
            c = i.type;
            l = we.f(c, false);
            _n.a({
              type: c,
              types: i,
              code: r
            });
            Ee.a(be.Rj());
            Ee.a(be.Vg());
            Ee.a(be.zh({
              title: Ce.c(Ce.b, "ExtensionWidget.finishRegistration", {
                title: s,
                type: l
              }).toString(),
              cancelBtnVisible: false
            }));
          case 16:
          case "end":
            return e.stop();
        }
      }
    }, e);
  }))).apply(this, arguments);
}
function yn(e, t) {
  var n;
  var r;
  var o = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.cloudDictKeysList;
  r = (null === o || undefined === o ? undefined : o[e]) ? J.replaceOp(["cloudDictKeysList", e.toString()], true, t) : J.insertOp(["cloudDictKeysList", e.toString()], t);
  $.a.applyClient(r);
}
function En(e, t) {
  var n;
  var r;
  var o = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.cloudTableColumnList;
  r = (null === o || undefined === o ? undefined : o[e]) ? J.replaceOp(["cloudTableColumnList", e.toString()], true, t) : J.insertOp(["cloudTableColumnList", e.toString()], t);
  $.a.applyClient(r);
}
function On(e, t) {
  var n;
  var r;
  var o = null === (n = $.a.getDoc()) || undefined === n ? undefined : n.cloudTableDataList;
  r = (null === o || undefined === o ? undefined : o[e]) ? J.replaceOp(["cloudTableDataList", e.toString()], true, t) : J.insertOp(["cloudTableDataList", e.toString()], t);
  $.a.applyClient(r);
}
function wn(e) {
  var t;
  var n;
  n = (null === (t = $.a.getDoc()) || undefined === t ? undefined : t.cloudDictList) ? J.replaceOp(["cloudDictList"], true, e) : J.insertOp(["cloudDictList"], e);
  $.a.applyClient(n);
}
function Cn(e) {
  var t;
  var n;
  n = (null === (t = $.a.getDoc()) || undefined === t ? undefined : t.cloudTableList) ? J.replaceOp(["cloudTableList"], true, e) : J.insertOp(["cloudTableList"], e);
  $.a.applyClient(n);
}
function Tn(e) {}
function Sn(e, t) {
  var n;
  if (2 === (n = e.path).length && "cloudDictKeysList" === n[0]) {
    (function (e) {
      var t = e.path;
      var n = e.op;
      var r = t[1];
      var o = n.i;
      Oe.h(be.Ag(Number(r), o, false));
    })(e);
  }
  if (function (e) {
    return 2 === e.length && "cloudTableColumnList" === e[0];
  }(e.path)) {
    (function (e) {
      var t = e.path;
      var n = e.op;
      var r = t[1];
      var o = n.i;
      Oe.h(be.Dg(Number(r), o, false));
    })(e);
  }
  if (function (e) {
    return 2 === e.length && "cloudTableDataList" === e[0];
  }(e.path)) {
    (function (e) {
      var t = e.path;
      var n = e.op;
      var r = t[1];
      var o = n.i;
      Oe.h(be.Nj(Number(r), o));
    })(e);
  }
  if (function (e) {
    return 1 === e.length && "cloudDictList" === e[0];
  }(e.path)) {
    (function (e) {
      e.path;
      var t = e.op.i;
      Oe.h(be.Bg(t, false));
    })(e);
  }
  if (function (e) {
    return 1 === e.length && "cloudTableList" === e[0];
  }(e.path)) {
    (function (e) {
      e.path;
      var t = e.op.i;
      Oe.h(be.Eg(t, false));
    })(e);
  }
}
var In = new (function () {
  function e() {
    z.a(this, e);
    this.projectOt = undefined;
    this.blink = undefined;
    this.widget = undefined;
    this.screen = undefined;
    this.imageFileList = undefined;
    this.soundFileList = undefined;
    this.iconFileList = undefined;
    this.primitiveVariables = undefined;
    this.arrayVariables = undefined;
    this.objectVariables = undefined;
    this.localStorage = undefined;
    this.focus = undefined;
    this.broadcasts = undefined;
    this.customEvent = undefined;
    this.globalWidget = undefined;
    this.extensionWidget = undefined;
    this.cloudSpace = undefined;
  }
  Y.a(e, [{
    key: "init",
    value: function () {
      this.blink = ke;
      this.widget = i;
      this.screen = d;
      this.imageFileList = h;
      this.soundFileList = _;
      this.iconFileList = y;
      this.primitiveVariables = w;
      this.arrayVariables = S;
      this.objectVariables = j;
      this.localStorage = localStorage;
      this.focus = V;
      this.broadcasts = k;
      this.projectOt = c;
      this.customEvent = D;
      this.globalWidget = P;
      this.extensionWidget = G;
      this.cloudSpace = H;
    }
  }, {
    key: "dispose",
    value: function () {
      var e = this;
      Object.keys(this).forEach(function (t) {
        return e[t] = undefined;
      });
    }
  }]);
  return e;
}())();